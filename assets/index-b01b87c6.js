(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function lk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mw={exports:{}},nh={},Fw={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc=Symbol.for("react.element"),ck=Symbol.for("react.portal"),uk=Symbol.for("react.fragment"),dk=Symbol.for("react.strict_mode"),hk=Symbol.for("react.profiler"),fk=Symbol.for("react.provider"),pk=Symbol.for("react.context"),mk=Symbol.for("react.forward_ref"),gk=Symbol.for("react.suspense"),yk=Symbol.for("react.memo"),vk=Symbol.for("react.lazy"),Cv=Symbol.iterator;function xk(t){return t===null||typeof t!="object"?null:(t=Cv&&t[Cv]||t["@@iterator"],typeof t=="function"?t:null)}var Vw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uw=Object.assign,Bw={};function Jo(t,e,n){this.props=t,this.context=e,this.refs=Bw,this.updater=n||Vw}Jo.prototype.isReactComponent={};Jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zw(){}zw.prototype=Jo.prototype;function Cg(t,e,n){this.props=t,this.context=e,this.refs=Bw,this.updater=n||Vw}var Dg=Cg.prototype=new zw;Dg.constructor=Cg;Uw(Dg,Jo.prototype);Dg.isPureReactComponent=!0;var Dv=Array.isArray,qw=Object.prototype.hasOwnProperty,Ag={current:null},Ww={key:!0,ref:!0,__self:!0,__source:!0};function Hw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qw.call(e,r)&&!Ww.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:cc,type:t,key:i,ref:o,props:s,_owner:Ag.current}}function wk(t,e){return{$$typeof:cc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jg(t){return typeof t=="object"&&t!==null&&t.$$typeof===cc}function bk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Av=/\/+/g;function Mf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bk(""+t.key):e.toString(36)}function Au(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cc:case ck:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Mf(o,0):r,Dv(s)?(n="",t!=null&&(n=t.replace(Av,"$&/")+"/"),Au(s,e,n,"",function(u){return u})):s!=null&&(jg(s)&&(s=wk(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Av,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Dv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Mf(i,a);o+=Au(i,e,n,l,s)}else if(l=xk(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Mf(i,a++),o+=Au(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tu(t,e,n){if(t==null)return t;var r=[],s=0;return Au(t,r,"","",function(i){return e.call(n,i,s++)}),r}function _k(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},ju={transition:null},Ik={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:ju,ReactCurrentOwner:Ag};function Gw(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:tu,forEach:function(t,e,n){tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tu(t,function(){e++}),e},toArray:function(t){return tu(t,function(e){return e})||[]},only:function(t){if(!jg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Jo;te.Fragment=uk;te.Profiler=hk;te.PureComponent=Cg;te.StrictMode=dk;te.Suspense=gk;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ik;te.act=Gw;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Uw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ag.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)qw.call(e,l)&&!Ww.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:cc,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:pk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fk,_context:t},t.Consumer=t};te.createElement=Hw;te.createFactory=function(t){var e=Hw.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:mk,render:t}};te.isValidElement=jg;te.lazy=function(t){return{$$typeof:vk,_payload:{_status:-1,_result:t},_init:_k}};te.memo=function(t,e){return{$$typeof:yk,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=ju.transition;ju.transition={};try{t()}finally{ju.transition=e}};te.unstable_act=Gw;te.useCallback=function(t,e){return Ht.current.useCallback(t,e)};te.useContext=function(t){return Ht.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};te.useEffect=function(t,e){return Ht.current.useEffect(t,e)};te.useId=function(){return Ht.current.useId()};te.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Ht.current.useMemo(t,e)};te.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};te.useRef=function(t){return Ht.current.useRef(t)};te.useState=function(t){return Ht.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return Ht.current.useTransition()};te.version="18.3.1";Fw.exports=te;var P=Fw.exports;const $p=lk(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ek=P,Nk=Symbol.for("react.element"),Sk=Symbol.for("react.fragment"),kk=Object.prototype.hasOwnProperty,Tk=Ek.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ck={key:!0,ref:!0,__self:!0,__source:!0};function Kw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kk.call(e,r)&&!Ck.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Nk,type:t,key:i,ref:o,props:s,_owner:Tk.current}}nh.Fragment=Sk;nh.jsx=Kw;nh.jsxs=Kw;Mw.exports=nh;var c=Mw.exports,Mp={},Qw={exports:{}},gn={},Yw={exports:{}},Xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,k){var N=F.length;F.push(k);e:for(;0<N;){var A=N-1>>>1,B=F[A];if(0<s(B,k))F[A]=k,F[N]=B,N=A;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var k=F[0],N=F.pop();if(N!==k){F[0]=N;e:for(var A=0,B=F.length,L=B>>>1;A<L;){var ee=2*(A+1)-1,xe=F[ee],se=ee+1,fe=F[se];if(0>s(xe,N))se<B&&0>s(fe,xe)?(F[A]=fe,F[se]=N,A=se):(F[A]=xe,F[ee]=N,A=ee);else if(se<B&&0>s(fe,N))F[A]=fe,F[se]=N,A=se;else break e}}return k}function s(F,k){var N=F.sortIndex-k.sortIndex;return N!==0?N:F.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,p=!1,y=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(F){for(var k=n(u);k!==null;){if(k.callback===null)r(u);else if(k.startTime<=F)r(u),k.sortIndex=k.expirationTime,e(l,k);else break;k=n(u)}}function b(F){if(x=!1,v(F),!y)if(n(l)!==null)y=!0,Xe(S);else{var k=n(u);k!==null&&Oe(b,k.startTime-F)}}function S(F,k){y=!1,x&&(x=!1,g(j),j=-1),p=!0;var N=f;try{for(v(k),h=n(l);h!==null&&(!(h.expirationTime>k)||F&&!Q());){var A=h.callback;if(typeof A=="function"){h.callback=null,f=h.priorityLevel;var B=A(h.expirationTime<=k);k=t.unstable_now(),typeof B=="function"?h.callback=B:h===n(l)&&r(l),v(k)}else r(l);h=n(l)}if(h!==null)var L=!0;else{var ee=n(u);ee!==null&&Oe(b,ee.startTime-k),L=!1}return L}finally{h=null,f=N,p=!1}}var _=!1,T=null,j=-1,q=5,$=-1;function Q(){return!(t.unstable_now()-$<q)}function Y(){if(T!==null){var F=t.unstable_now();$=F;var k=!0;try{k=T(!0,F)}finally{k?ve():(_=!1,T=null)}}else _=!1}var ve;if(typeof m=="function")ve=function(){m(Y)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,at=pe.port2;pe.port1.onmessage=Y,ve=function(){at.postMessage(null)}}else ve=function(){w(Y,0)};function Xe(F){T=F,_||(_=!0,ve())}function Oe(F,k){j=w(function(){F(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,Xe(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var k=3;break;default:k=f}var N=f;f=k;try{return F()}finally{f=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,k){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var N=f;f=F;try{return k()}finally{f=N}},t.unstable_scheduleCallback=function(F,k,N){var A=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?A+N:A):N=A,F){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=N+B,F={id:d++,callback:k,priorityLevel:F,startTime:N,expirationTime:B,sortIndex:-1},N>A?(F.sortIndex=N,e(u,F),n(l)===null&&F===n(u)&&(x?(g(j),j=-1):x=!0,Oe(b,N-A))):(F.sortIndex=B,e(l,F),y||p||(y=!0,Xe(S))),F},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(F){var k=f;return function(){var N=f;f=k;try{return F.apply(this,arguments)}finally{f=N}}}})(Xw);Yw.exports=Xw;var Dk=Yw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ak=P,fn=Dk;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jw=new Set,vl={};function Pi(t,e){Do(t,e),Do(t+"Capture",e)}function Do(t,e){for(vl[t]=e,t=0;t<e.length;t++)Jw.add(e[t])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fp=Object.prototype.hasOwnProperty,jk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jv={},Rv={};function Rk(t){return Fp.call(Rv,t)?!0:Fp.call(jv,t)?!1:jk.test(t)?Rv[t]=!0:(jv[t]=!0,!1)}function Pk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ok(t,e,n,r){if(e===null||typeof e>"u"||Pk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rg=/[\-:]([a-z])/g;function Pg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rg,Pg);Tt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rg,Pg);Tt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rg,Pg);Tt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Og(t,e,n,r){var s=Tt.hasOwnProperty(e)?Tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ok(e,n,s,r)&&(n=null),r||s===null?Rk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Lr=Ak.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nu=Symbol.for("react.element"),to=Symbol.for("react.portal"),no=Symbol.for("react.fragment"),Lg=Symbol.for("react.strict_mode"),Vp=Symbol.for("react.profiler"),Zw=Symbol.for("react.provider"),eb=Symbol.for("react.context"),$g=Symbol.for("react.forward_ref"),Up=Symbol.for("react.suspense"),Bp=Symbol.for("react.suspense_list"),Mg=Symbol.for("react.memo"),Yr=Symbol.for("react.lazy"),tb=Symbol.for("react.offscreen"),Pv=Symbol.iterator;function Ia(t){return t===null||typeof t!="object"?null:(t=Pv&&t[Pv]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Ff;function Ba(t){if(Ff===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ff=e&&e[1]||""}return`
`+Ff+t}var Vf=!1;function Uf(t,e){if(!t||Vf)return"";Vf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ba(t):""}function Lk(t){switch(t.tag){case 5:return Ba(t.type);case 16:return Ba("Lazy");case 13:return Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 2:case 15:return t=Uf(t.type,!1),t;case 11:return t=Uf(t.type.render,!1),t;case 1:return t=Uf(t.type,!0),t;default:return""}}function zp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case no:return"Fragment";case to:return"Portal";case Vp:return"Profiler";case Lg:return"StrictMode";case Up:return"Suspense";case Bp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eb:return(t.displayName||"Context")+".Consumer";case Zw:return(t._context.displayName||"Context")+".Provider";case $g:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mg:return e=t.displayName||null,e!==null?e:zp(t.type)||"Memo";case Yr:e=t._payload,t=t._init;try{return zp(t(e))}catch{}}return null}function $k(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zp(e);case 8:return e===Lg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Mk(t){var e=nb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ru(t){t._valueTracker||(t._valueTracker=Mk(t))}function rb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=nb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function nd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qp(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ov(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sb(t,e){e=e.checked,e!=null&&Og(t,"checked",e,!1)}function Wp(t,e){sb(t,e);var n=gs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hp(t,e.type,gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Lv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hp(t,e,n){(e!=="number"||nd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var za=Array.isArray;function go(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Gp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $v(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(za(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gs(n)}}function ib(t,e){var n=gs(e.value),r=gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ob(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ob(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var su,ab=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(su=su||document.createElement("div"),su.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=su.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fk=["Webkit","ms","Moz","O"];Object.keys(Za).forEach(function(t){Fk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Za[e]=Za[t]})});function lb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Za.hasOwnProperty(t)&&Za[t]?(""+e).trim():e+"px"}function cb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=lb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Vk=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qp(t,e){if(e){if(Vk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function Yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xp=null;function Fg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jp=null,yo=null,vo=null;function Fv(t){if(t=hc(t)){if(typeof Jp!="function")throw Error(R(280));var e=t.stateNode;e&&(e=ah(e),Jp(t.stateNode,t.type,e))}}function ub(t){yo?vo?vo.push(t):vo=[t]:yo=t}function db(){if(yo){var t=yo,e=vo;if(vo=yo=null,Fv(t),e)for(t=0;t<e.length;t++)Fv(e[t])}}function hb(t,e){return t(e)}function fb(){}var Bf=!1;function pb(t,e,n){if(Bf)return t(e,n);Bf=!0;try{return hb(t,e,n)}finally{Bf=!1,(yo!==null||vo!==null)&&(fb(),db())}}function wl(t,e){var n=t.stateNode;if(n===null)return null;var r=ah(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var Zp=!1;if(Tr)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){Zp=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{Zp=!1}function Uk(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var el=!1,rd=null,sd=!1,em=null,Bk={onError:function(t){el=!0,rd=t}};function zk(t,e,n,r,s,i,o,a,l){el=!1,rd=null,Uk.apply(Bk,arguments)}function qk(t,e,n,r,s,i,o,a,l){if(zk.apply(this,arguments),el){if(el){var u=rd;el=!1,rd=null}else throw Error(R(198));sd||(sd=!0,em=u)}}function Oi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vv(t){if(Oi(t)!==t)throw Error(R(188))}function Wk(t){var e=t.alternate;if(!e){if(e=Oi(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Vv(s),t;if(i===r)return Vv(s),e;i=i.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function gb(t){return t=Wk(t),t!==null?yb(t):null}function yb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yb(t);if(e!==null)return e;t=t.sibling}return null}var vb=fn.unstable_scheduleCallback,Uv=fn.unstable_cancelCallback,Hk=fn.unstable_shouldYield,Gk=fn.unstable_requestPaint,He=fn.unstable_now,Kk=fn.unstable_getCurrentPriorityLevel,Vg=fn.unstable_ImmediatePriority,xb=fn.unstable_UserBlockingPriority,id=fn.unstable_NormalPriority,Qk=fn.unstable_LowPriority,wb=fn.unstable_IdlePriority,rh=null,ir=null;function Yk(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(rh,t,void 0,(t.current.flags&128)===128)}catch{}}var Pn=Math.clz32?Math.clz32:Zk,Xk=Math.log,Jk=Math.LN2;function Zk(t){return t>>>=0,t===0?32:31-(Xk(t)/Jk|0)|0}var iu=64,ou=4194304;function qa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function od(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=qa(a):(i&=o,i!==0&&(r=qa(i)))}else o=n&~s,o!==0?r=qa(o):i!==0&&(r=qa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pn(e),s=1<<n,r|=t[n],e&=~s;return r}function eT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Pn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=eT(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bb(){var t=iu;return iu<<=1,!(iu&4194240)&&(iu=64),t}function zf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pn(e),t[e]=n}function nT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Pn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ug(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function _b(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ib,Bg,Eb,Nb,Sb,nm=!1,au=[],os=null,as=null,ls=null,bl=new Map,_l=new Map,Jr=[],rT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bv(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(e.pointerId)}}function Na(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=hc(e),e!==null&&Bg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function sT(t,e,n,r,s){switch(e){case"focusin":return os=Na(os,t,e,n,r,s),!0;case"dragenter":return as=Na(as,t,e,n,r,s),!0;case"mouseover":return ls=Na(ls,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return bl.set(i,Na(bl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,_l.set(i,Na(_l.get(i)||null,t,e,n,r,s)),!0}return!1}function kb(t){var e=ti(t.target);if(e!==null){var n=Oi(e);if(n!==null){if(e=n.tag,e===13){if(e=mb(n),e!==null){t.blockedOn=e,Sb(t.priority,function(){Eb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ru(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xp=r,n.target.dispatchEvent(r),Xp=null}else return e=hc(n),e!==null&&Bg(e),t.blockedOn=n,!1;e.shift()}return!0}function zv(t,e,n){Ru(t)&&n.delete(e)}function iT(){nm=!1,os!==null&&Ru(os)&&(os=null),as!==null&&Ru(as)&&(as=null),ls!==null&&Ru(ls)&&(ls=null),bl.forEach(zv),_l.forEach(zv)}function Sa(t,e){t.blockedOn===e&&(t.blockedOn=null,nm||(nm=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,iT)))}function Il(t){function e(s){return Sa(s,t)}if(0<au.length){Sa(au[0],t);for(var n=1;n<au.length;n++){var r=au[n];r.blockedOn===t&&(r.blockedOn=null)}}for(os!==null&&Sa(os,t),as!==null&&Sa(as,t),ls!==null&&Sa(ls,t),bl.forEach(e),_l.forEach(e),n=0;n<Jr.length;n++)r=Jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)kb(n),n.blockedOn===null&&Jr.shift()}var xo=Lr.ReactCurrentBatchConfig,ad=!0;function oT(t,e,n,r){var s=ge,i=xo.transition;xo.transition=null;try{ge=1,zg(t,e,n,r)}finally{ge=s,xo.transition=i}}function aT(t,e,n,r){var s=ge,i=xo.transition;xo.transition=null;try{ge=4,zg(t,e,n,r)}finally{ge=s,xo.transition=i}}function zg(t,e,n,r){if(ad){var s=rm(t,e,n,r);if(s===null)Zf(t,e,r,ld,n),Bv(t,r);else if(sT(s,t,e,n,r))r.stopPropagation();else if(Bv(t,r),e&4&&-1<rT.indexOf(t)){for(;s!==null;){var i=hc(s);if(i!==null&&Ib(i),i=rm(t,e,n,r),i===null&&Zf(t,e,r,ld,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Zf(t,e,r,null,n)}}var ld=null;function rm(t,e,n,r){if(ld=null,t=Fg(r),t=ti(t),t!==null)if(e=Oi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ld=t,null}function Tb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kk()){case Vg:return 1;case xb:return 4;case id:case Qk:return 16;case wb:return 536870912;default:return 16}default:return 16}}var ns=null,qg=null,Pu=null;function Cb(){if(Pu)return Pu;var t,e=qg,n=e.length,r,s="value"in ns?ns.value:ns.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Pu=s.slice(t,1<r?1-r:void 0)}function Ou(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lu(){return!0}function qv(){return!1}function yn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lu:qv,this.isPropagationStopped=qv,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),e}var Zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wg=yn(Zo),dc=Me({},Zo,{view:0,detail:0}),lT=yn(dc),qf,Wf,ka,sh=Me({},dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ka&&(ka&&t.type==="mousemove"?(qf=t.screenX-ka.screenX,Wf=t.screenY-ka.screenY):Wf=qf=0,ka=t),qf)},movementY:function(t){return"movementY"in t?t.movementY:Wf}}),Wv=yn(sh),cT=Me({},sh,{dataTransfer:0}),uT=yn(cT),dT=Me({},dc,{relatedTarget:0}),Hf=yn(dT),hT=Me({},Zo,{animationName:0,elapsedTime:0,pseudoElement:0}),fT=yn(hT),pT=Me({},Zo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mT=yn(pT),gT=Me({},Zo,{data:0}),Hv=yn(gT),yT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xT[t])?!!e[t]:!1}function Hg(){return wT}var bT=Me({},dc,{key:function(t){if(t.key){var e=yT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ou(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hg,charCode:function(t){return t.type==="keypress"?Ou(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ou(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_T=yn(bT),IT=Me({},sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gv=yn(IT),ET=Me({},dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hg}),NT=yn(ET),ST=Me({},Zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),kT=yn(ST),TT=Me({},sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CT=yn(TT),DT=[9,13,27,32],Gg=Tr&&"CompositionEvent"in window,tl=null;Tr&&"documentMode"in document&&(tl=document.documentMode);var AT=Tr&&"TextEvent"in window&&!tl,Db=Tr&&(!Gg||tl&&8<tl&&11>=tl),Kv=String.fromCharCode(32),Qv=!1;function Ab(t,e){switch(t){case"keyup":return DT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ro=!1;function jT(t,e){switch(t){case"compositionend":return jb(e);case"keypress":return e.which!==32?null:(Qv=!0,Kv);case"textInput":return t=e.data,t===Kv&&Qv?null:t;default:return null}}function RT(t,e){if(ro)return t==="compositionend"||!Gg&&Ab(t,e)?(t=Cb(),Pu=qg=ns=null,ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Db&&e.locale!=="ko"?null:e.data;default:return null}}var PT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PT[t.type]:e==="textarea"}function Rb(t,e,n,r){ub(r),e=cd(e,"onChange"),0<e.length&&(n=new Wg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nl=null,El=null;function OT(t){qb(t,0)}function ih(t){var e=oo(t);if(rb(e))return t}function LT(t,e){if(t==="change")return e}var Pb=!1;if(Tr){var Gf;if(Tr){var Kf="oninput"in document;if(!Kf){var Xv=document.createElement("div");Xv.setAttribute("oninput","return;"),Kf=typeof Xv.oninput=="function"}Gf=Kf}else Gf=!1;Pb=Gf&&(!document.documentMode||9<document.documentMode)}function Jv(){nl&&(nl.detachEvent("onpropertychange",Ob),El=nl=null)}function Ob(t){if(t.propertyName==="value"&&ih(El)){var e=[];Rb(e,El,t,Fg(t)),pb(OT,e)}}function $T(t,e,n){t==="focusin"?(Jv(),nl=e,El=n,nl.attachEvent("onpropertychange",Ob)):t==="focusout"&&Jv()}function MT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ih(El)}function FT(t,e){if(t==="click")return ih(e)}function VT(t,e){if(t==="input"||t==="change")return ih(e)}function UT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:UT;function Nl(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Fp.call(e,s)||!Ln(t[s],e[s]))return!1}return!0}function Zv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function e1(t,e){var n=Zv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zv(n)}}function Lb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Lb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $b(){for(var t=window,e=nd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nd(t.document)}return e}function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BT(t){var e=$b(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Lb(n.ownerDocument.documentElement,n)){if(r!==null&&Kg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=e1(n,i);var o=e1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zT=Tr&&"documentMode"in document&&11>=document.documentMode,so=null,sm=null,rl=null,im=!1;function t1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;im||so==null||so!==nd(r)||(r=so,"selectionStart"in r&&Kg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rl&&Nl(rl,r)||(rl=r,r=cd(sm,"onSelect"),0<r.length&&(e=new Wg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=so)))}function cu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var io={animationend:cu("Animation","AnimationEnd"),animationiteration:cu("Animation","AnimationIteration"),animationstart:cu("Animation","AnimationStart"),transitionend:cu("Transition","TransitionEnd")},Qf={},Mb={};Tr&&(Mb=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function oh(t){if(Qf[t])return Qf[t];if(!io[t])return t;var e=io[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mb)return Qf[t]=e[n];return t}var Fb=oh("animationend"),Vb=oh("animationiteration"),Ub=oh("animationstart"),Bb=oh("transitionend"),zb=new Map,n1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(t,e){zb.set(t,e),Pi(e,[t])}for(var Yf=0;Yf<n1.length;Yf++){var Xf=n1[Yf],qT=Xf.toLowerCase(),WT=Xf[0].toUpperCase()+Xf.slice(1);As(qT,"on"+WT)}As(Fb,"onAnimationEnd");As(Vb,"onAnimationIteration");As(Ub,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(Bb,"onTransitionEnd");Do("onMouseEnter",["mouseout","mouseover"]);Do("onMouseLeave",["mouseout","mouseover"]);Do("onPointerEnter",["pointerout","pointerover"]);Do("onPointerLeave",["pointerout","pointerover"]);Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wa));function r1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qk(r,e,void 0,t),t.currentTarget=null}function qb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;r1(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;r1(s,a,u),i=l}}}if(sd)throw t=em,sd=!1,em=null,t}function Ne(t,e){var n=e[um];n===void 0&&(n=e[um]=new Set);var r=t+"__bubble";n.has(r)||(Wb(e,t,2,!1),n.add(r))}function Jf(t,e,n){var r=0;e&&(r|=4),Wb(n,t,r,e)}var uu="_reactListening"+Math.random().toString(36).slice(2);function Sl(t){if(!t[uu]){t[uu]=!0,Jw.forEach(function(n){n!=="selectionchange"&&(HT.has(n)||Jf(n,!1,t),Jf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uu]||(e[uu]=!0,Jf("selectionchange",!1,e))}}function Wb(t,e,n,r){switch(Tb(e)){case 1:var s=oT;break;case 4:s=aT;break;default:s=zg}n=s.bind(null,e,n,t),s=void 0,!Zp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Zf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ti(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}pb(function(){var u=i,d=Fg(n),h=[];e:{var f=zb.get(t);if(f!==void 0){var p=Wg,y=t;switch(t){case"keypress":if(Ou(n)===0)break e;case"keydown":case"keyup":p=_T;break;case"focusin":y="focus",p=Hf;break;case"focusout":y="blur",p=Hf;break;case"beforeblur":case"afterblur":p=Hf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Wv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=uT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=NT;break;case Fb:case Vb:case Ub:p=fT;break;case Bb:p=kT;break;case"scroll":p=lT;break;case"wheel":p=CT;break;case"copy":case"cut":case"paste":p=mT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Gv}var x=(e&4)!==0,w=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var m=u,v;m!==null;){v=m;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,g!==null&&(b=wl(m,g),b!=null&&x.push(kl(m,b,v)))),w)break;m=m.return}0<x.length&&(f=new p(f,y,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Xp&&(y=n.relatedTarget||n.fromElement)&&(ti(y)||y[Cr]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?ti(y):null,y!==null&&(w=Oi(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(x=Wv,b="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(x=Gv,b="onPointerLeave",g="onPointerEnter",m="pointer"),w=p==null?f:oo(p),v=y==null?f:oo(y),f=new x(b,m+"leave",p,n,d),f.target=w,f.relatedTarget=v,b=null,ti(d)===u&&(x=new x(g,m+"enter",y,n,d),x.target=v,x.relatedTarget=w,b=x),w=b,p&&y)t:{for(x=p,g=y,m=0,v=x;v;v=Gi(v))m++;for(v=0,b=g;b;b=Gi(b))v++;for(;0<m-v;)x=Gi(x),m--;for(;0<v-m;)g=Gi(g),v--;for(;m--;){if(x===g||g!==null&&x===g.alternate)break t;x=Gi(x),g=Gi(g)}x=null}else x=null;p!==null&&s1(h,f,p,x,!1),y!==null&&w!==null&&s1(h,w,y,x,!0)}}e:{if(f=u?oo(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=LT;else if(Yv(f))if(Pb)S=VT;else{S=MT;var _=$T}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=FT);if(S&&(S=S(t,u))){Rb(h,S,n,d);break e}_&&_(t,f,u),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Hp(f,"number",f.value)}switch(_=u?oo(u):window,t){case"focusin":(Yv(_)||_.contentEditable==="true")&&(so=_,sm=u,rl=null);break;case"focusout":rl=sm=so=null;break;case"mousedown":im=!0;break;case"contextmenu":case"mouseup":case"dragend":im=!1,t1(h,n,d);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":t1(h,n,d)}var T;if(Gg)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else ro?Ab(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(Db&&n.locale!=="ko"&&(ro||j!=="onCompositionStart"?j==="onCompositionEnd"&&ro&&(T=Cb()):(ns=d,qg="value"in ns?ns.value:ns.textContent,ro=!0)),_=cd(u,j),0<_.length&&(j=new Hv(j,t,null,n,d),h.push({event:j,listeners:_}),T?j.data=T:(T=jb(n),T!==null&&(j.data=T)))),(T=AT?jT(t,n):RT(t,n))&&(u=cd(u,"onBeforeInput"),0<u.length&&(d=new Hv("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=T))}qb(h,e)})}function kl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=wl(t,n),i!=null&&r.unshift(kl(t,i,s)),i=wl(t,e),i!=null&&r.push(kl(t,i,s))),t=t.return}return r}function Gi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function s1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=wl(n,i),l!=null&&o.unshift(kl(n,l,a))):s||(l=wl(n,i),l!=null&&o.push(kl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GT=/\r\n?/g,KT=/\u0000|\uFFFD/g;function i1(t){return(typeof t=="string"?t:""+t).replace(GT,`
`).replace(KT,"")}function du(t,e,n){if(e=i1(e),i1(t)!==e&&n)throw Error(R(425))}function ud(){}var om=null,am=null;function lm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cm=typeof setTimeout=="function"?setTimeout:void 0,QT=typeof clearTimeout=="function"?clearTimeout:void 0,o1=typeof Promise=="function"?Promise:void 0,YT=typeof queueMicrotask=="function"?queueMicrotask:typeof o1<"u"?function(t){return o1.resolve(null).then(t).catch(XT)}:cm;function XT(t){setTimeout(function(){throw t})}function ep(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Il(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Il(e)}function cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function a1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ea=Math.random().toString(36).slice(2),Kn="__reactFiber$"+ea,Tl="__reactProps$"+ea,Cr="__reactContainer$"+ea,um="__reactEvents$"+ea,JT="__reactListeners$"+ea,ZT="__reactHandles$"+ea;function ti(t){var e=t[Kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cr]||n[Kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=a1(t);t!==null;){if(n=t[Kn])return n;t=a1(t)}return e}t=n,n=t.parentNode}return null}function hc(t){return t=t[Kn]||t[Cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function ah(t){return t[Tl]||null}var dm=[],ao=-1;function js(t){return{current:t}}function Te(t){0>ao||(t.current=dm[ao],dm[ao]=null,ao--)}function Ie(t,e){ao++,dm[ao]=t.current,t.current=e}var ys={},Mt=js(ys),tn=js(!1),gi=ys;function Ao(t,e){var n=t.type.contextTypes;if(!n)return ys;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function nn(t){return t=t.childContextTypes,t!=null}function dd(){Te(tn),Te(Mt)}function l1(t,e,n){if(Mt.current!==ys)throw Error(R(168));Ie(Mt,e),Ie(tn,n)}function Hb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(R(108,$k(t)||"Unknown",s));return Me({},n,r)}function hd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ys,gi=Mt.current,Ie(Mt,t),Ie(tn,tn.current),!0}function c1(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=Hb(t,e,gi),r.__reactInternalMemoizedMergedChildContext=t,Te(tn),Te(Mt),Ie(Mt,t)):Te(tn),Ie(tn,n)}var vr=null,lh=!1,tp=!1;function Gb(t){vr===null?vr=[t]:vr.push(t)}function eC(t){lh=!0,Gb(t)}function Rs(){if(!tp&&vr!==null){tp=!0;var t=0,e=ge;try{var n=vr;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vr=null,lh=!1}catch(s){throw vr!==null&&(vr=vr.slice(t+1)),vb(Vg,Rs),s}finally{ge=e,tp=!1}}return null}var lo=[],co=0,fd=null,pd=0,vn=[],xn=0,yi=null,xr=1,wr="";function Hs(t,e){lo[co++]=pd,lo[co++]=fd,fd=t,pd=e}function Kb(t,e,n){vn[xn++]=xr,vn[xn++]=wr,vn[xn++]=yi,yi=t;var r=xr;t=wr;var s=32-Pn(r)-1;r&=~(1<<s),n+=1;var i=32-Pn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,xr=1<<32-Pn(e)+s|n<<s|r,wr=i+t}else xr=1<<i|n<<s|r,wr=t}function Qg(t){t.return!==null&&(Hs(t,1),Kb(t,1,0))}function Yg(t){for(;t===fd;)fd=lo[--co],lo[co]=null,pd=lo[--co],lo[co]=null;for(;t===yi;)yi=vn[--xn],vn[xn]=null,wr=vn[--xn],vn[xn]=null,xr=vn[--xn],vn[xn]=null}var hn=null,un=null,je=!1,jn=null;function Qb(t,e){var n=bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function u1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,un=cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yi!==null?{id:xr,overflow:wr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,un=null,!0):!1;default:return!1}}function hm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fm(t){if(je){var e=un;if(e){var n=e;if(!u1(t,e)){if(hm(t))throw Error(R(418));e=cs(n.nextSibling);var r=hn;e&&u1(t,e)?Qb(r,n):(t.flags=t.flags&-4097|2,je=!1,hn=t)}}else{if(hm(t))throw Error(R(418));t.flags=t.flags&-4097|2,je=!1,hn=t}}}function d1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function hu(t){if(t!==hn)return!1;if(!je)return d1(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lm(t.type,t.memoizedProps)),e&&(e=un)){if(hm(t))throw Yb(),Error(R(418));for(;e;)Qb(t,e),e=cs(e.nextSibling)}if(d1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=hn?cs(t.stateNode.nextSibling):null;return!0}function Yb(){for(var t=un;t;)t=cs(t.nextSibling)}function jo(){un=hn=null,je=!1}function Xg(t){jn===null?jn=[t]:jn.push(t)}var tC=Lr.ReactCurrentBatchConfig;function Ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function fu(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function h1(t){var e=t._init;return e(t._payload)}function Xb(t){function e(g,m){if(t){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=fs(g,m),g.index=0,g.sibling=null,g}function i(g,m,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,m,v,b){return m===null||m.tag!==6?(m=lp(v,g.mode,b),m.return=g,m):(m=s(m,v),m.return=g,m)}function l(g,m,v,b){var S=v.type;return S===no?d(g,m,v.props.children,b,v.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Yr&&h1(S)===m.type)?(b=s(m,v.props),b.ref=Ta(g,m,v),b.return=g,b):(b=Bu(v.type,v.key,v.props,null,g.mode,b),b.ref=Ta(g,m,v),b.return=g,b)}function u(g,m,v,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=cp(v,g.mode,b),m.return=g,m):(m=s(m,v.children||[]),m.return=g,m)}function d(g,m,v,b,S){return m===null||m.tag!==7?(m=ui(v,g.mode,b,S),m.return=g,m):(m=s(m,v),m.return=g,m)}function h(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=lp(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case nu:return v=Bu(m.type,m.key,m.props,null,g.mode,v),v.ref=Ta(g,null,m),v.return=g,v;case to:return m=cp(m,g.mode,v),m.return=g,m;case Yr:var b=m._init;return h(g,b(m._payload),v)}if(za(m)||Ia(m))return m=ui(m,g.mode,v,null),m.return=g,m;fu(g,m)}return null}function f(g,m,v,b){var S=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(g,m,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case nu:return v.key===S?l(g,m,v,b):null;case to:return v.key===S?u(g,m,v,b):null;case Yr:return S=v._init,f(g,m,S(v._payload),b)}if(za(v)||Ia(v))return S!==null?null:d(g,m,v,b,null);fu(g,v)}return null}function p(g,m,v,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(v)||null,a(m,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nu:return g=g.get(b.key===null?v:b.key)||null,l(m,g,b,S);case to:return g=g.get(b.key===null?v:b.key)||null,u(m,g,b,S);case Yr:var _=b._init;return p(g,m,v,_(b._payload),S)}if(za(b)||Ia(b))return g=g.get(v)||null,d(m,g,b,S,null);fu(m,b)}return null}function y(g,m,v,b){for(var S=null,_=null,T=m,j=m=0,q=null;T!==null&&j<v.length;j++){T.index>j?(q=T,T=null):q=T.sibling;var $=f(g,T,v[j],b);if($===null){T===null&&(T=q);break}t&&T&&$.alternate===null&&e(g,T),m=i($,m,j),_===null?S=$:_.sibling=$,_=$,T=q}if(j===v.length)return n(g,T),je&&Hs(g,j),S;if(T===null){for(;j<v.length;j++)T=h(g,v[j],b),T!==null&&(m=i(T,m,j),_===null?S=T:_.sibling=T,_=T);return je&&Hs(g,j),S}for(T=r(g,T);j<v.length;j++)q=p(T,g,j,v[j],b),q!==null&&(t&&q.alternate!==null&&T.delete(q.key===null?j:q.key),m=i(q,m,j),_===null?S=q:_.sibling=q,_=q);return t&&T.forEach(function(Q){return e(g,Q)}),je&&Hs(g,j),S}function x(g,m,v,b){var S=Ia(v);if(typeof S!="function")throw Error(R(150));if(v=S.call(v),v==null)throw Error(R(151));for(var _=S=null,T=m,j=m=0,q=null,$=v.next();T!==null&&!$.done;j++,$=v.next()){T.index>j?(q=T,T=null):q=T.sibling;var Q=f(g,T,$.value,b);if(Q===null){T===null&&(T=q);break}t&&T&&Q.alternate===null&&e(g,T),m=i(Q,m,j),_===null?S=Q:_.sibling=Q,_=Q,T=q}if($.done)return n(g,T),je&&Hs(g,j),S;if(T===null){for(;!$.done;j++,$=v.next())$=h(g,$.value,b),$!==null&&(m=i($,m,j),_===null?S=$:_.sibling=$,_=$);return je&&Hs(g,j),S}for(T=r(g,T);!$.done;j++,$=v.next())$=p(T,g,j,$.value,b),$!==null&&(t&&$.alternate!==null&&T.delete($.key===null?j:$.key),m=i($,m,j),_===null?S=$:_.sibling=$,_=$);return t&&T.forEach(function(Y){return e(g,Y)}),je&&Hs(g,j),S}function w(g,m,v,b){if(typeof v=="object"&&v!==null&&v.type===no&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case nu:e:{for(var S=v.key,_=m;_!==null;){if(_.key===S){if(S=v.type,S===no){if(_.tag===7){n(g,_.sibling),m=s(_,v.props.children),m.return=g,g=m;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Yr&&h1(S)===_.type){n(g,_.sibling),m=s(_,v.props),m.ref=Ta(g,_,v),m.return=g,g=m;break e}n(g,_);break}else e(g,_);_=_.sibling}v.type===no?(m=ui(v.props.children,g.mode,b,v.key),m.return=g,g=m):(b=Bu(v.type,v.key,v.props,null,g.mode,b),b.ref=Ta(g,m,v),b.return=g,g=b)}return o(g);case to:e:{for(_=v.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=s(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=cp(v,g.mode,b),m.return=g,g=m}return o(g);case Yr:return _=v._init,w(g,m,_(v._payload),b)}if(za(v))return y(g,m,v,b);if(Ia(v))return x(g,m,v,b);fu(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,v),m.return=g,g=m):(n(g,m),m=lp(v,g.mode,b),m.return=g,g=m),o(g)):n(g,m)}return w}var Ro=Xb(!0),Jb=Xb(!1),md=js(null),gd=null,uo=null,Jg=null;function Zg(){Jg=uo=gd=null}function e0(t){var e=md.current;Te(md),t._currentValue=e}function pm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wo(t,e){gd=t,Jg=uo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(Jg!==t)if(t={context:t,memoizedValue:e,next:null},uo===null){if(gd===null)throw Error(R(308));uo=t,gd.dependencies={lanes:0,firstContext:t}}else uo=uo.next=t;return e}var ni=null;function t0(t){ni===null?ni=[t]:ni.push(t)}function Zb(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,t0(e)):(n.next=s.next,s.next=n),e.interleaved=n,Dr(t,r)}function Dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function n0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function us(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Dr(t,n)}return s=r.interleaved,s===null?(e.next=e,t0(r)):(e.next=s.next,s.next=e),r.interleaved=e,Dr(t,n)}function Lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ug(t,n)}}function f1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yd(t,e,n,r){var s=t.updateQueue;Xr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(f=e,p=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(p,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,f=typeof y=="function"?y.call(p,h,f):y,f==null)break e;h=Me({},h,f);break e;case 2:Xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);xi|=o,t.lanes=o,t.memoizedState=h}}function p1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var fc={},or=js(fc),Cl=js(fc),Dl=js(fc);function ri(t){if(t===fc)throw Error(R(174));return t}function r0(t,e){switch(Ie(Dl,e),Ie(Cl,t),Ie(or,fc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kp(e,t)}Te(or),Ie(or,e)}function Po(){Te(or),Te(Cl),Te(Dl)}function t2(t){ri(Dl.current);var e=ri(or.current),n=Kp(e,t.type);e!==n&&(Ie(Cl,t),Ie(or,n))}function s0(t){Cl.current===t&&(Te(or),Te(Cl))}var Le=js(0);function vd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var np=[];function i0(){for(var t=0;t<np.length;t++)np[t]._workInProgressVersionPrimary=null;np.length=0}var $u=Lr.ReactCurrentDispatcher,rp=Lr.ReactCurrentBatchConfig,vi=0,$e=null,rt=null,ct=null,xd=!1,sl=!1,Al=0,nC=0;function At(){throw Error(R(321))}function o0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ln(t[n],e[n]))return!1;return!0}function a0(t,e,n,r,s,i){if(vi=i,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$u.current=t===null||t.memoizedState===null?oC:aC,t=n(r,s),sl){i=0;do{if(sl=!1,Al=0,25<=i)throw Error(R(301));i+=1,ct=rt=null,e.updateQueue=null,$u.current=lC,t=n(r,s)}while(sl)}if($u.current=wd,e=rt!==null&&rt.next!==null,vi=0,ct=rt=$e=null,xd=!1,e)throw Error(R(300));return t}function l0(){var t=Al!==0;return Al=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?$e.memoizedState=ct=t:ct=ct.next=t,ct}function Nn(){if(rt===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var e=ct===null?$e.memoizedState:ct.next;if(e!==null)ct=e,rt=t;else{if(t===null)throw Error(R(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ct===null?$e.memoizedState=ct=t:ct=ct.next=t}return ct}function jl(t,e){return typeof e=="function"?e(t):e}function sp(t){var e=Nn(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=rt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((vi&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,$e.lanes|=d,xi|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Ln(r,e.memoizedState)||(Xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,$e.lanes|=i,xi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ip(t){var e=Nn(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ln(i,e.memoizedState)||(Xt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function n2(){}function r2(t,e){var n=$e,r=Nn(),s=e(),i=!Ln(r.memoizedState,s);if(i&&(r.memoizedState=s,Xt=!0),r=r.queue,c0(o2.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Rl(9,i2.bind(null,n,r,s,e),void 0,null),dt===null)throw Error(R(349));vi&30||s2(n,e,s)}return s}function s2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function i2(t,e,n,r){e.value=n,e.getSnapshot=r,a2(e)&&l2(t)}function o2(t,e,n){return n(function(){a2(e)&&l2(t)})}function a2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ln(t,n)}catch{return!0}}function l2(t){var e=Dr(t,1);e!==null&&On(e,t,1,-1)}function m1(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:t},e.queue=t,t=t.dispatch=iC.bind(null,$e,t),[e.memoizedState,t]}function Rl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function c2(){return Nn().memoizedState}function Mu(t,e,n,r){var s=Gn();$e.flags|=t,s.memoizedState=Rl(1|e,n,void 0,r===void 0?null:r)}function ch(t,e,n,r){var s=Nn();r=r===void 0?null:r;var i=void 0;if(rt!==null){var o=rt.memoizedState;if(i=o.destroy,r!==null&&o0(r,o.deps)){s.memoizedState=Rl(e,n,i,r);return}}$e.flags|=t,s.memoizedState=Rl(1|e,n,i,r)}function g1(t,e){return Mu(8390656,8,t,e)}function c0(t,e){return ch(2048,8,t,e)}function u2(t,e){return ch(4,2,t,e)}function d2(t,e){return ch(4,4,t,e)}function h2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function f2(t,e,n){return n=n!=null?n.concat([t]):null,ch(4,4,h2.bind(null,e,t),n)}function u0(){}function p2(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&o0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function m2(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&o0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function g2(t,e,n){return vi&21?(Ln(n,e)||(n=bb(),$e.lanes|=n,xi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function rC(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=rp.transition;rp.transition={};try{t(!1),e()}finally{ge=n,rp.transition=r}}function y2(){return Nn().memoizedState}function sC(t,e,n){var r=hs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},v2(t))x2(e,n);else if(n=Zb(t,e,n,r),n!==null){var s=zt();On(n,t,r,s),w2(n,e,r)}}function iC(t,e,n){var r=hs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(v2(t))x2(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ln(a,o)){var l=e.interleaved;l===null?(s.next=s,t0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Zb(t,e,s,r),n!==null&&(s=zt(),On(n,t,r,s),w2(n,e,r))}}function v2(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function x2(t,e){sl=xd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function w2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ug(t,n)}}var wd={readContext:En,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},oC={readContext:En,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:g1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mu(4194308,4,h2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mu(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sC.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:m1,useDebugValue:u0,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=m1(!1),e=t[0];return t=rC.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,s=Gn();if(je){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),dt===null)throw Error(R(349));vi&30||s2(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,g1(o2.bind(null,r,i,t),[t]),r.flags|=2048,Rl(9,i2.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gn(),e=dt.identifierPrefix;if(je){var n=wr,r=xr;n=(r&~(1<<32-Pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Al++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aC={readContext:En,useCallback:p2,useContext:En,useEffect:c0,useImperativeHandle:f2,useInsertionEffect:u2,useLayoutEffect:d2,useMemo:m2,useReducer:sp,useRef:c2,useState:function(){return sp(jl)},useDebugValue:u0,useDeferredValue:function(t){var e=Nn();return g2(e,rt.memoizedState,t)},useTransition:function(){var t=sp(jl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:n2,useSyncExternalStore:r2,useId:y2,unstable_isNewReconciler:!1},lC={readContext:En,useCallback:p2,useContext:En,useEffect:c0,useImperativeHandle:f2,useInsertionEffect:u2,useLayoutEffect:d2,useMemo:m2,useReducer:ip,useRef:c2,useState:function(){return ip(jl)},useDebugValue:u0,useDeferredValue:function(t){var e=Nn();return rt===null?e.memoizedState=t:g2(e,rt.memoizedState,t)},useTransition:function(){var t=ip(jl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:n2,useSyncExternalStore:r2,useId:y2,unstable_isNewReconciler:!1};function Dn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uh={isMounted:function(t){return(t=t._reactInternals)?Oi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zt(),s=hs(t),i=Nr(r,s);i.payload=e,n!=null&&(i.callback=n),e=us(t,i,s),e!==null&&(On(e,t,s,r),Lu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zt(),s=hs(t),i=Nr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=us(t,i,s),e!==null&&(On(e,t,s,r),Lu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),r=hs(t),s=Nr(n,r);s.tag=2,e!=null&&(s.callback=e),e=us(t,s,r),e!==null&&(On(e,t,r,n),Lu(e,t,r))}};function y1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Nl(n,r)||!Nl(s,i):!0}function b2(t,e,n){var r=!1,s=ys,i=e.contextType;return typeof i=="object"&&i!==null?i=En(i):(s=nn(e)?gi:Mt.current,r=e.contextTypes,i=(r=r!=null)?Ao(t,s):ys),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function v1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uh.enqueueReplaceState(e,e.state,null)}function gm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},n0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=En(i):(i=nn(e)?gi:Mt.current,s.context=Ao(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&uh.enqueueReplaceState(s,s.state,null),yd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Oo(t,e){try{var n="",r=e;do n+=Lk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function op(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ym(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cC=typeof WeakMap=="function"?WeakMap:Map;function _2(t,e,n){n=Nr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_d||(_d=!0,km=r),ym(t,e)},n}function I2(t,e,n){n=Nr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ym(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ym(t,e),typeof r!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function x1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cC;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=IC.bind(null,t,e,n),e.then(t,t))}function w1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nr(-1,1),e.tag=2,us(n,e,1))),n.lanes|=1),t)}var uC=Lr.ReactCurrentOwner,Xt=!1;function Ft(t,e,n,r){e.child=t===null?Jb(e,null,n,r):Ro(e,t.child,n,r)}function _1(t,e,n,r,s){n=n.render;var i=e.ref;return wo(e,s),r=a0(t,e,n,r,i,s),n=l0(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ar(t,e,s)):(je&&n&&Qg(e),e.flags|=1,Ft(t,e,r,s),e.child)}function I1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!v0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,E2(t,e,i,r,s)):(t=Bu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Nl,n(o,r)&&t.ref===e.ref)return Ar(t,e,s)}return e.flags|=1,t=fs(i,r),t.ref=e.ref,t.return=e,e.child=t}function E2(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Nl(i,r)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Ar(t,e,s)}return vm(t,e,n,r,s)}function N2(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(fo,ln),ln|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(fo,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(fo,ln),ln|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(fo,ln),ln|=r;return Ft(t,e,s,n),e.child}function S2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vm(t,e,n,r,s){var i=nn(n)?gi:Mt.current;return i=Ao(e,i),wo(e,s),n=a0(t,e,n,r,i,s),r=l0(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ar(t,e,s)):(je&&r&&Qg(e),e.flags|=1,Ft(t,e,n,s),e.child)}function E1(t,e,n,r,s){if(nn(n)){var i=!0;hd(e)}else i=!1;if(wo(e,s),e.stateNode===null)Fu(t,e),b2(e,n,r),gm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=En(u):(u=nn(n)?gi:Mt.current,u=Ao(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&v1(e,o,r,u),Xr=!1;var f=e.memoizedState;o.state=f,yd(e,r,o,s),l=e.memoizedState,a!==r||f!==l||tn.current||Xr?(typeof d=="function"&&(mm(e,n,d,r),l=e.memoizedState),(a=Xr||y1(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,e2(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Dn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=En(l):(l=nn(n)?gi:Mt.current,l=Ao(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&v1(e,o,r,l),Xr=!1,f=e.memoizedState,o.state=f,yd(e,r,o,s);var y=e.memoizedState;a!==h||f!==y||tn.current||Xr?(typeof p=="function"&&(mm(e,n,p,r),y=e.memoizedState),(u=Xr||y1(e,n,u,r,f,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return xm(t,e,n,r,i,s)}function xm(t,e,n,r,s,i){S2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&c1(e,n,!1),Ar(t,e,i);r=e.stateNode,uC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ro(e,t.child,null,i),e.child=Ro(e,null,a,i)):Ft(t,e,a,i),e.memoizedState=r.state,s&&c1(e,n,!0),e.child}function k2(t){var e=t.stateNode;e.pendingContext?l1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&l1(t,e.context,!1),r0(t,e.containerInfo)}function N1(t,e,n,r,s){return jo(),Xg(s),e.flags|=256,Ft(t,e,n,r),e.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function bm(t){return{baseLanes:t,cachePool:null,transitions:null}}function T2(t,e,n){var r=e.pendingProps,s=Le.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(Le,s&1),t===null)return fm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=fh(o,r,0,null),t=ui(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=bm(n),e.memoizedState=wm,t):d0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return dC(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=fs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=fs(a,i):(i=ui(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?bm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=wm,r}return i=t.child,t=i.sibling,r=fs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function d0(t,e){return e=fh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pu(t,e,n,r){return r!==null&&Xg(r),Ro(e,t.child,null,n),t=d0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=op(Error(R(422))),pu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=fh({mode:"visible",children:r.children},s,0,null),i=ui(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ro(e,t.child,null,o),e.child.memoizedState=bm(o),e.memoizedState=wm,i);if(!(e.mode&1))return pu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(R(419)),r=op(i,r,void 0),pu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Xt||a){if(r=dt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Dr(t,s),On(r,t,s,-1))}return y0(),r=op(Error(R(421))),pu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=EC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,un=cs(s.nextSibling),hn=e,je=!0,jn=null,t!==null&&(vn[xn++]=xr,vn[xn++]=wr,vn[xn++]=yi,xr=t.id,wr=t.overflow,yi=e),e=d0(e,r.children),e.flags|=4096,e)}function S1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pm(t.return,e,n)}function ap(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function C2(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ft(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&S1(t,n,e);else if(t.tag===19)S1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&vd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ap(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&vd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ap(e,!0,n,null,i);break;case"together":ap(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hC(t,e,n){switch(e.tag){case 3:k2(e),jo();break;case 5:t2(e);break;case 1:nn(e.type)&&hd(e);break;case 4:r0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(md,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?T2(t,e,n):(Ie(Le,Le.current&1),t=Ar(t,e,n),t!==null?t.sibling:null);Ie(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return C2(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,N2(t,e,n)}return Ar(t,e,n)}var D2,_m,A2,j2;D2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_m=function(){};A2=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ri(or.current);var i=null;switch(n){case"input":s=qp(t,s),r=qp(t,r),i=[];break;case"select":s=Me({},s,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":s=Gp(t,s),r=Gp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ud)}Qp(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ne("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};j2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ca(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fC(t,e,n){var r=e.pendingProps;switch(Yg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return nn(e.type)&&dd(),jt(e),null;case 3:return r=e.stateNode,Po(),Te(tn),Te(Mt),i0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(Dm(jn),jn=null))),_m(t,e),jt(e),null;case 5:s0(e);var s=ri(Dl.current);if(n=e.type,t!==null&&e.stateNode!=null)A2(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return jt(e),null}if(t=ri(or.current),hu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Kn]=e,r[Tl]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<Wa.length;s++)Ne(Wa[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Ov(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":$v(r,i),Ne("invalid",r)}Qp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&du(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&du(r.textContent,a,t),s=["children",""+a]):vl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":ru(r),Lv(r,i,!0);break;case"textarea":ru(r),Mv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ud)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ob(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Kn]=e,t[Tl]=r,D2(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yp(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<Wa.length;s++)Ne(Wa[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":Ov(t,r),s=qp(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Me({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":$v(t,r),s=Gp(t,r),Ne("invalid",t);break;default:s=r}Qp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?cb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ab(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xl(t,l):typeof l=="number"&&xl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ne("scroll",t):l!=null&&Og(t,i,l,o))}switch(n){case"input":ru(t),Lv(t,r,!1);break;case"textarea":ru(t),Mv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?go(t,!!r.multiple,i,!1):r.defaultValue!=null&&go(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ud)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)j2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(n=ri(Dl.current),ri(or.current),hu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kn]=e,(i=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:du(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&du(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kn]=e,e.stateNode=r}return jt(e),null;case 13:if(Te(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&un!==null&&e.mode&1&&!(e.flags&128))Yb(),jo(),e.flags|=98560,i=!1;else if(i=hu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(R(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[Kn]=e}else jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),i=!1}else jn!==null&&(Dm(jn),jn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?st===0&&(st=3):y0())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return Po(),_m(t,e),t===null&&Sl(e.stateNode.containerInfo),jt(e),null;case 10:return e0(e.type._context),jt(e),null;case 17:return nn(e.type)&&dd(),jt(e),null;case 19:if(Te(Le),i=e.memoizedState,i===null)return jt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ca(i,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vd(t),o!==null){for(e.flags|=128,Ca(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&He()>Lo&&(e.flags|=128,r=!0,Ca(i,!1),e.lanes=4194304)}else{if(!r)if(t=vd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ca(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!je)return jt(e),null}else 2*He()-i.renderingStartTime>Lo&&n!==1073741824&&(e.flags|=128,r=!0,Ca(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=He(),e.sibling=null,n=Le.current,Ie(Le,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return g0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ln&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function pC(t,e){switch(Yg(e),e.tag){case 1:return nn(e.type)&&dd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Po(),Te(tn),Te(Mt),i0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return s0(e),null;case 13:if(Te(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Le),null;case 4:return Po(),null;case 10:return e0(e.type._context),null;case 22:case 23:return g0(),null;case 24:return null;default:return null}}var mu=!1,Ot=!1,mC=typeof WeakSet=="function"?WeakSet:Set,W=null;function ho(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function Im(t,e,n){try{n()}catch(r){Be(t,e,r)}}var k1=!1;function gC(t,e){if(om=ad,t=$b(),Kg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(am={focusedElem:t,selectionRange:n},ad=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,w=y.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:Dn(e.type,x),w);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(b){Be(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return y=k1,k1=!1,y}function il(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Im(e,n,i)}s=s.next}while(s!==r)}}function dh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Em(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function R2(t){var e=t.alternate;e!==null&&(t.alternate=null,R2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kn],delete e[Tl],delete e[um],delete e[JT],delete e[ZT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function P2(t){return t.tag===5||t.tag===3||t.tag===4}function T1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||P2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ud));else if(r!==4&&(t=t.child,t!==null))for(Nm(t,e,n),t=t.sibling;t!==null;)Nm(t,e,n),t=t.sibling}function Sm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sm(t,e,n),t=t.sibling;t!==null;)Sm(t,e,n),t=t.sibling}var bt=null,An=!1;function Wr(t,e,n){for(n=n.child;n!==null;)O2(t,e,n),n=n.sibling}function O2(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(rh,n)}catch{}switch(n.tag){case 5:Ot||ho(n,e);case 6:var r=bt,s=An;bt=null,Wr(t,e,n),bt=r,An=s,bt!==null&&(An?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(An?(t=bt,n=n.stateNode,t.nodeType===8?ep(t.parentNode,n):t.nodeType===1&&ep(t,n),Il(t)):ep(bt,n.stateNode));break;case 4:r=bt,s=An,bt=n.stateNode.containerInfo,An=!0,Wr(t,e,n),bt=r,An=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Im(n,e,o),s=s.next}while(s!==r)}Wr(t,e,n);break;case 1:if(!Ot&&(ho(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Be(n,e,a)}Wr(t,e,n);break;case 21:Wr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Wr(t,e,n),Ot=r):Wr(t,e,n);break;default:Wr(t,e,n)}}function C1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mC),e.forEach(function(r){var s=NC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,An=!1;break e;case 3:bt=a.stateNode.containerInfo,An=!0;break e;case 4:bt=a.stateNode.containerInfo,An=!0;break e}a=a.return}if(bt===null)throw Error(R(160));O2(i,o,s),bt=null,An=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Be(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)L2(e,t),e=e.sibling}function L2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Wn(t),r&4){try{il(3,t,t.return),dh(3,t)}catch(x){Be(t,t.return,x)}try{il(5,t,t.return)}catch(x){Be(t,t.return,x)}}break;case 1:Cn(e,t),Wn(t),r&512&&n!==null&&ho(n,n.return);break;case 5:if(Cn(e,t),Wn(t),r&512&&n!==null&&ho(n,n.return),t.flags&32){var s=t.stateNode;try{xl(s,"")}catch(x){Be(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&sb(s,i),Yp(a,o);var u=Yp(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?cb(s,h):d==="dangerouslySetInnerHTML"?ab(s,h):d==="children"?xl(s,h):Og(s,d,h,u)}switch(a){case"input":Wp(s,i);break;case"textarea":ib(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?go(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?go(s,!!i.multiple,i.defaultValue,!0):go(s,!!i.multiple,i.multiple?[]:"",!1))}s[Tl]=i}catch(x){Be(t,t.return,x)}}break;case 6:if(Cn(e,t),Wn(t),r&4){if(t.stateNode===null)throw Error(R(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Be(t,t.return,x)}}break;case 3:if(Cn(e,t),Wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Il(e.containerInfo)}catch(x){Be(t,t.return,x)}break;case 4:Cn(e,t),Wn(t);break;case 13:Cn(e,t),Wn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(p0=He())),r&4&&C1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(u=Ot)||d,Cn(e,t),Ot=u):Cn(e,t),Wn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(W=t,d=t.child;d!==null;){for(h=W=d;W!==null;){switch(f=W,p=f.child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:ho(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){Be(r,n,x)}}break;case 5:ho(f,f.return);break;case 22:if(f.memoizedState!==null){A1(h);continue}}p!==null?(p.return=f,W=p):A1(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lb("display",o))}catch(x){Be(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){Be(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Cn(e,t),Wn(t),r&4&&C1(t);break;case 21:break;default:Cn(e,t),Wn(t)}}function Wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(P2(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xl(s,""),r.flags&=-33);var i=T1(t);Sm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=T1(t);Nm(t,a,o);break;default:throw Error(R(161))}}catch(l){Be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yC(t,e,n){W=t,$2(t)}function $2(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ot;a=mu;var u=Ot;if(mu=o,(Ot=l)&&!u)for(W=s;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?j1(s):l!==null?(l.return=o,W=l):j1(s);for(;i!==null;)W=i,$2(i),i=i.sibling;W=s,mu=a,Ot=u}D1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):D1(t)}}function D1(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||dh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Dn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&p1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}p1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Il(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ot||e.flags&512&&Em(e)}catch(f){Be(e,e.return,f)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function A1(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function j1(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dh(4,e)}catch(l){Be(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Be(e,s,l)}}var i=e.return;try{Em(e)}catch(l){Be(e,i,l)}break;case 5:var o=e.return;try{Em(e)}catch(l){Be(e,o,l)}}}catch(l){Be(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var vC=Math.ceil,bd=Lr.ReactCurrentDispatcher,h0=Lr.ReactCurrentOwner,In=Lr.ReactCurrentBatchConfig,le=0,dt=null,tt=null,Nt=0,ln=0,fo=js(0),st=0,Pl=null,xi=0,hh=0,f0=0,ol=null,Yt=null,p0=0,Lo=1/0,yr=null,_d=!1,km=null,ds=null,gu=!1,rs=null,Id=0,al=0,Tm=null,Vu=-1,Uu=0;function zt(){return le&6?He():Vu!==-1?Vu:Vu=He()}function hs(t){return t.mode&1?le&2&&Nt!==0?Nt&-Nt:tC.transition!==null?(Uu===0&&(Uu=bb()),Uu):(t=ge,t!==0||(t=window.event,t=t===void 0?16:Tb(t.type)),t):1}function On(t,e,n,r){if(50<al)throw al=0,Tm=null,Error(R(185));uc(t,n,r),(!(le&2)||t!==dt)&&(t===dt&&(!(le&2)&&(hh|=n),st===4&&Zr(t,Nt)),rn(t,r),n===1&&le===0&&!(e.mode&1)&&(Lo=He()+500,lh&&Rs()))}function rn(t,e){var n=t.callbackNode;tT(t,e);var r=od(t,t===dt?Nt:0);if(r===0)n!==null&&Uv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Uv(n),e===1)t.tag===0?eC(R1.bind(null,t)):Gb(R1.bind(null,t)),YT(function(){!(le&6)&&Rs()}),n=null;else{switch(_b(r)){case 1:n=Vg;break;case 4:n=xb;break;case 16:n=id;break;case 536870912:n=wb;break;default:n=id}n=W2(n,M2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function M2(t,e){if(Vu=-1,Uu=0,le&6)throw Error(R(327));var n=t.callbackNode;if(bo()&&t.callbackNode!==n)return null;var r=od(t,t===dt?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ed(t,r);else{e=r;var s=le;le|=2;var i=V2();(dt!==t||Nt!==e)&&(yr=null,Lo=He()+500,ci(t,e));do try{bC();break}catch(a){F2(t,a)}while(1);Zg(),bd.current=i,le=s,tt!==null?e=0:(dt=null,Nt=0,e=st)}if(e!==0){if(e===2&&(s=tm(t),s!==0&&(r=s,e=Cm(t,s))),e===1)throw n=Pl,ci(t,0),Zr(t,r),rn(t,He()),n;if(e===6)Zr(t,r);else{if(s=t.current.alternate,!(r&30)&&!xC(s)&&(e=Ed(t,r),e===2&&(i=tm(t),i!==0&&(r=i,e=Cm(t,i))),e===1))throw n=Pl,ci(t,0),Zr(t,r),rn(t,He()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:Gs(t,Yt,yr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=p0+500-He(),10<e)){if(od(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cm(Gs.bind(null,t,Yt,yr),e);break}Gs(t,Yt,yr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Pn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vC(r/1960))-r,10<r){t.timeoutHandle=cm(Gs.bind(null,t,Yt,yr),r);break}Gs(t,Yt,yr);break;case 5:Gs(t,Yt,yr);break;default:throw Error(R(329))}}}return rn(t,He()),t.callbackNode===n?M2.bind(null,t):null}function Cm(t,e){var n=ol;return t.current.memoizedState.isDehydrated&&(ci(t,e).flags|=256),t=Ed(t,e),t!==2&&(e=Yt,Yt=n,e!==null&&Dm(e)),t}function Dm(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function xC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ln(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~f0,e&=~hh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pn(e),r=1<<n;t[n]=-1,e&=~r}}function R1(t){if(le&6)throw Error(R(327));bo();var e=od(t,0);if(!(e&1))return rn(t,He()),null;var n=Ed(t,e);if(t.tag!==0&&n===2){var r=tm(t);r!==0&&(e=r,n=Cm(t,r))}if(n===1)throw n=Pl,ci(t,0),Zr(t,e),rn(t,He()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,Yt,yr),rn(t,He()),null}function m0(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Lo=He()+500,lh&&Rs())}}function wi(t){rs!==null&&rs.tag===0&&!(le&6)&&bo();var e=le;le|=1;var n=In.transition,r=ge;try{if(In.transition=null,ge=1,t)return t()}finally{ge=r,In.transition=n,le=e,!(le&6)&&Rs()}}function g0(){ln=fo.current,Te(fo)}function ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QT(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(Yg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&dd();break;case 3:Po(),Te(tn),Te(Mt),i0();break;case 5:s0(r);break;case 4:Po();break;case 13:Te(Le);break;case 19:Te(Le);break;case 10:e0(r.type._context);break;case 22:case 23:g0()}n=n.return}if(dt=t,tt=t=fs(t.current,null),Nt=ln=e,st=0,Pl=null,f0=hh=xi=0,Yt=ol=null,ni!==null){for(e=0;e<ni.length;e++)if(n=ni[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ni=null}return t}function F2(t,e){do{var n=tt;try{if(Zg(),$u.current=wd,xd){for(var r=$e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xd=!1}if(vi=0,ct=rt=$e=null,sl=!1,Al=0,h0.current=null,n===null||n.return===null){st=1,Pl=e,tt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=w1(o);if(p!==null){p.flags&=-257,b1(p,o,a,i,e),p.mode&1&&x1(i,u,e),e=p,l=u;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){x1(i,u,e),y0();break e}l=Error(R(426))}}else if(je&&a.mode&1){var w=w1(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),b1(w,o,a,i,e),Xg(Oo(l,a));break e}}i=l=Oo(l,a),st!==4&&(st=2),ol===null?ol=[i]:ol.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=_2(i,l,e);f1(i,g);break e;case 1:a=l;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ds===null||!ds.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=I2(i,a,e);f1(i,b);break e}}i=i.return}while(i!==null)}B2(n)}catch(S){e=S,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(1)}function V2(){var t=bd.current;return bd.current=wd,t===null?wd:t}function y0(){(st===0||st===3||st===2)&&(st=4),dt===null||!(xi&268435455)&&!(hh&268435455)||Zr(dt,Nt)}function Ed(t,e){var n=le;le|=2;var r=V2();(dt!==t||Nt!==e)&&(yr=null,ci(t,e));do try{wC();break}catch(s){F2(t,s)}while(1);if(Zg(),le=n,bd.current=r,tt!==null)throw Error(R(261));return dt=null,Nt=0,st}function wC(){for(;tt!==null;)U2(tt)}function bC(){for(;tt!==null&&!Hk();)U2(tt)}function U2(t){var e=q2(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?B2(t):tt=e,h0.current=null}function B2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pC(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,tt=null;return}}else if(n=fC(n,e,ln),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);st===0&&(st=5)}function Gs(t,e,n){var r=ge,s=In.transition;try{In.transition=null,ge=1,_C(t,e,n,r)}finally{In.transition=s,ge=r}return null}function _C(t,e,n,r){do bo();while(rs!==null);if(le&6)throw Error(R(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(nT(t,i),t===dt&&(tt=dt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gu||(gu=!0,W2(id,function(){return bo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=In.transition,In.transition=null;var o=ge;ge=1;var a=le;le|=4,h0.current=null,gC(t,n),L2(n,t),BT(am),ad=!!om,am=om=null,t.current=n,yC(n),Gk(),le=a,ge=o,In.transition=i}else t.current=n;if(gu&&(gu=!1,rs=t,Id=s),i=t.pendingLanes,i===0&&(ds=null),Yk(n.stateNode),rn(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_d)throw _d=!1,t=km,km=null,t;return Id&1&&t.tag!==0&&bo(),i=t.pendingLanes,i&1?t===Tm?al++:(al=0,Tm=t):al=0,Rs(),null}function bo(){if(rs!==null){var t=_b(Id),e=In.transition,n=ge;try{if(In.transition=null,ge=16>t?16:t,rs===null)var r=!1;else{if(t=rs,rs=null,Id=0,le&6)throw Error(R(331));var s=le;for(le|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(W=u;W!==null;){var d=W;switch(d.tag){case 0:case 11:case 15:il(8,d,i)}var h=d.child;if(h!==null)h.return=d,W=h;else for(;W!==null;){d=W;var f=d.sibling,p=d.return;if(R2(d),d===u){W=null;break}if(f!==null){f.return=p,W=f;break}W=p}}}var y=i.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:il(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,W=g;break e}W=i.return}}var m=t.current;for(W=m;W!==null;){o=W;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,W=v;else e:for(o=m;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dh(9,a)}}catch(S){Be(a,a.return,S)}if(a===o){W=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,W=b;break e}W=a.return}}if(le=s,Rs(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(rh,t)}catch{}r=!0}return r}finally{ge=n,In.transition=e}}return!1}function P1(t,e,n){e=Oo(n,e),e=_2(t,e,1),t=us(t,e,1),e=zt(),t!==null&&(uc(t,1,e),rn(t,e))}function Be(t,e,n){if(t.tag===3)P1(t,t,n);else for(;e!==null;){if(e.tag===3){P1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ds===null||!ds.has(r))){t=Oo(n,t),t=I2(e,t,1),e=us(e,t,1),t=zt(),e!==null&&(uc(e,1,t),rn(e,t));break}}e=e.return}}function IC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,dt===t&&(Nt&n)===n&&(st===4||st===3&&(Nt&130023424)===Nt&&500>He()-p0?ci(t,0):f0|=n),rn(t,e)}function z2(t,e){e===0&&(t.mode&1?(e=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):e=1);var n=zt();t=Dr(t,e),t!==null&&(uc(t,e,n),rn(t,n))}function EC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),z2(t,n)}function NC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),z2(t,n)}var q2;q2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,hC(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,je&&e.flags&1048576&&Kb(e,pd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fu(t,e),t=e.pendingProps;var s=Ao(e,Mt.current);wo(e,n),s=a0(null,e,r,t,s,n);var i=l0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(i=!0,hd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,n0(e),s.updater=uh,e.stateNode=s,s._reactInternals=e,gm(e,r,t,n),e=xm(null,e,r,!0,i,n)):(e.tag=0,je&&i&&Qg(e),Ft(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=kC(r),t=Dn(r,t),s){case 0:e=vm(null,e,r,t,n);break e;case 1:e=E1(null,e,r,t,n);break e;case 11:e=_1(null,e,r,t,n);break e;case 14:e=I1(null,e,r,Dn(r.type,t),n);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dn(r,s),vm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dn(r,s),E1(t,e,r,s,n);case 3:e:{if(k2(e),t===null)throw Error(R(387));r=e.pendingProps,i=e.memoizedState,s=i.element,e2(t,e),yd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Oo(Error(R(423)),e),e=N1(t,e,r,n,s);break e}else if(r!==s){s=Oo(Error(R(424)),e),e=N1(t,e,r,n,s);break e}else for(un=cs(e.stateNode.containerInfo.firstChild),hn=e,je=!0,jn=null,n=Jb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jo(),r===s){e=Ar(t,e,n);break e}Ft(t,e,r,n)}e=e.child}return e;case 5:return t2(e),t===null&&fm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,lm(r,s)?o=null:i!==null&&lm(r,i)&&(e.flags|=32),S2(t,e),Ft(t,e,o,n),e.child;case 6:return t===null&&fm(e),null;case 13:return T2(t,e,n);case 4:return r0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ro(e,null,r,n):Ft(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dn(r,s),_1(t,e,r,s,n);case 7:return Ft(t,e,e.pendingProps,n),e.child;case 8:return Ft(t,e,e.pendingProps.children,n),e.child;case 12:return Ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ie(md,r._currentValue),r._currentValue=o,i!==null)if(Ln(i.value,o)){if(i.children===s.children&&!tn.current){e=Ar(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Nr(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),pm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(R(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),pm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,wo(e,n),s=En(s),r=r(s),e.flags|=1,Ft(t,e,r,n),e.child;case 14:return r=e.type,s=Dn(r,e.pendingProps),s=Dn(r.type,s),I1(t,e,r,s,n);case 15:return E2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dn(r,s),Fu(t,e),e.tag=1,nn(r)?(t=!0,hd(e)):t=!1,wo(e,n),b2(e,r,s),gm(e,r,s,n),xm(null,e,r,!0,t,n);case 19:return C2(t,e,n);case 22:return N2(t,e,n)}throw Error(R(156,e.tag))};function W2(t,e){return vb(t,e)}function SC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,e,n,r){return new SC(t,e,n,r)}function v0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kC(t){if(typeof t=="function")return v0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$g)return 11;if(t===Mg)return 14}return 2}function fs(t,e){var n=t.alternate;return n===null?(n=bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")v0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case no:return ui(n.children,s,i,e);case Lg:o=8,s|=8;break;case Vp:return t=bn(12,n,e,s|2),t.elementType=Vp,t.lanes=i,t;case Up:return t=bn(13,n,e,s),t.elementType=Up,t.lanes=i,t;case Bp:return t=bn(19,n,e,s),t.elementType=Bp,t.lanes=i,t;case tb:return fh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Zw:o=10;break e;case eb:o=9;break e;case $g:o=11;break e;case Mg:o=14;break e;case Yr:o=16,r=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=bn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ui(t,e,n,r){return t=bn(7,t,r,e),t.lanes=n,t}function fh(t,e,n,r){return t=bn(22,t,r,e),t.elementType=tb,t.lanes=n,t.stateNode={isHidden:!1},t}function lp(t,e,n){return t=bn(6,t,null,e),t.lanes=n,t}function cp(t,e,n){return e=bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zf(0),this.expirationTimes=zf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function x0(t,e,n,r,s,i,o,a,l){return t=new TC(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},n0(i),t}function CC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:to,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function H2(t){if(!t)return ys;t=t._reactInternals;e:{if(Oi(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(nn(n))return Hb(t,n,e)}return e}function G2(t,e,n,r,s,i,o,a,l){return t=x0(n,r,!0,t,s,i,o,a,l),t.context=H2(null),n=t.current,r=zt(),s=hs(n),i=Nr(r,s),i.callback=e??null,us(n,i,s),t.current.lanes=s,uc(t,s,r),rn(t,r),t}function ph(t,e,n,r){var s=e.current,i=zt(),o=hs(s);return n=H2(n),e.context===null?e.context=n:e.pendingContext=n,e=Nr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=us(s,e,o),t!==null&&(On(t,s,o,i),Lu(t,s,o)),o}function Nd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function w0(t,e){O1(t,e),(t=t.alternate)&&O1(t,e)}function DC(){return null}var K2=typeof reportError=="function"?reportError:function(t){console.error(t)};function b0(t){this._internalRoot=t}mh.prototype.render=b0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));ph(t,e,null,null)};mh.prototype.unmount=b0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wi(function(){ph(null,t,null,null)}),e[Cr]=null}};function mh(t){this._internalRoot=t}mh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jr.length&&e!==0&&e<Jr[n].priority;n++);Jr.splice(n,0,t),n===0&&kb(t)}};function _0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function L1(){}function AC(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Nd(o);i.call(u)}}var o=G2(e,r,t,0,null,!1,!1,"",L1);return t._reactRootContainer=o,t[Cr]=o.current,Sl(t.nodeType===8?t.parentNode:t),wi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Nd(l);a.call(u)}}var l=x0(t,0,!1,null,null,!1,!1,"",L1);return t._reactRootContainer=l,t[Cr]=l.current,Sl(t.nodeType===8?t.parentNode:t),wi(function(){ph(e,l,n,r)}),l}function yh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Nd(o);a.call(l)}}ph(e,o,t,s)}else o=AC(n,e,t,s,r);return Nd(o)}Ib=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qa(e.pendingLanes);n!==0&&(Ug(e,n|1),rn(e,He()),!(le&6)&&(Lo=He()+500,Rs()))}break;case 13:wi(function(){var r=Dr(t,1);if(r!==null){var s=zt();On(r,t,1,s)}}),w0(t,1)}};Bg=function(t){if(t.tag===13){var e=Dr(t,134217728);if(e!==null){var n=zt();On(e,t,134217728,n)}w0(t,134217728)}};Eb=function(t){if(t.tag===13){var e=hs(t),n=Dr(t,e);if(n!==null){var r=zt();On(n,t,e,r)}w0(t,e)}};Nb=function(){return ge};Sb=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};Jp=function(t,e,n){switch(e){case"input":if(Wp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ah(r);if(!s)throw Error(R(90));rb(r),Wp(r,s)}}}break;case"textarea":ib(t,n);break;case"select":e=n.value,e!=null&&go(t,!!n.multiple,e,!1)}};hb=m0;fb=wi;var jC={usingClientEntryPoint:!1,Events:[hc,oo,ah,ub,db,m0]},Da={findFiberByHostInstance:ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RC={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gb(t),t===null?null:t.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||DC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{rh=yu.inject(RC),ir=yu}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jC;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_0(e))throw Error(R(200));return CC(t,e,null,n)};gn.createRoot=function(t,e){if(!_0(t))throw Error(R(299));var n=!1,r="",s=K2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=x0(t,1,!1,null,null,n,!1,r,s),t[Cr]=e.current,Sl(t.nodeType===8?t.parentNode:t),new b0(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=gb(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return wi(t)};gn.hydrate=function(t,e,n){if(!gh(e))throw Error(R(200));return yh(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!_0(t))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=K2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=G2(e,null,t,1,n??null,s,!1,i,o),t[Cr]=e.current,Sl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new mh(e)};gn.render=function(t,e,n){if(!gh(e))throw Error(R(200));return yh(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!gh(t))throw Error(R(40));return t._reactRootContainer?(wi(function(){yh(null,null,t,!1,function(){t._reactRootContainer=null,t[Cr]=null})}),!0):!1};gn.unstable_batchedUpdates=m0;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gh(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return yh(t,e,n,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function Q2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q2)}catch(t){console.error(t)}}Q2(),Qw.exports=gn;var PC=Qw.exports,$1=PC;Mp.createRoot=$1.createRoot,Mp.hydrateRoot=$1.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},OC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},X2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new LC;const f=i<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class LC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $C=function(t){const e=Y2(t);return X2.encodeByteArray(e,!0)},Sd=function(t){return $C(t).replace(/\./g,"")},J2=function(t){try{return X2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kd(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!MC(n)||(t[n]=kd(t[n],e[n]));return t}function MC(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=()=>FC().__FIREBASE_DEFAULTS__,UC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&J2(t[1]);return e&&JSON.parse(e)},I0=()=>{try{return VC()||UC()||BC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Z2=()=>{var t;return(t=I0())===null||t===void 0?void 0:t.config},zC=t=>{var e;return(e=I0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Sd(JSON.stringify(n)),Sd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function E0(){var t;const e=(t=I0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GC(){return typeof self=="object"&&self.self===self}function e_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function N0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function t_(){const t=Fe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KC(){return!E0()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ol(){try{return typeof indexedDB=="object"}catch{return!1}}function QC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="FirebaseError";class qt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YC,Object.setPrototypeOf(this,qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Li.prototype.create)}}class Li{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?XC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new qt(s,a,r)}}function XC(t,e){return t.replace(JC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const JC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ZC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Am(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(F1(i)&&F1(o)){if(!Am(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function F1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function po(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ha(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function n_(t,e){const n=new eD(t,e);return n.subscribe.bind(n)}class eD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=up),s.error===void 0&&(s.error=up),s.complete===void 0&&(s.complete=up);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function up(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t){return t&&t._delegate?t._delegate:t}class ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sD(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rD(t){return t===Ks?void 0:t}function sD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=[];var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const r_={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},oD=oe.INFO,aD={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},lD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=aD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vh{constructor(e){this.name=e,this._logLevel=oD,this._logHandler=lD,this._userLogHandler=null,S0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}function cD(t){S0.forEach(e=>{e.setLogLevel(t)})}function uD(t,e){for(const n of S0){let r=null;e&&e.level&&(r=r_[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");i>=(r??s.logLevel)&&t({level:oe[i].toLowerCase(),message:a,args:o,type:s.name})}}}const dD=(t,e)=>e.some(n=>t instanceof n);let V1,U1;function hD(){return V1||(V1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fD(){return U1||(U1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const s_=new WeakMap,jm=new WeakMap,i_=new WeakMap,dp=new WeakMap,k0=new WeakMap;function pD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ps(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&s_.set(n,t)}).catch(()=>{}),k0.set(e,t),e}function mD(t){if(jm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});jm.set(t,e)}let Rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||i_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gD(t){Rm=t(Rm)}function yD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hp(this),e,...n);return i_.set(r,e.sort?e.sort():[e]),ps(r)}:fD().includes(t)?function(...e){return t.apply(hp(this),e),ps(s_.get(this))}:function(...e){return ps(t.apply(hp(this),e))}}function vD(t){return typeof t=="function"?yD(t):(t instanceof IDBTransaction&&mD(t),dD(t,hD())?new Proxy(t,Rm):t)}function ps(t){if(t instanceof IDBRequest)return pD(t);if(dp.has(t))return dp.get(t);const e=vD(t);return e!==t&&(dp.set(t,e),k0.set(e,t)),e}const hp=t=>k0.get(t);function xD(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ps(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ps(o.result),l.oldVersion,l.newVersion,ps(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const wD=["get","getKey","getAll","getAllKeys","count"],bD=["put","add","delete","clear"],fp=new Map;function B1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fp.get(e))return fp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=bD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||wD.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return fp.set(e,i),i}gD(t=>({...t,get:(e,n,r)=>B1(e,n)||t.get(e,n,r),has:(e,n)=>!!B1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ID(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ID(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pm="@firebase/app",z1="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new vh("@firebase/app"),ED="@firebase/app-compat",ND="@firebase/analytics-compat",SD="@firebase/analytics",kD="@firebase/app-check-compat",TD="@firebase/app-check",CD="@firebase/auth",DD="@firebase/auth-compat",AD="@firebase/database",jD="@firebase/database-compat",RD="@firebase/functions",PD="@firebase/functions-compat",OD="@firebase/installations",LD="@firebase/installations-compat",$D="@firebase/messaging",MD="@firebase/messaging-compat",FD="@firebase/performance",VD="@firebase/performance-compat",UD="@firebase/remote-config",BD="@firebase/remote-config-compat",zD="@firebase/storage",qD="@firebase/storage-compat",WD="@firebase/firestore",HD="@firebase/firestore-compat",GD="firebase",KD="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]",QD={[Pm]:"fire-core",[ED]:"fire-core-compat",[SD]:"fire-analytics",[ND]:"fire-analytics-compat",[TD]:"fire-app-check",[kD]:"fire-app-check-compat",[CD]:"fire-auth",[DD]:"fire-auth-compat",[AD]:"fire-rtdb",[jD]:"fire-rtdb-compat",[RD]:"fire-fn",[PD]:"fire-fn-compat",[OD]:"fire-iid",[LD]:"fire-iid-compat",[$D]:"fire-fcm",[MD]:"fire-fcm-compat",[FD]:"fire-perf",[VD]:"fire-perf-compat",[UD]:"fire-rc",[BD]:"fire-rc-compat",[zD]:"fire-gcs",[qD]:"fire-gcs-compat",[WD]:"fire-fst",[HD]:"fire-fst-compat","fire-js":"fire-js",[GD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Map,Ll=new Map;function Td(t,e){try{t.container.addComponent(e)}catch(n){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function o_(t,e){t.container.addOrOverwriteComponent(e)}function ws(t){const e=t.name;if(Ll.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Ll.set(e,t);for(const n of xs.values())Td(n,t);return!0}function a_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function YD(t,e,n=vs){a_(t,e).clearInstance(n)}function XD(){Ll.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Sr=new Li("app","Firebase",JD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZD=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=KD;function T0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vs,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Sr.create("bad-app-name",{appName:String(s)});if(n||(n=Z2()),!n)throw Sr.create("no-options");const i=xs.get(s);if(i){if(Am(n,i.options)&&Am(r,i.config))return i;throw Sr.create("duplicate-app",{appName:s})}const o=new iD(s);for(const l of Ll.values())o.addComponent(l);const a=new ZD(n,r,o);return xs.set(s,a),a}function eA(t=vs){const e=xs.get(t);if(!e&&t===vs&&Z2())return T0();if(!e)throw Sr.create("no-app",{appName:t});return e}function tA(){return Array.from(xs.values())}async function l_(t){const e=t.name;xs.has(e)&&(xs.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function ar(t,e,n){var r;let s=(r=QD[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(a.join(" "));return}ws(new ur(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function c_(t,e){if(t!==null&&typeof t!="function")throw Sr.create("invalid-log-argument");uD(t,e)}function u_(t){cD(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="firebase-heartbeat-database",rA=1,$l="firebase-heartbeat-store";let pp=null;function d_(){return pp||(pp=xD(nA,rA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($l)}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),pp}async function sA(t){try{return await(await d_()).transaction($l).objectStore($l).get(h_(t))}catch(e){if(e instanceof qt)bi.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(n.message)}}}async function q1(t,e){try{const r=(await d_()).transaction($l,"readwrite");await r.objectStore($l).put(e,h_(t)),await r.done}catch(n){if(n instanceof qt)bi.warn(n.message);else{const r=Sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bi.warn(r.message)}}}function h_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=1024,oA=30*24*60*60*1e3;class aA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=W1();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=oA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=W1(),{heartbeatsToSend:n,unsentEntries:r}=lA(this._heartbeatsCache.heartbeats),s=Sd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function W1(){return new Date().toISOString().substring(0,10)}function lA(t,e=iA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),H1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),H1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ol()?QC().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await sA(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return q1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return q1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function H1(t){return Sd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){ws(new ur("platform-logger",e=>new _D(e),"PRIVATE")),ws(new ur("heartbeat",e=>new aA(e),"PRIVATE")),ar(Pm,z1,t),ar(Pm,z1,"esm2017"),ar("fire-js","")}uA("");const dA=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:qt,SDK_VERSION:Ps,_DEFAULT_ENTRY_NAME:vs,_addComponent:Td,_addOrOverwriteComponent:o_,_apps:xs,_clearComponents:XD,_components:Ll,_getProvider:a_,_registerComponent:ws,_removeServiceInstance:YD,deleteApp:l_,getApp:eA,getApps:tA,initializeApp:T0,onLog:c_,registerVersion:ar,setLogLevel:u_},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n){this._delegate=e,this.firebase=n,Td(e,new ur("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),l_(this._delegate)))}_getService(e,n=vs){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=vs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Td(this._delegate,e)}_addOrOverwriteComponent(e){o_(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},G1=new Li("app-compat","Firebase",fA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:ar,setLogLevel:u_,onLog:c_,apps:null,SDK_VERSION:Ps,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:dA}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function s(u){if(u=u||vs,!M1(e,u))throw G1.create("no-app",{appName:u});return e[u]}s.App=t;function i(u,d={}){const h=T0(u,d);if(M1(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const d=u.name,h=d.replace("-compat","");if(ws(u)&&u.type==="PUBLIC"){const f=(p=s())=>{if(typeof p[h]!="function")throw G1.create("invalid-app-argument",{appName:d});return p[h]()};u.serviceProps!==void 0&&kd(f,u.serviceProps),n[h]=f,t.prototype[h]=function(...p){return this._getService.bind(this,d).apply(this,u.multipleInstances?p:[])}}return u.type==="PUBLIC"?n[h]:null}function l(u,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(){const t=pA(hA);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:f_,extendNamespace:e,createSubscribe:n_,ErrorFactory:Li,deepExtend:kd});function e(n){kd(t,n)}return t}const mA=f_();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new vh("@firebase/app-compat"),gA="@firebase/app-compat",yA="0.2.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){ar(gA,yA,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(GC()&&self.firebase!==void 0){K1.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&K1.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Ae=mA;vA();var xA="firebase",wA="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ae.registerVersion(xA,wA,"app-compat");function C0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}const Aa={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ki={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}}function p_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _A=bA,IA=p_,m_=new Li("auth","Firebase",p_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new vh("@firebase/auth");function EA(t,...e){Cd.logLevel<=oe.WARN&&Cd.warn(`Auth (${Ps}): ${t}`,...e)}function zu(t,...e){Cd.logLevel<=oe.ERROR&&Cd.error(`Auth (${Ps}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t,...e){throw D0(t,...e)}function St(t,...e){return D0(t,...e)}function g_(t,e,n){const r=Object.assign(Object.assign({},IA()),{[e]:n});return new Li("auth","Firebase",r).create(e,{appName:t.name})}function na(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ct(t,"argument-error"),g_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function D0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return m_.create(t,...e)}function O(t,e,...n){if(!t)throw D0(e,...n)}function er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zu(e),new Error(e)}function $n(t,e){t||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function A0(){return Q1()==="http:"||Q1()==="https:"}function Q1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A0()||e_()||"connection"in navigator)?navigator.onLine:!0}function SA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.shortDelay=e,this.longDelay=n,$n(n>e,"Short delay should be less than long delay!"),this.isMobile=HC()||N0()}get(){return NA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t,e){$n(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new pc(3e4,6e4);function nt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ot(t,e,n,r,s={}){return v_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ta(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),y_.fetch()(x_(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function v_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},kA),e);try{const s=new CA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ga(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ga(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ga(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ga(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw g_(t,d,u);Ct(t,d)}}catch(s){if(s instanceof qt)throw s;Ct(t,"network-request-failed",{message:String(s)})}}async function $r(t,e,n,r,s={}){const i=await ot(t,e,n,r,s);return"mfaPendingCredential"in i&&Ct(t,"multi-factor-auth-required",{_serverResponse:i}),i}function x_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?j0(t.config,s):`${t.config.apiScheme}://${s}`}class CA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(St(this.auth,"network-request-failed")),TA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ga(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=St(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e){return ot(t,"POST","/v1/accounts:delete",e)}async function AA(t,e){return ot(t,"POST","/v1/accounts:update",e)}async function jA(t,e){return ot(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RA(t,e=!1){const n=K(t),r=await n.getIdToken(e),s=xh(r);O(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ll(mp(s.auth_time)),issuedAtTime:ll(mp(s.iat)),expirationTime:ll(mp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function mp(t){return Number(t)*1e3}function xh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zu("JWT malformed, contained fewer than 3 sections"),null;try{const s=J2(n);return s?JSON.parse(s):(zu("Failed to decode base64 JWT payload"),null)}catch(s){return zu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function PA(t){const e=xh(t);return O(e,"internal-error"),O(typeof e.exp<"u","internal-error"),O(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qt&&OA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function OA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await jr(t,jA(n,{idToken:r}));O(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?FA(i.providerUserInfo):[],a=MA(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new w_(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function $A(t){const e=K(t);await Fl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function FA(t){return t.map(e=>{var{providerId:n}=e,r=C0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(t,e){const n=await v_(t,{},async()=>{const r=ta({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=x_(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",y_.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){O(e.idToken,"internal-error"),O(typeof e.idToken<"u","internal-error"),O(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return O(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await VA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Vl;return r&&(O(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(O(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(O(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,e){O(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class di{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=C0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new w_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await jr(this,this.stsTokenManager.getToken(this.auth,e));return O(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RA(this,e)}reload(){return $A(this)}_assign(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new di(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await jr(this,DA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(u=n.createdAt)!==null&&u!==void 0?u:void 0,m=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:v,emailVerified:b,isAnonymous:S,providerData:_,stsTokenManager:T}=n;O(v&&T,e,"internal-error");const j=Vl.fromJSON(this.name,T);O(typeof v=="string",e,"internal-error"),Hr(h,e.name),Hr(f,e.name),O(typeof b=="boolean",e,"internal-error"),O(typeof S=="boolean",e,"internal-error"),Hr(p,e.name),Hr(y,e.name),Hr(x,e.name),Hr(w,e.name),Hr(g,e.name),Hr(m,e.name);const q=new di({uid:v,auth:e,email:f,emailVerified:b,displayName:h,isAnonymous:S,photoURL:y,phoneNumber:p,tenantId:x,stsTokenManager:j,createdAt:g,lastLoginAt:m});return _&&Array.isArray(_)&&(q.providerData=_.map($=>Object.assign({},$))),w&&(q._redirectEventId=w),q}static async _fromIdTokenResponse(e,n,r=!1){const s=new Vl;s.updateFromServerResponse(n);const i=new di({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fl(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new Map;function dn(t){$n(t instanceof Function,"Expected a class definition");let e=Y1.get(t);return e?($n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Y1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}b_.type="NONE";const $o=b_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t,e,n){return`firebase:${t}:${e}:${n}`}class _o{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hi(this.userKey,s.apiKey,i),this.fullPersistenceKey=hi("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?di._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _o(dn($o),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||dn($o);const o=hi(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=di._fromJSON(e,d);u!==i&&(a=h),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new _o(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new _o(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(E_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(__(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(N_(e))return"Blackberry";if(S_(e))return"Webos";if(R0(e))return"Safari";if((e.includes("chrome/")||I_(e))&&!e.includes("edge/"))return"Chrome";if(mc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function __(t=Fe()){return/firefox\//i.test(t)}function R0(t=Fe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function I_(t=Fe()){return/crios\//i.test(t)}function E_(t=Fe()){return/iemobile/i.test(t)}function mc(t=Fe()){return/android/i.test(t)}function N_(t=Fe()){return/blackberry/i.test(t)}function S_(t=Fe()){return/webos/i.test(t)}function ra(t=Fe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UA(t=Fe()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function BA(t=Fe()){var e;return ra(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zA(){return t_()&&document.documentMode===10}function k_(t=Fe()){return ra(t)||mc(t)||S_(t)||N_(t)||/windows phone/i.test(t)||E_(t)}function qA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t,e=[]){let n;switch(t){case"Browser":n=X1(Fe());break;case"Worker":n=`${X1(Fe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ps}/${r}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t){return(await ot(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function C_(t,e){return ot(t,"GET","/v2/recaptchaConfig",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t){return t!==void 0&&t.getResponse!==void 0}function Z1(t){return t!==void 0&&t.enterprise!==void 0}class D_{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function P0(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=St("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",HA().appendChild(r)})}function A_(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const GA="https://www.google.com/recaptcha/enterprise.js?render=",KA="recaptcha-enterprise",QA="NO_RECAPTCHA";class j_{constructor(e){this.type=KA,this.auth=Ye(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{C_(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new D_(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Z1(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(QA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Z1(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}P0(GA+a).then(()=>{s(a,i,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function bs(t,e,n,r=!1){const s=new j_(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ex(this),this.idTokenSubscription=new ex(this),this.beforeStateQueue=new YA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return O(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?K(e):null;return n&&O(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&O(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(dn(e))})}async initializeRecaptchaConfig(){const e=await C_(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new D_(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new j_(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Li("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dn(e)||this._popupRedirectResolver;O(n,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return O(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=T_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&EA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ye(t){return K(t)}class ex{constructor(e){this.auth=e,this.observer=null,this.addObserver=n_(n=>this.observer=n)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function JA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ZA(t,e,n){const r=Ye(t);O(r._canInitEmulator,r,"emulator-config-failed"),O(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=R_(e),{host:o,port:a}=ej(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||tj()}function R_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ej(t){const e=R_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:tx(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:tx(o)}}}function tx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(t,e){return ot(t,"POST","/v1/accounts:resetPassword",nt(t,e))}async function O_(t,e){return ot(t,"POST","/v1/accounts:update",e)}async function nj(t,e){return ot(t,"POST","/v1/accounts:update",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gp(t,e){return $r(t,"POST","/v1/accounts:signInWithPassword",nt(t,e))}async function wh(t,e){return ot(t,"POST","/v1/accounts:sendOobCode",nt(t,e))}async function rj(t,e){return wh(t,e)}async function yp(t,e){return wh(t,e)}async function vp(t,e){return wh(t,e)}async function sj(t,e){return wh(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(t,e){return $r(t,"POST","/v1/accounts:signInWithEmailLink",nt(t,e))}async function oj(t,e){return $r(t,"POST","/v1/accounts:signInWithEmailLink",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends sa{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ul(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ul(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const s=await bs(e,r,"signInWithPassword");return gp(e,s)}else return gp(e,r).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const i=await bs(e,r,"signInWithPassword");return gp(e,i)}else return Promise.reject(s)});case"emailLink":return ij(e,{email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return O_(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return oj(e,{idToken:n,email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(t,e){return $r(t,"POST","/v1/accounts:signInWithIdp",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj="http://localhost";class dr extends sa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ct("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=C0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new dr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return kr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,kr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,kr(e,n)}buildRequest(){const e={requestUri:aj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ta(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e){return ot(t,"POST","/v1/accounts:sendVerificationCode",nt(t,e))}async function cj(t,e){return $r(t,"POST","/v1/accounts:signInWithPhoneNumber",nt(t,e))}async function uj(t,e){const n=await $r(t,"POST","/v1/accounts:signInWithPhoneNumber",nt(t,e));if(n.temporaryProof)throw Ga(t,"account-exists-with-different-credential",n);return n}const dj={USER_NOT_FOUND:"user-not-found"};async function hj(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return $r(t,"POST","/v1/accounts:signInWithPhoneNumber",nt(t,n),dj)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends sa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new fi({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new fi({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return cj(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return uj(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return hj(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new fi({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pj(t){const e=po(Ha(t)).link,n=e?po(Ha(e)).deep_link_id:null,r=po(Ha(t)).deep_link_id;return(r?po(Ha(r)).link:null)||r||n||e||t}class bh{constructor(e){var n,r,s,i,o,a;const l=po(Ha(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=fj((s=l.mode)!==null&&s!==void 0?s:null);O(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=pj(e);try{return new bh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(){this.providerId=Os.PROVIDER_ID}static credential(e,n){return Ul._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bh.parseLink(n);return O(r,"argument-error"),Ul._fromEmailAndCode(e,r.code,r.tenantId)}}Os.PROVIDER_ID="password";Os.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Os.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Mr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Io extends ia{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return O("providerId"in n&&"signInMethod"in n,"argument-error"),dr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return O(e.idToken||e.accessToken,"argument-error"),dr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Io.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Io.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:a}=e;if(!r&&!s&&!n&&!i||!a)return null;try{return new Io(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends ia{constructor(){super("facebook.com")}static credential(e){return dr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qn.credential(e.oauthAccessToken)}catch{return null}}}Qn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends ia{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return dr._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yn.credential(n,r)}catch{return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com";Yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends ia{constructor(){super("github.com")}static credential(e){return dr._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch{return null}}}Xn.GITHUB_SIGN_IN_METHOD="github.com";Xn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj="http://localhost";class Mo extends sa{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return kr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,kr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,kr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:i}=n;return!r||!s||!i||r!==s?null:new Mo(r,i)}static _create(e,n){return new Mo(e,n)}buildRequest(){return{requestUri:mj,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="saml.";class Dd extends Mr{constructor(e){O(e.startsWith(gj),"argument-error"),super(e)}static credentialFromResult(e){return Dd.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Dd.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Mo.fromJSON(e);return O(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Mo._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends ia{constructor(){super("twitter.com")}static credential(e,n){return dr._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Jn.credential(n,r)}catch{return null}}}Jn.TWITTER_SIGN_IN_METHOD="twitter.com";Jn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(t,e){return $r(t,"POST","/v1/accounts:signUp",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await di._fromIdTokenResponse(e,r,s),o=nx(r);return new Sn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=nx(r);return new Sn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function nx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(t){var e;const n=Ye(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Sn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await qu(n,{returnSecureToken:!0}),s=await Sn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends qt{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ad(e,n,r,s)}}function L_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e){const n=K(t);await _h(!0,n,e);const{providerUserInfo:r}=await AA(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=$_(r||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function O0(t,e,n=!1){const r=await jr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Sn._forOperation(t,"link",r)}async function _h(t,e,n){await Fl(e);const r=$_(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";O(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M_(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await jr(t,L_(r,s,e,t),n);O(i.idToken,r,"internal-error");const o=xh(i.idToken);O(o,r,"internal-error");const{sub:a}=o;return O(t.uid===a,r,"user-mismatch"),Sn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ct(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F_(t,e,n=!1){const r="signIn",s=await L_(t,r,e),i=await Sn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Ih(t,e){return F_(Ye(t),e)}async function V_(t,e){const n=K(t);return await _h(!1,n,e.providerId),O0(n,e)}async function U_(t,e){return M_(K(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e){return $r(t,"POST","/v1/accounts:signInWithCustomToken",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wj(t,e){const n=Ye(t),r=await xj(n,{token:e,returnSecureToken:!0}),s=await Sn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?L0._fromServerResponse(e,n):"totpInfo"in n?$0._fromServerResponse(e,n):Ct(e,"internal-error")}}class L0 extends gc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new L0(n)}}class $0 extends gc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new $0(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t,e,n){var r;O(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),O(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(O(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(O(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e,n){var r;const s=Ye(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((r=s._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const o=await bs(s,i,"getOobCode",!0);n&&Eo(s,o,n),await yp(s,o)}else n&&Eo(s,i,n),await yp(s,i).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const a=await bs(s,i,"getOobCode",!0);n&&Eo(s,a,n),await yp(s,a)}else return Promise.reject(o)})}async function _j(t,e,n){await P_(K(t),{oobCode:e,newPassword:n})}async function Ij(t,e){await nj(K(t),{oobCode:e})}async function B_(t,e){const n=K(t),r=await P_(n,{oobCode:e}),s=r.requestType;switch(O(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":O(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":O(r.mfaInfo,n,"internal-error");default:O(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=gc._fromServerResponse(Ye(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function Ej(t,e){const{data:n}=await B_(K(t),e);return n.email}async function Nj(t,e,n){var r;const s=Ye(t),i={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=s._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await bs(s,i,"signUpPassword");o=qu(s,u)}else o=qu(s,i).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=await bs(s,i,"signUpPassword");return qu(s,d)}else return Promise.reject(u)});const a=await o.catch(u=>Promise.reject(u)),l=await Sn._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}function Sj(t,e,n){return Ih(K(t),Os.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(t,e,n){var r;const s=Ye(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(a,l){O(l.handleCodeInApp,s,"argument-error"),l&&Eo(s,a,l)}if(!((r=s._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const a=await bs(s,i,"getOobCode",!0);o(a,n),await vp(s,a)}else o(i,n),await vp(s,i).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await bs(s,i,"getOobCode",!0);o(l,n),await vp(s,l)}else return Promise.reject(a)})}function Tj(t,e){const n=bh.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Cj(t,e,n){const r=K(t),s=Os.credentialWithLink(e,n||Ml());return O(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Ih(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(t,e){return ot(t,"POST","/v1/accounts:createAuthUri",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aj(t,e){const n=A0()?Ml():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await Dj(K(t),r);return s||[]}async function jj(t,e){const n=K(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Eo(n.auth,s,e);const{email:i}=await rj(n.auth,s);i!==t.email&&await t.reload()}async function Rj(t,e,n){const r=K(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Eo(r.auth,i,n);const{email:o}=await sj(r.auth,i);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(t,e){return ot(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=K(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await jr(r,Pj(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Lj(t,e){return z_(K(t),e,null)}function $j(t,e){return z_(K(t),null,e)}async function z_(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await jr(t,O_(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){var e,n;if(!t)return null;const{providerId:r}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=xh(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new No(i,a)}}if(!r)return null;switch(r){case"facebook.com":return new Fj(i,s);case"github.com":return new Vj(i,s);case"google.com":return new Uj(i,s);case"twitter.com":return new Bj(i,s,t.screenName||null);case"custom":case"anonymous":return new No(i,null);default:return new No(i,r,s)}}class No{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class q_ extends No{constructor(e,n,r,s){super(e,n,r),this.username=s}}class Fj extends No{constructor(e,n){super(e,"facebook.com",n)}}class Vj extends q_{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Uj extends No{constructor(e,n){super(e,"google.com",n)}}class Bj extends q_{constructor(e,n,r){super(e,"twitter.com",n,r)}}function zj(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Mj(n)}class si{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new si("enroll",e,n)}static _fromMfaPendingCredential(e){return new si("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return si._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return si._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ye(e),s=n.customData._serverResponse,i=(s.mfaInfo||[]).map(a=>gc._fromServerResponse(r,a));O(s.mfaPendingCredential,r,"internal-error");const o=si._fromMfaPendingCredential(s.mfaPendingCredential);return new M0(o,i,async a=>{const l=await a._process(r,o);delete s.mfaInfo,delete s.mfaPendingCredential;const u=Object.assign(Object.assign({},s),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const d=await Sn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return O(n.user,r,"internal-error"),Sn._forOperation(n.user,n.operationType,u);default:Ct(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function qj(t,e){var n;const r=K(t),s=e;return O(e.customData.operationType,r,"argument-error"),O((n=s.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),M0._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t,e){return ot(t,"POST","/v2/accounts/mfaEnrollment:start",nt(t,e))}function Hj(t,e){return ot(t,"POST","/v2/accounts/mfaEnrollment:finalize",nt(t,e))}function Gj(t,e){return ot(t,"POST","/v2/accounts/mfaEnrollment:withdraw",nt(t,e))}class F0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>gc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new F0(e)}async getSession(){return si._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,s=await this.getSession(),i=await jr(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await jr(this.user,Gj(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:i})=>i!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const xp=new WeakMap;function Kj(t){const e=K(t);return xp.has(e)||xp.set(e,F0._fromUser(e)),xp.get(e)}const jd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jd,"1"),this.storage.removeItem(jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(){const t=Fe();return R0(t)||ra(t)}const Yj=1e3,Xj=10;class H_ extends W_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Qj()&&qA(),this.fallbackToPolling=k_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);zA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Xj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Yj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}H_.type="LOCAL";const V0=H_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends W_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G_.type="SESSION";const _i=G_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Eh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await Jj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=yc("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(){return window}function eR(t){et().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(){return typeof et().WorkerGlobalScope<"u"&&typeof et().importScripts=="function"}async function tR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rR(){return U0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="firebaseLocalStorageDb",sR=1,Rd="firebaseLocalStorage",Q_="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nh(t,e){return t.transaction([Rd],e?"readwrite":"readonly").objectStore(Rd)}function iR(){const t=indexedDB.deleteDatabase(K_);return new vc(t).toPromise()}function Om(){const t=indexedDB.open(K_,sR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Rd,{keyPath:Q_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Rd)?e(r):(r.close(),await iR(),e(await Om()))})})}async function rx(t,e,n){const r=Nh(t,!0).put({[Q_]:e,value:n});return new vc(r).toPromise()}async function oR(t,e){const n=Nh(t,!1).get(e),r=await new vc(n).toPromise();return r===void 0?null:r.value}function sx(t,e){const n=Nh(t,!0).delete(e);return new vc(n).toPromise()}const aR=800,lR=3;class Y_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Om(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return U0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eh._getInstance(rR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tR(),!this.activeServiceWorker)return;this.sender=new Zj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Om();return await rx(e,jd,"1"),await sx(e,jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Nh(s,!1).getAll();return new vc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y_.type="LOCAL";const Bl=Y_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t,e){return ot(t,"POST","/v2/accounts/mfaSignIn:start",nt(t,e))}function uR(t,e){return ot(t,"POST","/v2/accounts/mfaSignIn:finalize",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=500,hR=6e4,vu=1e12;class fR{constructor(e){this.auth=e,this.counter=vu,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new pR(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||vu;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||vu;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||vu;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class pR{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;O(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=mR(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},hR)},dR))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function mR(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=A_("rcb"),gR=new pc(3e4,6e4),yR="https://www.google.com/recaptcha/api.js?";class vR{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=et().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return O(xR(n),e,"argument-error"),this.shouldResolveImmediately(n)&&J1(et().grecaptcha)?Promise.resolve(et().grecaptcha):new Promise((r,s)=>{const i=et().setTimeout(()=>{s(St(e,"network-request-failed"))},gR.get());et()[wp]=()=>{et().clearTimeout(i),delete et()[wp];const a=et().grecaptcha;if(!a||!J1(a)){s(St(e,"internal-error"));return}const l=a.render;a.render=(u,d)=>{const h=l(u,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${yR}?${ta({onload:wp,render:"explicit",hl:n})}`;P0(o).catch(()=>{clearTimeout(i),s(St(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=et().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function xR(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class wR{async load(e){return new fR(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="recaptcha",bR={theme:"light",type:"image"};let _R=class{constructor(e,n=Object.assign({},bR),r){this.parameters=n,this.type=X_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ye(r),this.isInvisible=this.parameters.size==="invisible",O(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof e=="string"?document.getElementById(e):e;O(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wR:new vR,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){O(!this.parameters.sitekey,this.auth,"argument-error"),O(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),O(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=et()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){O(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){O(A0()&&!U0(),this.auth,"internal-error"),await IR(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await WA(this.auth);O(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return O(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function IR(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=fi._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function ER(t,e,n){const r=Ye(t),s=await Sh(r,e,K(n));return new B0(s,i=>Ih(r,i))}async function NR(t,e,n){const r=K(t);await _h(!1,r,"phone");const s=await Sh(r.auth,e,K(n));return new B0(s,i=>V_(r,i))}async function SR(t,e,n){const r=K(t),s=await Sh(r.auth,e,K(n));return new B0(s,i=>U_(r,i))}async function Sh(t,e,n){var r;const s=await n.verify();try{O(typeof s=="string",t,"argument-error"),O(n.type===X_,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i)return O(o.type==="enroll",t,"internal-error"),(await Wj(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{O(o.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return O(a,t,"missing-multi-factor-info"),(await cR(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await lj(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}async function kR(t,e){await O0(K(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ii=class Wu{constructor(e){this.providerId=Wu.PROVIDER_ID,this.auth=Ye(e)}verifyPhoneNumber(e,n){return Sh(this.auth,e,K(n))}static credential(e,n){return fi._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Wu.credentialFromTaggedObject(n)}static credentialFromError(e){return Wu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?fi._fromTokenResponse(n,r):null}};Ii.PROVIDER_ID="phone";Ii.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t,e){return e?dn(e):(O(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends sa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return kr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return kr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TR(t){return F_(t.auth,new z0(t),t.bypassAuthState)}function CR(t){const{auth:e,user:n}=t;return O(n,e,"internal-error"),M_(n,new z0(t),t.bypassAuthState)}async function DR(t){const{auth:e,user:n}=t;return O(n,e,"internal-error"),O0(n,new z0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TR;case"linkViaPopup":case"linkViaRedirect":return DR;case"reauthViaPopup":case"reauthViaRedirect":return CR;default:Ct(this.auth,"internal-error")}}resolve(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new pc(2e3,1e4);async function jR(t,e,n){const r=Ye(t);na(t,e,Mr);const s=$i(r,n);return new br(r,"signInViaPopup",e,s).executeNotNull()}async function RR(t,e,n){const r=K(t);na(r.auth,e,Mr);const s=$i(r.auth,n);return new br(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function PR(t,e,n){const r=K(t);na(r.auth,e,Mr);const s=$i(r.auth,n);return new br(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class br extends J_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,br.currentPopupAction&&br.currentPopupAction.cancel(),br.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return O(e,this.auth,"internal-error"),e}async onExecution(){$n(this.filter.length===1,"Popup operations only handle one event");const e=yc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(St(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,br.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AR.get())};e()}}br.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="pendingRedirect",cl=new Map;class LR extends J_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cl.get(this.auth._key());if(!e){try{const r=await $R(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cl.set(this.auth._key(),e)}return this.bypassAuthState||cl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $R(t,e){const n=eI(e),r=Z_(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function q0(t,e){return Z_(t)._set(eI(e),"true")}function MR(){cl.clear()}function W0(t,e){cl.set(t._key(),e)}function Z_(t){return dn(t._redirectPersistence)}function eI(t){return hi(OR,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e,n){return VR(t,e,n)}async function VR(t,e,n){const r=Ye(t);na(t,e,Mr),await r._initializationPromise;const s=$i(r,n);return await q0(s,r),s._openRedirect(r,e,"signInViaRedirect")}function UR(t,e,n){return BR(t,e,n)}async function BR(t,e,n){const r=K(t);na(r.auth,e,Mr),await r.auth._initializationPromise;const s=$i(r.auth,n);await q0(s,r.auth);const i=await tI(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",i)}function zR(t,e,n){return qR(t,e,n)}async function qR(t,e,n){const r=K(t);na(r.auth,e,Mr),await r.auth._initializationPromise;const s=$i(r.auth,n);await _h(!1,r,e.providerId),await q0(s,r.auth);const i=await tI(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function WR(t,e){return await Ye(t)._initializationPromise,kh(t,e,!1)}async function kh(t,e,n=!1){const r=Ye(t),s=$i(r,e),o=await new LR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function tI(t){const e=yc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=10*60*1e3;class nI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!rI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(St(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ix(e))}saveEventToCache(e){this.cachedEventUids.add(ix(e)),this.lastProcessedEventTime=Date.now()}}function ix(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(t,e={}){return ot(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QR=/^https?/;async function YR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sI(t);for(const n of e)try{if(XR(n))return}catch{}Ct(t,"unauthorized-domain")}function XR(t){const e=Ml(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!QR.test(n))return!1;if(KR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new pc(3e4,6e4);function ox(){const t=et().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ZR(t){return new Promise((e,n)=>{var r,s,i;function o(){ox(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ox(),n(St(t,"network-request-failed"))},timeout:JR.get()})}if(!((s=(r=et().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=et().gapi)===null||i===void 0)&&i.load)o();else{const a=A_("iframefcb");return et()[a]=()=>{gapi.load?o():n(St(t,"network-request-failed"))},P0(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Hu=null,e})}let Hu=null;function e4(t){return Hu=Hu||ZR(t),Hu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=new pc(5e3,15e3),n4="__/auth/iframe",r4="emulator/auth/iframe",s4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function o4(t){const e=t.config;O(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?j0(e,r4):`https://${t.config.authDomain}/${n4}`,r={apiKey:e.apiKey,appName:t.name,v:Ps},s=i4.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ta(r).slice(1)}`}async function a4(t){const e=await e4(t),n=et().gapi;return O(n,t,"internal-error"),e.open({where:document.body,url:o4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s4,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=St(t,"network-request-failed"),a=et().setTimeout(()=>{i(o)},t4.get());function l(){et().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c4=500,u4=600,d4="_blank",h4="http://localhost";class ax{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function f4(t,e,n,r=c4,s=u4){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},l4),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Fe().toLowerCase();n&&(a=I_(u)?d4:n),__(u)&&(e=e||h4,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[p,y])=>`${f}${p}=${y},`,"");if(BA(u)&&a!=="_self")return p4(e||"",a),new ax(null);const h=window.open(e||"",a,d);O(h,t,"popup-blocked");try{h.focus()}catch{}return new ax(h)}function p4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="__/auth/handler",g4="emulator/auth/handler",y4=encodeURIComponent("fac");async function Lm(t,e,n,r,s,i){O(t.config.authDomain,t,"auth-domain-config-required"),O(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ps,eventId:s};if(e instanceof Mr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ZC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof ia){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${y4}=${encodeURIComponent(l)}`:"";return`${v4(t)}?${ta(a).slice(1)}${u}`}function v4({config:t}){return t.emulator?j0(t,g4):`https://${t.authDomain}/${m4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="webStorageSupport";class x4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_i,this._completeRedirectFn=kh,this._overrideRedirectResult=W0}async _openPopup(e,n,r,s){var i;$n((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Lm(e,n,r,Ml(),s);return f4(e,o,yc())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Lm(e,n,r,Ml(),s);return eR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):($n(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await a4(e),r=new nI(e);return n.register("authEvent",s=>(O(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bp,{type:bp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[bp];o!==void 0&&n(!!o),Ct(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return k_()||R0()||ra()}}const w4=x4;class b4{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return er("unexpected MultiFactorSessionType")}}}class H0 extends b4{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new H0(e)}_finalizeEnroll(e,n,r){return Hj(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return uR(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class iI{constructor(){}static assertion(e){return H0._fromCredential(e)}}iI.FACTOR_ID="phone";var lx="@firebase/auth",cx="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function E4(t){ws(new ur("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;O(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T_(t)},u=new XA(r,s,i,l);return JA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ws(new ur("auth-internal",e=>{const n=Ye(e.getProvider("auth").getImmediate());return(r=>new _4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ar(lx,cx,I4(t)),ar(lx,cx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=5*60;zC("authIdTokenMaxAge");E4("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=2e3;async function k4(t,e,n){var r;const{BuildInfo:s}=Ei();$n(e.sessionId,"AuthEvent did not contain a session ID");const i=await j4(e.sessionId),o={};return ra()?o.ibi=s.packageName:mc()?o.apn=s.packageName:Ct(t,"operation-not-supported-in-this-environment"),s.displayName&&(o.appDisplayName=s.displayName),o.sessionId=i,Lm(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function T4(t){const{BuildInfo:e}=Ei(),n={};ra()?n.iosBundleId=e.packageName:mc()?n.androidPackageName=e.packageName:Ct(t,"operation-not-supported-in-this-environment"),await sI(t,n)}function C4(t){const{cordova:e}=Ei();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,UA()?"_blank":"_system","location=yes"),n(s)})})}async function D4(t,e,n){const{cordova:r}=Ei();let s=()=>{};try{await new Promise((i,o)=>{let a=null;function l(){var h;i();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(St(t,"redirect-cancelled-by-user"))},S4))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),mc()&&document.addEventListener("visibilitychange",d,!1),s=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{s()}}function A4(t){var e,n,r,s,i,o,a,l,u,d;const h=Ei();O(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),O(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),O(typeof((i=(s=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||s===void 0?void 0:s.browsertab)===null||i===void 0?void 0:i.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O(typeof((d=(u=h==null?void 0:h.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function j4(t){const e=R4(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function R4(t){if($n(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=20;class O4 extends nI{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function L4(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:F4(),postBody:null,tenantId:t.tenantId,error:St(t,"no-auth-event")}}function $4(t,e){return $m()._set(Mm(t),e)}async function ux(t){const e=await $m()._get(Mm(t));return e&&await $m()._remove(Mm(t)),e}function M4(t,e){var n,r;const s=U4(e);if(s.includes("/__/auth/callback")){const i=Gu(s),o=i.firebaseError?V4(decodeURIComponent(i.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?St(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function F4(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<P4;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function $m(){return dn(V0)}function Mm(t){return hi("authEvent",t.config.apiKey,t.name)}function V4(t){try{return JSON.parse(t)}catch{return null}}function U4(t){const e=Gu(t),n=e.link?decodeURIComponent(e.link):void 0,r=Gu(n).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Gu(s).link||s||r||n||t}function Gu(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return po(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=500;class z4{constructor(){this._redirectPersistence=_i,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=kh,this._overrideRedirectResult=W0}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new O4(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Ct(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,s){A4(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),MR(),await this._originValidation(e);const o=L4(e,r,s);await $4(e,o);const a=await k4(e,o,n),l=await C4(a);return D4(e,i,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=T4(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:s,BuildInfo:i}=Ei(),o=setTimeout(async()=>{await ux(e),n.onEvent(dx())},B4),a=async d=>{clearTimeout(o);const h=await ux(e);let f=null;h&&(d!=null&&d.url)&&(f=M4(h,d.url)),n.onEvent(f||dx())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=s,u=`${i.packageName.toLowerCase()}://`;Ei().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(u)&&a({url:d}),typeof l=="function")try{l(d)}catch(h){console.error(h)}}}}const q4=z4;function dx(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:St("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t,e){Ye(t)._logFramework(e)}var H4="@firebase/auth-compat",G4="0.4.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=1e3;function ul(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function Q4(){return ul()==="http:"||ul()==="https:"}function oI(t=Fe()){return!!((ul()==="file:"||ul()==="ionic:"||ul()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Y4(){return N0()||E0()}function X4(){return t_()&&(document==null?void 0:document.documentMode)===11}function J4(t=Fe()){return/Edge\/\d+/.test(t)}function Z4(t=Fe()){return X4()||J4(t)}function aI(){try{const t=self.localStorage,e=yc();if(t)return t.setItem(e,"1"),t.removeItem(e),Z4()?Ol():!0}catch{return G0()&&Ol()}return!1}function G0(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function _p(){return(Q4()||e_()||oI())&&!Y4()&&aI()&&!G0()}function lI(){return oI()&&typeof document<"u"}async function e3(){return lI()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},K4);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function t3(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn={LOCAL:"local",NONE:"none",SESSION:"session"},ja=O,cI="persistence";function n3(t,e){if(ja(Object.values(cn).includes(e),t,"invalid-persistence-type"),N0()){ja(e!==cn.SESSION,t,"unsupported-persistence-type");return}if(E0()){ja(e===cn.NONE,t,"unsupported-persistence-type");return}if(G0()){ja(e===cn.NONE||e===cn.LOCAL&&Ol(),t,"unsupported-persistence-type");return}ja(e===cn.NONE||aI(),t,"unsupported-persistence-type")}async function Fm(t){await t._initializationPromise;const e=uI(),n=hi(cI,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function r3(t,e){const n=uI();if(!n)return[];const r=hi(cI,t,e);switch(n.getItem(r)){case cn.NONE:return[$o];case cn.LOCAL:return[Bl,_i];case cn.SESSION:return[_i];default:return[]}}function uI(){var t;try{return((t=t3())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=O;class ss{constructor(){this.browserResolver=dn(w4),this.cordovaResolver=dn(q4),this.underlyingResolver=null,this._redirectPersistence=_i,this._completeRedirectFn=kh,this._overrideRedirectResult=W0}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,s)}async _openRedirect(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,s)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return lI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return s3(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await e3();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t){return t.unwrap()}function i3(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(t){return hI(t)}function a3(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new l3(t,qj(t,e))}else if(r){const s=hI(e),i=e;s&&(i.credential=s,i.tenantId=r.tenantId||void 0,i.email=r.email||void 0,i.phoneNumber=r.phoneNumber||void 0)}}function hI(t){const{_tokenResponse:e}=t instanceof qt?t.customData:t;if(!e)return null;if(!(t instanceof qt)&&"temporaryProof"in e&&"phoneNumber"in e)return Ii.credentialFromResult(t);const n=e.providerId;if(!n||n===Aa.PASSWORD)return null;let r;switch(n){case Aa.GOOGLE:r=Yn;break;case Aa.FACEBOOK:r=Qn;break;case Aa.GITHUB:r=Xn;break;case Aa.TWITTER:r=Jn;break;default:const{oauthIdToken:s,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!i&&!o&&!s&&!a?null:a?n.startsWith("saml.")?Mo._create(n,a):dr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:s,accessToken:i}):new Io(n).credential({idToken:s,accessToken:i,rawNonce:l})}return t instanceof qt?r.credentialFromError(t):r.credentialFromResult(t)}function Kt(t,e){return e.catch(n=>{throw n instanceof qt&&a3(t,n),n}).then(n=>{const r=n.operationType,s=n.user;return{operationType:r,credential:o3(n),additionalUserInfo:zj(n),user:_r.getOrCreate(s)}})}async function Vm(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Kt(t,n.confirm(r))}}class l3{constructor(e,n){this.resolver=n,this.auth=i3(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Kt(dI(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._delegate=e,this.multiFactor=Kj(e)}static getOrCreate(e){return _r.USER_MAP.has(e)||_r.USER_MAP.set(e,new _r(e)),_r.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Kt(this.auth,V_(this._delegate,e))}async linkWithPhoneNumber(e,n){return Vm(this.auth,NR(this._delegate,e,n))}async linkWithPopup(e){return Kt(this.auth,PR(this._delegate,e,ss))}async linkWithRedirect(e){return await Fm(Ye(this.auth)),zR(this._delegate,e,ss)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Kt(this.auth,U_(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Vm(this.auth,SR(this._delegate,e,n))}reauthenticateWithPopup(e){return Kt(this.auth,RR(this._delegate,e,ss))}async reauthenticateWithRedirect(e){return await Fm(Ye(this.auth)),UR(this._delegate,e,ss)}sendEmailVerification(e){return jj(this._delegate,e)}async unlink(e){return await vj(this._delegate,e),this}updateEmail(e){return Lj(this._delegate,e)}updatePassword(e){return $j(this._delegate,e)}updatePhoneNumber(e){return kR(this._delegate,e)}updateProfile(e){return Oj(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return Rj(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_r.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=O;class Um{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Ra(r,"invalid-api-key",{appName:e.name}),Ra(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?ss:void 0;this._delegate=n.initialize({options:{persistence:c3(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(_A),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_r.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){ZA(this._delegate,e,n)}applyActionCode(e){return Ij(this._delegate,e)}checkActionCode(e){return B_(this._delegate,e)}confirmPasswordReset(e,n){return _j(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Kt(this._delegate,Nj(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Aj(this._delegate,e)}isSignInWithEmailLink(e){return Tj(this._delegate,e)}async getRedirectResult(){Ra(_p(),this._delegate,"operation-not-supported-in-this-environment");const e=await WR(this._delegate,ss);return e?Kt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){W4(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:s,error:i,complete:o}=hx(e,n,r);return this._delegate.onAuthStateChanged(s,i,o)}onIdTokenChanged(e,n,r){const{next:s,error:i,complete:o}=hx(e,n,r);return this._delegate.onIdTokenChanged(s,i,o)}sendSignInLinkToEmail(e,n){return kj(this._delegate,e,n)}sendPasswordResetEmail(e,n){return bj(this._delegate,e,n||void 0)}async setPersistence(e){n3(this._delegate,e);let n;switch(e){case cn.SESSION:n=_i;break;case cn.LOCAL:n=await dn(Bl)._isAvailable()?Bl:V0;break;case cn.NONE:n=$o;break;default:return Ct("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Kt(this._delegate,yj(this._delegate))}signInWithCredential(e){return Kt(this._delegate,Ih(this._delegate,e))}signInWithCustomToken(e){return Kt(this._delegate,wj(this._delegate,e))}signInWithEmailAndPassword(e,n){return Kt(this._delegate,Sj(this._delegate,e,n))}signInWithEmailLink(e,n){return Kt(this._delegate,Cj(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Vm(this._delegate,ER(this._delegate,e,n))}async signInWithPopup(e){return Ra(_p(),this._delegate,"operation-not-supported-in-this-environment"),Kt(this._delegate,jR(this._delegate,e,ss))}async signInWithRedirect(e){return Ra(_p(),this._delegate,"operation-not-supported-in-this-environment"),await Fm(this._delegate),FR(this._delegate,e,ss)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return Ej(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Um.Persistence=cn;function hx(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const s=r;return{next:o=>s(o&&_r.getOrCreate(o)),error:e,complete:n}}function c3(t,e){const n=r3(t,e);if(typeof self<"u"&&!n.includes(Bl)&&n.push(Bl),typeof window<"u")for(const r of[V0,_i])n.includes(r)||n.push(r);return n.includes($o)||n.push($o),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.providerId="phone",this._delegate=new Ii(dI(Ae.auth()))}static credential(e,n){return Ii.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}K0.PHONE_SIGN_IN_METHOD=Ii.PHONE_SIGN_IN_METHOD;K0.PROVIDER_ID=Ii.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=O;class d3{constructor(e,n,r=Ae.app()){var s;u3((s=r.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new _R(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="auth-compat";function f3(t){t.INTERNAL.registerComponent(new ur(h3,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Um(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ki.EMAIL_SIGNIN,PASSWORD_RESET:Ki.PASSWORD_RESET,RECOVER_EMAIL:Ki.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ki.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ki.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ki.VERIFY_EMAIL}},EmailAuthProvider:Os,FacebookAuthProvider:Qn,GithubAuthProvider:Xn,GoogleAuthProvider:Yn,OAuthProvider:Io,SAMLAuthProvider:Dd,PhoneAuthProvider:K0,PhoneMultiFactorGenerator:iI,RecaptchaVerifier:d3,TwitterAuthProvider:Jn,Auth:Um,AuthCredential:sa,Error:qt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(H4,G4)}f3(Ae);var p3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U,Q0=Q0||{},X=p3||self;function Th(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function xc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function m3(t){return Object.prototype.hasOwnProperty.call(t,Ip)&&t[Ip]||(t[Ip]=++g3)}var Ip="closure_uid_"+(1e9*Math.random()>>>0),g3=0;function y3(t,e,n){return t.call.apply(t.bind,arguments)}function v3(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Lt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Lt=y3:Lt=v3,Lt.apply(null,arguments)}function xu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function pt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Ls(){this.s=this.s,this.o=this.o}var x3=0;Ls.prototype.s=!1;Ls.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),x3!=0)&&m3(this)};Ls.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Y0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function fx(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Th(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function $t(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};var w3=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{X.addEventListener("test",()=>{},e),X.removeEventListener("test",()=>{},e)}catch{}return t}();function zl(t){return/^[\s\xa0]*$/.test(t)}function Ch(){var t=X.navigator;return t&&(t=t.userAgent)?t:""}function Zn(t){return Ch().indexOf(t)!=-1}function X0(t){return X0[" "](t),t}X0[" "]=function(){};function b3(t,e){var n=fP;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var _3=Zn("Opera"),Fo=Zn("Trident")||Zn("MSIE"),pI=Zn("Edge"),Bm=pI||Fo,mI=Zn("Gecko")&&!(Ch().toLowerCase().indexOf("webkit")!=-1&&!Zn("Edge"))&&!(Zn("Trident")||Zn("MSIE"))&&!Zn("Edge"),I3=Ch().toLowerCase().indexOf("webkit")!=-1&&!Zn("Edge");function gI(){var t=X.document;return t?t.documentMode:void 0}var zm;e:{var Ep="",Np=function(){var t=Ch();if(mI)return/rv:([^\);]+)(\)|;)/.exec(t);if(pI)return/Edge\/([\d\.]+)/.exec(t);if(Fo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(I3)return/WebKit\/(\S+)/.exec(t);if(_3)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Np&&(Ep=Np?Np[1]:""),Fo){var Sp=gI();if(Sp!=null&&Sp>parseFloat(Ep)){zm=String(Sp);break e}}zm=Ep}var qm;if(X.document&&Fo){var px=gI();qm=px||parseInt(zm,10)||void 0}else qm=void 0;var E3=qm;function ql(t,e){if($t.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(mI){e:{try{X0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:N3[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ql.$.h.call(this)}}pt(ql,$t);var N3={2:"touch",3:"pen",4:"mouse"};ql.prototype.h=function(){ql.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var wc="closure_listenable_"+(1e6*Math.random()|0),S3=0;function k3(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++S3,this.fa=this.ia=!1}function Dh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function J0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function T3(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function yI(t){const e={};for(const n in t)e[n]=t[n];return e}const mx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vI(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<mx.length;i++)n=mx[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ah(t){this.src=t,this.g={},this.h=0}Ah.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Hm(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new k3(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function Wm(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=fI(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Dh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Hm(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Z0="closure_lm_"+(1e6*Math.random()|0),kp={};function xI(t,e,n,r,s){if(r&&r.once)return bI(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)xI(t,e[i],n,r,s);return null}return n=ny(n),t&&t[wc]?t.O(e,n,xc(r)?!!r.capture:!!r,s):wI(t,e,n,!1,r,s)}function wI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=xc(s)?!!s.capture:!!s,a=ty(t);if(a||(t[Z0]=a=new Ah(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=C3(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)w3||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(II(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function C3(){function t(n){return e.call(t.src,t.listener,n)}const e=D3;return t}function bI(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)bI(t,e[i],n,r,s);return null}return n=ny(n),t&&t[wc]?t.P(e,n,xc(r)?!!r.capture:!!r,s):wI(t,e,n,!0,r,s)}function _I(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)_I(t,e[i],n,r,s);else r=xc(r)?!!r.capture:!!r,n=ny(n),t&&t[wc]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Hm(i,n,r,s),-1<n&&(Dh(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=ty(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Hm(e,n,r,s)),(n=-1<t?e[t]:null)&&ey(n))}function ey(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[wc])Wm(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(II(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ty(e))?(Wm(n,t),n.h==0&&(n.src=null,e[Z0]=null)):Dh(t)}}}function II(t){return t in kp?kp[t]:kp[t]="on"+t}function D3(t,e){if(t.fa)t=!0;else{e=new ql(e,this);var n=t.listener,r=t.la||t.src;t.ia&&ey(t),t=n.call(r,e)}return t}function ty(t){return t=t[Z0],t instanceof Ah?t:null}var Tp="__closure_events_fn_"+(1e9*Math.random()>>>0);function ny(t){return typeof t=="function"?t:(t[Tp]||(t[Tp]=function(e){return t.handleEvent(e)}),t[Tp])}function ft(){Ls.call(this),this.i=new Ah(this),this.S=this,this.J=null}pt(ft,Ls);ft.prototype[wc]=!0;ft.prototype.removeEventListener=function(t,e,n,r){_I(this,t,e,n,r)};function kt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new $t(e,t);else if(e instanceof $t)e.target=e.target||t;else{var s=e;e=new $t(r,t),vI(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=wu(o,r,!0,e)&&s}if(o=e.g=t,s=wu(o,r,!0,e)&&s,s=wu(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=wu(o,r,!1,e)&&s}ft.prototype.N=function(){if(ft.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Dh(n[r]);delete t.g[e],t.h--}}this.J=null};ft.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ft.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function wu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Wm(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var ry=X.JSON.stringify;class A3{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function j3(){var t=sy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class R3{constructor(){this.h=this.g=null}add(e,n){const r=EI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var EI=new A3(()=>new P3,t=>t.reset());class P3{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function O3(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function L3(t){X.setTimeout(()=>{throw t},0)}let Wl,Hl=!1,sy=new R3,NI=()=>{const t=X.Promise.resolve(void 0);Wl=()=>{t.then($3)}};var $3=()=>{for(var t;t=j3();){try{t.h.call(t.g)}catch(n){L3(n)}var e=EI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Hl=!1};function jh(t,e){ft.call(this),this.h=t||1,this.g=e||X,this.j=Lt(this.qb,this),this.l=Date.now()}pt(jh,ft);U=jh.prototype;U.ga=!1;U.T=null;U.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),kt(this,"tick"),this.ga&&(iy(this),this.start()))}};U.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function iy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}U.N=function(){jh.$.N.call(this),iy(this),delete this.g};function oy(t,e,n){if(typeof t=="function")n&&(t=Lt(t,n));else if(t&&typeof t.handleEvent=="function")t=Lt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:X.setTimeout(t,e||0)}function SI(t){t.g=oy(()=>{t.g=null,t.i&&(t.i=!1,SI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class M3 extends Ls{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:SI(this)}N(){super.N(),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gl(t){Ls.call(this),this.h=t,this.g={}}pt(Gl,Ls);var gx=[];function kI(t,e,n,r){Array.isArray(n)||(n&&(gx[0]=n.toString()),n=gx);for(var s=0;s<n.length;s++){var i=xI(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function TI(t){J0(t.g,function(e,n){this.g.hasOwnProperty(n)&&ey(e)},t),t.g={}}Gl.prototype.N=function(){Gl.$.N.call(this),TI(this)};Gl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Rh(){this.g=!0}Rh.prototype.Ea=function(){this.g=!1};function F3(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var d=u[0];u=u[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+u+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function V3(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function mo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+B3(t,n)+(r?" "+r:"")})}function U3(t,e){t.info(function(){return"TIMEOUT: "+e})}Rh.prototype.info=function(){};function B3(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return ry(n)}catch{return e}}var Mi={},yx=null;function Ph(){return yx=yx||new ft}Mi.Ta="serverreachability";function CI(t){$t.call(this,Mi.Ta,t)}pt(CI,$t);function Kl(t){const e=Ph();kt(e,new CI(e))}Mi.STAT_EVENT="statevent";function DI(t,e){$t.call(this,Mi.STAT_EVENT,t),this.stat=e}pt(DI,$t);function Bt(t){const e=Ph();kt(e,new DI(e,t))}Mi.Ua="timingevent";function AI(t,e){$t.call(this,Mi.Ua,t),this.size=e}pt(AI,$t);function bc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){t()},e)}var Oh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},jI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ay(){}ay.prototype.h=null;function vx(t){return t.h||(t.h=t.i())}function RI(){}var _c={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ly(){$t.call(this,"d")}pt(ly,$t);function cy(){$t.call(this,"c")}pt(cy,$t);var Gm;function Lh(){}pt(Lh,ay);Lh.prototype.g=function(){return new XMLHttpRequest};Lh.prototype.i=function(){return{}};Gm=new Lh;function Ic(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Gl(this),this.P=z3,t=Bm?125:void 0,this.V=new jh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new PI}function PI(){this.i=null,this.g="",this.h=!1}var z3=45e3,Km={},Pd={};U=Ic.prototype;U.setTimeout=function(t){this.P=t};function Qm(t,e,n){t.L=1,t.v=Mh(Rr(e)),t.s=n,t.S=!0,OI(t,null)}function OI(t,e){t.G=Date.now(),Ec(t),t.A=Rr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),zI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new PI,t.g=uE(t.l,n?e:null,!t.s),0<t.O&&(t.M=new M3(Lt(t.Pa,t,t.g),t.O)),kI(t.U,t.g,"readystatechange",t.nb),e=t.I?yI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Kl(),F3(t.j,t.u,t.A,t.m,t.W,t.s)}U.nb=function(t){t=t.target;const e=this.M;e&&tr(t)==3?e.l():this.Pa(t)};U.Pa=function(t){try{if(t==this.g)e:{const d=tr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||Bm||this.g&&(this.h.h||this.g.ja()||_x(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Kl(3):Kl(2)),$h(this);var n=this.g.da();this.ca=n;t:if(LI(this)){var r=_x(this.g);t="";var s=r.length,i=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),dl(this);var o="";break t}this.h.i=new X.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,V3(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zl(a)){var u=a;break t}}u=null}if(n=u)mo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ym(this,n);else{this.i=!1,this.o=3,Bt(12),ii(this),dl(this);break e}}this.S?($I(this,d,o),Bm&&this.i&&d==3&&(kI(this.U,this.V,"tick",this.mb),this.V.start())):(mo(this.j,this.m,o,null),Ym(this,o)),d==4&&ii(this),this.i&&!this.J&&(d==4?oE(this.l,this):(this.i=!1,Ec(this)))}else uP(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Bt(12)):(this.o=0,Bt(13)),ii(this),dl(this)}}}catch{}finally{}};function LI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function $I(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=q3(t,n),s==Pd){e==4&&(t.o=4,Bt(14),r=!1),mo(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Km){t.o=4,Bt(15),mo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else mo(t.j,t.m,s,null),Ym(t,s);LI(t)&&s!=Pd&&s!=Km&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Bt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),my(e),e.M=!0,Bt(11))):(mo(t.j,t.m,n,"[Invalid Chunked Response]"),ii(t),dl(t))}U.mb=function(){if(this.g){var t=tr(this.g),e=this.g.ja();this.C<e.length&&($h(this),$I(this,t,e),this.i&&t!=4&&Ec(this))}};function q3(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Pd:(n=Number(e.substring(n,r)),isNaN(n)?Km:(r+=1,r+n>e.length?Pd:(e=e.slice(r,r+n),t.C=r+n,e)))}U.cancel=function(){this.J=!0,ii(this)};function Ec(t){t.Y=Date.now()+t.P,MI(t,t.P)}function MI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=bc(Lt(t.lb,t),e)}function $h(t){t.B&&(X.clearTimeout(t.B),t.B=null)}U.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(U3(this.j,this.A),this.L!=2&&(Kl(),Bt(17)),ii(this),this.o=2,dl(this)):MI(this,this.Y-t)};function dl(t){t.l.H==0||t.J||oE(t.l,t)}function ii(t){$h(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,iy(t.V),TI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ym(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Xm(n.i,t))){if(!t.K&&Xm(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)$d(n),Uh(n);else break e;py(n),Bt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=bc(Lt(n.ib,n),6e3));if(1>=HI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else oi(n,11)}else if((t.K||n.g==t)&&$d(n),!zl(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const d=u[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;i.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(uy(i,i.h),i.h=null))}if(r.F){const x=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(r.Da=x,Se(r.I,r.F,x))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=cE(r,r.J?r.pa:null,r.Y),o.K){GI(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&($h(a),Ec(a)),r.g=o}else sE(r);0<n.j.length&&Bh(n)}else u[0]!="stop"&&u[0]!="close"||oi(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?oi(n,7):fy(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Kl(4)}catch{}}function W3(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Th(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function H3(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Th(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function FI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Th(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=H3(t),r=W3(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var VI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function G3(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function pi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof pi){this.h=t.h,Od(this,t.j),this.s=t.s,this.g=t.g,Ld(this,t.m),this.l=t.l;var e=t.i,n=new Ql;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),xx(this,n),this.o=t.o}else t&&(e=String(t).match(VI))?(this.h=!1,Od(this,e[1]||"",!0),this.s=Ka(e[2]||""),this.g=Ka(e[3]||"",!0),Ld(this,e[4]),this.l=Ka(e[5]||"",!0),xx(this,e[6]||"",!0),this.o=Ka(e[7]||"")):(this.h=!1,this.i=new Ql(null,this.h))}pi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qa(e,wx,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Qa(e,wx,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Qa(n,n.charAt(0)=="/"?Y3:Q3,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Qa(n,J3)),t.join("")};function Rr(t){return new pi(t)}function Od(t,e,n){t.j=n?Ka(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ld(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function xx(t,e,n){e instanceof Ql?(t.i=e,Z3(t.i,t.h)):(n||(e=Qa(e,X3)),t.i=new Ql(e,t.h))}function Se(t,e,n){t.i.set(e,n)}function Mh(t){return Se(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ka(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,K3),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function K3(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var wx=/[#\/\?@]/g,Q3=/[#\?:]/g,Y3=/[#\?]/g,X3=/[#\?@]/g,J3=/#/g;function Ql(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function $s(t){t.g||(t.g=new Map,t.h=0,t.i&&G3(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}U=Ql.prototype;U.add=function(t,e){$s(this),this.i=null,t=oa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function UI(t,e){$s(t),e=oa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function BI(t,e){return $s(t),e=oa(t,e),t.g.has(e)}U.forEach=function(t,e){$s(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};U.ta=function(){$s(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};U.Z=function(t){$s(this);let e=[];if(typeof t=="string")BI(this,t)&&(e=e.concat(this.g.get(oa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};U.set=function(t,e){return $s(this),this.i=null,t=oa(this,t),BI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};U.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function zI(t,e,n){UI(t,e),0<n.length&&(t.i=null,t.g.set(oa(t,e),Y0(n)),t.h+=n.length)}U.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function oa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Z3(t,e){e&&!t.j&&($s(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(UI(this,r),zI(this,s,n))},t)),t.j=e}var eP=class{constructor(t,e){this.g=t,this.map=e}};function qI(t){this.l=t||tP,X.PerformanceNavigationTiming?(t=X.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(X.g&&X.g.Ka&&X.g.Ka()&&X.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tP=10;function WI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function HI(t){return t.h?1:t.g?t.g.size:0}function Xm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function uy(t,e){t.g?t.g.add(e):t.h=e}function GI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}qI.prototype.cancel=function(){if(this.i=KI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function KI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Y0(t.i)}var nP=class{stringify(t){return X.JSON.stringify(t,void 0)}parse(t){return X.JSON.parse(t,void 0)}};function rP(){this.g=new nP}function sP(t,e,n){const r=n||"";try{FI(t,function(s,i){let o=s;xc(s)&&(o=ry(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function iP(t,e){const n=new Rh;if(X.Image){const r=new Image;r.onload=xu(bu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=xu(bu,n,r,"TestLoadImage: error",!1,e),r.onabort=xu(bu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=xu(bu,n,r,"TestLoadImage: timeout",!1,e),X.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function bu(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Nc(t){this.l=t.fc||null,this.j=t.ob||!1}pt(Nc,ay);Nc.prototype.g=function(){return new Fh(this.l,this.j)};Nc.prototype.i=function(t){return function(){return t}}({});function Fh(t,e){ft.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=dy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pt(Fh,ft);var dy=0;U=Fh.prototype;U.open=function(t,e){if(this.readyState!=dy)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Yl(this)};U.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||X).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};U.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sc(this)),this.readyState=dy};U.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Yl(this)),this.g&&(this.readyState=3,Yl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof X.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function QI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}U.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Sc(this):Yl(this),this.readyState==3&&QI(this)}};U.Za=function(t){this.g&&(this.response=this.responseText=t,Sc(this))};U.Ya=function(t){this.g&&(this.response=t,Sc(this))};U.ka=function(){this.g&&Sc(this)};function Sc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Yl(t)}U.setRequestHeader=function(t,e){this.v.append(t,e)};U.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};U.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Yl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Fh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var oP=X.JSON.parse;function qe(t){ft.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=YI,this.L=this.M=!1}pt(qe,ft);var YI="",aP=/^https?$/i,lP=["POST","PUT"];U=qe.prototype;U.Oa=function(t){this.M=t};U.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Gm.g(),this.C=this.u?vx(this.u):vx(Gm),this.g.onreadystatechange=Lt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){bx(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=X.FormData&&t instanceof X.FormData,!(0<=fI(lP,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ZI(this),0<this.B&&((this.L=cP(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Lt(this.ua,this)):this.A=oy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){bx(this,i)}};function cP(t){return Fo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}U.ua=function(){typeof Q0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kt(this,"timeout"),this.abort(8))};function bx(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,XI(t),Vh(t)}function XI(t){t.F||(t.F=!0,kt(t,"complete"),kt(t,"error"))}U.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,kt(this,"complete"),kt(this,"abort"),Vh(this))};U.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vh(this,!0)),qe.$.N.call(this)};U.La=function(){this.s||(this.G||this.v||this.l?JI(this):this.kb())};U.kb=function(){JI(this)};function JI(t){if(t.h&&typeof Q0<"u"&&(!t.C[1]||tr(t)!=4||t.da()!=2)){if(t.v&&tr(t)==4)oy(t.La,0,t);else if(kt(t,"readystatechange"),tr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(VI)[1]||null;!s&&X.self&&X.self.location&&(s=X.self.location.protocol.slice(0,-1)),r=!aP.test(s?s.toLowerCase():"")}n=r}if(n)kt(t,"complete"),kt(t,"success");else{t.m=6;try{var i=2<tr(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",XI(t)}}finally{Vh(t)}}}}function Vh(t,e){if(t.g){ZI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||kt(t,"ready");try{n.onreadystatechange=r}catch{}}}function ZI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(X.clearTimeout(t.A),t.A=null)}U.isActive=function(){return!!this.g};function tr(t){return t.g?t.g.readyState:0}U.da=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}};U.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};U.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),oP(e)}};function _x(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case YI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function uP(t){const e={};t=(t.g&&2<=tr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(zl(t[r]))continue;var n=O3(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}T3(e,function(r){return r.join(", ")})}U.Ia=function(){return this.m};U.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function eE(t){let e="";return J0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function hy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=eE(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Se(t,e,n))}function Pa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function tE(t){this.Ga=0,this.j=[],this.l=new Rh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pa("baseRetryDelayMs",5e3,t),this.hb=Pa("retryDelaySeedMs",1e4,t),this.eb=Pa("forwardChannelMaxRetries",2,t),this.xa=Pa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new qI(t&&t.concurrentRequestLimit),this.Ja=new rP,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}U=tE.prototype;U.ra=8;U.H=1;function fy(t){if(nE(t),t.H==3){var e=t.W++,n=Rr(t.I);if(Se(n,"SID",t.K),Se(n,"RID",e),Se(n,"TYPE","terminate"),kc(t,n),e=new Ic(t,t.l,e),e.L=2,e.v=Mh(Rr(n)),n=!1,X.navigator&&X.navigator.sendBeacon)try{n=X.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&X.Image&&(new Image().src=e.v,n=!0),n||(e.g=uE(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ec(e)}lE(t)}function Uh(t){t.g&&(my(t),t.g.cancel(),t.g=null)}function nE(t){Uh(t),t.u&&(X.clearTimeout(t.u),t.u=null),$d(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&X.clearTimeout(t.m),t.m=null)}function Bh(t){if(!WI(t.i)&&!t.m){t.m=!0;var e=t.Na;Wl||NI(),Hl||(Wl(),Hl=!0),sy.add(e,t),t.C=0}}function dP(t,e){return HI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=bc(Lt(t.Na,t,e),aE(t,t.C)),t.C++,!0)}U.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Ic(this,this.l,t);let i=this.s;if(this.U&&(i?(i=yI(i),vI(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=rE(this,s,e),n=Rr(this.I),Se(n,"RID",t),Se(n,"CVER",22),this.F&&Se(n,"X-HTTP-Session-Id",this.F),kc(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(eE(i)))+"&"+e:this.o&&hy(n,this.o,i)),uy(this.i,s),this.bb&&Se(n,"TYPE","init"),this.P?(Se(n,"$req",e),Se(n,"SID","null"),s.aa=!0,Qm(s,n,null)):Qm(s,n,e),this.H=2}}else this.H==3&&(t?Ix(this,t):this.j.length==0||WI(this.i)||Ix(this))};function Ix(t,e){var n;e?n=e.m:n=t.W++;const r=Rr(t.I);Se(r,"SID",t.K),Se(r,"RID",n),Se(r,"AID",t.V),kc(t,r),t.o&&t.s&&hy(r,t.o,t.s),n=new Ic(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=rE(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),uy(t.i,n),Qm(n,r,e)}function kc(t,e){t.na&&J0(t.na,function(n,r){Se(e,r,n)}),t.h&&FI({},function(n,r){Se(e,r,n)})}function rE(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Lt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=s[l].g;const d=s[l].map;if(u-=i,0>u)i=Math.max(0,s[l].g-100),a=!1;else try{sP(d,o,"req"+u+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function sE(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Wl||NI(),Hl||(Wl(),Hl=!0),sy.add(e,t),t.A=0}}function py(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=bc(Lt(t.Ma,t),aE(t,t.A)),t.A++,!0)}U.Ma=function(){if(this.u=null,iE(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=bc(Lt(this.jb,this),t)}};U.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Bt(10),Uh(this),iE(this))};function my(t){t.B!=null&&(X.clearTimeout(t.B),t.B=null)}function iE(t){t.g=new Ic(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Rr(t.wa);Se(e,"RID","rpc"),Se(e,"SID",t.K),Se(e,"AID",t.V),Se(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Se(e,"TO",t.qa),Se(e,"TYPE","xmlhttp"),kc(t,e),t.o&&t.s&&hy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Mh(Rr(e)),n.s=null,n.S=!0,OI(n,t)}U.ib=function(){this.v!=null&&(this.v=null,Uh(this),py(this),Bt(19))};function $d(t){t.v!=null&&(X.clearTimeout(t.v),t.v=null)}function oE(t,e){var n=null;if(t.g==e){$d(t),my(t),t.g=null;var r=2}else if(Xm(t.i,e))n=e.F,GI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Ph(),kt(r,new AI(r,n)),Bh(t)}else sE(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&dP(t,e)||r==2&&py(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:oi(t,5);break;case 4:oi(t,10);break;case 3:oi(t,6);break;default:oi(t,2)}}}function aE(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function oi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Lt(t.pb,t);n||(n=new pi("//www.google.com/images/cleardot.gif"),X.location&&X.location.protocol=="http"||Od(n,"https"),Mh(n)),iP(n.toString(),r)}else Bt(2);t.H=0,t.h&&t.h.za(e),lE(t),nE(t)}U.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Bt(2)):(this.l.info("Failed to ping google.com"),Bt(1))};function lE(t){if(t.H=0,t.ma=[],t.h){const e=KI(t.i);(e.length!=0||t.j.length!=0)&&(fx(t.ma,e),fx(t.ma,t.j),t.i.i.length=0,Y0(t.j),t.j.length=0),t.h.ya()}}function cE(t,e,n){var r=n instanceof pi?Rr(n):new pi(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ld(r,r.m);else{var s=X.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new pi(null);r&&Od(i,r),e&&(i.g=e),s&&Ld(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Se(r,n,e),Se(r,"VER",t.ra),kc(t,r),r}function uE(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new qe(new Nc({ob:!0})):new qe(t.va),e.Oa(t.J),e}U.isActive=function(){return!!this.h&&this.h.isActive(this)};function dE(){}U=dE.prototype;U.Ba=function(){};U.Aa=function(){};U.za=function(){};U.ya=function(){};U.isActive=function(){return!0};U.Va=function(){};function Md(){if(Fo&&!(10<=Number(E3)))throw Error("Environmental error: no available transport.")}Md.prototype.g=function(t,e){return new pn(t,e)};function pn(t,e){ft.call(this),this.g=new tE(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!zl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new aa(this)}pt(pn,ft);pn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Bt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=cE(t,null,t.Y),Bh(t)};pn.prototype.close=function(){fy(this.g)};pn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=ry(t),t=n);e.j.push(new eP(e.fb++,t)),e.H==3&&Bh(e)};pn.prototype.N=function(){this.g.h=null,delete this.j,fy(this.g),delete this.g,pn.$.N.call(this)};function hE(t){ly.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}pt(hE,ly);function fE(){cy.call(this),this.status=1}pt(fE,cy);function aa(t){this.g=t}pt(aa,dE);aa.prototype.Ba=function(){kt(this.g,"a")};aa.prototype.Aa=function(t){kt(this.g,new hE(t))};aa.prototype.za=function(t){kt(this.g,new fE)};aa.prototype.ya=function(){kt(this.g,"b")};function hP(){this.blockSize=-1}function Mn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}pt(Mn,hP);Mn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Cp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Mn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Cp(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Cp(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Cp(this,r),s=0;break}}this.h=s,this.i+=e};Mn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ye(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var fP={};function gy(t){return-128<=t&&128>t?b3(t,function(e){return new ye([e|0],0>e?-1:0)}):new ye([t|0],0>t?-1:0)}function nr(t){if(isNaN(t)||!isFinite(t))return So;if(0>t)return It(nr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Jm;return new ye(e,0)}function pE(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return It(pE(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=nr(Math.pow(e,8)),r=So,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=nr(Math.pow(e,i)),r=r.R(i).add(nr(o))):(r=r.R(n),r=r.add(nr(o)))}return r}var Jm=4294967296,So=gy(0),Zm=gy(1),Ex=gy(16777216);U=ye.prototype;U.ea=function(){if(wn(this))return-It(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Jm+r)*e,e*=Jm}return t};U.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ir(this))return"0";if(wn(this))return"-"+It(this).toString(t);for(var e=nr(Math.pow(t,6)),n=this,r="";;){var s=Vd(n,e).g;n=Fd(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Ir(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};U.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ir(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function wn(t){return t.h==-1}U.X=function(t){return t=Fd(this,t),wn(t)?-1:Ir(t)?0:1};function It(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ye(n,~t.h).add(Zm)}U.abs=function(){return wn(this)?It(this):this};U.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ye(n,n[n.length-1]&-2147483648?-1:0)};function Fd(t,e){return t.add(It(e))}U.R=function(t){if(Ir(this)||Ir(t))return So;if(wn(this))return wn(t)?It(this).R(It(t)):It(It(this).R(t));if(wn(t))return It(this.R(It(t)));if(0>this.X(Ex)&&0>t.X(Ex))return nr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,_u(n,2*r+2*s),n[2*r+2*s+1]+=i*l,_u(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,_u(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,_u(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ye(n,0)};function _u(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Oa(t,e){this.g=t,this.h=e}function Vd(t,e){if(Ir(e))throw Error("division by zero");if(Ir(t))return new Oa(So,So);if(wn(t))return e=Vd(It(t),e),new Oa(It(e.g),It(e.h));if(wn(e))return e=Vd(t,It(e)),new Oa(It(e.g),e.h);if(30<t.g.length){if(wn(t)||wn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Zm,r=e;0>=r.X(t);)n=Nx(n),r=Nx(r);var s=Qi(n,1),i=Qi(r,1);for(r=Qi(r,2),n=Qi(n,2);!Ir(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Qi(r,1),n=Qi(n,1)}return e=Fd(t,s.R(e)),new Oa(s,e)}for(s=So;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=nr(n),o=i.R(e);wn(o)||0<o.X(t);)n-=r,i=nr(n),o=i.R(e);Ir(i)&&(i=Zm),s=s.add(i),t=Fd(t,o)}return new Oa(s,t)}U.gb=function(t){return Vd(this,t).h};U.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ye(n,this.h&t.h)};U.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ye(n,this.h|t.h)};U.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ye(n,this.h^t.h)};function Nx(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ye(n,t.h)}function Qi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new ye(s,t.h)}Md.prototype.createWebChannel=Md.prototype.g;pn.prototype.send=pn.prototype.u;pn.prototype.open=pn.prototype.m;pn.prototype.close=pn.prototype.close;Oh.NO_ERROR=0;Oh.TIMEOUT=8;Oh.HTTP_ERROR=6;jI.COMPLETE="complete";RI.EventType=_c;_c.OPEN="a";_c.CLOSE="b";_c.ERROR="c";_c.MESSAGE="d";ft.prototype.listen=ft.prototype.O;qe.prototype.listenOnce=qe.prototype.P;qe.prototype.getLastError=qe.prototype.Sa;qe.prototype.getLastErrorCode=qe.prototype.Ia;qe.prototype.getStatus=qe.prototype.da;qe.prototype.getResponseJson=qe.prototype.Wa;qe.prototype.getResponseText=qe.prototype.ja;qe.prototype.send=qe.prototype.ha;qe.prototype.setWithCredentials=qe.prototype.Oa;Mn.prototype.digest=Mn.prototype.l;Mn.prototype.reset=Mn.prototype.reset;Mn.prototype.update=Mn.prototype.j;ye.prototype.add=ye.prototype.add;ye.prototype.multiply=ye.prototype.R;ye.prototype.modulo=ye.prototype.gb;ye.prototype.compare=ye.prototype.X;ye.prototype.toNumber=ye.prototype.ea;ye.prototype.toString=ye.prototype.toString;ye.prototype.getBits=ye.prototype.D;ye.fromNumber=nr;ye.fromString=pE;var pP=function(){return new Md},mP=function(){return Ph()},Dp=Oh,gP=jI,yP=Mi,Sx={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},vP=Nc,Iu=RI,xP=qe,wP=Mn,ko=ye;const kx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new vh("@firebase/firestore");function eg(){return _s.logLevel}function bP(t){_s.setLogLevel(t)}function D(t,...e){if(_s.logLevel<=oe.DEBUG){const n=e.map(yy);_s.debug(`Firestore (${la}): ${t}`,...n)}}function Ge(t,...e){if(_s.logLevel<=oe.ERROR){const n=e.map(yy);_s.error(`Firestore (${la}): ${t}`,...n)}}function Fn(t,...e){if(_s.logLevel<=oe.WARN){const n=e.map(yy);_s.warn(`Firestore (${la}): ${t}`,...n)}}function yy(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(t="Unexpected state"){const e=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: `+t;throw Ge(e),new Error(e)}function G(t,e){t||z()}function _P(t,e){t||z()}function V(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class C extends qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class EP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NP{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ht;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ht,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ht)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(G(typeof r.accessToken=="string"),new mE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return G(e===null||typeof e=="string"),new ut(e)}}class SP{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class kP{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new SP(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CP{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=i=>{i.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.T;return this.T=i.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.I.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.I.getImmediate({optional:!0});i?s(i):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(G(typeof n.token=="string"),this.T=n.token,new TP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=DP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function J(t,e){return t<e?-1:t>e?1:0}function Vo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function yE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new C(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new C(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new C(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Pe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.timestamp=e}static fromTimestamp(e){return new H(e)}static min(){return new H(new Pe(0,0))}static max(){return new H(new Pe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(),r===void 0?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ae extends Xl{construct(e,n,r){return new ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new C(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ae(n)}static emptyPath(){return new ae([])}}const AP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends Xl{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return AP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ke(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new C(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new C(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new C(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new C(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.path=e}static fromPath(e){return new M(ae.fromString(e))}static fromName(e){return new M(ae.fromString(e).popFirst(5))}static empty(){return new M(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new M(new ae(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function tg(t){return t.fields.find(e=>e.kind===2)}function Qs(t){return t.fields.filter(e=>e.kind!==2)}vE.UNKNOWN_ID=-1;class jP{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ud{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ud(0,mn.min())}}function xE(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=H.fromTimestamp(r===1e9?new Pe(n+1,0):new Pe(n,r));return new mn(s,M.empty(),e)}function wE(t){return new mn(t.readTime,t.key,-1)}class mn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mn(H.min(),M.empty(),-1)}static max(){return new mn(H.max(),M.empty(),-1)}}function vy(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _E{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t){if(t.code!==E.FAILED_PRECONDITION||t.message!==bE)throw t;D("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new I((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof I?n:I.resolve(n)}catch(n){return I.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):I.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):I.reject(n)}static resolve(e){return new I((n,r)=>{n(e)})}static reject(e){return new I((n,r)=>{r(e)})}static waitFor(e){return new I((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=I.resolve(!1);for(const r of e)n=n.next(s=>s?I.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new I((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new I((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new ht,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new hl(e,n.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=xy(r.target.error);this.v.reject(new hl(e,s))}}static open(e,n,r,s){try{return new zh(n,e.transaction(s,r))}catch(i){throw new hl(n,i)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new PP(n)}}class Rn{constructor(e,n,r){this.name=e,this.version=n,this.V=r,Rn.S(Fe())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return D("SimpleDb","Removing database:",e),Ys(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ol())return!1;if(Rn.C())return!0;const e=Fe(),n=Rn.S(e),r=0<n&&n<10,s=Rn.N(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.k)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async $(e){return this.db||(D("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new hl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new C(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new C(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new hl(e,o))},s.onupgradeneeded=i=>{D("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.V.O(o,s.transaction,i.oldVersion,this.version).next(()=>{D("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=n=>this.F(n)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.$(e);const a=zh.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(u=>(a.P(),u)).catch(u=>(a.abort(u),I.reject(u))).toPromise();return l.catch(()=>{}),await a.R,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(D("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class RP{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Ys(this.L.delete())}}class hl extends C{constructor(e,n){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Fs(t){return t.name==="IndexedDbTransactionError"}class PP{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(D("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ys(r)}add(e){return D("SimpleDb","ADD",this.store.name,e,e),Ys(this.store.add(e))}get(e){return Ys(this.store.get(e)).next(n=>(n===void 0&&(n=null),D("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return D("SimpleDb","DELETE",this.store.name,e),Ys(this.store.delete(e))}count(){return D("SimpleDb","COUNT",this.store.name),Ys(this.store.count())}j(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const s=this.cursor(r),i=[];return this.W(s,(o,a)=>{i.push(a)}).next(()=>i)}{const s=this.store.getAll(r.range);return new I((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new I((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}J(e,n){D("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}X(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Z(e){const n=this.cursor({});return new I((r,s)=>{n.onerror=i=>{const o=xy(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new I((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new RP(a),u=n(a.primaryKey,a.value,l);if(u instanceof I){const d=u.catch(h=>(l.done(),I.reject(h)));r.push(d)}l.isDone?s():l.K===null?a.continue():a.continue(l.K)}}).next(()=>I.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ys(t){return new I((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=xy(r.target.error);n(s)}})}let Tx=!1;function xy(t){const e=Rn.S(Fe());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new C("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Tx||(Tx=!0,setTimeout(()=>{throw r},0)),r}}return t}class OP{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}et(e){D("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{D("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(n){Fs(n)?D("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Ms(n)}await this.et(6e4)})}}class LP{constructor(e,n){this.localStore=e,this.persistence=n}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.st(n,e))}st(e,n){const r=new Set;let s=n,i=!0;return I.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return D("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}it(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(s,i)).next(a=>(D("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}rt(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=wE(i);vy(o,r)>0&&(r=o)}),new mn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Jt.ct=-1;function Tc(t){return t==null}function Jl(t){return t===0&&1/t==-1/0}function IE(t){return typeof t=="number"&&Number.isInteger(t)&&!Jl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Cx(e)),e=$P(t.get(n),e);return Cx(e)}function $P(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Cx(t){return t+""}function rr(t){const e=t.length;if(G(e>=2),e===2)return G(t.charAt(0)===""&&t.charAt(1)===""),ae.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&z(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:z()}i=o+2}return new ae(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t,e){return[t,Wt(e)]}function EE(t,e,n){return[t,Wt(e),n]}const MP={},FP=["prefixPath","collectionGroup","readTime","documentId"],VP=["prefixPath","collectionGroup","documentId"],UP=["collectionGroup","readTime","prefixPath","documentId"],BP=["canonicalId","targetId"],zP=["targetId","path"],qP=["path","targetId"],WP=["collectionId","parent"],HP=["indexId","uid"],GP=["uid","sequenceNumber"],KP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QP=["indexId","uid","orderedDocumentKey"],YP=["userId","collectionPath","documentId"],XP=["userId","collectionPath","largestBatchId"],JP=["userId","collectionGroup","largestBatchId"],NE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZP=[...NE,"documentOverlays"],SE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kE=SE,e5=[...kE,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends _E{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function mt(t,e){const n=V(t);return Rn.M(n.ht,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eu(this.root,e,this.comparator,!0)}}class Eu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_t.RED,this.left=s??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new _t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return _t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,e,n,r,s){return this}insert(t,e,n){return new _t(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jx(this.data.getIterator())}getIteratorFrom(e){return new jx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ce)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ce(this.comparator);return n.data=e,n}}class jx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yi(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new Ce(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new CE("Invalid base64 string: "+s):s}}(e);return new it(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const n5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(t){if(G(!!t),typeof t=="string"){let e=0;const n=n5.exec(t);if(G(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wy(t){const e=t.mapValue.fields.__previous_value__;return qh(e)?wy(e):e}function Zl(t){const e=Is(t.mapValue.fields.__local_write_time__.timestampValue);return new Pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Ns{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ns("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ns&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qu={nullValue:"NULL_VALUE"};function Ni(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qh(t)?4:DE(t)?9007199254740991:10:z()}function hr(t,e){if(t===e)return!0;const n=Ni(t);if(n!==Ni(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=Is(r.timestampValue),o=Is(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Es(r.bytesValue).isEqual(Es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return ze(r.geoPointValue.latitude)===ze(s.geoPointValue.latitude)&&ze(r.geoPointValue.longitude)===ze(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ze(r.integerValue)===ze(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=ze(r.doubleValue),o=ze(s.doubleValue);return i===o?Jl(i)===Jl(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Vo(t.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(Ax(i)!==Ax(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!hr(i[a],o[a])))return!1;return!0}(t,e);default:return z()}}function ec(t,e){return(t.values||[]).find(n=>hr(n,e))!==void 0}function Ss(t,e){if(t===e)return 0;const n=Ni(t),r=Ni(e);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=ze(s.integerValue||s.doubleValue),a=ze(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Rx(t.timestampValue,e.timestampValue);case 4:return Rx(Zl(t),Zl(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Es(s),a=Es(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=J(o[l],a[l]);if(u!==0)return u}return J(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=J(ze(s.latitude),ze(i.latitude));return o!==0?o:J(ze(s.longitude),ze(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Ss(o[l],a[l]);if(u)return u}return J(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===is.mapValue&&i===is.mapValue)return 0;if(s===is.mapValue)return 1;if(i===is.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let d=0;d<a.length&&d<u.length;++d){const h=J(a[d],u[d]);if(h!==0)return h;const f=Ss(o[a[d]],l[u[d]]);if(f!==0)return f}return J(a.length,u.length)}(t.mapValue,e.mapValue);default:throw z()}}function Rx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);const n=Is(t),r=Is(e),s=J(n.seconds,r.seconds);return s!==0?s:J(n.nanos,r.nanos)}function Uo(t){return rg(t)}function rg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Is(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Es(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,M.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=rg(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${rg(r.fields[a])}`;return i+"}"}(t.mapValue):z();var e,n}function Si(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sg(t){return!!t&&"integerValue"in t}function tc(t){return!!t&&"arrayValue"in t}function Px(t){return!!t&&"nullValue"in t}function Ox(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yu(t){return!!t&&"mapValue"in t}function fl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function s5(t){return"nullValue"in t?Qu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Si(Ns.empty(),M.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:z()}function i5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Si(Ns.empty(),M.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?is:z()}function Lx(t,e){const n=Ss(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function $x(t,e){const n=Ss(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.value=e}static empty(){return new Et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fl(n)}setAll(e){let n=Ke.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=fl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Yu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Yu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Fi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Et(fl(this.value))}}function AE(t){const e=[];return Fi(t.fields,(n,r)=>{const s=new Ke([n]);if(Yu(r)){const i=AE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ke(e,0,H.min(),H.min(),H.min(),Et.empty(),0)}static newFoundDocument(e,n,r,s){return new ke(e,1,n,H.min(),r,s,0)}static newNoDocument(e,n){return new ke(e,2,n,H.min(),H.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new ke(e,3,n,H.min(),H.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ke&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){this.position=e,this.inclusive=n}}function Mx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=M.comparator(M.fromName(o.referenceValue),n.key):r=Ss(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n="asc"){this.field=e,this.dir=n}}function o5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{}class re extends jE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new a5(e,n,r):n==="array-contains"?new u5(e,r):n==="in"?new ME(e,r):n==="not-in"?new d5(e,r):n==="array-contains-any"?new h5(e,r):new re(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new l5(e,r):new c5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ss(n,this.value)):n!==null&&Ni(this.value)===Ni(n)&&this.matchesComparison(Ss(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class me extends jE{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new me(e,n)}matches(e){return Bo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Bo(t){return t.op==="and"}function ig(t){return t.op==="or"}function by(t){return RE(t)&&Bo(t)}function RE(t){for(const e of t.filters)if(e instanceof me)return!1;return!0}function og(t){if(t instanceof re)return t.field.canonicalString()+t.op.toString()+Uo(t.value);if(by(t))return t.filters.map(e=>og(e)).join(",");{const e=t.filters.map(n=>og(n)).join(",");return`${t.op}(${e})`}}function PE(t,e){return t instanceof re?function(n,r){return r instanceof re&&n.op===r.op&&n.field.isEqual(r.field)&&hr(n.value,r.value)}(t,e):t instanceof me?function(n,r){return r instanceof me&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,o)=>s&&PE(i,r.filters[o]),!0):!1}(t,e):void z()}function OE(t,e){const n=t.filters.concat(e);return me.create(n,t.op)}function LE(t){return t instanceof re?function(e){return`${e.field.canonicalString()} ${e.op} ${Uo(e.value)}`}(t):t instanceof me?function(e){return e.op.toString()+" {"+e.getFilters().map(LE).join(" ,")+"}"}(t):"Filter"}class a5 extends re{constructor(e,n,r){super(e,n,r),this.key=M.fromName(r.referenceValue)}matches(e){const n=M.comparator(e.key,this.key);return this.matchesComparison(n)}}class l5 extends re{constructor(e,n){super(e,"in",n),this.keys=$E("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class c5 extends re{constructor(e,n){super(e,"not-in",n),this.keys=$E("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $E(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}class u5 extends re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tc(n)&&ec(n.arrayValue,this.value)}}class ME extends re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ec(this.value.arrayValue,n)}}class d5 extends re{constructor(e,n){super(e,"not-in",n)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ec(this.value.arrayValue,n)}}class h5 extends re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ec(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.dt=null}}function ag(t,e=null,n=[],r=[],s=null,i=null,o=null){return new f5(t,e,n,r,s,i,o)}function ki(t){const e=V(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>og(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Tc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Uo(r)).join(",")),e.dt=n}return e.dt}function Cc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!o5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fx(t.startAt,e.startAt)&&Fx(t.endAt,e.endAt)}function Bd(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function zd(t,e){return t.filters.filter(n=>n instanceof re&&n.field.isEqual(e))}function Vx(t,e,n){let r=Qu,s=!0;for(const i of zd(t,e)){let o=Qu,a=!0;switch(i.op){case"<":case"<=":o=s5(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Qu}Lx({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Lx({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Ux(t,e,n){let r=is,s=!0;for(const i of zd(t,e)){let o=is,a=!0;switch(i.op){case">=":case">":o=i5(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=is}$x({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];$x({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function FE(t,e,n,r,s,i,o,a){return new Fr(t,e,n,r,s,i,o,a)}function ca(t){return new Fr(t)}function Bx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _y(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Wh(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Iy(t){return t.collectionGroup!==null}function mi(t){const e=V(t);if(e.wt===null){e.wt=[];const n=Wh(e),r=_y(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new To(n)),e.wt.push(new To(Ke.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.wt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new To(Ke.keyField(),i))}}}return e.wt}function sn(t){const e=V(t);if(!e._t)if(e.limitType==="F")e._t=ag(e.path,e.collectionGroup,mi(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of mi(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new To(i.field,o))}const r=e.endAt?new ks(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ks(e.startAt.position,e.startAt.inclusive):null;e._t=ag(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e._t}function lg(t,e){e.getFirstInequalityField(),Wh(t);const n=t.filters.concat([e]);return new Fr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qd(t,e,n){return new Fr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dc(t,e){return Cc(sn(t),sn(e))&&t.limitType===e.limitType}function VE(t){return`${ki(sn(t))}|lt:${t.limitType}`}function cg(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>LE(r)).join(", ")}]`),Tc(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Uo(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Uo(r)).join(",")),`Target(${n})`}(sn(t))}; limitType=${t.limitType})`}function Ac(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):M.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of mi(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=Mx(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,mi(n),r)||n.endAt&&!function(s,i,o){const a=Mx(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,mi(n),r))}(t,e)}function UE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BE(t){return(e,n)=>{let r=!1;for(const s of mi(t)){const i=p5(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function p5(t,e,n){const r=t.field.isKeyField()?M.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?Ss(a,l):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return TE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=new Ee(M.comparator);function en(){return m5}const zE=new Ee(M.comparator);function Ya(...t){let e=zE;for(const n of t)e=e.insert(n.key,n);return e}function qE(t){let e=zE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function sr(){return pl()}function WE(){return pl()}function pl(){return new Vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const g5=new Ee(M.comparator),y5=new Ce(M.comparator);function Z(...t){let e=y5;for(const n of t)e=e.add(n);return e}const v5=new Ce(J);function Ey(){return v5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(e)?"-0":e}}function GE(t){return{integerValue:""+t}}function KE(t,e){return IE(e)?GE(e):HE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this._=void 0}}function x5(t,e,n){return t instanceof zo?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&qh(s)&&(s=wy(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Ti?YE(t,e):t instanceof Ci?XE(t,e):function(r,s){const i=QE(r,s),o=zx(i)+zx(r.gt);return sg(i)&&sg(r.gt)?GE(o):HE(r.serializer,o)}(t,e)}function w5(t,e,n){return t instanceof Ti?YE(t,e):t instanceof Ci?XE(t,e):n}function QE(t,e){return t instanceof qo?sg(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class zo extends Hh{}class Ti extends Hh{constructor(e){super(),this.elements=e}}function YE(t,e){const n=JE(e);for(const r of t.elements)n.some(s=>hr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ci extends Hh{constructor(e){super(),this.elements=e}}function XE(t,e){let n=JE(e);for(const r of t.elements)n=n.filter(s=>!hr(s,r));return{arrayValue:{values:n}}}class qo extends Hh{constructor(e,n){super(),this.serializer=e,this.gt=n}}function zx(t){return ze(t.integerValue||t.doubleValue)}function JE(t){return tc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.field=e,this.transform=n}}function b5(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Ti&&r instanceof Ti||n instanceof Ci&&r instanceof Ci?Vo(n.elements,r.elements,hr):n instanceof qo&&r instanceof qo?hr(n.gt,r.gt):n instanceof zo&&r instanceof zo}(t.transform,e.transform)}class _5{constructor(e,n){this.version=e,this.transformResults=n}}class Re{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Re}static exists(e){return new Re(void 0,e)}static updateTime(e){return new Re(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gh{}function ZE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new da(t.key,Re.none()):new ua(t.key,t.data,Re.none());{const n=t.data,r=Et.empty();let s=new Ce(Ke.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Vr(t.key,r,new Zt(s.toArray()),Re.none())}}function I5(t,e,n){t instanceof ua?function(r,s,i){const o=r.value.clone(),a=Wx(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Vr?function(r,s,i){if(!Xu(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=Wx(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(eN(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function ml(t,e,n,r){return t instanceof ua?function(s,i,o,a){if(!Xu(s.precondition,i))return o;const l=s.value.clone(),u=Hx(s.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vr?function(s,i,o,a){if(!Xu(s.precondition,i))return o;const l=Hx(s.fieldTransforms,a,i),u=i.data;return u.setAll(eN(s)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,i,o){return Xu(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function E5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=QE(r.transform,s||null);i!=null&&(n===null&&(n=Et.empty()),n.set(r.field,i))}return n||null}function qx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Vo(n,r,(s,i)=>b5(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ua extends Gh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vr extends Gh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function eN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Wx(t,e,n){const r=new Map;G(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,w5(o,a,n[s]))}return r}function Hx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,x5(i,o,e))}return r}class da extends Gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ny extends Gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&I5(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ml(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ml(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=WE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=ZE(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Z())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(n,r)=>qx(n,r))&&Vo(this.baseMutations,e.baseMutations,(n,r)=>qx(n,r))}}class ky{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){G(e.mutations.length===r.length);let s=g5;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ky(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,ie;function tN(t){switch(t){default:return z();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function nN(t){if(t===void 0)return Ge("GRPC error has no .code"),E.UNKNOWN;switch(t){case Ze.OK:return E.OK;case Ze.CANCELLED:return E.CANCELLED;case Ze.UNKNOWN:return E.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return E.INTERNAL;case Ze.UNAVAILABLE:return E.UNAVAILABLE;case Ze.UNAUTHENTICATED:return E.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case Ze.NOT_FOUND:return E.NOT_FOUND;case Ze.ALREADY_EXISTS:return E.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return E.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case Ze.ABORTED:return E.ABORTED;case Ze.OUT_OF_RANGE:return E.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return E.UNIMPLEMENTED;case Ze.DATA_LOSS:return E.DATA_LOSS;default:return z()}}(ie=Ze||(Ze={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Nu}static getOrCreateInstance(){return Nu===null&&(Nu=new Cy),Nu}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Nu=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5=new ko([4294967295,4294967295],0);function Gx(t){const e=rN().encode(t),n=new wP;return n.update(e),new Uint8Array(n.digest())}function Kx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ko([n,r],0),new ko([s,i],0)]}class Dy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xa(`Invalid padding: ${n}`);if(r<0)throw new Xa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=ko.fromNumber(this.It)}Et(e,n,r){let s=e.add(n.multiply(ko.fromNumber(r)));return s.compare(S5)===1&&(s=new ko([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=Gx(e),[r,s]=Kx(n);for(let i=0;i<this.hashCount;i++){const o=this.Et(r,s,i);if(!this.At(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Dy(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=Gx(e),[r,s]=Kx(n);for(let i=0;i<this.hashCount;i++){const o=this.Et(r,s,i);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Pc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rc(H.min(),s,new Ee(J),en(),Z())}}class Pc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pc(r,n,Z(),Z(),Z())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n,r,s){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=s}}class sN{constructor(e,n){this.targetId=e,this.Vt=n}}class iN{constructor(e,n,r=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Qx{constructor(){this.St=0,this.Dt=Xx(),this.Ct=it.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Z(),n=Z(),r=Z();return this.Dt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:z()}}),new Pc(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=Xx()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class k5{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=en(),this.zt=Yx(),this.Wt=new Ee(J)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,s)=>{this.te(s)&&n(s)})}ne(e){var n;const r=e.targetId,s=e.Vt.count,i=this.se(r);if(i){const o=i.target;if(Bd(o))if(s===0){const a=new M(o.path);this.Yt(r,a,ke.newNoDocument(a,H.min()))}else G(s===1);else{const a=this.ie(r);if(a!==s){const l=this.re(e,a);if(l!==0){this.ee(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,u)}(n=Cy.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,d,h){var f,p,y,x,w,g;const m={localCacheCount:d,existenceFilterCount:h.count},v=h.unchangedNames;return v&&(m.bloomFilter={applied:u===0,hashCount:(f=v==null?void 0:v.hashCount)!==null&&f!==void 0?f:0,bitmapLength:(x=(y=(p=v==null?void 0:v.bits)===null||p===void 0?void 0:p.bitmap)===null||y===void 0?void 0:y.length)!==null&&x!==void 0?x:0,padding:(g=(w=v==null?void 0:v.bits)===null||w===void 0?void 0:w.padding)!==null&&g!==void 0?g:0}),m}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=r;let l,u;try{l=Es(i).toUint8Array()}catch(d){if(d instanceof CE)return Fn("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw d}try{u=new Dy(l,o,a)}catch(d){return Fn(d instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",d),1}return u.It===0?1:s!==n-this.oe(e.targetId,u)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(i=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;n.vt(a)||(this.Yt(e,i,null),s++)}),s}ce(e){const n=new Map;this.Qt.forEach((i,o)=>{const a=this.se(o);if(a){if(i.current&&Bd(a.target)){const l=new M(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,ke.newNoDocument(l,e))}i.Mt&&(n.set(o,i.Ot()),i.Ft())}});let r=Z();this.zt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.se(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.jt.forEach((i,o)=>o.setReadTime(e));const s=new Rc(e,n,this.Wt,this.jt,r);return this.jt=en(),this.zt=Yx(),this.Wt=new Ee(J),s}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,n)?s.Bt(n,1):s.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new Qx,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Ce(J),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Qx),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Yx(){return new Ee(M.comparator)}function Xx(){return new Ee(M.comparator)}const T5=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),C5=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),D5=(()=>({and:"AND",or:"OR"}))();class A5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ug(t,e){return t.useProto3Json||Tc(e)?e:{value:e}}function Wo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j5(t,e){return Wo(t,e.toTimestamp())}function Qe(t){return G(!!t),H.fromTimestamp(function(e){const n=Is(e);return new Pe(n.seconds,n.nanos)}(t))}function Ay(t,e){return function(n){return new ae(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function aN(t){const e=ae.fromString(t);return G(gN(e)),e}function nc(t,e){return Ay(t.databaseId,e.path)}function lr(t,e){const n=aN(e);if(n.get(1)!==t.databaseId.projectId)throw new C(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new C(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(cN(n))}function dg(t,e){return Ay(t.databaseId,e)}function lN(t){const e=aN(t);return e.length===4?ae.emptyPath():cN(e)}function rc(t){return new ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cN(t){return G(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Jx(t,e,n){return{name:nc(t,e),fields:n.value.mapValue.fields}}function uN(t,e,n){const r=lr(t,e.name),s=Qe(e.updateTime),i=e.createTime?Qe(e.createTime):H.min(),o=new Et({mapValue:{fields:e.fields}}),a=ke.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function R5(t,e){return"found"in e?function(n,r){G(!!r.found),r.found.name,r.found.updateTime;const s=lr(n,r.found.name),i=Qe(r.found.updateTime),o=r.found.createTime?Qe(r.found.createTime):H.min(),a=new Et({mapValue:{fields:r.found.fields}});return ke.newFoundDocument(s,i,o,a)}(t,e):"missing"in e?function(n,r){G(!!r.missing),G(!!r.readTime);const s=lr(n,r.missing),i=Qe(r.readTime);return ke.newNoDocument(s,i)}(t,e):z()}function P5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(G(u===void 0||typeof u=="string"),it.fromBase64String(u||"")):(G(u===void 0||u instanceof Uint8Array),it.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?E.UNKNOWN:nN(l.code);return new C(u,l.message||"")}(o);n=new iN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=lr(t,r.document.name),i=Qe(r.document.updateTime),o=r.document.createTime?Qe(r.document.createTime):H.min(),a=new Et({mapValue:{fields:r.document.fields}}),l=ke.newFoundDocument(s,i,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Ju(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=lr(t,r.document),i=r.readTime?Qe(r.readTime):H.min(),o=ke.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ju([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=lr(t,r.document),i=r.removedTargetIds||[];n=new Ju([],i,s,null)}else{if(!("filter"in e))return z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new N5(s,i),a=r.targetId;n=new sN(a,o)}}return n}function sc(t,e){let n;if(e instanceof ua)n={update:Jx(t,e.key,e.value)};else if(e instanceof da)n={delete:nc(t,e.key)};else if(e instanceof Vr)n={update:Jx(t,e.key,e.data),updateMask:V5(e.fieldMask)};else{if(!(e instanceof Ny))return z();n={verify:nc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof zo)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ti)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ci)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof qo)return{fieldPath:i.field.canonicalString(),increment:o.gt};throw z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:j5(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:z()}(t,e.precondition)),n}function hg(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Re.updateTime(Qe(s.updateTime)):s.exists!==void 0?Re.exists(s.exists):Re.none()}(e.currentDocument):Re.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let a=null;if("setToServerValue"in o)G(o.setToServerValue==="REQUEST_TIME"),a=new zo;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];a=new Ti(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];a=new Ci(u)}else"increment"in o?a=new qo(i,o.increment):z();const l=Ke.fromServerFormat(o.fieldPath);return new jc(l,a)}(t,s)):[];if(e.update){e.update.name;const s=lr(t,e.update.name),i=new Et({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new Zt(l.map(u=>Ke.fromServerFormat(u)))}(e.updateMask);return new Vr(s,i,o,n,r)}return new ua(s,i,n,r)}if(e.delete){const s=lr(t,e.delete);return new da(s,n)}if(e.verify){const s=lr(t,e.verify);return new Ny(s,n)}return z()}function O5(t,e){return t&&t.length>0?(G(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?Qe(r.updateTime):Qe(s);return i.isEqual(H.min())&&(i=Qe(s)),new _5(i,r.transformResults||[])}(n,e))):[]}function dN(t,e){return{documents:[dg(t,e.path)]}}function hN(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=dg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=dg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return mN(me.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:Ji(d.field),direction:$5(d.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=ug(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function fN(t){let e=lN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){G(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(d){const h=pN(d);return h instanceof me&&by(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(d=>function(h){return new To(Zi(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(d)));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Tc(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new ks(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const h=!d.before,f=d.values||[];return new ks(f,h)}(n.endAt)),FE(e,s,o,i,a,"F",l,u)}function L5(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pN(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Zi(e.unaryFilter.field);return re.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Zi(e.unaryFilter.field);return re.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zi(e.unaryFilter.field);return re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Zi(e.unaryFilter.field);return re.create(i,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(t):t.fieldFilter!==void 0?function(e){return re.create(Zi(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return me.create(e.compositeFilter.filters.map(n=>pN(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return z()}}(e.compositeFilter.op))}(t):z()}function $5(t){return T5[t]}function M5(t){return C5[t]}function F5(t){return D5[t]}function Ji(t){return{fieldPath:t.canonicalString()}}function Zi(t){return Ke.fromServerFormat(t.fieldPath)}function mN(t){return t instanceof re?function(e){if(e.op==="=="){if(Ox(e.value))return{unaryFilter:{field:Ji(e.field),op:"IS_NAN"}};if(Px(e.value))return{unaryFilter:{field:Ji(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Ox(e.value))return{unaryFilter:{field:Ji(e.field),op:"IS_NOT_NAN"}};if(Px(e.value))return{unaryFilter:{field:Ji(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ji(e.field),op:M5(e.op),value:e.value}}}(t):t instanceof me?function(e){const n=e.getFilters().map(r=>mN(r));return n.length===1?n[0]:{compositeFilter:{op:F5(e.op),filters:n}}}(t):z()}function V5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r,s,i=H.min(),o=H.min(),a=it.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.fe=e}}function U5(t,e){let n;if(e.document)n=uN(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=M.fromSegments(e.noDocument.path),s=Ai(e.noDocument.readTime);n=ke.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{const r=M.fromSegments(e.unknownDocument.path),s=Ai(e.unknownDocument.version);n=ke.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(r){const s=new Pe(r[0],r[1]);return H.fromTimestamp(s)}(e.readTime)),n}function Zx(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Wd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:nc(s,i.key),fields:i.data.value.mapValue.fields,updateTime:Wo(s,i.version.toTimestamp()),createTime:Wo(s,i.createTime.toTimestamp())}}(t.fe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Di(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:n.path.toArray(),version:Di(e.version)}}return r}function Wd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Di(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ai(t){const e=new Pe(t.seconds,t.nanoseconds);return H.fromTimestamp(e)}function Xs(t,e){const n=(e.baseMutations||[]).map(i=>hg(t.fe,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>hg(t.fe,i)),s=Pe.fromMillis(e.localWriteTimeMs);return new Sy(e.batchId,s,n,r)}function Ja(t){const e=Ai(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ai(t.lastLimboFreeSnapshotVersion):H.min();let r;var s;return t.query.documents!==void 0?(G((s=t.query).documents.length===1),r=sn(ca(lN(s.documents[0])))):r=function(i){return sn(fN(i))}(t.query),new Er(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,it.fromBase64String(t.resumeToken))}function vN(t,e){const n=Di(e.snapshotVersion),r=Di(e.lastLimboFreeSnapshotVersion);let s;s=Bd(e.target)?dN(t.fe,e.target):hN(t.fe,e.target);const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ki(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function jy(t){const e=fN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qd(e,e.limit,"L"):e}function Ap(t,e){return new Ty(e.largestBatchId,hg(t.fe,e.overlayMutation))}function ew(t,e){const n=e.path.lastSegment();return[t,Wt(e.path.popLast()),n]}function tw(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Di(r.readTime),documentKey:Wt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{getBundleMetadata(e,n){return nw(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Ai(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return nw(e).put({bundleId:(r=n).id,createTime:Di(Qe(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return rw(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:jy(s.bundledQuery),readTime:Ai(s.readTime)};var s})}saveNamedQuery(e,n){return rw(e).put(function(r){return{name:r.name,readTime:Di(Qe(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function nw(t){return mt(t,"bundles")}function rw(t){return mt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){const r=n.uid||"";return new Kh(e,r)}getOverlay(e,n){return La(e).get(ew(this.userId,n)).next(r=>r?Ap(this.serializer,r):null)}getOverlays(e,n){const r=sr();return I.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Ty(n,o);s.push(this.we(e,a))}),I.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Wt(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(La(e).J("collectionPathOverlayIndex",a))}),I.waitFor(i)}getOverlaysForCollection(e,n,r){const s=sr(),i=Wt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return La(e).j("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Ap(this.serializer,l);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=sr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return La(e).X({index:"collectionGroupOverlayIndex",range:a},(l,u,d)=>{const h=Ap(this.serializer,u);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}we(e,n){return La(e).put(function(r,s,i){const[o,a,l]=ew(s,i.mutation.key);return{userId:s,collectionPath:a,documentId:l,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:sc(r.fe,i.mutation)}}(this.serializer,this.userId,n))}}function La(t){return mt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(ze(e.integerValue));else if("doubleValue"in e){const r=ze(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),Jl(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),typeof r=="string"?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Es(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?DE(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):z()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const s of Object.keys(r))this.Te(s,n),this.me(r[s],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const s of r)this.me(s,n)}ve(e,n){this.ye(n,37),M.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}Js.Ve=new Js;function z5(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function sw(t){const e=64-function(n){let r=0;for(let s=0;s<8;++s){const i=z5(255&n[s]);if(r+=i,i!==8)break}return r}(t);return Math.ceil(e/8)}class q5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.De(r.value),r=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ne(r.value),r=n.next();this.ke()}Me(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=n.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=n.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const n=this.Fe(e),r=sw(n);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Le(e){const n=this.Fe(e),r=sw(n);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}De(e){const n=255&e;n===0?(this.Ue(0),this.Ue(255)):n===255?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;n===0?(this.Ge(0),this.Ge(255)):n===255?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class W5{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class H5{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class $a{constructor(){this.je=new q5,this.ze=new W5(this.je),this.We=new H5(this.je)}seed(e){this.je.seed(e)}He(e){return e===0?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zs(this.indexId,this.documentKey,this.arrayValue,r)}}function Gr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=iw(t.arrayValue,e.arrayValue),n!==0?n:(n=iw(t.directionalValue,e.directionalValue),n!==0?n:M.comparator(t.documentKey,e.documentKey)))}function iw(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const r=n;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){G(e.collectionGroup===this.collectionId);const n=tg(e);if(n!==void 0&&!this.en(n))return!1;const r=Qs(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.en(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Ze!==void 0){if(!s.has(this.Ze.field.canonicalString())){const a=r[i];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[o++],a))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.Ye.length||!this.sn(this.Ye[o++],a))return!1}return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t){var e,n;if(G(t instanceof re||t instanceof me),t instanceof re){if(t instanceof ME){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>re.create(t.field,"==",i)))||[];return me.create(s,"or")}return t}const r=t.filters.map(s=>xN(s));return me.create(r,t.op)}function K5(t){if(t.getFilters().length===0)return[];const e=mg(xN(t));return G(wN(e)),fg(e)||pg(e)?[e]:e.getFilters()}function fg(t){return t instanceof re}function pg(t){return t instanceof me&&by(t)}function wN(t){return fg(t)||pg(t)||function(e){if(e instanceof me&&ig(e)){for(const n of e.getFilters())if(!fg(n)&&!pg(n))return!1;return!0}return!1}(t)}function mg(t){if(G(t instanceof re||t instanceof me),t instanceof re)return t;if(t.filters.length===1)return mg(t.filters[0]);const e=t.filters.map(r=>mg(r));let n=me.create(e,t.op);return n=Hd(n),wN(n)?n:(G(n instanceof me),G(Bo(n)),G(n.filters.length>1),n.filters.reduce((r,s)=>Ry(r,s)))}function Ry(t,e){let n;return G(t instanceof re||t instanceof me),G(e instanceof re||e instanceof me),n=t instanceof re?e instanceof re?function(r,s){return me.create([r,s],"and")}(t,e):ow(t,e):e instanceof re?ow(e,t):function(r,s){if(G(r.filters.length>0&&s.filters.length>0),Bo(r)&&Bo(s))return OE(r,s.getFilters());const i=ig(r)?r:s,o=ig(r)?s:r,a=i.filters.map(l=>Ry(l,o));return me.create(a,"or")}(t,e),Hd(n)}function ow(t,e){if(Bo(e))return OE(e,t.getFilters());{const n=e.filters.map(r=>Ry(t,r));return me.create(n,"or")}}function Hd(t){if(G(t instanceof re||t instanceof me),t instanceof re)return t;const e=t.getFilters();if(e.length===1)return Hd(e[0]);if(RE(t))return t;const n=e.map(s=>Hd(s)),r=[];return n.forEach(s=>{s instanceof re?r.push(s):s instanceof me&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:me.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this.rn=new Py}addToCollectionParentIndex(e,n){return this.rn.add(n),I.resolve()}getCollectionParents(e,n){return I.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return I.resolve()}deleteFieldIndex(e,n){return I.resolve()}getDocumentsMatchingTarget(e,n){return I.resolve(null)}getIndexType(e,n){return I.resolve(0)}getFieldIndexes(e,n){return I.resolve([])}getNextCollectionGroupToUpdate(e){return I.resolve(null)}getMinOffset(e,n){return I.resolve(mn.min())}getMinOffsetFromCollectionGroup(e,n){return I.resolve(mn.min())}updateCollectionGroup(e,n,r){return I.resolve()}updateIndexEntries(e,n){return I.resolve()}}class Py{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ce(ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ce(ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=new Uint8Array(0);class Y5{constructor(e,n){this.user=e,this.databaseId=n,this.on=new Py,this.un=new Vs(r=>ki(r),(r,s)=>Cc(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const i={collectionId:r,parent:Wt(s)};return aw(e).put(i)}return I.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[yE(n),""],!1,!0);return aw(e).j(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(rr(o.parent))}return r})}addFieldIndex(e,n){const r=ku(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Fa(e);return i.next(a=>{o.put(tw(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=ku(e),s=Fa(e),i=Ma(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Ma(e);let s=!0;const i=new Map;return I.forEach(this.cn(n),o=>this.an(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Z();const a=[];return I.forEach(i,(l,u)=>{var d;D("IndexedDbIndexManager",`Using index ${d=l,`id=${d.indexId}|cg=${d.collectionGroup}|f=${d.fields.map(v=>`${v.fieldPath}:${v.kind}`).join(",")}`} to execute ${ki(n)}`);const h=function(v,b){const S=tg(b);if(S===void 0)return null;for(const _ of zd(v,S.fieldPath))switch(_.op){case"array-contains-any":return _.value.arrayValue.values||[];case"array-contains":return[_.value]}return null}(u,l),f=function(v,b){const S=new Map;for(const _ of Qs(b))for(const T of zd(v,_.fieldPath))switch(T.op){case"==":case"in":S.set(_.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return S.set(_.fieldPath.canonicalString(),T.value),Array.from(S.values())}return null}(u,l),p=function(v,b){const S=[];let _=!0;for(const T of Qs(b)){const j=T.kind===0?Vx(v,T.fieldPath,v.startAt):Ux(v,T.fieldPath,v.startAt);S.push(j.value),_&&(_=j.inclusive)}return new ks(S,_)}(u,l),y=function(v,b){const S=[];let _=!0;for(const T of Qs(b)){const j=T.kind===0?Ux(v,T.fieldPath,v.endAt):Vx(v,T.fieldPath,v.endAt);S.push(j.value),_&&(_=j.inclusive)}return new ks(S,_)}(u,l),x=this.hn(l,u,p),w=this.hn(l,u,y),g=this.ln(l,u,f),m=this.fn(l.indexId,h,x,p.inclusive,w,y.inclusive,g);return I.forEach(m,v=>r.H(v,n.limit).next(b=>{b.forEach(S=>{const _=M.fromSegments(S.documentKey);o.has(_)||(o=o.add(_),a.push(_))})}))}).next(()=>a)}return I.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=K5(me.create(e.filters,"and")).map(r=>ag(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),u=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.dn(n[h/u]):Su,p=this.wn(e,f,r[h%u],s),y=this._n(e,f,i[h%u],o),x=a.map(w=>this.wn(e,f,w,!0));d.push(...this.createRange(p,y,x))}return d}wn(e,n,r,s){const i=new Zs(e,M.empty(),n,r);return s?i:i.Je()}_n(e,n,r,s){const i=new Zs(e,M.empty(),n,r);return s?i.Je():i}an(e,n){const r=new G5(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.cn(n);return I.forEach(s,i=>this.an(e,i).next(o=>{o?r!==0&&o.fields.length<function(a){let l=new Ce(Ke.comparator),u=!1;for(const d of a.filters)for(const h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(const d of a.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(i)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&s.length>1&&r===2?1:r)}mn(e,n){const r=new $a;for(const s of Qs(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.He(s.kind);Js.Ve._e(i,o)}return r.Qe()}dn(e){const n=new $a;return Js.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const r=new $a;return Js.Ve._e(Si(this.databaseId,n),r.He(function(s){const i=Qs(s);return i.length===0?0:i[i.length-1].kind}(e))),r.Qe()}ln(e,n,r){if(r===null)return[];let s=[];s.push(new $a);let i=0;for(const o of Qs(e)){const a=r[i++];for(const l of s)if(this.yn(n,o.fieldPath)&&tc(a))s=this.pn(s,o,a);else{const u=l.He(o.kind);Js.Ve._e(a,u)}}return this.In(s)}hn(e,n,r){return this.ln(e,n,r.position)}In(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Qe();return n}pn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new $a;l.seed(a.Qe()),Js.Ve._e(o,l.He(n.kind)),i.push(l)}return i}yn(e,n){return!!e.filters.find(r=>r instanceof re&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=ku(e),s=Fa(e);return(n?r.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.j()).next(i=>{const o=[];return I.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(u,d){const h=d?new Ud(d.sequenceNumber,new mn(Ai(d.readTime),new M(rr(d.documentKey)),d.largestBatchId)):Ud.empty(),f=u.fields.map(([p,y])=>new jP(Ke.fromServerFormat(p),y));return new vE(u.indexId,u.collectionGroup,f,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:J(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=ku(e),i=Fa(e);return this.Tn(e).next(o=>s.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>I.forEach(a,l=>i.put(tw(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return I.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?I.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),I.forEach(a,l=>this.En(e,s,l).next(u=>{const d=this.An(i,l);return u.isEqual(d)?I.resolve():this.vn(e,i,l,u,d)}))))})}Rn(e,n,r,s){return Ma(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,r,s){return Ma(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,n.key),n.key.path.toArray()])}En(e,n,r){const s=Ma(e);let i=new Ce(Gr);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,n)])},(o,a)=>{i=i.add(new Zs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}An(e,n){let r=new Ce(Gr);const s=this.mn(n,e);if(s==null)return r;const i=tg(n);if(i!=null){const o=e.data.field(i.fieldPath);if(tc(o))for(const a of o.arrayValue.values||[])r=r.add(new Zs(n.indexId,e.key,this.dn(a),s))}else r=r.add(new Zs(n.indexId,e.key,Su,s));return r}vn(e,n,r,s,i){D("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,u,d,h){const f=a.getIterator(),p=l.getIterator();let y=Yi(f),x=Yi(p);for(;y||x;){let w=!1,g=!1;if(y&&x){const m=u(y,x);m<0?g=!0:m>0&&(w=!0)}else y!=null?g=!0:w=!0;w?(d(x),x=Yi(p)):g?(h(y),y=Yi(f)):(y=Yi(f),x=Yi(p))}}(s,i,Gr,a=>{o.push(this.Rn(e,n,r,a))},a=>{o.push(this.Pn(e,n,r,a))}),I.waitFor(o)}Tn(e){let n=1;return Fa(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Gr(o,a)).filter((o,a,l)=>!a||Gr(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Gr(o,e),l=Gr(o,n);if(a===0)s[0]=e.Je();else if(a>0&&l<0)s.push(o),s.push(o.Je());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.bn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Su,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Su,[]];i.push(IDBKeyRange.bound(a,l))}return i}bn(e,n){return Gr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(lw)}getMinOffset(e,n){return I.mapArray(this.cn(n),r=>this.an(e,r).next(s=>s||z())).next(lw)}}function aw(t){return mt(t,"collectionParents")}function Ma(t){return mt(t,"indexEntries")}function ku(t){return mt(t,"indexConfiguration")}function Fa(t){return mt(t,"indexState")}function lw(t){G(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;vy(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new mn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{G(a===1)}));const u=[];for(const d of n.mutations){const h=EE(e,d.key.path,n.batchId);i.push(s.delete(h)),u.push(d.key)}return I.waitFor(i).next(()=>u)}function Gd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw z();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(41943040,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class Qh{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,n,r,s){G(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Qh(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kr(e).X({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=eo(e),o=Kr(e);return o.add({}).next(a=>{G(typeof a=="number");const l=new Sy(a,n,r,s),u=function(f,p,y){const x=y.baseMutations.map(g=>sc(f.fe,g)),w=y.mutations.map(g=>sc(f.fe,g));return{userId:p,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:x,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new Ce((f,p)=>J(f.canonicalString(),p.canonicalString()));for(const f of s){const p=EE(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(u)),d.push(i.put(p,MP))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Vn[a]=l.keys()}),I.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Kr(e).get(n).next(r=>r?(G(r.userId===this.userId),Xs(this.serializer,r)):null)}Sn(e,n){return this.Vn[n]?I.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Vn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Kr(e).X({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(G(a.batchId>=r),i=Xs(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Kr(e).X({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kr(e).j("userMutationsIndex",n).next(r=>r.map(s=>Xs(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Ku(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return eo(e).X({range:s},(o,a,l)=>{const[u,d,h]=o,f=rr(d);if(u===this.userId&&n.path.isEqual(f))return Kr(e).get(h).next(p=>{if(!p)throw z();G(p.userId===this.userId),i.push(Xs(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(J);const s=[];return n.forEach(i=>{const o=Ku(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=eo(e).X({range:a},(u,d,h)=>{const[f,p,y]=u,x=rr(p);f===this.userId&&i.path.isEqual(x)?r=r.add(y):h.done()});s.push(l)}),I.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Ku(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Ce(J);return eo(e).X({range:o},(l,u,d)=>{const[h,f,p]=l,y=rr(f);h===this.userId&&r.isPrefixOf(y)?y.length===s&&(a=a.add(p)):d.done()}).next(()=>this.Dn(e,a))}Dn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Kr(e).get(i).next(o=>{if(o===null)throw z();G(o.userId===this.userId),r.push(Xs(this.serializer,o))}))}),I.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return bN(e.ht,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),I.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return I.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return eo(e).X({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=rr(i[1]);s.push(l)}else a.done()}).next(()=>{G(s.length===0)})})}containsKey(e,n){return _N(e,this.userId,n)}xn(e){return IN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _N(t,e,n){const r=Ku(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return eo(t).X({range:i,Y:!0},(a,l,u)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),u.done()}).next(()=>o)}function Kr(t){return mt(t,"mutations")}function eo(t){return mt(t,"documentMutations")}function IN(t){return mt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new ji(0)}static Mn(){return new ji(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const r=new ji(n.highestTargetId);return n.highestTargetId=r.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>H.fromTimestamp(new Pe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.On(e,s)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(n,r),this.On(e,r))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Xi(e).delete(n.targetId)).next(()=>this.$n(e)).next(r=>(G(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Xi(e).X((o,a)=>{const l=Ja(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>I.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Xi(e).X((r,s)=>{const i=Ja(s);n(i)})}$n(e){return uw(e).get("targetGlobalKey").next(n=>(G(n!==null),n))}On(e,n){return uw(e).put("targetGlobalKey",n)}Fn(e,n){return Xi(e).put(vN(this.serializer,n))}Bn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ki(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Xi(e).X({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const u=Ja(a);Cc(n,u.target)&&(i=u,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=es(e);return n.forEach(o=>{const a=Wt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),I.waitFor(s)}removeMatchingKeys(e,n,r){const s=es(e);return I.forEach(n,i=>{const o=Wt(i.path);return I.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=es(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=es(e);let i=Z();return s.X({range:r,Y:!0},(o,a,l)=>{const u=rr(o[1]),d=new M(u);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=Wt(n.path),s=IDBKeyRange.bound([r],[yE(r)],!1,!0);let i=0;return es(e).X({index:"documentTargetsIndex",Y:!0,range:s},([o,a],l,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}le(e,n){return Xi(e).get(n).next(r=>r?Ja(r):null)}}function Xi(t){return mt(t,"targets")}function uw(t){return mt(t,"targetGlobal")}function es(t){return mt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw([t,e],[n,r]){const s=J(t,n);return s===0?J(e,r):s}class J5{constructor(e){this.Ln=e,this.buffer=new Ce(dw),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();dw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Z5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}Qn(e){D("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fs(n)?D("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ms(n)}await this.Qn(3e5)})}}class eO{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return I.resolve(Jt.ct);const r=new J5(n);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(D("LruGarbageCollector","Garbage collection skipped; disabled"),I.resolve(cw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cw):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let r,s,i,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),eg()<=oe.DEBUG&&D("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),I.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function tO(t,e){return new eO(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n){this.db=e,this.garbageCollector=tO(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Jn(e){let n=0;return this.Wn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(r,s)=>n(s))}addReference(e,n,r){return Tu(e,r)}removeReference(e,n,r){return Tu(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Tu(e,n)}Xn(e,n){return function(r,s){let i=!1;return IN(r).Z(o=>_N(r,o,s).next(a=>(a&&(i=!0),I.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Yn(e,(o,a)=>{if(a<=n){const l=this.Xn(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,H.min()),es(e).delete([0,Wt(o.path)])))});s.push(l)}}).next(()=>I.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Tu(e,n)}Yn(e,n){const r=es(e);let s,i=Jt.ct;return r.X({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(i!==Jt.ct&&n(new M(rr(s)),i),i=u,s=l):i=Jt.ct}).next(()=>{i!==Jt.ct&&n(new M(rr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tu(t,e){return es(t).put(function(n,r){return{targetId:0,path:Wt(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.changes=new Vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ke.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?I.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ws(e).put(r)}removeEntry(e,n,r){return Ws(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Wd(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Zn(e,r)))}getEntry(e,n){let r=ke.newInvalidDocument(n);return Ws(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Va(n))},(s,i)=>{r=this.ts(n,i)}).next(()=>r)}es(e,n){let r={size:0,document:ke.newInvalidDocument(n)};return Ws(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Va(n))},(s,i)=>{r={document:this.ts(n,i),size:Gd(i)}}).next(()=>r)}getEntries(e,n){let r=en();return this.ns(e,n,(s,i)=>{const o=this.ts(s,i);r=r.insert(s,o)}).next(()=>r)}ss(e,n){let r=en(),s=new Ee(M.comparator);return this.ns(e,n,(i,o)=>{const a=this.ts(i,o);r=r.insert(i,a),s=s.insert(i,Gd(o))}).next(()=>({documents:r,rs:s}))}ns(e,n,r){if(n.isEmpty())return I.resolve();let s=new Ce(pw);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Va(s.first()),Va(s.last())),o=s.getIterator();let a=o.getNext();return Ws(e).X({index:"documentKeyIndex",range:i},(l,u,d)=>{const h=M.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&pw(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.G(Va(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s){const i=n.path,o=[i.popLast().toArray(),i.lastSegment(),Wd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ws(e).j(IDBKeyRange.bound(o,a,!0)).next(l=>{let u=en();for(const d of l){const h=this.ts(M.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Ac(n,h)||s.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,r,s){let i=en();const o=fw(n,r),a=fw(n,mn.max());return Ws(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const h=this.ts(M.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new sO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return hw(e).get("remoteDocumentGlobalKey").next(n=>(G(!!n),n))}Zn(e,n){return hw(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const r=U5(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(H.min())))return r}return ke.newInvalidDocument(e)}}function NN(t){return new rO(t)}class sO extends EN{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new Vs(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Ce((i,o)=>J(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.us.get(i);if(n.push(this.os.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=Zx(this.os.serializer,o);s=s.add(i.path.popLast());const u=Gd(l);r+=u-a.size,n.push(this.os.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=Zx(this.os.serializer,o.convertToNoDocument(H.min()));n.push(this.os.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.os.updateMetadata(e,r)),I.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(r=>(this.us.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:r,rs:s})=>(s.forEach((i,o)=>{this.us.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function hw(t){return mt(t,"remoteDocumentGlobal")}function Ws(t){return mt(t,"remoteDocumentsV14")}function Va(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fw(t,e){const n=e.documentKey.path.toArray();return[t,Wd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pw(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=J(n[i],r[i]),s)return s;return s=J(n.length,r.length),s||(s=J(n[n.length-2],r[r.length-2]),s||J(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ml(r.mutation,s,Zt.empty(),Pe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Z()){const s=sr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ya();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Z()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=en();const o=pl(),a=pl();return n.forEach((l,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Vr)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),ml(d.mutation,u,d.mutation.getFieldMask(),Pe.now())):o.set(u.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new iO(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=pl();let s=new Ee((o,a)=>o-a),i=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||Zt.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(s.get(a.batchId)||Z()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=WE();d.forEach(f=>{if(!i.has(f)){const p=ZE(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return I.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return M.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Iy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):I.resolve(sr());let a=-1,l=i;return o.next(u=>I.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?I.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Z())).next(d=>({batchId:a,changes:qE(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(r=>{let s=Ya();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Ya();return this.indexManager.getCollectionParents(e,s).next(o=>I.forEach(o,a=>{const l=function(u,d){return new Fr(d,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const u=l.getKey();i.get(u)===null&&(i=i.insert(u,ke.newInvalidDocument(u)))});let o=Ya();return i.forEach((a,l)=>{const u=s.get(a);u!==void 0&&ml(u.mutation,l,Zt.empty(),Pe.now()),Ac(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return I.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Qe(r.createTime)}),I.resolve()}getNamedQuery(e,n){return I.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:jy(r.bundledQuery),readTime:Qe(r.readTime)}}(n)),I.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.overlays=new Ee(M.comparator),this.ls=new Map}getOverlay(e,n){return I.resolve(this.overlays.get(n))}getOverlays(e,n){const r=sr();return I.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.we(e,n,i)}),I.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.ls.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.ls.delete(r)),I.resolve()}getOverlaysForCollection(e,n,r){const s=sr(),i=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return I.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ee((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=sr(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=sr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=s)););return I.resolve(a)}we(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ty(n,r));let i=this.ls.get(n);i===void 0&&(i=Z(),this.ls.set(n,i)),this.ls.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.fs=new Ce(lt.ds),this.ws=new Ce(lt._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new lt(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new lt(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new M(new ae([])),r=new lt(n,e),s=new lt(n,e+1),i=[];return this.ws.forEachInRange([r,s],o=>{this.ys(o),i.push(o.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new M(new ae([])),r=new lt(n,e),s=new lt(n,e+1);let i=Z();return this.ws.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new lt(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class lt{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return M.comparator(e.key,n.key)||J(e.As,n.As)}static _s(e,n){return J(e.As,n.As)||M.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Ce(lt.ds)}checkEmpty(e){return I.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Sy(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Rs=this.Rs.add(new lt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return I.resolve(o)}lookupMutationBatch(e,n){return I.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.bs(r),i=s<0?0:s;return I.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return I.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lt(n,0),s=new lt(n,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([r,s],o=>{const a=this.Ps(o.As);i.push(a)}),I.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(J);return n.forEach(s=>{const i=new lt(s,0),o=new lt(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([i,o],a=>{r=r.add(a.As)})}),I.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;M.isDocumentKey(i)||(i=i.child(""));const o=new lt(new M(i),0);let a=new Ce(J);return this.Rs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.As)),!0)},o),I.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const s=this.Ps(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){G(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return I.forEach(n.mutations,s=>{const i=new lt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new lt(n,0),s=this.Rs.firstAfterOrEqual(r);return I.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,I.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.Ds=e,this.docs=new Ee(M.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return I.resolve(r?r.document.mutableCopy():ke.newInvalidDocument(n))}getEntries(e,n){let r=en();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ke.newInvalidDocument(s))}),I.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=en();const o=n.path,a=new M(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vy(wE(d),r)<=0||(s.has(d.key)||Ac(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return I.resolve(i)}getAllFromCollectionGroup(e,n,r,s){z()}Cs(e,n){return I.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uO(this)}getSize(e){return I.resolve(this.size)}}class uO extends EN{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),I.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.persistence=e,this.xs=new Vs(n=>ki(n),Cc),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Oy,this.targetCount=0,this.Ms=ji.kn()}forEachTarget(e,n){return this.xs.forEach((r,s)=>n(s)),I.resolve()}getLastRemoteSnapshotVersion(e){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return I.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),I.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new ji(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,I.resolve()}updateTargetData(e,n){return this.Fn(n),I.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,I.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),I.waitFor(i).next(()=>s)}getTargetCount(e){return I.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return I.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),I.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),I.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),I.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return I.resolve(r)}containsKey(e,n){return I.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n){this.$s={},this.overlays={},this.Os=new Jt(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new dO(this),this.indexManager=new Q5,this.remoteDocumentCache=function(r){return new cO(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new yN(n),this.qs=new oO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new lO(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);const s=new hO(this.Os.next());return this.referenceDelegate.Us(),r(s).next(i=>this.referenceDelegate.Ks(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gs(e,n){return I.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class hO extends _E{constructor(e){super(),this.currentSequenceNumber=e}}class Yh{constructor(e){this.persistence=e,this.Qs=new Oy,this.js=null}static zs(e){return new Yh(e)}get Ws(){if(this.js)return this.js;throw z()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),I.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),I.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),I.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ws.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.Ws,r=>{const s=M.fromPath(r);return this.Hs(e,s).next(i=>{i||n.removeEntry(s,H.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return I.or([()=>I.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.serializer=e}O(e,n,r,s){const i=new zh("createOrUpgrade",n);r<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dx,{unique:!0}),a.createObjectStore("documentMutations")}(e),mw(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=I.resolve();return r<3&&s>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),mw(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:H.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").j().next(u=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dx,{unique:!0});const d=l.store("mutations"),h=u.map(f=>d.put(f));return I.waitFor(h)})}(e,i))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.Ys(i))),r<6&&s>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(i)))),r<7&&s>=7&&(o=o.next(()=>this.Zs(i))),r<8&&s>=8&&(o=o.next(()=>this.ti(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.ei(i))),r<11&&s>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:YP});l.createIndex("collectionPathOverlayIndex",XP,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",JP,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:FP});l.createIndex("documentKeyIndex",VP),l.createIndex("collectionGroupIndex",UP)}(e)).next(()=>this.ni(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.si(e,i))),r<15&&s>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:HP}).createIndex("sequenceNumberIndex",GP,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:KP}).createIndex("documentKeyIndex",QP,{unique:!1})}(e))),o}Xs(e){let n=0;return e.store("remoteDocuments").X((r,s)=>{n+=Gd(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next(s=>I.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",o).next(a=>I.forEach(a,l=>{G(l.userId===i.userId);const u=Xs(this.serializer,l);return bN(e,i.userId,u).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.X((o,a)=>{const l=new ae(o),u=function(d){return[0,Wt(d)]}(l);i.push(n.get(u).next(d=>d?I.resolve():(h=>n.put({targetId:0,path:Wt(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>I.waitFor(i))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:WP});const r=n.store("collectionParents"),s=new Py,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Wt(l)})}};return n.store("remoteDocuments").X({Y:!0},(o,a)=>{const l=new ae(o);return i(l.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([o,a,l],u)=>{const d=rr(a);return i(d.popLast())}))}ei(e){const n=e.store("targets");return n.X((r,s)=>{const i=Ja(s),o=vN(this.serializer,i);return n.put(o)})}ni(e,n){const r=n.store("remoteDocuments"),s=[];return r.X((i,o)=>{const a=n.store("remoteDocumentsV14"),l=(u=o,u.document?new M(ae.fromString(u.document.name).popFirst(5)):u.noDocument?M.fromSegments(u.noDocument.path):u.unknownDocument?M.fromSegments(u.unknownDocument.path):z()).path.toArray();var u;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(d))}).next(()=>I.waitFor(s))}si(e,n){const r=n.store("mutations"),s=NN(this.serializer),i=new kN(Yh.zs,this.serializer.fe);return r.j().next(o=>{const a=new Map;return o.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:Z();Xs(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),I.forEach(a,(l,u)=>{const d=new ut(u),h=Kh.de(this.serializer,d),f=i.getIndexManager(d),p=Qh.de(d,this.serializer,f,i.referenceDelegate);return new SN(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new ng(n,Jt.ct),l).next()})})}}function mw(t){t.createObjectStore("targetDocuments",{keyPath:zP}).createIndex("documentTargetsIndex",qP,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",BP,{unique:!0}),t.createObjectStore("targetGlobal")}const jp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ly{constructor(e,n,r,s,i,o,a,l,u,d,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ii=i,this.window=o,this.document=a,this.ri=u,this.oi=d,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=f=>Promise.resolve(),!Ly.D())throw new C(E.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nO(this,s),this.di=n+"main",this.serializer=new yN(l),this.wi=new Rn(this.di,this.ui,new fO(this.serializer)),this.Bs=new X5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NN(this.serializer),this.qs=new B5,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,d===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new C(E.FAILED_PRECONDITION,jp);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Jt(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(Fs(e))return D("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return D("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Ua(e).get("owner").next(n=>I.resolve(this.Ri(n)))}Pi(e){return Cu(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=mt(n,"clientMetadata");return r.j().next(s=>{const i=this.Si(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return I.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this._i)for(const n of e)this._i.removeItem(this.Di(n.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?I.resolve(!0):Ua(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new C(E.FAILED_PRECONDITION,jp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cu(e).j().next(r=>this.Si(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&D("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new ng(e,Jt.ct);return this.Ai(n).next(()=>this.Pi(n))}),this.wi.close(),this.Mi()}Si(e,n){return e.filter(r=>this.Vi(r.updateTimeMs,n)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Cu(e).j().next(n=>this.Si(n,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return Qh.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Y5(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Kh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,r){D("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(o=this.ui)===15?e5:o===14?kE:o===13?SE:o===12?ZP:o===11?NE:void z();var o;let a;return this.wi.runTransaction(e,s,i,l=>(a=new ng(l,this.Os?this.Os.next():Jt.ct),n==="readwrite-primary"?this.Ti(a).next(u=>!!u||this.Ei(a)).next(u=>{if(!u)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new C(E.FAILED_PRECONDITION,bE);return r(a)}).next(u=>this.vi(a).next(()=>u)):this.Oi(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Oi(e){return Ua(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new C(E.FAILED_PRECONDITION,jp)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ua(e).put("owner",n)}static D(){return Rn.D()}Ai(e){const n=Ua(e);return n.get("owner").next(r=>this.Ri(r)?(D("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):I.resolve())}Vi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ge(`Detected an update time that is in the future: ${e} > ${r}`),!1))}gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;KC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const r=((n=this._i)===null||n===void 0?void 0:n.getItem(this.Di(e)))!==null;return D("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ge("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ua(t){return mt(t,"owner")}function Cu(t){return mt(t,"clientMetadata")}function $y(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=s}static Li(e,n){let r=Z(),s=Z();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new My(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Ki(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.Qi(e,n))}Ki(e,n){if(Bx(n))return I.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=qd(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Z(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.zi(n,u,o,l.readTime)?this.Ki(e,qd(n,null,"F")):this.Wi(e,u,n,l)}))})))}Gi(e,n,r,s){return Bx(n)||s.isEqual(H.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.zi(n,o,r,s)?this.Qi(e,n):(eg()<=oe.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),cg(n)),this.Wi(e,o,n,xE(s,-1)))})}ji(e,n){let r=new Ce(BE(e));return n.forEach((s,i)=>{Ac(e,i)&&(r=r.add(i))}),r}zi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Qi(e,n){return eg()<=oe.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",cg(n)),this.Ui.getDocumentsMatchingQuery(e,n,mn.min())}Wi(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,r,s){this.persistence=e,this.Hi=n,this.serializer=s,this.Ji=new Ee(J),this.Yi=new Vs(i=>ki(i),Cc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SN(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function CN(t,e,n,r){return new pO(t,e,n,r)}async function DN(t,e){const n=V(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Z();for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of i){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}function mO(t,e){const n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const d=l.batch,h=d.keys();let f=I.resolve();return h.forEach(p=>{f=f.next(()=>u.getEntry(a,p)).next(y=>{const x=l.docVersions.get(p);G(x!==null),y.version.compareTo(x)<0&&(d.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),u.addEntry(y)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Z();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function AN(t){const e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function gO(t,e){const n=V(t),r=e.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Bs.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(i,d.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(it.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(y,x,w){return y.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,p,d)&&a.push(n.Bs.updateTargetData(i,p))});let l=en(),u=Z();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(jN(i,o,e.documentUpdates).next(d=>{l=d.nr,u=d.sr})),!r.isEqual(H.min())){const d=n.Bs.getLastRemoteSnapshotVersion(i).next(h=>n.Bs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return I.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ji=s,i))}function jN(t,e,n){let r=Z(),s=Z();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=en();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(H.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{nr:o,sr:s}})}function yO(t,e){const n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ho(t,e){const n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Bs.getTargetData(r,e).next(i=>i?(s=i,I.resolve(s)):n.Bs.allocateTargetId(r).next(o=>(s=new Er(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ji.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function Go(t,e,n){const r=V(t),s=r.Ji.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Fs(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}function Kd(t,e,n){const r=V(t);let s=H.min(),i=Z();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const d=V(a),h=d.Yi.get(u);return h!==void 0?I.resolve(d.Ji.get(h)):d.Bs.getTargetData(l,u)}(r,o,sn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?s:H.min(),n?i:Z())).next(a=>(ON(r,UE(e),a),{documents:a,ir:i})))}function RN(t,e){const n=V(t),r=V(n.Bs),s=n.Ji.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.le(i,e).next(o=>o?o.target:null))}function PN(t,e){const n=V(t),r=n.Xi.get(e)||H.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Zi.getAllFromCollectionGroup(s,e,xE(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(ON(n,e,s),s))}function ON(t,e,n){let r=t.Xi.get(e)||H.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Xi.set(e,r)}async function vO(t,e,n,r){const s=V(t);let i=Z(),o=en();for(const u of n){const d=e.rr(u.metadata.name);u.document&&(i=i.add(d));const h=e.ur(u);h.setReadTime(e.cr(u.metadata.readTime)),o=o.insert(d,h)}const a=s.Zi.newChangeBuffer({trackRemovals:!0}),l=await Ho(s,function(u){return sn(ca(ae.fromString(`__bundle__/docs/${u}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",u=>jN(u,a,o).next(d=>(a.apply(u),d)).next(d=>s.Bs.removeMatchingKeysForTargetId(u,l.targetId).next(()=>s.Bs.addMatchingKeys(u,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(u,d.nr,d.sr)).next(()=>d.nr)))}async function xO(t,e,n=Z()){const r=await Ho(t,sn(jy(e.bundledQuery))),s=V(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=Qe(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.qs.saveNamedQuery(i,e);const a=r.withResumeToken(it.EMPTY_BYTE_STRING,o);return s.Ji=s.Ji.insert(a.targetId,a),s.Bs.updateTargetData(i,a).next(()=>s.Bs.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Bs.addMatchingKeys(i,n,r.targetId)).next(()=>s.qs.saveNamedQuery(i,e))})}function gw(t,e){return`firestore_clients_${t}_${e}`}function yw(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Rp(t,e){return`firestore_targets_${t}_${e}`}class Qd{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static ar(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new C(s.error.code,s.error.message))),o?new Qd(e,n,s.state,i):(Ge("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gl{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static ar(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new C(r.error.code,r.error.message))),i?new gl(e,r.state,s):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Ey();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=IE(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Yd(e,i):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Fy{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Fy(n.clientId,n.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gg{constructor(){this.activeTargetIds=Ey()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pp{constructor(e,n,r,s,i){this.window=e,this.ii=n,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Ee(J),this.started=!1,this.yr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.pr=gw(this.persistenceKey,this.wr),this.Ir=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new gg),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Rr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const r of e){if(r===this.wr)continue;const s=this.getItem(gw(this.persistenceKey,r));if(s){const i=Yd.ar(r,s);i&&(this.gr=this.gr.insert(i.clientId,i))}}this.Pr();const n=this.storage.getItem(this.vr);if(n){const r=this.br(n);r&&this.Vr(r)}for(const r of this.yr)this.mr(r);this.yr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,r){this.Dr(e,n,r),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Rp(this.persistenceKey,e));if(r){const s=gl.ar(e,r);s&&(n=s.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rp(this.persistenceKey,e))}updateQueryState(e,n,r){this.kr(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return D("SharedClientState","READ",e,n),n}setItem(e,n){D("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){D("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const n=e;if(n.storageArea===this.storage){if(D("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Tr.test(n.key)){if(n.newValue==null){const r=this.Or(n.key);return this.Fr(r,null)}{const r=this.Br(n.key,n.newValue);if(r)return this.Fr(r.clientId,r)}}else if(this.Er.test(n.key)){if(n.newValue!==null){const r=this.Lr(n.key,n.newValue);if(r)return this.qr(r)}}else if(this.Ar.test(n.key)){if(n.newValue!==null){const r=this.Ur(n.key,n.newValue);if(r)return this.Kr(r)}}else if(n.key===this.vr){if(n.newValue!==null){const r=this.br(n.newValue);if(r)return this.Vr(r)}}else if(n.key===this.Ir){const r=function(s){let i=Jt.ct;if(s!=null)try{const o=JSON.parse(s);G(typeof o=="number"),i=o}catch(o){Ge("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==Jt.ct&&this.sequenceNumberHandler(r)}else if(n.key===this.Rr){const r=this.Gr(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Qr(s)))}}}else this.yr.push(n)})}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,r){const s=new Qd(this.currentUser,e,n,r),i=yw(this.persistenceKey,this.currentUser,e);this.setItem(i,s.hr())}Cr(e){const n=yw(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){const n={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(n))}kr(e,n,r){const s=Rp(this.persistenceKey,e),i=new gl(e,n,r);this.setItem(s,i.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const r=this.Or(e);return Yd.ar(r,n)}Lr(e,n){const r=this.Er.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Qd.ar(new ut(i),s,n)}Ur(e,n){const r=this.Ar.exec(e),s=Number(r[1]);return gl.ar(s,n)}br(e){return Fy.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);D("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const r=n?this.gr.insert(e,n):this.gr.remove(e),s=this.Sr(this.gr),i=this.Sr(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Wr(o,a).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=Ey();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class LN{constructor(){this.Hr=new gg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new gg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=null;function Op(){return Du===null?Du=268435456+Math.round(2147483648*Math.random()):Du++,"0x"+Du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class IO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,s,i){const o=Op(),a=this.To(e,n);D("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,s,i),this.Ao(e,a,l,r).then(u=>(D("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw Fn("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,n,r,s,i,o){return this.Io(e,n,r,s,i)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+la,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}To(e,n){const r=bO[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,s){const i=Op();return new Promise((o,a)=>{const l=new xP;l.setWithCredentials(!0),l.listenOnce(gP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Dp.NO_ERROR:const d=l.getResponseJson();D(Rt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Dp.TIMEOUT:D(Rt,`RPC '${e}' ${i} timed out`),a(new C(E.DEADLINE_EXCEEDED,"Request time out"));break;case Dp.HTTP_ERROR:const h=l.getStatus();if(D(Rt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const y=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(w)>=0?w:E.UNKNOWN}(p.status);a(new C(y,p.message))}else a(new C(E.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new C(E.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{D(Rt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);D(Rt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Ro(e,n,r){const s=Op(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pP(),a=mP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new vP({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");D(Rt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,p=!1;const y=new _O({ro:w=>{p?D(Rt,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(f||(D(Rt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),D(Rt,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},oo:()=>h.close()}),x=(w,g,m)=>{w.listen(g,v=>{try{m(v)}catch(b){setTimeout(()=>{throw b},0)}})};return x(h,Iu.EventType.OPEN,()=>{p||D(Rt,`RPC '${e}' stream ${s} transport opened.`)}),x(h,Iu.EventType.CLOSE,()=>{p||(p=!0,D(Rt,`RPC '${e}' stream ${s} transport closed`),y.wo())}),x(h,Iu.EventType.ERROR,w=>{p||(p=!0,Fn(Rt,`RPC '${e}' stream ${s} transport errored:`,w),y.wo(new C(E.UNAVAILABLE,"The operation could not be completed")))}),x(h,Iu.EventType.MESSAGE,w=>{var g;if(!p){const m=w.data[0];G(!!m);const v=m,b=v.error||((g=v[0])===null||g===void 0?void 0:g.error);if(b){D(Rt,`RPC '${e}' stream ${s} received error:`,b);const S=b.status;let _=function(j){const q=Ze[j];if(q!==void 0)return nN(q)}(S),T=b.message;_===void 0&&(_=E.INTERNAL,T="Unknown error status: "+S+" with message "+b.message),p=!0,y.wo(new C(_,T)),h.close()}else D(Rt,`RPC '${e}' stream ${s} received:`,m),y._o(m)}}),x(a,yP.STAT_EVENT,w=>{w.stat===Sx.PROXY?D(Rt,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===Sx.NOPROXY&&D(Rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){return typeof window<"u"?window:null}function Zu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){return new A5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=s,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,n-r);s>0&&D("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r,s,i,o,a,l){this.ii=e,this.$o=r,this.Oo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Vy(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(Ge(n.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===n&&this.Zo(r,s)},r=>{e(()=>{const s=new C(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EO extends MN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=P5(this.serializer,e),r=function(s){if(!("targetChange"in s))return H.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?H.min():i.readTime?Qe(i.readTime):H.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=rc(this.serializer),n.addTarget=function(s,i){let o;const a=i.target;if(o=Bd(a)?{documents:dN(s,a)}:{query:hN(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=oN(s,i.resumeToken);const l=ug(s,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(H.min())>0){o.readTime=Wo(s,i.snapshotVersion.toTimestamp());const l=ug(s,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=L5(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=rc(this.serializer),n.removeTarget=e,this.Wo(n)}}class NO extends MN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(G(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=O5(e.writeResults,e.commitTime),r=Qe(e.commitTime);return this.listener.cu(r,n)}return G(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=rc(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sc(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new C(E.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Io(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new C(E.UNKNOWN,s.toString())})}vo(e,n,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.vo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new C(E.UNKNOWN,i.toString())})}terminate(){this.lu=!0}}class kO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ge(n),this.mu=!1):D("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{Us(this)&&(D("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=V(a);l.vu.add(4),await ha(l),l.bu.set("Unknown"),l.vu.delete(4),await Lc(l)}(this))})}),this.bu=new kO(r,s)}}async function Lc(t){if(Us(t))for(const e of t.Ru)await e(!0)}async function ha(t){for(const e of t.Ru)await e(!1)}function Xh(t,e){const n=V(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),zy(n)?By(n):pa(n).Ko()&&Uy(n,e))}function ic(t,e){const n=V(t),r=pa(n);n.Au.delete(e),r.Ko()&&FN(n,e),n.Au.size===0&&(r.Ko()?r.jo():Us(n)&&n.bu.set("Unknown"))}function Uy(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pa(t).su(e)}function FN(t,e){t.Vu.qt(e),pa(t).iu(e)}function By(t){t.Vu=new k5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.bu.gu()}function zy(t){return Us(t)&&!pa(t).Uo()&&t.Au.size>0}function Us(t){return V(t).vu.size===0}function VN(t){t.Vu=void 0}async function CO(t){t.Au.forEach((e,n)=>{Uy(t,e)})}async function DO(t,e){VN(t),zy(t)?(t.bu.Iu(e),By(t)):t.bu.set("Unknown")}async function AO(t,e,n){if(t.bu.set("Online"),e instanceof iN&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xd(t,r)}else if(e instanceof Ju?t.Vu.Ht(e):e instanceof sN?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(H.min()))try{const r=await AN(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Vu.ce(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.Au.get(l);u&&s.Au.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const u=s.Au.get(a);if(!u)return;s.Au.set(a,u.withResumeToken(it.EMPTY_BYTE_STRING,u.snapshotVersion)),FN(s,a);const d=new Er(u.target,a,l,u.sequenceNumber);Uy(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){D("RemoteStore","Failed to raise snapshot:",r),await Xd(t,r)}}async function Xd(t,e,n){if(!Fs(e))throw e;t.vu.add(1),await ha(t),t.bu.set("Offline"),n||(n=()=>AN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{D("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Lc(t)})}function UN(t,e){return e().catch(n=>Xd(t,n,e))}async function fa(t){const e=V(t),n=Ts(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;jO(e);)try{const s=await yO(e.localStore,r);if(s===null){e.Eu.length===0&&n.jo();break}r=s.batchId,RO(e,s)}catch(s){await Xd(e,s)}BN(e)&&zN(e)}function jO(t){return Us(t)&&t.Eu.length<10}function RO(t,e){t.Eu.push(e);const n=Ts(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function BN(t){return Us(t)&&!Ts(t).Uo()&&t.Eu.length>0}function zN(t){Ts(t).start()}async function PO(t){Ts(t).hu()}async function OO(t){const e=Ts(t);for(const n of t.Eu)e.uu(n.mutations)}async function LO(t,e,n){const r=t.Eu.shift(),s=ky.from(r,e,n);await UN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fa(t)}async function $O(t,e){e&&Ts(t).ou&&await async function(n,r){if(s=r.code,tN(s)&&s!==E.ABORTED){const i=n.Eu.shift();Ts(n).Qo(),await UN(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await fa(n)}var s}(t,e),BN(t)&&zN(t)}async function xw(t,e){const n=V(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const r=Us(n);n.vu.add(3),await ha(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Lc(n)}async function yg(t,e){const n=V(t);e?(n.vu.delete(2),await Lc(n)):e||(n.vu.add(2),await ha(n),n.bu.set("Unknown"))}function pa(t){return t.Su||(t.Su=function(e,n,r){const s=V(e);return s.fu(),new EO(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:CO.bind(null,t),ao:DO.bind(null,t),nu:AO.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),zy(t)?By(t):t.bu.set("Unknown")):(await t.Su.stop(),VN(t))})),t.Su}function Ts(t){return t.Du||(t.Du=function(e,n,r){const s=V(e);return s.fu(),new NO(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:PO.bind(null,t),ao:$O.bind(null,t),au:OO.bind(null,t),cu:LO.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await fa(t)):(await t.Du.stop(),t.Eu.length>0&&(D("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new qy(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new C(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ma(t,e){if(Ge("AsyncQueue",`${e}: ${t}`),Fs(t))return new C(E.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.comparator=e?(n,r)=>e(n,r)||M.comparator(n.key,r.key):(n,r)=>M.comparator(n.key,r.key),this.keyedMap=Ya(),this.sortedSet=new Ee(this.comparator)}static emptySet(e){return new Co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.Cu=new Ee(M.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):z():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ko{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ko(e,n,Co.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.Nu=void 0,this.listeners=[]}}class FO{constructor(){this.queries=new Vs(e=>VE(e),Dc),this.onlineState="Unknown",this.ku=new Set}}async function Wy(t,e){const n=V(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new MO),s)try{i.Nu=await n.onListen(r)}catch(o){const a=ma(o,`Initialization of query '${cg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.Mu(n.onlineState),i.Nu&&e.$u(i.Nu)&&Gy(n)}async function Hy(t,e){const n=V(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function VO(t,e){const n=V(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.$u(s)&&(r=!0);o.Nu=s}}r&&Gy(n)}function UO(t,e,n){const r=V(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Gy(t){t.ku.forEach(e=>{e.next()})}class Ky{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ko(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.serializer=e}rr(e){return lr(this.serializer,e)}ur(e){return e.metadata.exists?uN(this.serializer,e.document,!1):ke.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Qe(e)}}class zO{constructor(e,n,r){this.ju=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qN(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const r=ae.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,r=new bw(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.rr(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||Z()).add(i);n.set(o,a)}}return n}async complete(){const e=await vO(this.localStore,new bw(this.serializer),this.documents,this.ju.id),n=this.Wu(this.documents);for(const r of this.queries)await xO(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function qN(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.key=e}}class HN{constructor(e){this.key=e}}class GN{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Z(),this.mutatedKeys=Z(),this.tc=BE(e),this.ec=new Co(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new ww,s=n?n.ec:this.ec;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=Ac(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;f&&p?f.data.isEqual(p.data)?y!==x&&(r.track({type:3,doc:p}),w=!0):this.rc(f,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.tc(p,l)>0||u&&this.tc(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),w=!0):f&&!p&&(r.track({type:1,doc:f}),w=!0,(l||u)&&(a=!0)),w&&(p?(o=o.add(p),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{ec:o,ic:r,zi:a,mutatedKeys:i}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((u,d)=>function(h,f){const p=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return p(h)-p(f)}(u.type,d.type)||this.tc(u.doc,d.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,i.length!==0||l?{snapshot:new Ko(this.query,e.ec,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new ww,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Z(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new HN(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new WN(r))}),n}hc(e){this.Yu=e.ir,this.Zu=Z();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Ko.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class qO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WO{constructor(e){this.key=e,this.fc=!1}}class HO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Vs(a=>VE(a),Dc),this._c=new Map,this.mc=new Set,this.gc=new Ee(M.comparator),this.yc=new Map,this.Ic=new Oy,this.Tc={},this.Ec=new Map,this.Ac=ji.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function GO(t,e){const n=Zy(t);let r,s;const i=n.wc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.lc();else{const o=await Ho(n.localStore,sn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await Qy(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Xh(n.remoteStore,o)}return s}async function Qy(t,e,n,r,s){t.Rc=(h,f,p)=>async function(y,x,w,g){let m=x.view.sc(w);m.zi&&(m=await Kd(y.localStore,x.query,!1).then(({documents:S})=>x.view.sc(S,m)));const v=g&&g.targetChanges.get(x.targetId),b=x.view.applyChanges(m,y.isPrimaryClient,v);return vg(y,x.targetId,b.cc),b.snapshot}(t,h,f,p);const i=await Kd(t.localStore,e,!0),o=new GN(e,i.ir),a=o.sc(i.documents),l=Pc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);vg(t,n,u.cc);const d=new qO(e,n,o);return t.wc.set(e,d),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function KO(t,e){const n=V(t),r=n.wc.get(e),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(i=>!Dc(i,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Go(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ic(n.remoteStore,r.targetId),Qo(n,r.targetId)}).catch(Ms)):(Qo(n,r.targetId),await Go(n.localStore,r.targetId,!0))}async function QO(t,e,n){const r=ev(t);try{const s=await function(i,o){const a=V(i),l=Pe.now(),u=o.reduce((f,p)=>f.add(p.key),Z());let d,h;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=en(),y=Z();return a.Zi.getEntries(f,u).next(x=>{p=x,p.forEach((w,g)=>{g.isValidDocument()||(y=y.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,p)).next(x=>{d=x;const w=[];for(const g of o){const m=E5(g,d.get(g.key).overlayedDocument);m!=null&&w.push(new Vr(g.key,m,AE(m.value.mapValue),Re.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,w,o)}).next(x=>{h=x;const w=x.applyToLocalDocumentSet(d,y);return a.documentOverlayCache.saveOverlays(f,x.batchId,w)})}).then(()=>({batchId:h.batchId,changes:qE(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.Tc[i.currentUser.toKey()];l||(l=new Ee(J)),l=l.insert(o,a),i.Tc[i.currentUser.toKey()]=l}(r,s.batchId,n),await Ur(r,s.changes),await fa(r.remoteStore)}catch(s){const i=ma(s,"Failed to persist write");n.reject(i)}}async function KN(t,e){const n=V(t);try{const r=await gO(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.yc.get(i);o&&(G(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.fc=!0:s.modifiedDocuments.size>0?G(o.fc):s.removedDocuments.size>0&&(G(o.fc),o.fc=!1))}),await Ur(n,r,e)}catch(r){await Ms(r)}}function _w(t,e,n){const r=V(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wc.forEach((i,o)=>{const a=o.view.Mu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=V(i);a.onlineState=o;let l=!1;a.queries.forEach((u,d)=>{for(const h of d.listeners)h.Mu(o)&&(l=!0)}),l&&Gy(a)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YO(t,e,n){const r=V(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.yc.get(e),i=s&&s.key;if(i){let o=new Ee(M.comparator);o=o.insert(i,ke.newNoDocument(i,H.min()));const a=Z().add(i),l=new Rc(H.min(),new Map,new Ee(J),o,a);await KN(r,l),r.gc=r.gc.remove(i),r.yc.delete(e),Jy(r)}else await Go(r.localStore,e,!1).then(()=>Qo(r,e,n)).catch(Ms)}async function XO(t,e){const n=V(t),r=e.batch.batchId;try{const s=await mO(n.localStore,e);Xy(n,r,null),Yy(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ur(n,s)}catch(s){await Ms(s)}}async function JO(t,e,n){const r=V(t);try{const s=await function(i,o){const a=V(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(d=>(G(d!==null),u=d.keys(),a.mutationQueue.removeMutationBatch(l,d))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);Xy(r,e,n),Yy(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ur(r,s)}catch(s){await Ms(s)}}async function ZO(t,e){const n=V(t);Us(n.remoteStore)||D("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=V(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const s=n.Ec.get(r)||[];s.push(e),n.Ec.set(r,s)}catch(r){const s=ma(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Yy(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function Xy(t,e,n){const r=V(t);let s=r.Tc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Qo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||QN(t,r)})}function QN(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(ic(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Jy(t))}function vg(t,e,n){for(const r of n)r instanceof WN?(t.Ic.addReference(r.key,e),eL(t,r)):r instanceof HN?(D("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||QN(t,r.key)):z()}function eL(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(D("SyncEngine","New document in limbo: "+n),t.mc.add(r),Jy(t))}function Jy(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new M(ae.fromString(e)),r=t.Ac.next();t.yc.set(r,new WO(n)),t.gc=t.gc.insert(n,r),Xh(t.remoteStore,new Er(sn(ca(n.path)),r,"TargetPurposeLimboResolution",Jt.ct))}}async function Ur(t,e,n){const r=V(t),s=[],i=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const d=My.Li(l.targetId,u);i.push(d)}}))}),await Promise.all(o),r.dc.nu(s),await async function(a,l){const u=V(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>I.forEach(l,h=>I.forEach(h.Fi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>I.forEach(h.Bi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Fs(d))throw d;D("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const f=u.Ji.get(h),p=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(p);u.Ji=u.Ji.insert(h,y)}}}(r.localStore,i))}async function tL(t,e){const n=V(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const r=await DN(n.localStore,e);n.currentUser=e,function(s,i){s.Ec.forEach(o=>{o.forEach(a=>{a.reject(new C(E.CANCELLED,i))})}),s.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ur(n,r.er)}}function nL(t,e){const n=V(t),r=n.yc.get(e);if(r&&r.fc)return Z().add(r.key);{let s=Z();const i=n._c.get(e);if(!i)return s;for(const o of i){const a=n.wc.get(o);s=s.unionWith(a.view.nc)}return s}}async function rL(t,e){const n=V(t),r=await Kd(n.localStore,e.query,!0),s=e.view.hc(r);return n.isPrimaryClient&&vg(n,e.targetId,s.cc),s}async function sL(t,e){const n=V(t);return PN(n.localStore,e).then(r=>Ur(n,r))}async function iL(t,e,n,r){const s=V(t),i=await function(o,a){const l=V(o),u=V(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Sn(d,a).next(h=>h?l.localDocuments.getDocuments(d,h):I.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await fa(s.remoteStore):n==="acknowledged"||n==="rejected"?(Xy(s,e,r||null),Yy(s,e),function(o,a){V(V(o).mutationQueue).Cn(a)}(s.localStore,e)):z(),await Ur(s,i)):D("SyncEngine","Cannot apply mutation batch with id: "+e)}async function oL(t,e){const n=V(t);if(Zy(n),ev(n),e===!0&&n.vc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await Iw(n,r.toArray());n.vc=!0,await yg(n.remoteStore,!0);for(const i of s)Xh(n.remoteStore,i)}else if(e===!1&&n.vc!==!1){const r=[];let s=Promise.resolve();n._c.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Qo(n,o),Go(n.localStore,o,!0))),ic(n.remoteStore,o)}),await s,await Iw(n,r),function(i){const o=V(i);o.yc.forEach((a,l)=>{ic(o.remoteStore,l)}),o.Ic.Ts(),o.yc=new Map,o.gc=new Ee(M.comparator)}(n),n.vc=!1,await yg(n.remoteStore,!1)}}async function Iw(t,e,n){const r=V(t),s=[],i=[];for(const o of e){let a;const l=r._c.get(o);if(l&&l.length!==0){a=await Ho(r.localStore,sn(l[0]));for(const u of l){const d=r.wc.get(u),h=await rL(r,d);h.snapshot&&i.push(h.snapshot)}}else{const u=await RN(r.localStore,o);a=await Ho(r.localStore,u),await Qy(r,YN(u),o,!1,a.resumeToken)}s.push(a)}return r.dc.nu(i),s}function YN(t){return FE(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function aL(t){const e=V(t);return V(V(e.localStore).persistence).$i()}async function lL(t,e,n,r){const s=V(t);if(s.vc)return void D("SyncEngine","Ignoring unexpected query state notification.");const i=s._c.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await PN(s.localStore,UE(i[0])),a=Rc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",it.EMPTY_BYTE_STRING);await Ur(s,o,a);break}case"rejected":await Go(s.localStore,e,!0),Qo(s,e,r);break;default:z()}}async function cL(t,e,n){const r=Zy(t);if(r.vc){for(const s of e){if(r._c.has(s)){D("SyncEngine","Adding an already active target "+s);continue}const i=await RN(r.localStore,s),o=await Ho(r.localStore,i);await Qy(r,YN(i),o.targetId,!1,o.resumeToken),Xh(r.remoteStore,o)}for(const s of n)r._c.has(s)&&await Go(r.localStore,s,!1).then(()=>{ic(r.remoteStore,s),Qo(r,s)}).catch(Ms)}}function Zy(t){const e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YO.bind(null,e),e.dc.nu=VO.bind(null,e.eventManager),e.dc.Pc=UO.bind(null,e.eventManager),e}function ev(t){const e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JO.bind(null,e),e}function uL(t,e,n){const r=V(t);(async function(s,i,o){try{const a=await i.getMetadata();if(await function(h,f){const p=V(h),y=Qe(f.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",x=>p.qs.getBundleMetadata(x,f.id)).then(x=>!!x&&x.createTime.compareTo(y)>=0)}(s.localStore,a))return await i.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(qN(a));const l=new zO(a,s.localStore,i.serializer);let u=await i.bc();for(;u;){const h=await l.zu(u);h&&o._updateProgress(h),u=await i.bc()}const d=await l.complete();return await Ur(s,d.Ju,void 0),await function(h,f){const p=V(h);return p.persistence.runTransaction("Save bundle","readwrite",y=>p.qs.saveBundleMetadata(y,f))}(s.localStore,a),o._completeWith(d.progress),Promise.resolve(d.Hu)}catch(a){return Fn("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class xg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Oc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return CN(this.persistence,new TN,e.initialUser,this.serializer)}createPersistence(e){return new kN(Yh.zs,this.serializer)}createSharedClientState(e){return new LN}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class XN extends xg{constructor(e,n,r){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await ev(this.Vc.syncEngine),await fa(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return CN(this.persistence,new TN,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Z5(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new LP(n,this.persistence);return new OP(e.asyncQueue,r)}createPersistence(e){const n=$y(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new Ly(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,$N(),Zu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new LN}}class dL extends XN{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Vc.syncEngine;this.sharedClientState instanceof Pp&&(this.sharedClientState.syncEngine={jr:iL.bind(null,n),zr:lL.bind(null,n),Wr:cL.bind(null,n),$i:aL.bind(null,n),Qr:sL.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ii(async r=>{await oL(this.Vc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=$N();if(!Pp.D(n))throw new C(E.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$y(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class tv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_w(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tL.bind(null,this.syncEngine),await yg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new FO}createDatastore(e){const n=Oc(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new IO(s));var s;return function(i,o,a,l){return new SO(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>_w(this.syncEngine,a,0),o=vw.D()?new vw:new wO,new TO(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,u){const d=new HO(r,s,i,o,a,l);return u&&(d.vc=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=V(e);D("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await ha(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ge("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new ht,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(e===null)return null;const n=this.xc.decode(e),r=Number(n);isNaN(r)&&this.Mc(`length string (${n}) is not valid number`);const s=await this.$c(r);return new BO(JSON.parse(s),e.length+r)}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(this.buffer.length===0)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const n=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Fc(){const e=await this.Cc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new C(E.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,s){const i=V(r),o=rc(i.serializer)+"/documents",a={documents:s.map(h=>nc(i.serializer,h))},l=await i.vo("BatchGetDocuments",o,a,s.length),u=new Map;l.forEach(h=>{const f=R5(i.serializer,h);u.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=u.get(h.toString());G(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new da(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=M.fromPath(r);this.mutations.push(new Ny(s,this.precondition(s)))}),await async function(n,r){const s=V(n),i=rc(s.serializer)+"/documents",o={writes:r.map(a=>sc(s.serializer,a))};await s.Io("Commit",i,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw z();n=H.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new C(E.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(H.min())?Re.exists(!1):Re.updateTime(n):Re.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(H.min()))throw new C(E.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Re.updateTime(n)}return Re.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.Bc=r.maxAttempts,this.qo=new Vy(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No(async()=>{const e=new fL(this.datastore),n=this.qc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Uc(s)}))}).catch(r=>{this.Uc(r)})})}qc(e){try{const n=this.updateFunction(e);return!Tc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!tN(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=gE.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{D("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(D("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new C(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ma(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ed(t,e){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await DN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nv(t);D("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>xw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>xw(e.remoteStore,i)),t._onlineComponents=e}function JN(t){return t.name==="FirebaseError"?t.code===E.FAILED_PRECONDITION||t.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function nv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{await ed(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!JN(n))throw n;Fn("Error using user provided cache. Falling back to memory cache: "+n),await ed(t,new xg)}}else D("FirestoreClient","Using default OfflineComponentProvider"),await ed(t,new xg);return t._offlineComponents}async function Zh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),await wg(t,t._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),await wg(t,new tv))),t._onlineComponents}function ZN(t){return nv(t).then(e=>e.persistence)}function rv(t){return nv(t).then(e=>e.localStore)}function eS(t){return Zh(t).then(e=>e.remoteStore)}function sv(t){return Zh(t).then(e=>e.syncEngine)}function gL(t){return Zh(t).then(e=>e.datastore)}async function Yo(t){const e=await Zh(t),n=e.eventManager;return n.onListen=GO.bind(null,e.syncEngine),n.onUnlisten=KO.bind(null,e.syncEngine),n}function yL(t){return t.asyncQueue.enqueue(async()=>{const e=await ZN(t),n=await eS(t);return e.setNetworkEnabled(!0),function(r){const s=V(r);return s.vu.delete(0),Lc(s)}(n)})}function vL(t){return t.asyncQueue.enqueue(async()=>{const e=await ZN(t),n=await eS(t);return e.setNetworkEnabled(!1),async function(r){const s=V(r);s.vu.add(0),await ha(s),s.bu.set("Offline")}(n)})}function xL(t,e){const n=new ht;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,i){try{const o=await function(a,l){const u=V(a);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,l))}(r,s);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new C(E.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=ma(o,`Failed to get document '${s} from cache`);i.reject(a)}}(await rv(t),e,n)),n.promise}function tS(t,e,n={}){const r=new ht;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new Jh({next:h=>{i.enqueueAndForget(()=>Hy(s,d));const f=h.docs.has(o);!f&&h.fromCache?l.reject(new C(E.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&a&&a.source==="server"?l.reject(new C(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Ky(ca(o.path),u,{includeMetadataChanges:!0,Ku:!0});return Wy(s,d)}(await Yo(t),t.asyncQueue,e,n,r)),r.promise}function wL(t,e){const n=new ht;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,i){try{const o=await Kd(r,s,!0),a=new GN(s,o.ir),l=a.sc(o.documents),u=a.applyChanges(l,!1);i.resolve(u.snapshot)}catch(o){const a=ma(o,`Failed to execute query '${s} against cache`);i.reject(a)}}(await rv(t),e,n)),n.promise}function nS(t,e,n={}){const r=new ht;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new Jh({next:h=>{i.enqueueAndForget(()=>Hy(s,d)),h.fromCache&&a.source==="server"?l.reject(new C(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Ky(o,u,{includeMetadataChanges:!0,Ku:!0});return Wy(s,d)}(await Yo(t),t.asyncQueue,e,n,r)),r.promise}function bL(t,e){const n=new Jh(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){V(r).ku.add(s),s.next()}(await Yo(t),n)),()=>{n.Dc(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){V(r).ku.delete(s)}(await Yo(t),n))}}function _L(t,e,n,r){const s=function(i,o){let a;return a=typeof i=="string"?rN().encode(i):i,function(l,u){return new hL(l,u)}(function(l,u){if(l instanceof Uint8Array)return Ew(l,u);if(l instanceof ArrayBuffer)return Ew(new Uint8Array(l),u);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Oc(e));t.asyncQueue.enqueueAndForget(async()=>{uL(await sv(t),s,r)})}function IL(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const s=V(n);return s.persistence.runTransaction("Get named query","readonly",i=>s.qs.getNamedQuery(i,r))}(await rv(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t,e,n){if(!n)throw new C(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sS(t,e,n,r){if(e===!0&&r===!0)throw new C(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sw(t){if(!M.isDocumentKey(t))throw new C(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kw(t){if(M.isDocumentKey(t))throw new C(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ef(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z()}function ce(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new C(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ef(t);throw new C(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function iS(t,e){if(e<=0)throw new C(E.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new C(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new C(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new C(E.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new C(E.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new C(E.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class $c{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new C(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new C(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tw(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new IP;switch(n.type){case"firstParty":return new kP(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new C(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Nw.get(e);n&&(D("ComponentProvider","Removing Datastore"),Nw.delete(e),n.terminate())}(this),Promise.resolve()}}function EL(t,e,n,r={}){var s;const i=(t=ce(t,$c))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Fn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ut.MOCK_USER;else{a=WC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new C(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ut(u)}t._authCredentials=new EP(new mE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new De(this.firestore,e,this._key)}}class Dt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dt(this.firestore,e,this._query)}}class cr extends Dt{constructor(e,n,r){super(e,n,ca(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new De(this.firestore,null,new M(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function oS(t,e,...n){if(t=K(t),iv("collection","path",e),t instanceof $c){const r=ae.fromString(e,...n);return kw(r),new cr(t,null,r)}{if(!(t instanceof De||t instanceof cr))throw new C(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ae.fromString(e,...n));return kw(r),new cr(t.firestore,null,r)}}function NL(t,e){if(t=ce(t,$c),iv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new C(E.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dt(t,null,function(n){return new Fr(ae.emptyPath(),n)}(e))}function Jd(t,e,...n){if(t=K(t),arguments.length===1&&(e=gE.A()),iv("doc","path",e),t instanceof $c){const r=ae.fromString(e,...n);return Sw(r),new De(t,null,new M(r))}{if(!(t instanceof De||t instanceof cr))throw new C(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ae.fromString(e,...n));return Sw(r),new De(t.firestore,t instanceof cr?t.converter:null,new M(r))}}function aS(t,e){return t=K(t),e=K(e),(t instanceof De||t instanceof cr)&&(e instanceof De||e instanceof cr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function lS(t,e){return t=K(t),e=K(e),t instanceof Dt&&e instanceof Dt&&t.firestore===e.firestore&&Dc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Vy(this,"async_queue_retry"),this.Xc=()=>{const n=Zu();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Zu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Zu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new ht;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Fs(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Ge("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const s=qy.createAndSchedule(this,e,n,r,i=>this.na(i));return this.zc.push(s),s}Zc(){this.Wc&&z()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function bg(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class kL{constructor(){this._progressObserver={},this._taskCompletionResolver=new ht,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=-1;class We extends $c{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new SL,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||cS(this),this._firestoreClient.terminate()}}function gt(t){return t._firestoreClient||cS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cS(t){var e,n,r;const s=t._freezeSettings(),i=function(o,a,l,u){return new r5(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,rS(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new mL(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function CL(t,e){dS(t=ce(t,We));const n=gt(t);if(n._uninitializedComponentsProvider)throw new C(E.FAILED_PRECONDITION,"SDK cache is already specified.");Fn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),s=new tv;return uS(n,s,new XN(s,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function DL(t){dS(t=ce(t,We));const e=gt(t);if(e._uninitializedComponentsProvider)throw new C(E.FAILED_PRECONDITION,"SDK cache is already specified.");Fn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new tv;return uS(e,r,new dL(r,n.cacheSizeBytes))}function uS(t,e,n){const r=new ht;return t.asyncQueue.enqueue(async()=>{try{await ed(t,n),await wg(t,e),r.resolve()}catch(s){const i=s;if(!JN(i))throw i;Fn("Error enabling indexeddb cache. Falling back to memory cache: "+i),r.reject(i)}}).then(()=>r.promise)}function AL(t){if(t._initialized&&!t._terminated)throw new C(E.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ht;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Rn.D())return Promise.resolve();const r=n+"main";await Rn.delete(r)}($y(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function jL(t){return function(e){const n=new ht;return e.asyncQueue.enqueueAndForget(async()=>ZO(await sv(e),n)),n.promise}(gt(t=ce(t,We)))}function RL(t){return yL(gt(t=ce(t,We)))}function PL(t){return vL(gt(t=ce(t,We)))}function OL(t,e){const n=gt(t=ce(t,We)),r=new kL;return _L(n,t._databaseId,e,r),r}function LL(t,e){return IL(gt(t=ce(t,We)),e).then(n=>n?new Dt(t,null,n.query):null)}function dS(t){if(t._initialized||t._terminated)throw new C(E.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fr(it.fromBase64String(e))}catch(n){throw new C(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fr(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new C(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new C(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new C(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=/^__.*__$/;class ML{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ua(e,this.data,n,this.fieldTransforms)}}class hS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}class nf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new nf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Zd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(fS(this.ca)&&$L.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class FL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oc(e)}ya(e,n,r,s=!1){return new nf({ca:e,methodName:n,ga:r,path:Ke.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ui(t){const e=t._freezeSettings(),n=Oc(t._databaseId);return new FL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rf(t,e,n,r,s,i={}){const o=t.ya(i.merge||i.mergeFields?2:0,e,n,s);cv("Data must be an object, but it was:",o,r);const a=gS(r,o);let l,u;if(i.merge)l=new Zt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=_g(e,h,n);if(!o.contains(f))throw new C(E.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);vS(d,f)||d.push(f)}l=new Zt(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new ML(new Et(a),l,u)}class Mc extends Vi{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mc}}function pS(t,e,n){return new nf({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ov extends Vi{_toFieldTransform(e){return new jc(e.path,new zo)}isEqual(e){return e instanceof ov}}class VL extends Vi{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=pS(this,e,!0),r=this.pa.map(i=>Bi(i,n)),s=new Ti(r);return new jc(e.path,s)}isEqual(e){return this===e}}class UL extends Vi{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=pS(this,e,!0),r=this.pa.map(i=>Bi(i,n)),s=new Ci(r);return new jc(e.path,s)}isEqual(e){return this===e}}class BL extends Vi{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new qo(e.serializer,KE(e.serializer,this.Ia));return new jc(e.path,n)}isEqual(e){return this===e}}function av(t,e,n,r){const s=t.ya(1,e,n);cv("Data must be an object, but it was:",s,r);const i=[],o=Et.empty();Fi(r,(l,u)=>{const d=uv(e,l,n);u=K(u);const h=s.da(d);if(u instanceof Mc)i.push(d);else{const f=Bi(u,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Zt(i);return new hS(o,a,s.fieldTransforms)}function lv(t,e,n,r,s,i){const o=t.ya(1,e,n),a=[_g(e,r,n)],l=[s];if(i.length%2!=0)throw new C(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(_g(e,i[f])),l.push(i[f+1]);const u=[],d=Et.empty();for(let f=a.length-1;f>=0;--f)if(!vS(u,a[f])){const p=a[f];let y=l[f];y=K(y);const x=o.da(p);if(y instanceof Mc)u.push(p);else{const w=Bi(y,x);w!=null&&(u.push(p),d.set(p,w))}}const h=new Zt(u);return new hS(d,h,o.fieldTransforms)}function mS(t,e,n,r=!1){return Bi(n,t.ya(r?4:3,e))}function Bi(t,e){if(yS(t=K(t)))return cv("Unsupported field value:",e,t),gS(t,e);if(t instanceof Vi)return function(n,r){if(!fS(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=Bi(o,r.wa(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=K(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return KE(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Pe.fromDate(n);return{timestampValue:Wo(r.serializer,s)}}if(n instanceof Pe){const s=new Pe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Wo(r.serializer,s)}}if(n instanceof tf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof fr)return{bytesValue:oN(r.serializer,n._byteString)};if(n instanceof De){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ay(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${ef(n)}`)}(t,e)}function gS(t,e){const n={};return TE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(t,(r,s)=>{const i=Bi(s,e.ha(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function yS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof tf||t instanceof fr||t instanceof De||t instanceof Vi)}function cv(t,e,n){if(!yS(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=ef(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function _g(t,e,n){if((e=K(e))instanceof Cs)return e._internalPath;if(typeof e=="string")return uv(t,e);throw Zd("Field path arguments must be of type string or ",t,!1,void 0,n)}const zL=new RegExp("[~\\*/\\[\\]]");function uv(t,e,n){if(e.search(zL)>=0)throw Zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cs(...e.split("."))._internalPath}catch{throw Zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new C(E.INVALID_ARGUMENT,a+t+l)}function vS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qL extends oc{data(){return super.data()}}function sf(t,e){return typeof e=="string"?uv(t,e):e instanceof Cs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new C(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dv{}class Fc extends dv{}function Qr(t,e,...n){let r=[];e instanceof dv&&r.push(e),r=r.concat(n),function(s){const i=s.filter(a=>a instanceof hv).length,o=s.filter(a=>a instanceof of).length;if(i>1||i>0&&o>0)throw new C(E.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class of extends Fc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new of(e,n,r)}_apply(e){const n=this._parse(e);return bS(e._query,n),new Dt(e.firestore,e.converter,lg(e._query,n))}_parse(e){const n=Ui(e.firestore);return function(s,i,o,a,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new C(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Dw(d,u);const f=[];for(const p of d)f.push(Cw(a,s,p));h={arrayValue:{values:f}}}else h=Cw(a,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Dw(d,u),h=mS(o,i,d,u==="in"||u==="not-in");return re.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function WL(t,e,n){const r=e,s=sf("where",t);return of._create(s,r,n)}class hv extends dv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:me.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let i=r;const o=s.getFlattenedFilters();for(const a of o)bS(i,a),i=lg(i,a)}(e._query,n),new Dt(e.firestore,e.converter,lg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fv extends Fc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fv(e,n)}_apply(e){const n=function(r,s,i){if(r.startAt!==null)throw new C(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new C(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new To(s,i);return function(a,l){if(_y(a)===null){const u=Wh(a);u!==null&&_S(a,u,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new Dt(e.firestore,e.converter,function(r,s){const i=r.explicitOrderBy.concat([s]);return new Fr(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function HL(t,e="asc"){const n=e,r=sf("orderBy",t);return fv._create(r,n)}class af extends Fc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new af(e,n,r)}_apply(e){return new Dt(e.firestore,e.converter,qd(e._query,this._limit,this._limitType))}}function GL(t){return iS("limit",t),af._create("limit",t,"F")}function KL(t){return iS("limitToLast",t),af._create("limitToLast",t,"L")}class lf extends Fc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new lf(e,n,r)}_apply(e){const n=wS(e,this.type,this._docOrFields,this._inclusive);return new Dt(e.firestore,e.converter,function(r,s){return new Fr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function QL(...t){return lf._create("startAt",t,!0)}function YL(...t){return lf._create("startAfter",t,!1)}class cf extends Fc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new cf(e,n,r)}_apply(e){const n=wS(e,this.type,this._docOrFields,this._inclusive);return new Dt(e.firestore,e.converter,function(r,s){return new Fr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function XL(...t){return cf._create("endBefore",t,!1)}function JL(...t){return cf._create("endAt",t,!0)}function wS(t,e,n,r){if(n[0]=K(n[0]),n[0]instanceof oc)return function(s,i,o,a,l){if(!a)throw new C(E.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const d of mi(s))if(d.field.isKeyField())u.push(Si(i,a.key));else{const h=a.data.field(d.field);if(qh(h))throw new C(E.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const f=d.field.canonicalString();throw new C(E.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new ks(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Ui(t.firestore);return function(i,o,a,l,u,d){const h=i.explicitOrderBy;if(u.length>h.length)throw new C(E.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let p=0;p<u.length;p++){const y=u[p];if(h[p].field.isKeyField()){if(typeof y!="string")throw new C(E.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof y}`);if(!Iy(i)&&y.indexOf("/")!==-1)throw new C(E.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${y}' contains a slash.`);const x=i.path.child(ae.fromString(y));if(!M.isDocumentKey(x))throw new C(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const w=new M(x);f.push(Si(o,w))}else{const x=mS(a,l,y);f.push(x)}}return new ks(f,d)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Cw(t,e,n){if(typeof(n=K(n))=="string"){if(n==="")throw new C(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iy(e)&&n.indexOf("/")!==-1)throw new C(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ae.fromString(n));if(!M.isDocumentKey(r))throw new C(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Si(t,new M(r))}if(n instanceof De)return Si(t,n._key);throw new C(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ef(n)}.`)}function Dw(t,e){if(!Array.isArray(t)||t.length===0)throw new C(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bS(t,e){if(e.isInequality()){const r=Wh(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new C(E.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=_y(t);i!==null&&_S(t,s,i)}const n=function(r,s){for(const i of r)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new C(E.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new C(E.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function _S(t,e,n){if(!n.isEqual(e))throw new C(E.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class pv{convertValue(e,n="none"){switch(Ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new tf(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=Is(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ae.fromString(e);G(gN(r));const s=new Ns(r.get(1),r.get(3)),i=new M(r.popFirst(5));return s.isEqual(n)||Ge(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ZL extends pv{constructor(e){super(),this.firestore=e}convertBytes(e){return new fr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new De(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pr extends oc{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yl extends Pr{data(e={}){return super.data(e)}}class Ds{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ai(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yl(this._firestore,this._userDataWriter,r.key,r,new ai(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new C(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>{const a=new yl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ai(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new yl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ai(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:e$(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function e$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function IS(t,e){return t instanceof Pr&&e instanceof Pr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ds&&e instanceof Ds&&t._firestore===e._firestore&&lS(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(t){t=ce(t,De);const e=ce(t.firestore,We);return tS(gt(e),t._key).then(n=>mv(e,t,n))}class zi extends pv{constructor(e){super(),this.firestore=e}convertBytes(e){return new fr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new De(this.firestore,null,n)}}function n$(t){t=ce(t,De);const e=ce(t.firestore,We),n=gt(e),r=new zi(e);return xL(n,t._key).then(s=>new Pr(e,r,t._key,s,new ai(s!==null&&s.hasLocalMutations,!0),t.converter))}function r$(t){t=ce(t,De);const e=ce(t.firestore,We);return tS(gt(e),t._key,{source:"server"}).then(n=>mv(e,t,n))}function s$(t){t=ce(t,Dt);const e=ce(t.firestore,We),n=gt(e),r=new zi(e);return xS(t._query),nS(n,t._query).then(s=>new Ds(e,r,t,s))}function i$(t){t=ce(t,Dt);const e=ce(t.firestore,We),n=gt(e),r=new zi(e);return wL(n,t._query).then(s=>new Ds(e,r,t,s))}function o$(t){t=ce(t,Dt);const e=ce(t.firestore,We),n=gt(e),r=new zi(e);return nS(n,t._query,{source:"server"}).then(s=>new Ds(e,r,t,s))}function Aw(t,e,n){t=ce(t,De);const r=ce(t.firestore,We),s=uf(t.converter,e,n);return Vc(r,[rf(Ui(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Re.none())])}function jw(t,e,n,...r){t=ce(t,De);const s=ce(t.firestore,We),i=Ui(s);let o;return o=typeof(e=K(e))=="string"||e instanceof Cs?lv(i,"updateDoc",t._key,e,n,r):av(i,"updateDoc",t._key,e),Vc(s,[o.toMutation(t._key,Re.exists(!0))])}function a$(t){return Vc(ce(t.firestore,We),[new da(t._key,Re.none())])}function l$(t,e){const n=ce(t.firestore,We),r=Jd(t),s=uf(t.converter,e);return Vc(n,[rf(Ui(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Re.exists(!1))]).then(()=>r)}function ES(t,...e){var n,r,s;t=K(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||bg(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(bg(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,u,d;if(t instanceof De)u=ce(t.firestore,We),d=ca(t._key.path),l={next:h=>{e[o]&&e[o](mv(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=ce(t,Dt);u=ce(h.firestore,We),d=h._query;const f=new zi(u);l={next:p=>{e[o]&&e[o](new Ds(u,f,h,p))},error:e[o+1],complete:e[o+2]},xS(t._query)}return function(h,f,p,y){const x=new Jh(y),w=new Ky(f,x,p);return h.asyncQueue.enqueueAndForget(async()=>Wy(await Yo(h),w)),()=>{x.Dc(),h.asyncQueue.enqueueAndForget(async()=>Hy(await Yo(h),w))}}(gt(u),d,a,l)}function c$(t,e){return bL(gt(t=ce(t,We)),bg(e)?e:{next:e})}function Vc(t,e){return function(n,r){const s=new ht;return n.asyncQueue.enqueueAndForget(async()=>QO(await sv(n),r,s)),s.promise}(gt(t),e)}function mv(t,e,n){const r=n.docs.get(e._key),s=new zi(t);return new Pr(t,s,e._key,r,new ai(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ui(e)}set(e,n,r){this._verifyNotCommitted();const s=ts(e,this._firestore),i=uf(s.converter,n,r),o=rf(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Re.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=ts(e,this._firestore);let o;return o=typeof(n=K(n))=="string"||n instanceof Cs?lv(this._dataReader,"WriteBatch.update",i._key,n,r,s):av(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Re.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ts(e,this._firestore);return this._mutations=this._mutations.concat(new da(n._key,Re.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new C(E.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ts(t,e){if((t=K(t)).firestore!==e)throw new C(E.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h$ extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ui(e)}get(e){const n=ts(e,this._firestore),r=new ZL(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return z();const i=s[0];if(i.isFoundDocument())return new oc(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new oc(this._firestore,r,n._key,null,n.converter);throw z()})}set(e,n,r){const s=ts(e,this._firestore),i=uf(s.converter,n,r),o=rf(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=ts(e,this._firestore);let o;return o=typeof(n=K(n))=="string"||n instanceof Cs?lv(this._dataReader,"Transaction.update",i._key,n,r,s):av(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=ts(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ts(e,this._firestore),r=new zi(this._firestore);return super.get(e).then(s=>new Pr(this._firestore,r,n._key,s._document,new ai(!1,!1),n.converter))}}function f$(t,e,n){t=ce(t,We);const r=Object.assign(Object.assign({},u$),n);return function(s){if(s.maxAttempts<1)throw new C(E.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,i,o){const a=new ht;return s.asyncQueue.enqueueAndForget(async()=>{const l=await gL(s);new pL(s.asyncQueue,l,o,i,a).run()}),a.promise}(gt(t),s=>e(new h$(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p$(){return new Mc("deleteField")}function m$(){return new ov("serverTimestamp")}function g$(...t){return new VL("arrayUnion",t)}function y$(...t){return new UL("arrayRemove",t)}function v$(t){return new BL("increment",t)}(function(t,e=!0){(function(n){la=n})(Ps),ws(new ur("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new We(new NP(n.getProvider("auth-internal")),new CP(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new C(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ns(a.options.projectId,l)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),ar(kx,"3.13.0",t),ar(kx,"3.13.0","esm2017")})();const x$="@firebase/firestore-compat",w$="0.3.12";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new C("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(){if(typeof Uint8Array>"u")throw new C("unimplemented","Uint8Arrays are not available in this environment.")}function Pw(){if(!t5())throw new C("unimplemented","Blobs are unavailable in Firestore in this environment.")}let NS=class Ig{constructor(e){this._delegate=e}static fromBase64String(e){return Pw(),new Ig(fr.fromBase64String(e))}static fromUint8Array(e){return Rw(),new Ig(fr.fromUint8Array(e))}toBase64(){return Pw(),this._delegate.toBase64()}toUint8Array(){return Rw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t){return b$(t,["next","error","complete"])}function b$(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${enableIndexedDbPersistence(e,n){return CL(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return DL(e._delegate)}clearIndexedDbPersistence(e){return AL(e._delegate)}}class SS{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ns||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Fn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){EL(this._delegate,e,n,r)}enableNetwork(){return RL(this._delegate)}disableNetwork(){return PL(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sS("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return jL(this._delegate)}onSnapshotsInSync(e){return c$(this._delegate,e)}get app(){if(!this._appCompat)throw new C("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xo(this,oS(this._delegate,e))}catch(n){throw Ut(n,"collection()","Firestore.collection()")}}doc(e){try{return new _n(this,Jd(this._delegate,e))}catch(n){throw Ut(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vt(this,NL(this._delegate,e))}catch(n){throw Ut(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return f$(this._delegate,n=>e(new kS(this,n)))}batch(){return gt(this._delegate),new TS(new d$(this._delegate,e=>Vc(this._delegate,e)))}loadBundle(e){return OL(this._delegate,e)}namedQuery(e){return LL(this._delegate,e).then(n=>n?new Vt(this,n):null)}}class df extends pv{constructor(e){super(),this.firestore=e}convertBytes(e){return new NS(new fr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return _n.forKey(n,this.firestore,null)}}function I$(t){bP(t)}class kS{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new df(e)}get(e){const n=li(e);return this._delegate.get(n).then(r=>new ac(this._firestore,new Pr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=li(e);return r?(gv("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=li(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=li(e);return this._delegate.delete(n),this}}class TS{constructor(e){this._delegate=e}set(e,n,r){const s=li(e);return r?(gv("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=li(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=li(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ri{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new yl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ri.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new Ri(e,new df(e),n),s.set(n,i)),i}}Ri.INSTANCES=new WeakMap;class _n{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new df(e)}static forPath(e,n,r){if(e.length%2!==0)throw new C("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _n(n,new De(n._delegate,r,new M(e)))}static forKey(e,n,r){return new _n(n,new De(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xo(this.firestore,oS(this._delegate,e))}catch(n){throw Ut(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=K(e),e instanceof De?aS(this._delegate,e):!1}set(e,n){n=gv("DocumentReference.set",n);try{return n?Aw(this._delegate,e,n):Aw(this._delegate,e)}catch(r){throw Ut(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?jw(this._delegate,e):jw(this._delegate,e,n,...r)}catch(s){throw Ut(s,"updateDoc()","DocumentReference.update()")}}delete(){return a$(this._delegate)}onSnapshot(...e){const n=CS(e),r=DS(e,s=>new ac(this.firestore,new Pr(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return ES(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=n$(this._delegate):(e==null?void 0:e.source)==="server"?n=r$(this._delegate):n=t$(this._delegate),n.then(r=>new ac(this.firestore,new Pr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _n(this.firestore,e?this._delegate.withConverter(Ri.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ut(t,e,n){return t.message=t.message.replace(e,n),t}function CS(t){for(const e of t)if(typeof e=="object"&&!Eg(e))return e;return{}}function DS(t,e){var n,r;let s;return Eg(t[0])?s=t[0]:Eg(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:i=>{s.next&&s.next(e(i))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class ac{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new _n(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return IS(this._delegate,e._delegate)}}class lc extends ac{data(e){const n=this._delegate.data(e);return _P(n!==void 0),n}}class Vt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new df(e)}where(e,n,r){try{return new Vt(this.firestore,Qr(this._delegate,WL(e,n,r)))}catch(s){throw Ut(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Vt(this.firestore,Qr(this._delegate,HL(e,n)))}catch(r){throw Ut(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vt(this.firestore,Qr(this._delegate,GL(e)))}catch(n){throw Ut(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Vt(this.firestore,Qr(this._delegate,KL(e)))}catch(n){throw Ut(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vt(this.firestore,Qr(this._delegate,QL(...e)))}catch(n){throw Ut(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vt(this.firestore,Qr(this._delegate,YL(...e)))}catch(n){throw Ut(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vt(this.firestore,Qr(this._delegate,XL(...e)))}catch(n){throw Ut(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vt(this.firestore,Qr(this._delegate,JL(...e)))}catch(n){throw Ut(n,"endAt()","Query.endAt()")}}isEqual(e){return lS(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=i$(this._delegate):(e==null?void 0:e.source)==="server"?n=o$(this._delegate):n=s$(this._delegate),n.then(r=>new Ng(this.firestore,new Ds(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=CS(e),r=DS(e,s=>new Ng(this.firestore,new Ds(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return ES(this._delegate,n,r)}withConverter(e){return new Vt(this.firestore,e?this._delegate.withConverter(Ri.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class E${constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new lc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ng{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Vt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new lc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new E$(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new lc(this._firestore,r))})}isEqual(e){return IS(this._delegate,e._delegate)}}class Xo extends Vt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _n(this.firestore,e):null}doc(e){try{return e===void 0?new _n(this.firestore,Jd(this._delegate)):new _n(this.firestore,Jd(this._delegate,e))}catch(n){throw Ut(n,"doc()","CollectionReference.doc()")}}add(e){return l$(this._delegate,e).then(n=>new _n(this.firestore,n))}isEqual(e){return aS(this._delegate,e._delegate)}withConverter(e){return new Xo(this.firestore,e?this._delegate.withConverter(Ri.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function li(t){return ce(t,De)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(...e){this._delegate=new Cs(...e)}static documentId(){return new yv(Ke.keyField().canonicalString())}isEqual(e){return e=K(e),e instanceof Cs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._delegate=e}static serverTimestamp(){const e=m$();return e._methodName="FieldValue.serverTimestamp",new ei(e)}static delete(){const e=p$();return e._methodName="FieldValue.delete",new ei(e)}static arrayUnion(...e){const n=g$(...e);return n._methodName="FieldValue.arrayUnion",new ei(n)}static arrayRemove(...e){const n=y$(...e);return n._methodName="FieldValue.arrayRemove",new ei(n)}static increment(e){const n=v$(e);return n._methodName="FieldValue.increment",new ei(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$={Firestore:SS,GeoPoint:tf,Timestamp:Pe,Blob:NS,Transaction:kS,WriteBatch:TS,DocumentReference:_n,DocumentSnapshot:ac,Query:Vt,QueryDocumentSnapshot:lc,QuerySnapshot:Ng,CollectionReference:Xo,FieldPath:yv,FieldValue:ei,setLogLevel:I$,CACHE_SIZE_UNLIMITED:TL};function S$(t,e){t.INTERNAL.registerComponent(new ur("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},N$)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$(t){S$(t,(e,n)=>new SS(e,n,new _$)),t.registerVersion(x$,w$)}k$(Ae);const T$={apiKey:"AIzaSyAOMubppe1JZbBh0VBv7UIbZyY2S1RI9fw",authDomain:"bible-sungseo.firebaseapp.com",projectId:"bible-sungseo",storageBucket:"bible-sungseo.firebasestorage.app",messagingSenderId:"1061949588108",appId:"1:1061949588108:web:e8e3bbd6c3f73afa5131a9"};let de,Pt;try{Ae.apps.length?Ae.app():Ae.initializeApp(T$),Pt=Ae.auth(),de=Ae.firestore()}catch(t){console.error("Firebase init failed:",t)}let eh=[];for(let t=1;t<=14;t++)eh.push(t+"");eh=eh.concat(["1","2","","","1","2","3","4","5",""]);const C$=[" "," "," "," "," "],D$=["",""],A$=["1","2","3","4","5","6"],j$=["","",""],Or=[{id:"senior",name:"",color:"bg-orange-500",icon:"",subgroups:eh},{id:"youth",name:"",color:"bg-blue-500",icon:"",subgroups:C$},{id:"middlehigh",name:"",color:"bg-purple-500",icon:"",subgroups:D$},{id:"elementary",name:"",color:"bg-yellow-500",icon:"",subgroups:A$},{id:"kinder",name:"",color:"bg-pink-500",icon:"",subgroups:j$}],R$=[{date:"1-1",range:" 1-2"},{date:"1-2",range:" 3-5"},{date:"1-3",range:" 6-8"},{date:"1-4",range:" 9-11"},{date:"1-5",range:" 1-3"},{date:"1-6",range:" 4-6"},{date:"1-7",range:" 7-9"},{date:"1-8",range:" 10-12"},{date:"1-9",range:" 13-14"},{date:"1-10",range:" 15-16"},{date:"1-11",range:" 17-19"},{date:"1-12",range:" 20-21"},{date:"1-13",range:" 22-24"},{date:"1-14",range:" 25-26"},{date:"1-15",range:" 27-28"},{date:"1-16",range:" 29-30"},{date:"1-17",range:" 31-33"},{date:"1-18",range:" 34-35"},{date:"1-19",range:" 36-38"},{date:"1-20",range:" 39-40"},{date:"1-21",range:" 1-4"},{date:"1-22",range:" 5-7"},{date:"1-23",range:" 8-10"},{date:"1-24",range:" 11-14"},{date:"1-25",range:" 15-18"},{date:"1-26",range:" 19-21"},{date:"1-27",range:" 22-24"},{date:"1-28",range:" 1-3"},{date:"1-29",range:" 4-6"},{date:"1-30",range:" 7-8"},{date:"1-31",range:" 9-11"},{date:"2-1",range:" 12-15"},{date:"2-2",range:" 16-18"},{date:"2-3",range:" 19-21"},{date:"2-4",range:" 1-4"},{date:"2-5",range:" 1-3"},{date:"2-6",range:" 4-6"},{date:"2-7",range:" 7-9"},{date:"2-8",range:" 10-13"},{date:"2-9",range:" 14-17"},{date:"2-10",range:" 18-21"},{date:"2-11",range:" 22-24"},{date:"2-12",range:" 25-29"},{date:"2-13",range:" 30-32"},{date:"2-14",range:" 33-34"},{date:"2-15",range:" 35-38"},{date:"2-16",range:" 39-42"},{date:"2-17",range:" 1-2"},{date:"2-18",range:" 3-4"},{date:"2-19",range:" 5-6"},{date:"2-20",range:" 7-9"},{date:"2-21",range:" 10-12"},{date:"2-22",range:" 1-6"},{date:"2-23",range:" 1-2,  1-3"},{date:"2-24",range:" 4-8"},{date:"2-25",range:" 9-14"},{date:"2-26",range:" 7-10"},{date:"2-27",range:" 1-3"},{date:"2-28",range:" 4-7"},{date:"3-1",range:" 8-10"},{date:"3-2",range:" 11-13"},{date:"3-3",range:" 1-3"},{date:"3-4",range:" 4-6"},{date:"3-5",range:" 7-10"},{date:"3-6",range:" 1-4"},{date:"3-7",range:" 5-6"},{date:"3-8",range:" 7-9"},{date:"3-9",range:" 10-11"},{date:"3-10",range:" 12-13"},{date:"3-11",range:" 14-15"},{date:"3-12",range:" 16-18"},{date:"3-13",range:" 19-21"},{date:"3-14",range:" 22-23"},{date:"3-15",range:" 24-25"},{date:"3-16",range:" 26"},{date:"3-17",range:" 27-28"},{date:"3-18",range:" 1-3"},{date:"3-19",range:" 4-5"},{date:"3-20",range:" 1-3"},{date:"3-21",range:" 4-6"},{date:"3-22",range:" 7-9"},{date:"3-23",range:" 10-12"},{date:"3-24",range:" 13-16"},{date:"3-25",range:" 1-3"},{date:"3-26",range:" 4-6"},{date:"3-27",range:" 1-5"},{date:"3-28",range:" 6-9"},{date:"3-29",range:" 10-11"},{date:"3-30",range:" 12-13,  1"},{date:"3-31",range:" 2-3"},{date:"4-1",range:" 12-15"},{date:"4-2",range:" 16-19"},{date:"4-3",range:" 20-23"},{date:"4-4",range:" 24-26"},{date:"4-5",range:" 1-4"},{date:"4-6",range:" 5-7"},{date:"4-7",range:" 8-9"},{date:"4-8",range:" 10-12"},{date:"4-9",range:" 13-14"},{date:"4-10",range:" 15-16"},{date:"4-11",range:" 17-19"},{date:"4-12",range:" 20-21"},{date:"4-13",range:" 22-23"},{date:"4-14",range:" 24-25"},{date:"4-15",range:" 26-27"},{date:"4-16",range:" 1-2"},{date:"4-17",range:" 3-6"},{date:"4-18",range:" 7-9"},{date:"4-19",range:" 10-13"},{date:"4-20",range:" 14-15"},{date:"4-21",range:" 16-17"},{date:"4-22",range:" 18-20"},{date:"4-23",range:" 21-24"},{date:"4-24",range:" 25-26"},{date:"4-25",range:" 27-31"},{date:"4-26",range:" 1-3"},{date:"4-27",range:" 4-7"},{date:"4-28",range:" 8-12"},{date:"4-29",range:" 13-14"},{date:"4-30",range:" 15-17"},{date:"5-1",range:" 18-19"},{date:"5-2",range:" 20-22"},{date:"5-3",range:" 23-24"},{date:"5-4",range:" 1-7"},{date:"5-5",range:" 8-12"},{date:"5-6",range:" 13-17"},{date:"5-7",range:" 18-19"},{date:"5-8",range:" 20-24"},{date:"5-9",range:" 25-29"},{date:"5-10",range:" 30-33"},{date:"5-11",range:" 34-37"},{date:"5-12",range:" 38-41"},{date:"5-13",range:" 42-44"},{date:"5-14",range:" 45-49"},{date:"5-15",range:" 50-53"},{date:"5-16",range:" 54-58"},{date:"5-17",range:" 59-65"},{date:"5-18",range:" 66-68"},{date:"5-19",range:" 69-72"},{date:"5-20",range:" 1-3"},{date:"5-21",range:" 4-7"},{date:"5-22",range:" 8-10"},{date:"5-23",range:" 11-14"},{date:"5-24",range:" 15-20"},{date:"5-25",range:" 21-23"},{date:"5-26",range:" 24-27"},{date:"5-27",range:" 28-30"},{date:"5-28",range:" 31-35"},{date:"5-29",range:" 36-39"},{date:"5-30",range:" 40-42"},{date:"5-31",range:" 43-45"},{date:"6-1",range:" 46-49"},{date:"6-2",range:" 50-54"},{date:"6-3",range:" 55-58"},{date:"6-4",range:" 59-63"},{date:"6-5",range:" 64-66"},{date:"6-6",range:" 1-3"},{date:"6-7",range:" 1,  1-3"},{date:"6-8",range:" 1-3"},{date:"6-9",range:" 1-3"},{date:"6-10",range:" 4-6"},{date:"6-11",range:" 7-8"},{date:"6-12",range:" 9-10"},{date:"6-13",range:" 11-12"},{date:"6-14",range:" 13-14"},{date:"6-15",range:" 15-16"},{date:"6-16",range:" 6-7"},{date:"6-17",range:" 8-9"},{date:"6-18",range:" 10-12"},{date:"6-19",range:" 1-5"},{date:"6-20",range:" 6-8"},{date:"6-21",range:" 9-11"},{date:"6-22",range:" 12-14"},{date:"6-23",range:" 15-16"},{date:"6-24",range:" 1-5"},{date:"6-25",range:" 6-9"},{date:"6-26",range:" 10-13"},{date:"6-27",range:" 1-5"},{date:"6-28",range:" 1-3,  1-2"},{date:"6-29",range:" 3-5,  1"},{date:"6-30",range:" 4-7"},{date:"7-1",range:" 27-29"},{date:"7-2",range:" 30-31"},{date:"7-3",range:" 32-34"},{date:"7-4",range:" 35-36"},{date:"7-5",range:" 1-4"},{date:"7-6",range:" 5-7"},{date:"7-7",range:" 8-10"},{date:"7-8",range:" 11-13"},{date:"7-9",range:" 14-16"},{date:"7-10",range:" 17-21"},{date:"7-11",range:" 22-24"},{date:"7-12",range:" 25-27"},{date:"7-13",range:" 28-30"},{date:"7-14",range:" 31-32"},{date:"7-15",range:" 33-36"},{date:"7-16",range:" 1-2"},{date:"7-17",range:" 3-5"},{date:"7-18",range:" 6-7"},{date:"7-19",range:" 8-9"},{date:"7-20",range:" 10-11,  1"},{date:"7-21",range:" 2-4"},{date:"7-22",range:" 5-7"},{date:"7-23",range:" 8-11"},{date:"7-24",range:" 12-15"},{date:"7-25",range:" 16-18"},{date:"7-26",range:" 19-21"},{date:"7-27",range:" 22-24"},{date:"7-28",range:" 25-27"},{date:"7-29",range:" 28-31"},{date:"7-30",range:" 1-3"},{date:"7-31",range:" 4-7"},{date:"8-1",range:" 8-12"},{date:"8-2",range:" 1-4"},{date:"8-3",range:" 5-8,  12"},{date:"8-4",range:" 13-15"},{date:"8-5",range:" 16-17"},{date:"8-6",range:" 18-19"},{date:"8-7",range:" 20-22"},{date:"8-8",range:" 1-3"},{date:"8-9",range:" 4-5"},{date:"8-10",range:" 6-8"},{date:"8-11",range:" 9-10"},{date:"8-12",range:" 11-14"},{date:"8-13",range:" 1-4,  15"},{date:"8-14",range:" 1-4"},{date:"8-15",range:" 5-9"},{date:"8-16",range:" 1-4"},{date:"8-17",range:" 5-9"},{date:"8-18",range:" 10-14"},{date:"8-19",range:" 16-17"},{date:"8-20",range:" 18-19"},{date:"8-21",range:" 20-23"},{date:"8-22",range:" 1-3"},{date:"8-23",range:" 24-25"},{date:"8-24",range:" 1-5"},{date:"8-25",range:" 6-10"},{date:"8-26",range:" 11-14"},{date:"8-27",range:" 15-18"},{date:"8-28",range:" 19-21"},{date:"8-29",range:" 22-23"},{date:"8-30",range:" 24-27"},{date:"8-31",range:" 28-30"},{date:"9-1",range:" 31-33"},{date:"9-2",range:" 34-36"},{date:"9-3",range:" 37-39"},{date:"9-4",range:" 40-41"},{date:"9-5",range:" 42-44"},{date:"9-6",range:" 45-46"},{date:"9-7",range:" 47-48"},{date:"9-8",range:" 1-2"},{date:"9-9",range:" 3-4"},{date:"9-10",range:" 5-6"},{date:"9-11",range:" 7-8"},{date:"9-12",range:" 9-10"},{date:"9-13",range:" 11-12"},{date:"9-14",range:" 13-14"},{date:"9-15",range:" 15-16"},{date:"9-16",range:" 17-18"},{date:"9-17",range:" 19-20"},{date:"9-18",range:" 21-22"},{date:"9-19",range:" 23-24"},{date:"9-20",range:" 13-14"},{date:"9-21",range:" 15-17"},{date:"9-22",range:" 18-20"},{date:"9-23",range:" 1-3"},{date:"9-24",range:" 4-6"},{date:"9-25",range:" 1-4"},{date:"9-26",range:" 1-4,  1"},{date:"9-27",range:" 1-4"},{date:"9-28",range:" 5,  1-3"},{date:"9-29",range:" 8-12"},{date:"9-30",range:" 13-14"},{date:"10-1",range:" 37-39"},{date:"10-2",range:" 40-42"},{date:"10-3",range:" 43-44"},{date:"10-4",range:" 45-47"},{date:"10-5",range:" 48-50"},{date:"10-6",range:" 1-3"},{date:"10-7",range:" 4-5"},{date:"10-8",range:" 6-9"},{date:"10-9",range:" 10-12"},{date:"10-10",range:" 13-15"},{date:"10-11",range:" 16-18"},{date:"10-12",range:" 19-20"},{date:"10-13",range:" 21-23"},{date:"10-14",range:" 24-26"},{date:"10-15",range:" 27-28"},{date:"10-16",range:" 29-31"},{date:"10-17",range:" 32-34,  90"},{date:"10-18",range:" 1-3"},{date:"10-19",range:" 4-6"},{date:"10-20",range:" 7-9"},{date:"10-21",range:" 10-12"},{date:"10-22",range:" 13-16"},{date:"10-23",range:" 17-20"},{date:"10-24",range:" 21-23"},{date:"10-25",range:" 24-26"},{date:"10-26",range:" 27-29"},{date:"10-27",range:" 73-77"},{date:"10-28",range:" 78-80"},{date:"10-29",range:" 81-86"},{date:"10-30",range:" 87-91"},{date:"10-31",range:" 92-97"},{date:"11-1",range:" 98-103"},{date:"11-2",range:" 104-106"},{date:"11-3",range:" 107-111"},{date:"11-4",range:" 112-117"},{date:"11-5",range:" 118:1-119:80"},{date:"11-6",range:" 119:81-120:7"},{date:"11-7",range:" 121-127"},{date:"11-8",range:" 128-134"},{date:"11-9",range:" 135-138"},{date:"11-10",range:" 139-144"},{date:"11-11",range:" 145-150"},{date:"11-12",range:" 1-5"},{date:"11-13",range:" 6-9"},{date:"11-14",range:" 10-12"},{date:"11-15",range:" 13-16"},{date:"11-16",range:" 17-20"},{date:"11-17",range:" 21-24"},{date:"11-18",range:" 25-28"},{date:"11-19",range:" 1-3"},{date:"11-20",range:" 4-7"},{date:"11-21",range:" 29-31"},{date:"11-22",range:" 32-33"},{date:"11-23",range:" 34-36"},{date:"11-24",range:" 1-3"},{date:"11-25",range:" 4-6"},{date:"11-26",range:" 7-9"},{date:"11-27",range:" 10-12"},{date:"11-28",range:" 13-15"},{date:"11-29",range:" 16-18"},{date:"11-30",range:" 19-22"},{date:"12-1",range:" 23-25"},{date:"12-2",range:" 26:1-29:23"},{date:"12-3",range:" 29:24-32"},{date:"12-4",range:" 33-36"},{date:"12-5",range:" 37-39"},{date:"12-6",range:" 40-42"},{date:"12-7",range:" 43-45"},{date:"12-8",range:" 46-48"},{date:"12-9",range:" 49-50"},{date:"12-10",range:" 51-52"},{date:"12-11",range:" 1-2"},{date:"12-12",range:" 3-5"},{date:"12-13",range:" 1-4"},{date:"12-14",range:" 1-3"},{date:"12-15",range:" 4-5"},{date:"12-16",range:" 6-7"},{date:"12-17",range:" 8-9"},{date:"12-18",range:" 10-11"},{date:"12-19",range:" 12-13"},{date:"12-20",range:" 14-16"},{date:"12-21",range:" 17-18"},{date:"12-22",range:" 19-21"},{date:"12-23",range:" 21-23"},{date:"12-24",range:" 24-26"},{date:"12-25",range:" 27-28"},{date:"12-26",range:" 1-5"},{date:"12-27",range:" 6,  1-4"},{date:"12-28",range:" 1-3,  1-2"},{date:"12-29",range:" 3-5, , "},{date:"12-30",range:" 15-18"},{date:"12-31",range:" 19-22"}],P$=[{date:"1-1",range:" 1"},{date:"1-2",range:" 2"},{date:"1-3",range:" 3"},{date:"1-4",range:" 4"},{date:"1-5",range:" 5:1-26"},{date:"1-6",range:" 5:27-48"},{date:"1-7",range:" 6:1-18"},{date:"1-8",range:" 6:19-34"},{date:"1-9",range:" 7"},{date:"1-10",range:" 8:1-17"},{date:"1-11",range:" 8:18-34"},{date:"1-12",range:" 9:1-13"},{date:"1-13",range:" 9:14-38"},{date:"1-14",range:" 10:1-25"},{date:"1-15",range:" 10:26-11:1"},{date:"1-16",range:" 11:2-30"},{date:"1-17",range:" 12:1-21"},{date:"1-18",range:" 12:22-50"},{date:"1-19",range:" 13:1-30"},{date:"1-20",range:" 13:31-58"},{date:"1-21",range:" 14:1-21"},{date:"1-22",range:" 14:22-36"},{date:"1-23",range:" 15:1-20"},{date:"1-24",range:" 15:21-39"},{date:"1-25",range:" 16"},{date:"1-26",range:" 17"},{date:"1-27",range:" 18"},{date:"1-28",range:" 19"},{date:"1-29",range:" 20"},{date:"1-30",range:" 21:1-22"},{date:"1-31",range:" 21:23-46"},{date:"2-1",range:" 22:1-22"},{date:"2-2",range:" 22:23-46"},{date:"2-3",range:" 23:1-24"},{date:"2-4",range:" 23:25-39"},{date:"2-5",range:" 24:1-28"},{date:"2-6",range:" 24:29-51"},{date:"2-7",range:" 25:1-30"},{date:"2-8",range:" 25:31-46"},{date:"2-9",range:" 26:1-30"},{date:"2-10",range:" 26:31-56"},{date:"2-11",range:" 26:57-75"},{date:"2-12",range:" 27:1-31"},{date:"2-13",range:" 27:32-66"},{date:"2-14",range:" 28"},{date:"2-15",range:" 1"},{date:"2-16",range:" 2:1-24"},{date:"2-17",range:" 2:25-47"},{date:"2-18",range:" 3"},{date:"2-19",range:" 4:1-22"},{date:"2-20",range:" 4:23-37"},{date:"2-21",range:" 5:1-26"},{date:"2-22",range:" 5:27-42"},{date:"2-23",range:" 1"},{date:"2-24",range:" 2"},{date:"2-25",range:" 3"},{date:"2-26",range:" 4"},{date:"2-27",range:" 5"},{date:"2-28",range:" 6"},{date:"3-1",range:" 7"},{date:"3-2",range:" 8"},{date:"3-3",range:" 9:1-18"},{date:"3-4",range:" 9:19-33"},{date:"3-5",range:" 10"},{date:"3-6",range:" 11:1-16"},{date:"3-7",range:" 11:17-36"},{date:"3-8",range:" 12"},{date:"3-9",range:" 13"},{date:"3-10",range:" 14"},{date:"3-11",range:" 15:1-13"},{date:"3-12",range:" 15:14-33"},{date:"3-13",range:" 16"},{date:"3-14",range:" 1"},{date:"3-15",range:" 2"},{date:"3-16",range:" 3"},{date:"3-17",range:" 4:1-5:1"},{date:"3-18",range:" 5:2-26"},{date:"3-19",range:" 6"},{date:"3-20",range:" 1"},{date:"3-21",range:" 2"},{date:"3-22",range:" 3"},{date:"3-23",range:" 4"},{date:"3-24",range:" 5"},{date:"3-25",range:" 6"},{date:"3-26",range:" 7"},{date:"3-27",range:" 8"},{date:"3-28",range:" 9"},{date:"3-29",range:" 10:1-18"},{date:"3-30",range:" 10:19-39"},{date:"3-31",range:" 11:1-16"},{date:"4-1",range:" 11:17-40"},{date:"4-2",range:" 12:1-11"},{date:"4-3",range:" 12:12-29"},{date:"4-4",range:" 13"},{date:"4-5",range:" 1"},{date:"4-6",range:" 2"},{date:"4-7",range:" 3"},{date:"4-8",range:" 1:1-28"},{date:"4-9",range:" 1:29-45"},{date:"4-10",range:" 2"},{date:"4-11",range:" 3"},{date:"4-12",range:" 4:1-25"},{date:"4-13",range:" 4:26-41"},{date:"4-14",range:" 5"},{date:"4-15",range:" 6:1-29"},{date:"4-16",range:" 6:30-56"},{date:"4-17",range:" 7"},{date:"4-18",range:" 8:1-21"},{date:"4-19",range:" 8:22-38"},{date:"4-20",range:" 9:1-29"},{date:"4-21",range:" 9:30-50"},{date:"4-22",range:" 10:1-31"},{date:"4-23",range:" 10:32-52"},{date:"4-24",range:" 11:1-19"},{date:"4-25",range:" 11:20-33"},{date:"4-26",range:" 12:1-27"},{date:"4-27",range:" 12:28-44"},{date:"4-28",range:" 13:1-13"},{date:"4-29",range:" 13:14-37"},{date:"4-30",range:" 14:1-26"},{date:"5-1",range:" 14:27-52"},{date:"5-2",range:" 14:53-72"},{date:"5-3",range:" 15:1-20"},{date:"5-4",range:" 15:21-47"},{date:"5-5",range:" 16"},{date:"5-6",range:" 6"},{date:"5-7",range:" 7:1-16"},{date:"5-8",range:" 7:17-36"},{date:"5-9",range:" 7:37-60"},{date:"5-10",range:" 8:1-17"},{date:"5-11",range:" 8:18-40"},{date:"5-12",range:" 9:1-22"},{date:"5-13",range:" 9:23-43"},{date:"5-14",range:" 10:1-23"},{date:"5-15",range:" 10:24-48"},{date:"5-16",range:" 12"},{date:"5-17",range:" 13"},{date:"5-18",range:" 1"},{date:"5-19",range:" 2"},{date:"5-20",range:" 3"},{date:"5-21",range:" 4"},{date:"5-22",range:" 5"},{date:"5-23",range:" 6"},{date:"5-24",range:" 7:1-24"},{date:"5-25",range:" 7:25-40"},{date:"5-26",range:" 8"},{date:"5-27",range:" 9"},{date:"5-28",range:" 10:1-11:1"},{date:"5-29",range:" 11:2-34"},{date:"5-30",range:" 12"},{date:"5-31",range:" 13"},{date:"6-1",range:" 14:1-19"},{date:"6-2",range:" 14:20-40"},{date:"6-3",range:" 15:1-34"},{date:"6-4",range:" 15:35-58"},{date:"6-5",range:" 16"},{date:"6-6",range:" 1"},{date:"6-7",range:" 2"},{date:"6-8",range:" 3"},{date:"6-9",range:" 4"},{date:"6-10",range:" 5"},{date:"6-11",range:" 6"},{date:"6-12",range:" 7"},{date:"6-13",range:" 8"},{date:"6-14",range:" 9"},{date:"6-15",range:" 10"},{date:"6-16",range:" 11:1-15"},{date:"6-17",range:" 11:16-33"},{date:"6-18",range:" 12"},{date:"6-19",range:" 13"},{date:"6-20",range:" 1"},{date:"6-21",range:" 2"},{date:"6-22",range:" 3"},{date:"6-23",range:" 4"},{date:"6-24",range:" 5"},{date:"6-25",range:" 1"},{date:"6-26",range:" 2"},{date:"6-27",range:" 3"},{date:"6-28",range:" 1"},{date:"6-29",range:" 2"},{date:"6-30",range:" 3"},{date:"7-1",range:" 4"},{date:"7-2",range:" 5"},{date:"7-3",range:" 1"},{date:"7-4",range:" 4"},{date:"7-5",range:" 5"},{date:"7-6",range:" 6"},{date:"7-7",range:" 7"},{date:"7-8",range:" 1:1-25"},{date:"7-9",range:" 1:26-45"},{date:"7-10",range:" 1:46-80"},{date:"7-11",range:" 2:1-20"},{date:"7-12",range:" 2:21-52"},{date:"7-13",range:" 3:1-20"},{date:"7-14",range:" 3:21-4:13"},{date:"7-15",range:" 4:14-30"},{date:"7-16",range:" 4:31-44"},{date:"7-17",range:" 5:1-16"},{date:"7-18",range:" 5:17-39"},{date:"7-19",range:" 6:1-26"},{date:"7-20",range:" 6:27-49"},{date:"7-21",range:" 7:1-17"},{date:"7-22",range:" 7:18-50"},{date:"7-23",range:" 8:1-25"},{date:"7-24",range:" 8:26-56"},{date:"7-25",range:" 9:1-27"},{date:"7-26",range:" 9:28-50"},{date:"7-27",range:" 9:51-10:20"},{date:"7-28",range:" 10:21-42"},{date:"7-29",range:" 11:1-28"},{date:"7-30",range:" 11:29-54"},{date:"7-31",range:" 12:1-34"},{date:"8-1",range:" 12:35-59"},{date:"8-2",range:" 13:1-17"},{date:"8-3",range:" 13:18-35"},{date:"8-4",range:" 14:1-14"},{date:"8-5",range:" 14:15-35"},{date:"8-6",range:" 15:1-10"},{date:"8-7",range:" 15:11-32"},{date:"8-8",range:" 16:1-18"},{date:"8-9",range:" 16:19-31"},{date:"8-10",range:" 17:1-19"},{date:"8-11",range:" 17:20-37"},{date:"8-12",range:" 18:1-17"},{date:"8-13",range:" 18:18-43"},{date:"8-14",range:" 19:1-27"},{date:"8-15",range:" 19:28-48"},{date:"8-16",range:" 20:1-26"},{date:"8-17",range:" 20:27-47"},{date:"8-18",range:" 21:1-19"},{date:"8-19",range:" 21:20-38"},{date:"8-20",range:" 22:1-23"},{date:"8-21",range:" 22:24-46"},{date:"8-22",range:" 22:47-71"},{date:"8-23",range:" 23:1-25"},{date:"8-24",range:" 23:26-56"},{date:"8-25",range:" 24:1-35"},{date:"8-26",range:" 24:36-53"},{date:"8-27",range:" 14"},{date:"8-28",range:" 15:1-21"},{date:"8-29",range:" 15:22-41"},{date:"8-30",range:" 16:1-15"},{date:"8-31",range:" 16:16-40"},{date:"9-1",range:" 17:1-15"},{date:"9-2",range:" 17:16-34"},{date:"9-3",range:" 18"},{date:"9-4",range:" 19:1-20"},{date:"9-5",range:" 19:21-41"},{date:"9-6",range:" 20:1-16"},{date:"9-7",range:" 20:17-38"},{date:"9-8",range:" 1"},{date:"9-9",range:" 2"},{date:"9-10",range:" 3"},{date:"9-11",range:" 4"},{date:"9-12",range:" 5"},{date:"9-13",range:" 6"},{date:"9-14",range:" 1"},{date:"9-15",range:" 2"},{date:"9-16",range:" 3:1-4:1"},{date:"9-17",range:" 4:2-23"},{date:"9-18",range:" 1"},{date:"9-19",range:" 2"},{date:"9-20",range:" 3:1-4:1"},{date:"9-21",range:" 4:2-18"},{date:"9-22",range:" 1"},{date:"9-23",range:" 1"},{date:"9-24",range:" 2"},{date:"9-25",range:" 3"},{date:"9-26",range:" 4"},{date:"9-27",range:" 5"},{date:"9-28",range:" 1"},{date:"9-29",range:" 2"},{date:"9-30",range:" 3"},{date:"10-1",range:" 8"},{date:"10-2",range:" 9"},{date:"10-3",range:" 10"},{date:"10-4",range:" 11"},{date:"10-5",range:" 12"},{date:"10-6",range:" 13"},{date:"10-7",range:" 14"},{date:"10-8",range:" 1:1-28"},{date:"10-9",range:" 1:29-51"},{date:"10-10",range:" 2:1-12"},{date:"10-11",range:" 2:13-25"},{date:"10-12",range:" 3:1-21"},{date:"10-13",range:" 3:22-36"},{date:"10-14",range:" 4:1-26"},{date:"10-15",range:" 4:27-54"},{date:"10-16",range:" 5:1-30"},{date:"10-17",range:" 5:31-47"},{date:"10-18",range:" 6:1-21"},{date:"10-19",range:" 6:22-40"},{date:"10-20",range:" 6:41-71"},{date:"10-21",range:" 7:1-24"},{date:"10-22",range:" 7:25-52"},{date:"10-23",range:" 7:53-8:20"},{date:"10-24",range:" 8:21-38"},{date:"10-25",range:" 8:39-59"},{date:"10-26",range:" 9:1-23"},{date:"10-27",range:" 9:24-41"},{date:"10-28",range:" 10:1-21"},{date:"10-29",range:" 10:22-42"},{date:"10-30",range:" 11:1-27"},{date:"10-31",range:" 11:28-57"},{date:"11-1",range:" 12:1-26"},{date:"11-2",range:" 12:27-36"},{date:"11-3",range:" 12:37-50"},{date:"11-4",range:" 13:1-20"},{date:"11-5",range:" 13:21-38"},{date:"11-6",range:" 14:1-14"},{date:"11-7",range:" 14:15-31"},{date:"11-8",range:" 15:1-16:4"},{date:"11-9",range:" 16:5-33"},{date:"11-10",range:" 17:1-13"},{date:"11-11",range:" 17:14-26"},{date:"11-12",range:" 18:1-18"},{date:"11-13",range:" 18:19-40"},{date:"11-14",range:" 19:1-16"},{date:"11-15",range:" 19:17-42"},{date:"11-16",range:" 20:1-18"},{date:"11-17",range:" 20:19-31"},{date:"11-18",range:" 21:1-14"},{date:"11-19",range:" 21:15-25"},{date:"11-20",range:" 21:1-16"},{date:"11-21",range:" 21:17-40"},{date:"11-22",range:" 22:1-16"},{date:"11-23",range:" 22:17-30"},{date:"11-24",range:" 23:1-11"},{date:"11-25",range:" 23:12-35"},{date:"11-26",range:" 24"},{date:"11-27",range:" 25"},{date:"11-28",range:" 26:1-18"},{date:"11-29",range:" 26:19-32"},{date:"11-30",range:" 27:1-20"},{date:"12-1",range:" 27:21-44"},{date:"12-2",range:" 28:1-16"},{date:"12-3",range:" 28:17-31"},{date:"12-4",range:" 1"},{date:"12-5",range:" 2"},{date:"12-6",range:" 3"},{date:"12-7",range:" 4"},{date:"12-8",range:" 5"},{date:"12-9",range:" 6"},{date:"12-10",range:" 1"},{date:"12-11",range:" 2"},{date:"12-12",range:" 3"},{date:"12-13",range:" 4"},{date:"12-14",range:" 1"},{date:"12-15",range:" 2"},{date:"12-16",range:" 3"},{date:"12-17",range:" 1"},{date:"12-18",range:" 2"},{date:"12-19",range:" 3"},{date:"12-20",range:" 4"},{date:"12-21",range:" 5"},{date:"12-22",range:" 1"},{date:"12-23",range:" 1"},{date:"12-24",range:" 15"},{date:"12-25",range:" 16"},{date:"12-26",range:" 17"},{date:"12-27",range:" 18:1-19:4"},{date:"12-28",range:" 19:5-21"},{date:"12-29",range:" 20"},{date:"12-30",range:" 21"},{date:"12-31",range:" 22"}],Hn={whole_bible:R$,new_testament:P$},O$={...Hn,"1year_revised":Hn.whole_bible,"1year_new":Hn.whole_bible,"1year_easy":Hn.whole_bible,"1year_saehangul":Hn.whole_bible,"1year_sequential":Hn.whole_bible,nt_new:Hn.whole_bible,nt_easy:Hn.whole_bible,nt_saehangul:Hn.whole_bible,nt_message:Hn.whole_bible},Ow=O$,Sg=[{min:0,title:" ",emoji:""},{min:50,title:" ",emoji:""},{min:150,title:" ",emoji:""},{min:350,title:" ",emoji:""},{min:600,title:" ",emoji:""},{min:1e3,title:" ",emoji:""},{min:1500,title:" ",emoji:""},{min:2200,title:" ",emoji:""},{min:3200,title:"  ",emoji:""},{min:4300,title:"",emoji:""}],L$=t=>[...Sg].reverse().find(e=>t>=e.min)||Sg[0],kg=[{id:"first_read",title:" ",desc:"  ",emoji:"",condition:t=>t.currentDay>1},{id:"streak_7",title:" ",desc:"7  ",emoji:"",condition:t=>t.streak>=7},{id:"streak_30",title:"  ",desc:"30  ",emoji:"",condition:t=>t.streak>=30},{id:"streak_100",title:" ",desc:"100  ",emoji:"",condition:t=>t.streak>=100},{id:"day_30",title:"30 ",desc:"30 ",emoji:"",condition:t=>t.currentDay>=30},{id:"day_100",title:"100 ",desc:"100 ",emoji:"",condition:t=>t.currentDay>=100},{id:"day_200",title:"200 ",desc:"200 ",emoji:"",condition:t=>t.currentDay>=200},{id:"day_365",title:" ",desc:"365  !",emoji:"",condition:t=>t.currentDay>=365},{id:"first_memo",title:" ",desc:"  ",emoji:"",condition:(t,e)=>Object.keys(e||{}).length>=1},{id:"memo_10",title:" 10",desc:" 10 ",emoji:"",condition:(t,e)=>Object.keys(e||{}).length>=10},{id:"memo_50",title:" 50",desc:" 50 ",emoji:"",condition:(t,e)=>Object.keys(e||{}).length>=50},{id:"score_100",title:"100 ",desc:" 100 ",emoji:"",condition:t=>t.score>=100},{id:"score_500",title:"500 ",desc:" 500 ",emoji:"",condition:t=>t.score>=500},{id:"score_1000",title:"1000 ",desc:" 1000 ",emoji:"",condition:t=>t.score>=1e3}],th=[{id:"1year",title:" ",desc:"1  1 ."},{id:"nt",title:" ",desc:"1   1 ."}],ms={"1year":[{id:"revised",name:"",desc:"   ",tagName:" "},{id:"new",name:"",desc:"     ",tagName:" "},{id:"easy",name:"",desc:"     ",tagName:" "},{id:"saehangul",name:"",desc:"    ",tagName:" "},{id:"sequential",name:"()",desc:"   ",tagName:" "}],nt:[{id:"new",name:"",desc:"     ",tagName:" "},{id:"easy",name:"",desc:"     ",tagName:" "},{id:"saehangul",name:"",desc:"    ",tagName:" "},{id:"message",name:" ",desc:"       ",tagName:" "}]},$$=t=>`${encodeURIComponent(String(t||"").trim())}@bible.local`,Tg=t=>{const e=t.data();return{uid:t.id,name:e.name,password:e.password,startDate:e.startDate,currentDay:e.currentDay!==void 0&&e.currentDay!==null?e.currentDay:1,streak:e.streak!==void 0&&e.streak!==null?e.streak:0,score:e.score!==void 0&&e.score!==null?e.score:0,lastReadDate:e.lastReadDate!==void 0&&e.lastReadDate!==null?e.lastReadDate:null,gender:e.gender!==void 0&&e.gender!==null?e.gender:"male",communityId:e.communityId!==void 0&&e.communityId!==null?e.communityId:null,communityName:e.communityName!==void 0&&e.communityName!==null?e.communityName:null,subgroupId:e.subgroupId!==void 0&&e.subgroupId!==null?e.subgroupId:null,planId:e.planId!==void 0&&e.planId!==null?e.planId:"1year_revised",achievements:e.achievements!==void 0&&e.achievements!==null?e.achievements:[],memos:e.memos!==void 0&&e.memos!==null?e.memos:{},dayOffset:e.dayOffset!==void 0&&e.dayOffset!==null?e.dayOffset:0,readCount:e.readCount!==void 0&&e.readCount!==null?e.readCount:1,readHistory:e.readHistory!==void 0&&e.readHistory!==null?e.readHistory:[]}},M$=t=>{const e=["","","","","","","","","",""],n=parseInt(t,10);if(isNaN(n))return t;if(n===0)return e[0];let r="";const s=["","","",""],i=n.toString();for(let o=0;o<i.length;o++){const a=parseInt(i[o],10),l=i.length-1-o;a!==0&&(a===1&&l>0||(r+=e[a]),r+=s[l])}return r},F$=(t,e)=>{const n=[31,28,31,30,31,30,31,31,30,31,30,31];let r=0;for(let s=0;s<t-1;s++)r+=n[s];return r+=e-1,r},V$=(t,e)=>{let n=t+e;for(;n>365;)n-=365;for(;n<1;)n+=365;return n},U$=`### 1.    
2.            
3.       
4.        
()`,AS=365,Lp="https://bible114.net/html/audio",td="https://mvwhepqqzdtqtorgkrtf.supabase.co/functions/v1/notion-proxy",vv=t=>{const e=new Date().toDateString(),n={};return Or.forEach(r=>{r.subgroups.forEach(s=>{const i=t.filter(f=>f.communityId===r.id&&f.subgroupId===s),o=i.length,a=i.filter(f=>f.lastReadDate===e).length,l=o>0?Math.round(a/o*100):0,u=o>0?i.reduce((f,p)=>{const x=((p.readCount||1)-1)*365+(p.currentDay||1);return f+x},0)/o:0,d=Math.round(u/AS*100),h=i.reduce((f,p)=>f+(p.score||0),0);n[`${r.id}_${s}`]={rate:l,readCount:a,totalCount:o,progressRate:d,avgDay:Math.round(u),totalScore:h,communityId:r.id,communityName:r.name,subgroupName:s}})}),n},B$=t=>{if(!t||t.length===0)return null;const e=new Date,n=new Date(e);n.setDate(e.getDate()-e.getDay()),n.setHours(0,0,0,0);const r=h=>!h.readHistory||!Array.isArray(h.readHistory)?0:h.readHistory.reduce((f,p)=>{try{const y=typeof p=="string"?p:p.date,x=typeof p=="string"?1:p.daysRead||1;return new Date(y)>=n?f+x:f}catch{return f}},0),s=t.map(h=>({...h,weeklyCount:r(h),totalCount:h.readHistory?h.readHistory.length:0})).filter(h=>h.weeklyCount>0).sort((h,f)=>f.weeklyCount!==h.weeklyCount?f.weeklyCount-h.weeklyCount:f.totalCount-h.totalCount),i=s.length>0?s[0]:null,o=s.slice(0,10),l=t.map(h=>({...h,totalCount:((h.readCount||1)-1)*365+(h.currentDay||0)})).filter(h=>h.totalCount>0).sort((h,f)=>f.totalCount-h.totalCount),u=l.length>0?l[0]:null,d=l.slice(0,10);return{streakMVP:i,progressMVP:u,weeklyTop10:o,totalTop10:d}},z$=t=>!t||Object.keys(t).length===0?[]:Object.keys(t).map(function(e){var n=t[e];return{name:n.subgroupName,rate:n.rate||0,readCount:n.readCount||0,totalCount:n.totalCount||0,progressRate:n.progressRate||0,avgDay:n.avgDay||0,totalScore:n.totalScore||0,communityId:n.communityId,communityName:n.communityName}}).sort(function(e,n){return n.progressRate!==e.progressRate?n.progressRate-e.progressRate:n.totalScore-e.totalScore}),q$=t=>!t||Object.keys(t).length===0?[]:Object.keys(t).map(function(e){var n=t[e];return{name:n.subgroupName,progressRate:n.progressRate||0,avgDay:n.avgDay||0,totalScore:n.totalScore||0,totalCount:n.totalCount||0,communityId:n.communityId,communityName:n.communityName}}).filter(function(e){return e.totalCount>0}).sort(function(e,n){return n.progressRate-e.progressRate}),W$=t=>{const e=new Date().toDateString(),n=t.length,r=t.filter(o=>o.lastReadDate===e).length,s=n>0?Math.round(r/n*100):0,i={};return Or.forEach(o=>{const a=t.filter(d=>d.communityId===o.id),l=a.length,u=a.filter(d=>d.lastReadDate===e).length;i[o.id]={name:o.name,total:l,readToday:u,rate:l>0?Math.round(u/l*100):0}}),{totalUsers:n,readToday:r,readRate:s,communityStats:i}},H$=t=>{if(!t)return{lines:[""],bgColor:"bg-gradient-to-br from-slate-400 to-slate-500"};const e={"1":"bg-[#FF5252] text-white border-red-600","2":"bg-[#FF7043] text-white border-orange-600","3":"bg-[#FFA726] text-white border-amber-600","4":"bg-[#FBC02D] text-white border-yellow-700","5":"bg-[#8BC34A] text-white border-lime-700","6":"bg-[#4CAF50] text-white border-green-700","7":"bg-[#009688] text-white border-emerald-700","8":"bg-[#00BCD4] text-white border-teal-700","9":"bg-[#03A9F4] text-white border-sky-700","10":"bg-[#42A5F5] text-white border-blue-600","11":"bg-[#2196F3] text-white border-blue-700","12":"bg-[#3F51B5] text-white border-indigo-700","13":"bg-[#673AB7] text-white border-violet-700","14":"bg-[#9C27B0] text-white border-purple-700","15":"bg-[#F06292] text-white border-fuchsia-700","16":"bg-[#FF4081] text-white border-pink-700","17":"bg-[#E91E63] text-white border-rose-700",:"bg-[#FFB300] text-white border-amber-700",:"bg-[#1E88E5] text-white border-blue-800",:"bg-[#5C6BC0] text-white border-indigo-800",:"bg-[#43A047] text-white border-green-800",:"bg-[#78909C] text-white border-slate-600"},n={1:["","1"],2:["","2"],:["",""],:["",""],"1":["1",""],"2":["2",""],"3":["3",""],"4":["4",""],"5":["5",""]," ":["",""]," ":["",""]," ":["",""]," ":["",""]," ":["",""],:["",""]};return t.match(/^\d+$/)?{lines:[t],bgColor:e[t]||"bg-slate-400"}:t.match(/^\d+$/)?{lines:[t],bgColor:e[t]||"bg-slate-400"}:n[t]?{lines:n[t],bgColor:e[t]||"bg-slate-400"}:{lines:[t],bgColor:e[t]||"bg-slate-400"}},Lw=(t,e,n={})=>{const r=Object.keys(e).length,s=Object.keys(e).map(function(d){return[d,e[d]]}).sort(function(d,h){return Number(d[0])-Number(h[0])});let i="";s.forEach(([d,h])=>{const f=h.date?new Date(h.date).toLocaleDateString("ko-KR"):"",p=Array.isArray(h.texts)?h.texts:[h.text||""];i+=`
                    <div style="background: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid #e2e8f0;">
                            <span style="background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; padding: 8px 20px; border-radius: 25px; font-weight: bold; font-size: 18px;">DAY ${d}</span>
                            <span style="color: #64748b; font-size: 16px;">${f}</span>
                        </div>
                        <div style="color: #475569; font-size: 17px; font-weight: 600; margin-bottom: 16px;">${h.title||""}</div>
                        ${p.map((y,x)=>`
                            <div style="color: #1e293b; font-size: 18px; line-height: 1.9; white-space: pre-wrap; ${p.length>1?"background: #f8fafc; padding: 16px; border-radius: 12px; margin-bottom: 12px;":""}">${y}</div>
                        `).join("")}
                    </div>
                `});const o=`<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${t}  </title>
<style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
        font-family: -apple-system, BlinkMacSystemFont, "Malgun Gothic", " ", sans-serif;
        background: linear-gradient(180deg, #f0f4ff 0%, #fdf4ff 100%);
        min-height: 100vh;
        padding: 20px;
        -webkit-text-size-adjust: 100%;
    }
    .container { max-width: 600px; margin: 0 auto; }
    @media print {
        body { background: white; padding: 0; }
        .no-print { display: none; }
    }
</style>
</head>
<body>
<div class="container">
    <!--  -->
    <div style="background: linear-gradient(135deg, #4f46e5, #7c3aed); border-radius: 24px; padding: 50px 30px; text-align: center; color: white; margin-bottom: 30px;">
        <div style="font-size: 60px; margin-bottom: 20px;"></div>
        <div style="font-size: 32px; font-weight: bold; margin-bottom: 10px;">${t}</div>
        <div style="font-size: 22px; opacity: 0.9;">2025  </div>
        <div style="font-size: 16px; opacity: 0.7; margin-top: 10px;"> 365</div>
    </div>
    
    <!--  -->
    <div style="background: white; border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
        <h2 style="text-align: center; font-size: 24px; color: #1e293b; margin-bottom: 25px;">  </h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div style="background: #f0f4ff; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #4f46e5;">${r}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> </div>
            </div>
            <div style="background: #f0fdf4; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #059669;">${n.currentDay||1}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> Day</div>
            </div>
            <div style="background: #fef2f2; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #dc2626;">${n.score||0}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> </div>
            </div>
            <div style="background: #fffbeb; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #f59e0b;">${n.streak||0}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> </div>
            </div>
        </div>
        <div style="text-align: center; color: #94a3b8; font-size: 14px; margin-top: 20px;">
            : ${new Date().toLocaleDateString("ko-KR")}
        </div>
    </div>
    
    <!--   -->
    ${s.length>0?`
        <h2 style="font-size: 24px; color: #1e293b; margin-bottom: 20px; padding-left: 10px;">  </h2>
        ${i}
    `:`
        <div style="text-align: center; padding: 50px; color: #94a3b8;">
            <div style="font-size: 50px; margin-bottom: 15px;"></div>
            <div style="font-size: 18px;">   .</div>
        </div>
    `}
    
    <!--  -->
    <div style="background: linear-gradient(135deg, #4f46e5, #7c3aed); border-radius: 24px; padding: 40px 30px; text-align: center; color: white; margin-top: 30px;">
        <div style="font-size: 50px; margin-bottom: 20px;"></div>
        <div style="font-size: 26px; font-weight: bold; margin-bottom: 15px;">!</div>
        <div style="font-size: 16px; opacity: 0.9; line-height: 1.8; margin-bottom: 20px;">
            "    <br>
                 <br>
               <br>
                 "
        </div>
        <div style="font-size: 18px; opacity: 0.8;">-  12:1 -</div>
    </div>
    
    <div style="text-align: center; padding: 30px; color: #94a3b8; font-size: 14px;">
           
    </div>
</div>
</body>
</html>`,a=new Blob([o],{type:"text/html;charset=utf-8"}),l=URL.createObjectURL(a),u=document.createElement("a");u.href=l,u.download=`${t}__2025.html`,u.click(),URL.revokeObjectURL(l)},G$=async t=>{if(t)try{const e=await t.collection("users").get();let n=`Name,Subgroup,Day,Date,Title,Memo
`;e.docs.forEach(o=>{const a=o.data(),l=a.name||"Unknown",u=a.subgroupId||"-",d=a.memos||{};Object.keys(d).forEach(function(h){var f=d[h];const p=f.date?new Date(f.date).toLocaleDateString("ko-KR"):"",y=(f.title||"").replace(/,/g,";").replace(/\n/g," "),x=(f.text||"").replace(/,/g,";").replace(/\n/g," ");n+=`"${l}","${u}","${h}","${p}","${y}","${x}"
`})});const r=new Blob(["\uFEFF"+n],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=`all_memos_${new Date().toISOString().split("T")[0]}.csv`,i.click(),URL.revokeObjectURL(s)}catch(e){console.error("CSV  :",e),alert("CSV    .")}},K$=t=>{if(t.length===0){alert(" .");return}let e=`data:text/csv;charset=utf-8,\uFEFF,,,Day,,,,ID
`;t.forEach(r=>{e+=`${r.name},${r.communityName},${r.subgroupId},${r.currentDay},${r.score},${r.streak},${r.lastReadDate||""},${r.planId||"1year_revised"}\r
`});const n=document.createElement("a");n.setAttribute("href",encodeURI(e)),n.setAttribute("download",`__${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(n),n.click(),document.body.removeChild(n)},Q$=()=>{const[t,e]=P.useState(null),[n,r]=P.useState(!0);return P.useEffect(()=>{if(!Pt){r(!1);return}const s=Pt.onAuthStateChanged(async i=>{if(console.log(" Auth state changed:",i?i.uid:null),i)try{const o=await de.collection("users").doc(i.uid).get();if(o.exists){const a=Tg(o);console.log("   :",a.name),e(a)}else console.log(" Firestore  "),e(null)}catch(o){console.error("   :",o),e(null)}else e(null);r(!1)});return()=>s()},[]),{currentUser:t,setCurrentUser:e,authLoading:n}},$w=t=>{if(!t)return t;const e=/(^|[.!?""\(\)\[\]]\s*)(\d+)(?=[-])(?!(||||||||||||||||||)(?![-]))/gm;let n=!0;return t.replace(e,(s,i,o)=>{const a=`[[VERSE:${o}]]`;return n&&i.trim()===""?(n=!1,a):(n=!1,`${i}
${a}`)})},Y$=t=>{const[e,n]=P.useState({title:"",subtitle:"",text:"",audioUrl:null,loading:!1}),[r,s]=P.useState(null),i=async(u,d)=>{if(!de)return null;try{const[h,f]=(u||"1year_revised").split("_"),p=`${h}_${f}_${d}`,y=await de.collection("verses").doc(p).get();if(y.exists)return y.data()}catch(h){console.error("  :",h)}return null},o=async(u,d)=>{const[h,f]=(u||"1year_revised").split("_"),p=ms[h],y=p?p.find(v=>v.id===f):null,x=y?y.tagName:" ",w=new Date(2025,0,d),g=String(w.getMonth()+1).padStart(2,"0"),m=String(w.getDate()).padStart(2,"0");try{const v=await fetch(td,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:x,date:`${g}-${m}`})});if(!v.ok)throw new Error(`Server Error: ${v.status}`);const b=await v.json();return b.error?{title:null,text:`[] ${b.error}`}:{title:b.title,text:b.text,audioUrl:b.audioUrl}}catch(v){return console.error(v),{title:null,text:"    ."}}},a=async(u,d)=>{const h=await i(u,d);return h&&h.text?h:await o(u,d)},l=P.useCallback(async u=>{if(!t)return;n(b=>({...b,loading:!0}));const{planId:d,dayOffset:h=0,readCount:f=1}=t,[p,y]=(d||"1year_revised").split("_"),x=th.find(b=>b.id===p),w=x?x.title:" ",g=V$(u,h),m=await a(d,g),v=f>1?` (${f})`:"";if(m&&m.text&&!m.text.startsWith("[]")){let b=m.text;y&&y.startsWith("saehangul")&&(b=$w(b));let S=m.audioUrl||null;!S&&Lp&&Lp.startsWith("http")&&(S=`${Lp.replace(/\/$/,"")}/${d}/${g}.mp3`),n({title:`${w} DAY ${u}${v}`,subtitle:m.title||"( )",text:b,audioUrl:S,loading:!1})}else{const b=ms[p],S=b?b.find(j=>j.id===y):null,_=S&&S.name||"";let T=g===1?U$:m&&m.text||"   .";y&&y.startsWith("saehangul")&&(T=$w(T)),n({title:`${w} DAY ${u}${v}`,subtitle:`${_} `,text:T,audioUrl:null,loading:!1})}},[t]);return{verseData:e,setVerseData:n,viewingDay:r,setViewingDay:s,loadContent:l}},X$=t=>{const[e,n]=P.useState({}),r=P.useCallback(async i=>{if(!de||!i)return{};try{const o=await de.collection("users").doc(i).get();if(o.exists&&o.data().memos)return n(o.data().memos),o.data().memos}catch(o){console.error("  :",o)}return{}},[]),s=P.useCallback(async(i,o,a,l,u)=>{const d=t?t.uid:null;if(!d||!o.trim())return;const h=e[i];let f=[];h&&(h.texts?f=[...h.texts]:h.text&&(f=[h.text])),f.push(o);const p={...e,[i]:{texts:f,text:f.join(`

---

`),date:new Date().toISOString(),title:a}};n(p),typeof u=="function"&&u();try{await de.collection("users").doc(d).set({memos:p,updatedAt:Ae.firestore.FieldValue.serverTimestamp()},{merge:!0}),l&&l(t,p)}catch(y){console.error("  :",y)}},[t,e]);return{memos:e,setMemos:n,loadMemos:r,saveMemo:s}},J$=(t,e)=>{const[n,r]=P.useState({}),[s,i]=P.useState([]),[o,a]=P.useState([]),[l,u]=P.useState(null),d=P.useCallback(async()=>{try{return(await de.collection("users").get()).docs.map(x=>({uid:x.id,...x.data()}))}catch(p){return console.error("  :",p),[]}},[]),h=P.useCallback(async()=>{try{const p=await de.collection("settings").doc("announcement").get();p.exists&&p.data().enabled?u(p.data()):u(null)}catch(p){console.error("  :",p)}},[]),f=P.useCallback(async p=>{const y=t?t.uid:null;if(y)try{await de.collection("users").doc(y).set({subgroupId:p,updatedAt:Ae.firestore.FieldValue.serverTimestamp()},{merge:!0}),e(w=>({...w,subgroupId:p})),alert(` "${p}"() !`);const x=await d();if(a(x),r(vv(x)),t.communityId){const w=x.filter(g=>g.communityId===t.communityId);i(w)}}catch(x){console.error("  :",x),alert(" ")}},[t,e,d]);return{subgroupStats:n,setSubgroupStats:r,communityMembers:s,setCommunityMembers:i,allMembersForRace:o,setAllMembersForRace:a,announcement:l,setAnnouncement:u,loadAllMembers:d,loadAnnouncement:h,changeSubgroup:f}},Z$=(t,e,n,r,s,i)=>{const[o,a]=P.useState([]),[l,u]=P.useState(!1),[d,h]=P.useState(!1),[f,p]=P.useState(null),[y,x]=P.useState(null),[w,g]=P.useState(null),m=P.useCallback((_,T)=>{if(!_)return;const j=[],q=new Set(_.achievements||[]);if(kg.forEach($=>{q.has($.id)||$.condition(_,T)&&(j.push($.id),g(Q=>$),setTimeout(()=>g(null),5e3))}),j.length>0){const $=[..._.achievements||[],...j];de.collection("users").doc(_.uid).update({achievements:$})}},[]),v=P.useCallback(async()=>{if(!t)return;const _=t.uid,T=new Date().toDateString(),j=t.currentDay||1,q=t.score||0,$=Math.floor(q/100),Q=Math.min(5,t.streak||0),Y=10+Q,ve=q+Y,pe=Math.floor(ve/100),at=j>=365?1:j+1,Xe=j>=365?(t.readCount||1)+1:t.readCount||1,Oe=j>=365;let F=1;if(t.lastReadDate){const A=new Date(t.lastReadDate),B=new Date(T),L=Math.floor((B-A)/(1e3*60*60*24));L===1?F=(t.streak||0)+1:L===0&&(F=t.streak||0)}const k={currentDay:at,readCount:Xe,score:ve,streak:F,lastReadDate:T,updatedAt:Ae.firestore.FieldValue.serverTimestamp()},N={date:T,day:j,score:Y};try{await de.collection("users").doc(_).set(k,{merge:!0}),await de.collection("users").doc(_).collection("history").add(N);const A={...t,...k};e(A),u(!0),a(L=>[N,...L]),pe>$&&(p(!0),setTimeout(()=>p(!1),5e3)),Q>0&&(x(`${Q}   +${Q}pt!`),setTimeout(()=>x(null),3e3));const B=await i();if(n(B),s(vv(B)),t.communityId){const L=B.filter(ee=>ee.communityId===t.communityId);r(L)}Oe&&alert(` ! ${Xe-1} !

 ${Xe} ! `),h(!0),setTimeout(()=>h(!1),3e3),m(A,{}),window.scrollTo({top:0,behavior:"smooth"})}catch(A){console.error("  :",A)}},[t,e,i,n,r,s,m]),b=P.useCallback(async(_,T)=>{if(!t)return;const j=t.uid;try{const q=new Date().toDateString();await de.collection("users").doc(j).set({currentDay:1,score:0,streak:0,startDate:q,lastReadDate:null,memos:{},achievements:[],updatedAt:Ae.firestore.FieldValue.serverTimestamp()},{merge:!0}),e($=>({...$,currentDay:1,score:0,streak:0,startDate:q,lastReadDate:null,achievements:[],readCount:1})),_&&_({}),T&&T([]),alert("!  Day 1. ! ")}catch(q){console.error(" :",q),alert(" ")}},[t,e]),S=P.useCallback(async _=>{if(!t)return;const T=t.uid;try{await de.collection("users").doc(T).set({dayOffset:_,updatedAt:Ae.firestore.FieldValue.serverTimestamp()},{merge:!0}),e(j=>({...j,dayOffset:_}))}catch(j){console.error("  :",j)}},[t,e]);return{readHistory:o,setReadHistory:a,hasReadToday:l,setHasReadToday:u,showConfetti:d,setShowConfetti:h,levelUpToast:f,setLevelUpToast:p,bonusToast:y,setBonusToast:x,newAchievement:w,setNewAchievement:g,handleRead:v,handleRestart:b,changeStartDate:S,checkAchievements:m}},eM=(t,e,n)=>{const{verseData:r,setVerseData:s,viewingDay:i,setViewingDay:o,loadContent:a}=Y$(t),{subgroupStats:l,setSubgroupStats:u,communityMembers:d,setCommunityMembers:h,allMembersForRace:f,setAllMembersForRace:p,announcement:y,loadAnnouncement:x,loadAllMembers:w,changeSubgroup:g}=J$(t,e),{readHistory:m,setReadHistory:v,hasReadToday:b,setHasReadToday:S,showConfetti:_,setShowConfetti:T,levelUpToast:j,setLevelUpToast:q,bonusToast:$,setBonusToast:Q,newAchievement:Y,setNewAchievement:ve,handleRead:pe,handleRestart:at,changeStartDate:Xe,checkAchievements:Oe}=Z$(t,e,p,h,u,w),{memos:F,setMemos:k,loadMemos:N,saveMemo:A}=X$(t);return P.useEffect(()=>{if(n!=="dashboard"||!t)return;if(i===null){o(t.currentDay||1);return}(async()=>{await a(i);const L=await w();if(p(L),L&&L.length>0&&(u(vv(L)),t.communityId)){const xe=L.filter(se=>se.communityId===t.communityId);h(xe)}const ee=Pt.currentUser?Pt.currentUser.uid:null;if(ee){await N(ee);const xe=await de.collection("users").doc(ee).get();xe.exists&&xe.data().readHistory&&v(xe.data().readHistory)}await x()})()},[n,t==null?void 0:t.uid,i,t==null?void 0:t.planId,t==null?void 0:t.dayOffset,a,w,N,x,p,u,h,v]),P.useEffect(()=>{t&&t.lastReadDate===new Date().toDateString()?S(!0):S(!1)},[t,S]),{verseData:r,setVerseData:s,subgroupStats:l,setSubgroupStats:u,communityMembers:d,setCommunityMembers:h,allMembersForRace:f,setAllMembersForRace:p,memos:F,setMemos:k,readHistory:m,setReadHistory:v,announcement:y,viewingDay:i,setViewingDay:o,hasReadToday:b,setHasReadToday:S,showConfetti:_,setShowConfetti:T,levelUpToast:j,setLevelUpToast:q,bonusToast:$,setBonusToast:Q,newAchievement:Y,setNewAchievement:ve,handleRead:pe,saveMemo:(B,L,ee)=>A(B,L,r.subtitle,Oe,ee),changeSubgroup:g,handleRestart:()=>at(k,v),changeStartDate:Xe,loadAllMembers:w,loadMemos:N,loadAnnouncement:x}},he=({name:t,size:e=20,className:n=""})=>({crown:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:c.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-3-4 3-6-7zm5 16h10"})}),trophy:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),c.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),c.jsx("path",{d:"M4 22h16"}),c.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),c.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),c.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),users:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"9",cy:"7",r:"4"}),c.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),c.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),book:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:c.jsx("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"})}),arrowRight:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("path",{d:"M5 12h14"}),c.jsx("path",{d:"m12 5 7 7-7 7"})]}),back:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:c.jsx("path",{d:"m15 18-6-6 6-6"})}),flame:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:c.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"})}),close:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),trash:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("polyline",{points:"3 6 5 6 21 6"}),c.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),download:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"7 10 12 15 17 10"}),c.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),refresh:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),c.jsx("path",{d:"M21 3v5h-5"}),c.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),c.jsx("path",{d:"M8 16H3v5"})]}),edit:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:c.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),helpbook:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),c.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),chart:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),c.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),c.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),medal:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15"}),c.jsx("path",{d:"M11 12 5.12 2.2"}),c.jsx("path",{d:"m13 12 5.88-9.8"}),c.jsx("path",{d:"M8 7h8"}),c.jsx("circle",{cx:"12",cy:"17",r:"5"}),c.jsx("path",{d:"M12 18v-2h-.5"})]}),calendar:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[c.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),c.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),c.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),c.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]})})[t]||null,jS=({content:t,fontSize:e=16,activeChunkIndex:n=-1,onSegmentClick:r=null})=>{if(!t)return null;const s=e+6,i=e+4,o=e+2,a=p=>{const y=/<details>([\s\S]*?)<\/details>/g,x=[];let w=0,g;for(;(g=y.exec(p))!==null;){g.index>w&&x.push({type:"text",content:p.slice(w,g.index)});const m=g[1],v=m.match(/<summary>(.*?)<\/summary>/s);if(v){const b=v[1].trim(),S=m.slice(v[0].length).trim();x.push({type:"details",summary:b,body:S})}w=g.index+g[0].length}return w<p.length&&x.push({type:"text",content:p.slice(w)}),x.length>0?x:[{type:"text",content:p}]};P.useEffect(()=>{if(n>=0){const p=document.getElementById(`tts-segment-${n}`);if(p){const y=p.getBoundingClientRect(),x=window.innerHeight;y.top>x*.3&&y.bottom<x*.7||p.scrollIntoView({behavior:"smooth",block:"center"})}}},[n]);let l=0;const u=p=>{if(typeof p!="string")return p;const y=/\[\[VERSE:(\d+)\]\]/g,x=[];let w=0,g;for(;(g=y.exec(p))!==null;){g.index>w&&x.push(p.slice(w,g.index));const m=g[1];x.push(c.jsx("span",{className:"inline-flex items-center justify-center bg-slate-100 text-slate-500 font-bold rounded-sm px-1 mr-1 text-[0.7em] align-middle select-none border border-slate-200 shadow-sm",style:{lineHeight:"1",verticalAlign:"text-top",marginTop:"2px"},children:m},`verse-${m}-${g.index}`)),w=g.index+g[0].length}return w<p.length&&x.push(p.slice(w)),x.length>0?x:p},d=(p,y=!1)=>{if(!r)return u(p);let x=p;return x=x.replace(/^#+\s*/,""),x.split(/([.?!])/g).reduce((g,m)=>[".","?","!"].indexOf(m)!==-1?(g.length>0&&(g[g.length-1]+=m),g):(m.trim().length>0&&g.push(m),g),[]).map((g,m)=>{const v=l++,b=n===v;return c.jsx("span",{id:`tts-segment-${v}`,onClick:()=>r(v),className:`transition-all duration-300 cursor-pointer rounded px-0.5 font-normal ${b?"bg-yellow-300 text-slate-900 font-bold shadow-sm":"hover:bg-slate-100"}`,title:"  ",children:u(g)},v)})},h=(p,y,x)=>{const w=p.trim();if(w.startsWith("# ")){const m=l++;return c.jsx("h1",{id:`tts-segment-${m}`,onClick:()=>r&&r(m),className:`font-bold text-slate-800 ${y?"mt-0":"mt-8"} mb-3 cursor-pointer ${n===m?"bg-yellow-200":""}`,style:{fontSize:`${s}px`},children:w.slice(2)},x)}if(w.startsWith("## ")){const m=l++;return c.jsx("h2",{id:`tts-segment-${m}`,onClick:()=>r&&r(m),className:`font-bold text-slate-800 ${y?"mt-0":"mt-6"} mb-2 cursor-pointer ${n===m?"bg-yellow-200":""}`,style:{fontSize:`${i}px`},children:w.slice(3)},x)}if(w.startsWith("### ")){const m=l++;return c.jsx("h3",{id:`tts-segment-${m}`,onClick:()=>r&&r(m),className:`font-bold text-slate-800 ${y?"mt-0":"mt-4"} mb-1 border-b border-slate-200 pb-1 cursor-pointer ${n===m?"bg-yellow-200":""}`,style:{fontSize:`${o}px`},children:w.slice(4)},x)}if(w.startsWith(" ")||w.startsWith("- "))return c.jsx("li",{className:"list-disc list-outside ml-6 text-slate-700 leading-relaxed mb-1 font-normal",style:{fontSize:`${e}px`},children:d(w.slice(2),!0)},x);if(w.startsWith("> "))return c.jsx("blockquote",{className:"border-l-4 border-blue-300 pl-3 italic text-slate-600 my-2 bg-slate-50 p-2 rounded",style:{fontSize:`${e}px`},children:d(w.slice(2))},x);const g=w.match(/^(\d+)([\s.]\s?)(?!||||)(.*)/);if(g){const m=g[1];g[2];const v=g[3];return c.jsxs("p",{className:"text-slate-700 leading-relaxed mb-3 flex items-start gap-2",style:{fontSize:`${e}px`,textAlign:"justify"},children:[c.jsx("span",{className:"font-bold text-blue-500 shrink-0 mt-1",style:{fontSize:`${Math.max(10,e-4)}px`},children:m}),c.jsx("span",{className:"font-normal",children:d(v,!1)})]},x)}return w===""?c.jsx("div",{className:"h-1"},x):c.jsx("p",{className:"text-slate-700 leading-relaxed mb-3 font-normal",style:{fontSize:`${e}px`,textAlign:"justify"},children:d(p,!1)},x)},f=a(t);return c.jsx("div",{className:"markdown-body",children:f.map((p,y)=>p.type==="details"?c.jsxs("details",{className:"my-2 border border-slate-200 rounded-xl bg-slate-50 overflow-hidden shadow-sm",children:[c.jsx("summary",{className:"cursor-pointer px-4 py-3 font-bold text-slate-700 hover:bg-slate-100 transition-colors",style:{fontSize:`${e}px`},children:p.summary}),c.jsx("div",{className:"px-4 py-3 space-y-1 border-t border-slate-100 bg-white",children:p.body.split(`
`).map((x,w)=>h(x,!1,`details-${y}-line-${w}`))})]},`details-${y}`):p.content.split(`
`).map((x,w)=>h(x,y===0&&w===0,`text-${y}-line-${w}`)))})},tM=({loginTab:t,setLoginTab:e,loginName:n,setLoginName:r,loginPw:s,setLoginPw:i,signupName:o,setSignupName:a,signupBirthdate:l,setSignupBirthdate:u,signupPw:d,setSignupPw:h,signupPwConfirm:f,setSignupPwConfirm:p,errorMsg:y,handleLogin:x})=>c.jsxs("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6 relative",children:[c.jsx("div",{className:"absolute top-4 right-4",children:c.jsx("button",{onClick:()=>{r("admin"),i("")},className:"text-xs text-slate-300 hover:text-slate-500",children:""})}),c.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl w-full max-w-lg border border-slate-100",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("h1",{className:"text-2xl font-extrabold text-slate-800",children:"  "}),c.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"  !"})]}),c.jsxs("div",{className:"flex gap-2 mb-6",children:[c.jsx("button",{type:"button",onClick:()=>e("login"),className:`flex-1 py-3 rounded-xl font-bold transition-all ${t==="login"?"bg-blue-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:""}),c.jsx("button",{type:"button",onClick:()=>e("signup"),className:`flex-1 py-3 rounded-xl font-bold transition-all ${t==="signup"?"bg-blue-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:""})]}),t==="login"?c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),c.jsx("input",{type:"text",value:n,onChange:w=>r(w.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),c.jsx("input",{type:"password",value:s,onChange:w=>i(w.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6  "})]}),c.jsx("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100",children:c.jsxs("p",{className:"text-xs text-red-600 font-bold break-keep text-center",children:["  ? ",c.jsx("br",{})," ",c.jsx("span",{className:"underline",children:""})," .",c.jsx("br",{}),"(: )"]})}),y&&c.jsx("p",{className:"text-red-500 text-xs text-center",children:y}),c.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-200 transition-all active:scale-95 mt-4",children:""}),c.jsx("p",{className:"text-xs text-slate-400 text-center mt-3",children:"    ."})]}):c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),c.jsx("input",{type:"text",value:o,onChange:w=>a(w.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),c.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"8",value:l,onChange:w=>{const g=w.target.value.replace(/[^0-9]/g,"");u(g)},className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg tracking-wider",placeholder:"19500101",required:!0}),c.jsx("p",{className:"text-[10px] text-slate-400 mt-1 ml-1",children:"8   (: 19500101)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),c.jsx("input",{type:"password",value:d,onChange:w=>h(w.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6 ",required:!0,minLength:6})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:" "}),c.jsx("input",{type:"password",value:f,onChange:w=>p(w.target.value),className:`w-full bg-slate-50 border rounded-xl p-3 focus:outline-none focus:ring-2 ${f&&d!==f?"border-red-300 focus:ring-red-500":"border-slate-200 focus:ring-blue-500"}`,placeholder:"  ",required:!0}),f&&d!==f&&c.jsx("p",{className:"text-xs text-red-500 mt-1 ml-1",children:"   "})]}),c.jsx("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:c.jsx("p",{className:"text-xs text-blue-600 font-bold break-keep text-center",children:"    "})}),y&&c.jsx("p",{className:"text-red-500 text-xs text-center",children:y}),c.jsx("button",{type:"submit",disabled:d!==f||!o||!l||!d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-200 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})]}),nM=({handleLogout:t,downloadCSV:e,adminViewMode:n,setAdminViewMode:r,adminFilter:s,setAdminFilter:i,adminSortBy:o,setAdminSortBy:a,allUsers:l,MOCK_COMMUNITIES:u,BIBLE_VERSIONS:d,announcementInput:h,setAnnouncementInput:f,saveAnnouncement:p,generateMemosCSV:y,generateMemosHTML:x,editingUser:w,setEditingUser:g,startEditUser:m,saveEditUser:v,changingPassword:b,setChangingPassword:S,newPassword:_,setNewPassword:T,changePassword:j,deleteUser:q,lastSyncInfo:$,setLastSyncInfo:Q,syncProgress:Y,setSyncProgress:ve,selectedSyncVersions:pe,setSelectedSyncVersions:at,syncNotionToFirestore:Xe,adminStats:Oe,db:F})=>c.jsx("div",{className:"min-h-screen bg-slate-100 p-4",children:c.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"  "}),c.jsx("button",{onClick:t,className:"text-sm bg-slate-200 px-3 py-2 rounded hover:bg-slate-300",children:""})]}),c.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 font-bold",children:[c.jsx(he,{name:"download",size:18})," CSV "]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[c.jsx(he,{name:"chart",size:20,className:"text-blue-500"}),"    (",new Date().toLocaleDateString("ko-KR"),")"]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600",children:Oe.totalUsers}),c.jsx("div",{className:"text-xs text-slate-500",children:" "})]}),c.jsxs("div",{className:"bg-green-50 p-4 rounded-xl text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-green-600",children:Oe.readToday}),c.jsx("div",{className:"text-xs text-slate-500",children:"  "})]}),c.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[Oe.readRate,"%"]}),c.jsx("div",{className:"text-xs text-slate-500",children:" "})]})]}),c.jsx("h3",{className:"font-bold text-slate-700 mb-2",children:"   "}),c.jsx("div",{className:"space-y-2",children:Object.keys(Oe.communityStats).map(function(k){var N=Oe.communityStats[k];return c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-20 text-sm font-bold text-slate-600",children:N.name}),c.jsx("div",{className:"flex-1 h-4 bg-slate-100 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:N.rate+"%"}})}),c.jsxs("div",{className:"text-sm text-slate-500 w-28 text-right",children:[N.readToday,"/",N.total," (",N.rate,"%)"]})]},k)})})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:"  "}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>r("today"),className:`text-xs px-3 py-1 rounded-full font-bold ${n==="today"?"bg-red-500 text-white":"bg-slate-100 text-slate-500"}`,children:" "}),c.jsx("button",{onClick:()=>r("inactive"),className:`text-xs px-3 py-1 rounded-full font-bold ${n==="inactive"?"bg-orange-500 text-white":"bg-slate-100 text-slate-500"}`,children:" "})]})]}),c.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[c.jsx("button",{onClick:()=>i("all"),className:`text-xs px-3 py-1.5 rounded-lg font-bold border ${s==="all"?"bg-blue-500 text-white border-blue-500":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:""}),u.map(k=>c.jsx("button",{onClick:()=>i(k.id),className:`text-xs px-3 py-1.5 rounded-lg font-bold border ${s===k.id?"bg-blue-500 text-white border-blue-500":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:k.name},k.id))]}),c.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:(()=>{const k=new Date().toDateString(),N=new Date;let A=s==="all"?l:l.filter(B=>B.communityId===s);if(n==="today"){const B=A.filter(se=>se.lastReadDate!==k),L={};B.forEach(se=>{const fe=se.communityId||"none";L[fe]||(L[fe]={});const yt=se.subgroupId||"";L[fe][yt]||(L[fe][yt]=[]),L[fe][yt].push(se)});const ee=[];u.forEach(se=>{const fe=L[se.id];fe&&se.subgroups.forEach(yt=>{fe[yt]&&ee.push([yt,fe[yt]])})}),Object.keys(L).forEach(function(se){var fe=L[se];fe.&&ee.push(["",fe.])});const xe=B.length;return c.jsxs("div",{children:[c.jsxs("div",{className:"mb-3 text-sm text-slate-500",children:[" ",c.jsxs("strong",{className:"text-red-600",children:[xe,""]}),"    ."]}),ee.length>0?ee.map(([se,fe])=>c.jsxs("div",{className:"mb-4 bg-slate-50 p-3 rounded-lg",children:[c.jsxs("div",{className:"text-sm font-bold text-slate-700 mb-2 flex justify-between",children:[c.jsxs("span",{children:[" ",se]}),c.jsxs("span",{className:"text-red-500",children:[fe.length,""]})]}),c.jsx("div",{className:"flex flex-wrap gap-1",children:fe.map((yt,Br)=>{const ga=yt.lastReadDate?new Date(yt.lastReadDate):null,pr=ga?Math.floor((N-ga)/(1e3*60*60*24)):999;return c.jsxs("span",{className:`text-xs px-2 py-1 rounded-full border ${pr>=7?"bg-red-100 text-red-700 border-red-200":pr>=3?"bg-orange-100 text-orange-700 border-orange-200":"bg-yellow-50 text-yellow-700 border-yellow-200"}`,children:[c.jsxs("span",{className:"font-mono text-[10px] opacity-60 mr-1",children:[Br+1,"."]}),yt.name," ",pr>0&&c.jsxs("span",{className:"opacity-70",children:["(",pr,")"]})]},yt.uid)})})]},se)):c.jsxs("div",{className:"text-center py-8 text-green-600",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("p",{className:"font-bold",children:" !"})]})]})}else{const B=A.map(L=>{const ee=L.lastReadDate?new Date(L.lastReadDate):null,xe=ee?Math.floor((N-ee)/(1e3*60*60*24)):999;return{...L,daysSince:xe}}).filter(L=>L.daysSince>=1).sort((L,ee)=>{if(o==="name")return L.name.localeCompare(ee.name);if(o==="day"){const xe=((L.readCount||1)-1)*365+(L.currentDay||1);return((ee.readCount||1)-1)*365+(ee.currentDay||1)-xe}else{if(o==="score")return(ee.score||0)-(L.score||0);if(o==="subgroup"){const xe=L.communityName||"",se=ee.communityName||"",fe=xe.localeCompare(se,"ko-KR");if(fe!==0)return fe;const yt=L.subgroupId||"",Br=ee.subgroupId||"";return yt.localeCompare(Br,"ko-KR")}else return ee.daysSince-L.daysSince}});return c.jsxs("div",{children:[c.jsx("div",{className:"mb-3 flex gap-2",children:["name","day","score","subgroup"].map(L=>c.jsx("button",{onClick:()=>a(L),className:`text-xs px-3 py-1.5 rounded-lg font-bold ${o===L?"bg-blue-500 text-white":"bg-slate-100 text-slate-600"}`,children:L==="name"?"":L==="day"?"":L==="score"?"":""},L))}),B.length>0?c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-center text-xs font-bold text-slate-600 w-10",children:"#"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-bold text-slate-600",children:""}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-bold text-slate-600",children:""}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-bold text-slate-600",children:"  "}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-bold text-slate-600",children:""})]})}),c.jsx("tbody",{children:B.slice(0,50).map((L,ee)=>c.jsxs("tr",{className:`border-b ${L.daysSince>=14?"bg-red-50":L.daysSince>=7?"bg-orange-50":""}`,children:[c.jsx("td",{className:"px-3 py-2 text-center text-xs text-slate-400 font-mono",children:ee+1}),c.jsx("td",{className:"px-3 py-2 font-bold text-slate-800",children:L.name}),c.jsx("td",{className:"px-3 py-2 text-slate-500 text-xs",children:L.subgroupId||"-"}),c.jsx("td",{className:"px-3 py-2 text-center",children:c.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${L.daysSince>=14?"bg-red-500 text-white":L.daysSince>=7?"bg-orange-500 text-white":"bg-yellow-400 text-yellow-900"}`,children:L.daysSince===999?"":`${L.daysSince}`})}),c.jsx("td",{className:"px-3 py-2 text-center text-xs",children:(()=>{const xe=L.readCount||1,se=L.currentDay||1,fe=(xe-1)*365+se;return xe>1?c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[c.jsxs("span",{className:"font-bold text-slate-700",children:["DAY ",fe]}),c.jsxs("span",{className:"px-1.5 py-0.5 bg-gradient-to-br from-purple-500 to-purple-700 text-white text-[10px] font-bold rounded-full",children:[xe,""]})]}):c.jsxs("span",{className:"font-bold text-slate-700",children:["DAY ",se]})})()})]},L.uid))})]}):c.jsxs("div",{className:"text-center py-8 text-green-600",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("p",{className:"font-bold",children:"  !"})]}),B.length>50&&c.jsxs("div",{className:"mt-2 text-center text-xs text-slate-400",children:[" 50  ( ",B.length,")"]})]})}})()}),c.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 flex gap-4 text-xs text-slate-500",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded"})," 1-2"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"w-3 h-3 bg-orange-500 rounded"})," 3-6"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"w-3 h-3 bg-red-500 rounded"})," 7+"]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:["    (",l.filter(k=>k.currentDay>=365||(k.readCount||1)>=2).length,")"]}),(()=>{const k=l.filter(N=>N.currentDay>=365||(N.readCount||1)>=2).sort((N,A)=>(A.score||0)-(N.score||0));return k.length>0?c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:k.map((N,A)=>{const B=N.readCount||1;return c.jsxs("div",{className:`p-4 rounded-xl text-center border-2 ${A===0?"bg-yellow-50 border-yellow-300":A===1?"bg-slate-50 border-slate-300":A===2?"bg-orange-50 border-orange-300":"bg-white border-slate-100"}`,children:[c.jsx("div",{className:"text-2xl mb-1",children:A===0?"":A===1?"":A===2?"":""}),c.jsxs("div",{className:"font-bold text-slate-800 flex items-center justify-center gap-1",children:[N.name,B>=2&&c.jsxs("span",{className:"text-[10px] bg-purple-500 text-white px-1.5 py-0.5 rounded-full font-bold",children:[B,""]})]}),c.jsxs("div",{className:"text-xs text-slate-500",children:[N.score||0,""]}),c.jsxs("div",{className:"text-[10px] text-slate-400",children:[N.communityName," ",N.subgroupId]})]},N.uid)})}):c.jsxs("div",{className:"text-center py-8 text-slate-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("p",{children:"  ."}),c.jsx("p",{className:"text-xs mt-1",children:"365    !"})]})})()]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:" / "}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),c.jsx("textarea",{value:h.text,onChange:k=>f(N=>({...N,text:k.target.value})),placeholder:":     !",className:"w-full p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-blue-500 outline-none",rows:3})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("label",{className:"text-sm font-bold text-slate-600",children:"  "}),c.jsxs("button",{onClick:()=>f(k=>({...k,links:[...k.links||[],{url:"",text:""}]})),className:"text-xs bg-blue-50 text-blue-600 px-3 py-1.5 rounded-lg font-bold hover:bg-blue-100 flex items-center gap-1",children:[c.jsx(he,{name:"plus",size:12}),"  "]})]}),(h.links||[]).map((k,N)=>c.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl relative group border border-slate-100",children:[c.jsx("button",{onClick:()=>f(A=>({...A,links:A.links.filter((B,L)=>L!==N)})),className:"absolute -top-2 -right-2 bg-white text-red-500 p-1.5 rounded-full shadow-md border border-red-100 hover:bg-red-50 transition-colors",children:c.jsx(he,{name:"trash",size:14})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-slate-400 mb-1 uppercase",children:" "}),c.jsx("input",{type:"text",value:k.text,onChange:A=>{const B=[...h.links];B[N].text=A.target.value,f(L=>({...L,links:B}))},placeholder:": , ",className:"w-full p-2 border rounded-lg text-sm bg-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-slate-400 mb-1 uppercase",children:"  (URL)"}),c.jsx("input",{type:"url",value:k.url,onChange:A=>{const B=[...h.links];B[N].url=A.target.value,f(L=>({...L,links:B}))},placeholder:"https://...",className:"w-full p-2 border rounded-lg text-sm bg-white"})]})]})]},N))]}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:h.enabled,onChange:k=>f(N=>({...N,enabled:k.target.checked})),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),c.jsx("span",{className:"text-sm font-bold text-slate-600",children:" "})]}),c.jsx("button",{onClick:p,className:"bg-blue-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all active:scale-95",children:""})]}),h.text&&c.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-xl border-2 border-dashed border-slate-300",children:[c.jsx("p",{className:"text-xs text-slate-400 mb-3 font-bold uppercase tracking-wider",children:" "}),c.jsx("div",{className:"bg-white border-2 border-slate-100 rounded-3xl p-8 shadow-sm",children:c.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[c.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-4xl shadow-inner border border-slate-100",children:""}),c.jsxs("div",{className:"flex-1 min-w-0 text-center md:text-left",children:[c.jsx("p",{className:"text-[18px] text-slate-900 font-bold whitespace-pre-wrap leading-snug",children:h.text}),c.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-3 mt-6",children:(h.links||[]).map((k,N)=>k.text&&c.jsx("div",{className:"bg-[#03C75A] text-white px-8 py-3 rounded-2xl text-[16px] font-black shadow-md",children:k.text},N))})]})]})})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:"  "}),c.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 font-bold text-sm",children:[c.jsx(he,{name:"download",size:16}),"  CSV "]})]}),(()=>{const k=l.filter(A=>A.memos&&Object.keys(A.memos||{}).length>0),N=l.reduce((A,B)=>A+Object.keys(B.memos||{}).length,0);return c.jsxs("div",{children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[c.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:N}),c.jsx("div",{className:"text-xs text-slate-500",children:"  "})]}),c.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:k.length}),c.jsx("div",{className:"text-xs text-slate-500",children:" "})]}),c.jsxs("div",{className:"bg-green-50 p-4 rounded-xl text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[l.length>0?Math.round(k.length/l.length*100):0,"%"]}),c.jsx("div",{className:"text-xs text-slate-500",children:""})]})]}),c.jsx("h3",{className:"font-bold text-slate-700 mb-2",children:"  TOP 10"}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:l.map(A=>({...A,memoCount:Object.keys(A.memos||{}).length})).filter(A=>A.memoCount>0).sort((A,B)=>B.memoCount-A.memoCount).slice(0,10).map((A,B)=>c.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${B===0?"bg-yellow-400 text-white":B===1?"bg-slate-400 text-white":B===2?"bg-orange-400 text-white":"bg-slate-200 text-slate-600"}`,children:B+1}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-slate-800",children:A.name}),c.jsx("span",{className:"text-xs text-slate-400 ml-2",children:A.subgroupId})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm font-bold text-purple-600",children:[A.memoCount,""]}),c.jsx("button",{onClick:()=>x(A.name,A.memos||{},{currentDay:A.currentDay,score:A.score,streak:A.streak}),className:"text-xs bg-indigo-100 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-200",children:"HTML"})]})]},A.uid))})]})})()]}),w&&c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl space-y-4",children:[c.jsxs("h3",{className:"font-bold text-lg border-b pb-2",children:["   (",w.name,")"]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" "}),c.jsx("select",{value:w.communityId,onChange:k=>{const N=u.find(A=>A.id===k.target.value);g({...w,communityId:N.id,communityName:N.name,subgroupId:N.subgroups[0]})},className:"w-full border rounded p-2 text-sm",children:u.map(k=>c.jsx("option",{value:k.id,children:k.name},k.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:""}),c.jsx("select",{value:w.subgroupId,onChange:k=>g({...w,subgroupId:k.target.value}),className:"w-full border rounded p-2 text-sm",children:(()=>{const k=u.find(N=>N.id===w.communityId);return k?k.subgroups.map(N=>c.jsx("option",{value:N,children:N},N)):null})()})]}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx("button",{onClick:v,className:"flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:""}),c.jsx("button",{onClick:()=>g(null),className:"flex-1 bg-slate-200 text-slate-600 py-2 rounded hover:bg-slate-300",children:""})]})]})}),b&&c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:()=>S(null),children:c.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",onClick:k=>k.stopPropagation(),children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b pb-2",children:"  "}),c.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:[c.jsxs("p",{className:"text-sm text-blue-700",children:[c.jsx("strong",{children:b.name}),"  ."]}),c.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[" : ",b.password]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:"  (6 )"}),c.jsx("input",{type:"text",value:_,onChange:k=>T(k.target.value),placeholder:"123456",className:"w-full border border-slate-300 rounded-lg p-3 text-lg font-mono focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),c.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"    "})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>j(b.uid,b.name,b.password),disabled:!_||_.length<6,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:" "}),c.jsx("button",{onClick:()=>{S(null),T("")},className:"flex-1 bg-slate-200 text-slate-600 py-3 rounded-lg hover:bg-slate-300 font-bold",children:""})]})]})}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"   "}),c.jsx("div",{className:"flex gap-2",children:["name","day","score","subgroup"].map(k=>c.jsx("button",{onClick:()=>a(k),className:`text-xs px-3 py-1.5 rounded-lg font-bold ${o===k?"bg-blue-500 text-white":"bg-slate-100 text-slate-600"}`,children:k==="name"?"":k==="day"?"":k==="score"?"":""},k))})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[c.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-3 text-center w-10",children:"#"}),c.jsx("th",{className:"px-3 py-3",children:""}),c.jsx("th",{className:"px-3 py-3",children:"/"}),c.jsx("th",{className:"px-3 py-3 text-center",children:"Day"}),c.jsx("th",{className:"px-3 py-3 text-center",children:""}),c.jsx("th",{className:"px-3 py-3 text-center",children:""}),c.jsx("th",{className:"px-3 py-3 text-center",children:""})]})}),c.jsx("tbody",{children:(()=>[...l].sort((N,A)=>{if(o==="name")return N.name.localeCompare(A.name);if(o==="day"){const B=((N.readCount||1)-1)*365+(N.currentDay||1);return((A.readCount||1)-1)*365+(A.currentDay||1)-B}if(o==="score")return(A.score||0)-(N.score||0);if(o==="subgroup"){const B=(N.communityName||"").localeCompare(A.communityName||"","ko-KR");return B!==0?B:(N.subgroupId||"").localeCompare(A.subgroupId||"","ko-KR")}return 0}).map((N,A)=>{const B=N.lastReadDate===new Date().toDateString(),L=N.readCount||1,ee=N.currentDay||1,xe=(L-1)*365+ee;return c.jsxs("tr",{className:`border-b hover:bg-slate-50 ${B?"bg-green-50":""}`,children:[c.jsx("td",{className:"px-3 py-3 text-center text-xs text-slate-400 font-mono italic",children:A+1}),c.jsxs("td",{className:"px-3 py-3 font-medium text-slate-900",children:[N.name,B&&c.jsx("span",{className:"ml-1 text-green-500",children:""})]}),c.jsxs("td",{className:"px-3 py-3",children:[c.jsx("span",{className:"font-bold",children:N.communityName}),c.jsx("span",{className:"text-xs text-slate-400 block",children:N.subgroupId})]}),c.jsx("td",{className:"px-3 py-3 text-center",children:L>1?c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[c.jsxs("span",{className:"font-bold text-blue-600",children:["DAY ",xe]}),c.jsxs("span",{className:"px-1.5 py-0.5 bg-gradient-to-br from-purple-500 to-purple-700 text-white text-[10px] font-bold rounded-full",children:[L,""]})]}):c.jsxs("span",{className:"font-bold text-blue-600",children:["DAY ",ee]})}),c.jsx("td",{className:"px-3 py-3 text-center",children:N.score}),c.jsx("td",{className:"px-3 py-3 text-center text-xs text-slate-400",children:N.lastReadDate?new Date(N.lastReadDate).toLocaleDateString("ko-KR"):"-"}),c.jsx("td",{className:"px-3 py-3 text-center",children:c.jsxs("div",{className:"flex justify-center gap-1",children:[c.jsx("button",{onClick:()=>S(N),className:"text-purple-500 hover:text-purple-700 p-1 bg-purple-50 rounded",title:" ",children:c.jsx(he,{name:"refresh",size:14})}),c.jsx("button",{onClick:()=>m(N),className:"text-blue-500 hover:text-blue-700 p-1 bg-blue-50 rounded",title:" ",children:c.jsx(he,{name:"edit",size:14})}),c.jsx("button",{onClick:()=>q(N.uid,N.name),className:"text-red-500 hover:text-red-700 p-1 bg-red-50 rounded",title:"",children:c.jsx(he,{name:"trash",size:14})})]})})]},A)}))()})]})})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:"   "}),c.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200 mb-4",children:c.jsxs("p",{className:"text-sm text-blue-700",children:["   Firestore  ",c.jsx("strong",{children:"  10 "})," .",c.jsx("br",{}),"     ."]})}),$&&c.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg mb-4 text-sm",children:[c.jsxs("p",{className:"text-slate-600",children:[" : ",$.lastSyncAt&&$.lastSyncAt.toDate?$.lastSyncAt.toDate().toLocaleString("ko-KR"):" "]}),c.jsxs("p",{className:"text-slate-500 text-xs",children:[": ",$.successCount||0," / : ",$.errorCount||0,""]}),$.syncedVersions&&c.jsxs("p",{className:"text-slate-400 text-xs mt-1",children:[" : ",$.syncedVersions.join(", ")]}),$.failedItems&&$.failedItems.length>0&&c.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[c.jsxs("p",{className:"text-red-600 text-xs font-bold mb-2",children:["   (",$.failedItems.length,"):"]}),c.jsx("div",{className:"max-h-32 overflow-y-auto bg-white rounded p-2 text-xs",children:$.failedItems.map((k,N)=>c.jsxs("div",{className:"text-red-500 py-0.5",children:[" ",k.versionName," Day ",k.day," (",k.date,") - ",k.error]},N))})]})]}),Y?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-200",children:[c.jsxs("p",{className:"text-sm font-bold text-amber-700 mb-2",children:["   ... (",Y.current,"/",Y.total,")"]}),Y.status&&c.jsx("p",{className:"text-xs text-amber-800 mb-2 font-medium",children:Y.status}),Y.currentVersion&&c.jsxs("p",{className:"text-xs text-amber-600 mb-2",children:[": ",Y.currentVersion," ",Y.currentDay>0&&`- Day ${Y.currentDay}`]}),c.jsx("div",{className:"w-full bg-amber-200 rounded-full h-3",children:c.jsx("div",{className:"bg-amber-500 h-3 rounded-full transition-all",style:{width:`${Y.current/Y.total*100}%`}})}),c.jsxs("p",{className:"text-xs text-amber-600 mt-2",children:[" : ",Y.success," /  : ",Y.error,""]})]}),c.jsx("p",{className:"text-xs text-slate-500 text-center",children:"   .  2 ."})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-slate-700 mb-2",children:"  :"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:" "}),d["1year"].map(k=>{const N=`1year_${k.id}`,A=pe.indexOf(N)!==-1;return c.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:A,onChange:B=>{B.target.checked?at([...pe,N]):at(pe.filter(L=>L!==N))},className:"w-4 h-4 rounded"}),c.jsx("span",{className:"text-sm text-slate-700",children:k.name})]},N)})]}),c.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:" "}),d.nt.map(k=>{const N=`nt_${k.id}`,A=pe.indexOf(N)!==-1;return c.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:A,onChange:B=>{B.target.checked?at([...pe,N]):at(pe.filter(L=>L!==N))},className:"w-4 h-4 rounded"}),c.jsx("span",{className:"text-sm text-slate-700",children:k.name})]},N)})]})]})]}),c.jsx("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:c.jsxs("p",{className:"text-sm text-green-700",children:[": ",c.jsxs("strong",{children:[pe.length,""]})," "]})}),c.jsxs("button",{onClick:async()=>{if(pe.length===0){alert("  .");return}if(!confirm(`${pe.length}  . ?`))return;const k=pe.length*365;ve({current:0,total:k,success:0,error:0,currentVersion:"",currentDay:0});const N=await Xe(pe);alert(` !
: ${N.success}
: ${N.error}`);const A=await F.collection("settings").doc("sync").get();A.exists&&Q(A.data())},disabled:pe.length===0,className:"w-full bg-blue-600 text-white font-bold py-4 rounded-xl hover:bg-blue-700 text-lg disabled:opacity-50",children:["    (",pe.length*365,")"]})]})]})]})}),rM=({view:t,currentUser:e,tempUser:n,setView:r,selectedPlanType:s,handlePlanTypeSelect:i,handleVersionSelect:o,handleCommunitySelect:a,handleSubgroupSelect:l})=>{if(t==="plan_type_select")return c.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[c.jsxs("div",{className:"w-full max-w-2xl mb-6",children:[e&&!n&&c.jsxs("button",{onClick:()=>r("dashboard"),className:"text-sm text-slate-400 flex items-center hover:text-slate-600 mb-4",children:[c.jsx(he,{name:"back",size:16,className:"mr-1"}),"  "]}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 text-center",children:e&&!n?"  ":`, ${n&&n.name||""}!`}),c.jsx("p",{className:"text-slate-500 text-sm text-center mt-1",children:"  ?"})]}),c.jsx("div",{className:"w-full max-w-2xl space-y-3",children:th.map(u=>c.jsxs("button",{onClick:()=>i(u.id),className:"w-full bg-white p-5 rounded-2xl border border-slate-200 shadow-sm hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[c.jsx("div",{className:"font-bold text-slate-800 text-lg mb-1",children:u.title}),c.jsx("div",{className:"text-xs text-slate-400",children:u.desc})]},u.id))})]});if(t==="bible_version_select"){const u=ms[s],d=th.find(f=>f.id===s),h=d?d.title:null;return c.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[c.jsxs("div",{className:"w-full max-w-2xl",children:[c.jsxs("button",{onClick:()=>r("plan_type_select"),className:"text-sm text-slate-400 flex items-center hover:text-slate-600 mb-4",children:[c.jsx(he,{name:"back",size:16,className:"mr-1"})," "]}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:[h,"  "]}),c.jsx("div",{className:"bg-yellow-50 text-yellow-800 text-xs font-bold p-2 rounded-lg mt-2 break-keep",children:"    1    ."})]})]}),c.jsx("div",{className:"w-full max-w-2xl space-y-3",children:u.map(f=>c.jsxs("button",{onClick:()=>o(f.id),className:"w-full bg-white p-5 rounded-2xl border border-slate-200 shadow-sm hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[c.jsx("div",{className:"font-bold text-slate-800 text-lg mb-1",children:f.name}),c.jsx("div",{className:"text-xs text-slate-400",children:f.desc})]},f.id))})]})}if(t==="community_select")return c.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"  "}),c.jsx("p",{className:"text-slate-500 text-sm",children:"   ?"})]}),c.jsx("div",{className:"w-full max-w-2xl space-y-3",children:Or.map(u=>c.jsxs("button",{onClick:()=>a(u.id,u.name),className:"w-full bg-white p-4 rounded-2xl shadow-sm border border-slate-200 hover:border-blue-500 hover:bg-blue-50 transition-all flex items-center gap-4 text-left",children:[c.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-2xl",children:u.icon}),c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:"font-bold text-slate-800 text-lg",children:u.name})}),c.jsx(he,{name:"arrowRight",className:"text-slate-300"})]},u.id))})]});if(t==="subgroup_select"){const u=Or.find(d=>d.id===(n?n.communityId:null));return c.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[c.jsx("div",{className:"w-full max-w-2xl mb-4",children:c.jsxs("button",{onClick:()=>r("community_select"),className:"text-sm text-slate-400 flex items-center hover:text-slate-600",children:[c.jsx(he,{name:"back",size:16,className:"mr-1"})," "]})}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:" "}),c.jsxs("p",{className:"text-slate-500 text-sm",children:[n?n.communityName:"","   ."]})]}),c.jsx("div",{className:"w-full max-w-2xl grid grid-cols-2 gap-3 h-[50vh] overflow-y-auto content-start",children:u&&u.subgroups.map((d,h)=>c.jsxs("button",{onClick:()=>l(d),className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 hover:border-blue-500 hover:bg-blue-50 transition-all text-center flex flex-col items-center justify-center aspect-video",children:[c.jsx("span",{className:"text-2xl mb-2 opacity-80",children:""}),c.jsx("span",{className:"font-bold text-slate-700 text-sm",children:d})]},h))})]})}return null},sM=({show:t,onClose:e,myLevel:n,score:r})=>t?c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:s=>{s.target===s.currentTarget&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:s=>s.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[c.jsx("h3",{className:"text-xl font-bold",children:"  &  "}),c.jsx("button",{onClick:e,className:"text-slate-400",children:c.jsx(he,{name:"close"})})]}),c.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[60vh]",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-blue-600 mb-1",children:" "}),c.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 p-3 rounded-xl border border-blue-100",children:[c.jsx("div",{className:"text-3xl",children:n.emoji}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-lg",children:n.title}),c.jsxs("div",{className:"text-xs text-slate-500",children:[" ",r,""]})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  "}),c.jsxs("ul",{className:"text-sm text-slate-600 space-y-1 list-disc pl-4",children:[c.jsxs("li",{children:["  : ",c.jsx("strong",{children:"+10"})]}),c.jsxs("li",{children:["  : ",c.jsx("strong",{children:" +1  ( +5)"})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:" "}),c.jsx("div",{className:"grid gap-2 text-sm",children:Sg.map((s,i)=>c.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${s.title===n.title?"bg-yellow-50 border border-yellow-200":""}`,children:[c.jsx("span",{className:"text-xl",children:s.emoji}),c.jsx("span",{className:"flex-1",children:s.title}),c.jsxs("span",{className:"text-slate-400 text-xs",children:[s.min,"pt~"]})]},i))})]})]}),c.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,iM=({show:t,onClose:e})=>t?c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:n=>{n.target===n.currentTarget&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:n=>n.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  114 "}),c.jsx("button",{onClick:e,className:"text-slate-400",children:c.jsx(he,{name:"close"})})]}),c.jsx("a",{href:"https://www.bible114.net/8e616cd9-5ca0-4dd3-9e63-64280fc66f38",target:"_blank",rel:"noopener noreferrer",className:"block w-full mb-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-center py-3 rounded-xl font-bold shadow-md hover:from-blue-600 hover:to-blue-700 transition-all",children:"  114   "}),c.jsxs("div",{className:"space-y-3 overflow-y-auto max-h-[60vh] text-xs",children:[c.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:[c.jsx("h4",{className:"font-bold text-blue-700 mb-2",children:"  114?"}),c.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[c.jsx("strong",{children:"1 1 4 !"}),"   1 1 , 3( )        ,         ."]})]}),c.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100",children:[c.jsx("h4",{className:"font-bold text-green-700 mb-2",children:" 1 (1-3)"}),c.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[c.jsx("strong",{className:"text-green-800",children:":"}),"  1-11, , , , , , ,  1-6, , ,  7-10, , "]}),c.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[c.jsx("strong",{className:"text-green-800",children:":"})," ,  1-5, , , ,  1-3"]})]}),c.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-100",children:[c.jsx("h4",{className:"font-bold text-yellow-700 mb-2",children:" 2 (4-6)"}),c.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[c.jsx("strong",{className:"text-yellow-800",children:":"}),"  12-26, , , ,  1-72, , , , , "]}),c.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[c.jsx("strong",{className:"text-yellow-800",children:":"})," ,  6-12, , , , , , ,  4-7"]})]}),c.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-100",children:[c.jsx("h4",{className:"font-bold text-orange-700 mb-2",children:" 3 (7-9)"}),c.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[c.jsx("strong",{className:"text-orange-800",children:":"}),"  27-36, ,  1-11, , , ,  12-22,  1-14, ,  15, , ,  16-23, ,  24-25, "]}),c.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[c.jsx("strong",{className:"text-orange-800",children:":"})," ,  13-20, , , , , , ,  8-14"]})]}),c.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100",children:[c.jsx("h4",{className:"font-bold text-red-700 mb-2",children:" 4 (10-12)"}),c.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[c.jsx("strong",{className:"text-red-800",children:":"}),"  37-50, ,  90, ,  73-150,  1-28, ,  29-36, , , "]}),c.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[c.jsx("strong",{className:"text-red-800",children:":"})," ,  21-28, , , , , , ,  15-22"]})]}),c.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-100",children:[c.jsx("h4",{className:"font-bold text-purple-700 mb-1",children:"  !"}),c.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["  !    . ",c.jsx("strong",{children:" "}),".  ! "]})]})]}),c.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,oM=({show:t,onClose:e,currentUser:n})=>t?c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:r=>{r.target===r.currentTarget&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:r=>r.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),c.jsx("button",{onClick:e,className:"text-slate-400",children:c.jsx(he,{name:"close"})})]}),c.jsx("div",{className:"grid grid-cols-3 gap-3 overflow-y-auto max-h-[60vh]",children:kg.map(r=>{const s=n&&n.achievements?n.achievements.indexOf(r.id)!==-1:!1;return c.jsxs("div",{className:`p-3 rounded-xl text-center border ${s?"bg-yellow-50 border-yellow-200":"bg-slate-50 border-slate-100 opacity-40"}`,children:[c.jsx("div",{className:`text-2xl mb-1 ${s?"":"grayscale"}`,children:r.emoji}),c.jsx("p",{className:"text-[10px] font-bold text-slate-700 leading-tight",children:r.title})]},r.id)})}),c.jsx("div",{className:"mt-4 bg-blue-50 p-3 rounded-xl border border-blue-100",children:c.jsxs("p",{className:"text-xs text-blue-700 text-center",children:[" : ",c.jsx("strong",{children:n&&n.achievements?n.achievements.length:0})," / ",kg.length]})}),c.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,aM=({show:t,onClose:e,calendarDate:n,setCalendarDate:r,readHistory:s})=>{if(!t)return null;const i=new Date,o=n.getFullYear(),a=n.getMonth(),l=new Date(o,a,1).getDay(),u=new Date(o,a+1,0).getDate(),d=["1","2","3","4","5","6","7","8","9","10","11","12"],h=["","","","","","",""],f=[];for(let b=0;b<l;b++)f.push(null);for(let b=1;b<=u;b++)f.push(b);const p=b=>typeof b=="string"?b:b.date,y=s.filter(b=>{const S=p(b),_=new Date(S);return _.getFullYear()===o&&_.getMonth()===a}).map(b=>new Date(p(b)).getDate()),x=()=>r(new Date(o,a-1,1)),w=()=>r(new Date(o,a+1,1)),g=()=>r(new Date),m=i.getFullYear()===o&&i.getMonth()===a,v=s.filter(b=>{const S=p(b);return new Date(S).getFullYear()===o}).length;return c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:b=>{b.target===b.currentTarget&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:b=>b.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),c.jsx("button",{onClick:e,className:"text-slate-400",children:c.jsx(he,{name:"close"})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:x,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold",children:""}),c.jsxs("div",{className:"text-center",children:[c.jsxs("span",{className:"font-bold text-lg text-slate-700",children:[o," ",d[a]]}),!m&&c.jsx("button",{onClick:g,className:"ml-2 text-xs text-blue-500 underline",children:""})]}),c.jsx("button",{onClick:w,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold",children:""})]}),c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:h.map(b=>c.jsx("div",{className:`text-center text-[10px] font-bold py-1 ${b===""?"text-red-400":b===""?"text-blue-400":"text-slate-400"}`,children:b},b))}),c.jsx("div",{className:"grid grid-cols-7 gap-1",children:f.map((b,S)=>{if(!b)return c.jsx("div",{},S);const _=m&&b===i.getDate(),T=y.indexOf(b)!==-1,j=new Date(o,a,b).getDay();return c.jsxs("button",{className:`aspect-square flex flex-col items-center justify-center rounded-lg border transition-all cursor-default relative
                                            ${_?"ring-2 ring-blue-400":""}
                                            ${T?"bg-green-100 border-green-200 text-green-700":j===0?"bg-red-50 border-red-100 text-red-300":j===6?"bg-blue-50 border-blue-100 text-blue-300":"bg-slate-50 border-slate-100 text-slate-400 hover:bg-blue-50"}`,children:[c.jsx("span",{className:"text-sm font-bold",children:b}),T&&c.jsx("span",{className:"absolute top-0.5 right-0.5 text-[8px]",children:""})]},S)})}),c.jsxs("div",{className:"mt-4 flex justify-center gap-4 text-xs",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-4 h-4 bg-green-100 rounded"}),c.jsx("span",{className:"text-slate-500",children:" "})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-4 h-4 bg-slate-50 rounded border"}),c.jsx("span",{className:"text-slate-500",children:"  "})]})]}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"bg-green-50 p-3 rounded-xl border border-green-100 text-center",children:[c.jsx("p",{className:"text-xs text-slate-500",children:" "}),c.jsxs("p",{className:"text-lg font-bold text-green-700",children:[y.length,""]})]}),c.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100 text-center",children:[c.jsxs("p",{className:"text-xs text-slate-500",children:[o," "]}),c.jsxs("p",{className:"text-lg font-bold text-blue-700",children:[v,""]})]})]})]}),c.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})})},lM=({show:t,onClose:e})=>t?c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:n=>{n.target===n.currentTarget&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:n=>n.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[c.jsx("h3",{className:"text-xl font-bold text-red-700",children:"   "}),c.jsx("button",{onClick:e,className:"text-slate-400",children:c.jsx(he,{name:"close"})})]}),c.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[60vh]",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-red-600 mb-2",children:"  "}),c.jsxs("div",{className:"bg-red-50 p-3 rounded-xl border border-red-100 text-sm text-slate-700 leading-relaxed",children:[c.jsxs("p",{className:"mb-2",children:[c.jsx("strong",{children:"  "})," = (    )  (  )  100"]}),c.jsx("p",{className:"text-xs text-slate-500",children:"   1       "})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-700 mb-2",children:" "}),c.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-200 text-xs space-y-2",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-700 mb-1",children:"1 (10, 1 12 )"}),c.jsxs("ul",{className:"text-slate-600 space-y-0.5 pl-3",children:[c.jsxs("li",{children:["     : ",c.jsx("strong",{children:"100"})]}),c.jsxs("li",{children:["   : 10  12 = ",c.jsx("strong",{children:"120"})]}),c.jsxs("li",{children:["  : 100  120  100 = ",c.jsx("strong",{className:"text-red-600",children:"83%"})]})]})]}),c.jsx("div",{className:"pt-2 border-t border-slate-200",children:c.jsx("p",{className:"text-slate-500",children:"   83%     "})})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-blue-600 mb-2",children:"  ?"}),c.jsxs("ul",{className:"text-xs text-slate-600 space-y-2 pl-3",children:[c.jsxs("li",{children:[" ",c.jsx("strong",{children:"   "})," "]}),c.jsx("li",{children:"       "}),c.jsx("li",{children:"      "}),c.jsxs("li",{children:["   1   ",c.jsx("strong",{children:"   "})," "]})]})]})]}),c.jsx("button",{onClick:e,className:"w-full bg-red-100 font-bold py-3 rounded-xl mt-4 text-red-700 hover:bg-red-200 transition-colors",children:""})]})}):null,cM=({show:t,onClose:e,onRestart:n})=>t?c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:r=>{r.target===r.currentTarget&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:r=>r.stopPropagation(),children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"text-5xl mb-4",children:""}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"  ?"}),c.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:[" (, , )",c.jsx("br",{}),c.jsx("strong",{className:"text-red-500",children:" "}),".",c.jsx("br",{})," Day 1  !"]})]}),c.jsx("div",{className:"bg-amber-50 p-3 rounded-xl border border-amber-200 mb-4",children:c.jsx("p",{className:"text-xs text-amber-700 text-center",children:"     !"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{onClick:n,className:"w-full bg-red-500 text-white font-bold py-3 rounded-xl hover:bg-red-600 transition-colors",children:",   "}),c.jsx("button",{onClick:e,className:"w-full bg-slate-100 text-slate-600 font-bold py-3 rounded-xl hover:bg-slate-200",children:""})]})]})}):null,uM=({show:t,onClose:e,currentUser:n,currentDay:r,dateSettingsDate:s,setDateSettingsDate:i,dateToOffset:o,changeStartDate:a})=>{const[l,u]=$p.useState(!1);if($p.useEffect(()=>{if(t){const w=setTimeout(()=>u(!0),300);return()=>clearTimeout(w)}else u(!1)},[t]),!t)return null;const d=s.getFullYear(),h=s.getMonth(),f=new Date(d,h,1).getDay(),p=new Date(d,h+1,0).getDate(),y=[];for(let w=0;w<f;w++)y.push(null);for(let w=1;w<=p;w++)y.push(w);const x=Ow?Ow[n?n.planId:null]:null;return c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:w=>{w.target===w.currentTarget&&l&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 duration-200",onClick:w=>w.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),c.jsx("button",{onClick:e,className:"text-slate-400 p-1 hover:bg-slate-100 rounded-full transition-colors",children:c.jsx(he,{name:"close"})})]}),c.jsxs("div",{className:"mb-4 bg-purple-50 p-4 rounded-xl border border-purple-100 text-center",children:[c.jsx("p",{className:"text-lg font-bold text-purple-700 leading-relaxed",children:'"    ."'}),c.jsx("p",{className:"text-[11px] text-purple-500 mt-1 opacity-80",children:"       ."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-2 rounded-xl",children:[c.jsx("button",{onClick:w=>{w.stopPropagation(),i(new Date(d,h-1))},className:"p-2 hover:bg-white rounded-lg transition-colors",children:c.jsx(he,{name:"back",size:16})}),c.jsxs("span",{className:"font-bold text-slate-700",children:[d," ",h+1,""]}),c.jsx("button",{onClick:w=>{w.stopPropagation(),i(new Date(d,h+1))},className:"p-2 hover:bg-white rounded-lg transition-colors rotate-180",children:c.jsx(he,{name:"back",size:16})})]}),c.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-1",children:["","","","","","",""].map((w,g)=>c.jsx("div",{className:`text-[10px] font-bold py-1 ${g===0?"text-red-400":g===6?"text-blue-400":"text-slate-400"}`,children:w},g))}),c.jsx("div",{className:"grid grid-cols-7 gap-1",children:y.map((w,g)=>{if(!w)return c.jsx("div",{},g);const m=o(h+1,w),v=x&&x[m]?x[m]:null,b=new Date().getDate()===w&&new Date().getMonth()===h,S=new Date(d,h,w).getDay();return c.jsxs("button",{onClick:_=>{_.stopPropagation();const T=m-r+1;a(T),e()},className:`group aspect-square flex flex-col items-center justify-center rounded-lg border transition-all hover:border-purple-400 hover:shadow-sm active:scale-95
                                        ${b?"bg-purple-50 border-purple-200 ring-1 ring-purple-300":"bg-white border-slate-100"}
                                    `,children:[c.jsx("span",{className:`text-xs font-bold ${S===0?"text-red-500":S===6?"text-blue-500":"text-slate-700"}`,children:w}),v&&c.jsx("span",{className:"text-[7px] text-slate-400 break-keep leading-[1.1] w-full px-0.5 whitespace-pre-wrap",title:v.range,children:v.range})]},g)})}),c.jsx("div",{className:"bg-amber-50 p-3 rounded-xl border border-amber-200",children:c.jsx("p",{className:"text-[11px] text-amber-700 leading-relaxed font-medium",children:"        ."})})]}),c.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})})},dM=({show:t,onClose:e,progressRanking:n,allMembersForRace:r,subgroupId:s,currentUser:i,selectedSubgroupDetail:o,setSelectedSubgroupDetail:a,rankingCommunityFilter:l,setRankingCommunityFilter:u})=>{if(!t)return null;if(o){const d=r.filter(y=>y.subgroupId===o).sort((y,x)=>{const w=((y.readCount||1)-1)*365+(y.currentDay||1);return((x.readCount||1)-1)*365+(x.currentDay||1)-w}),h=new Date().toDateString(),f=d.length>0?Math.round(d.reduce((y,x)=>y+(x.currentDay||0),0)/d.length):0,p=d.filter(y=>y.lastReadDate===h).length;return c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:y=>{y.target===y.currentTarget&&a(null)},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl max-h-[80vh] flex flex-col",onClick:y=>y.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b pb-3",children:[c.jsx("button",{onClick:()=>a(null),className:"text-slate-400 hover:text-slate-600",children:c.jsx(he,{name:"back",size:20})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:o}),c.jsx("p",{className:"text-xs text-slate-500",children:"  "})]}),c.jsx("button",{onClick:()=>{a(null),e()},className:"text-slate-400",children:c.jsx(he,{name:"close"})})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[c.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl text-center border border-blue-100",children:[c.jsx("p",{className:"text-xl font-bold text-blue-600",children:d.length}),c.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]}),c.jsxs("div",{className:"bg-green-50 p-3 rounded-xl text-center border border-green-100",children:[c.jsx("p",{className:"text-xl font-bold text-green-600",children:f}),c.jsx("p",{className:"text-[10px] text-slate-500",children:" Day"})]}),c.jsxs("div",{className:"bg-orange-50 p-3 rounded-xl text-center border border-orange-100",children:[c.jsx("p",{className:"text-xl font-bold text-orange-600",children:p}),c.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:d.length>0?d.map((y,x)=>{const w=y.uid===i.uid,g=y.lastReadDate===h,m=Math.round(y.currentDay/365*100);return c.jsxs("div",{className:`p-3 rounded-xl border ${w?"bg-blue-50 border-blue-200":"bg-slate-50 border-slate-100"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${x===0?"bg-yellow-100 text-yellow-600":x===1?"bg-slate-200 text-slate-600":x===2?"bg-orange-100 text-orange-600":"bg-slate-100 text-slate-400"}`,children:x+1}),c.jsxs("span",{className:`font-bold text-sm ${w?"text-blue-600":"text-slate-700"}`,children:[y.name," ",w&&"()"]}),(y.readCount||1)>1&&c.jsxs("span",{className:"text-[10px] bg-purple-500 text-white px-1.5 py-0.5 rounded-full font-bold",children:[y.readCount,""]}),g&&c.jsx("span",{className:"text-green-500 text-xs",children:""})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Day ",((y.readCount||1)-1)*365+y.currentDay]}),c.jsxs("p",{className:"text-[10px] text-slate-400",children:[y.score||0,""]})]})]}),c.jsx("div",{className:"h-2 w-full bg-slate-200 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full ${w?"bg-blue-500":"bg-slate-400"}`,style:{width:`${m}%`}})}),c.jsxs("div",{className:"flex justify-between mt-1",children:[c.jsxs("span",{className:"text-[10px] text-slate-400",children:[m,"% "]}),y.streak>0&&c.jsxs("span",{className:"text-[10px] text-orange-500 font-bold",children:[" ",y.streak," "]})]})]},y.uid)}):c.jsx("div",{className:"text-center py-8 text-slate-400",children:c.jsx("p",{className:"text-sm",children:"  "})})}),c.jsx("button",{onClick:()=>a(null),className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})})}else return c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:d=>{d.target===d.currentTarget&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl max-h-[80vh] flex flex-col",onClick:d=>d.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"   "}),c.jsx("button",{onClick:e,className:"text-slate-400",children:c.jsx(he,{name:"close"})})]}),c.jsxs("div",{className:"mb-3 flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>u("all"),className:`px-2.5 py-1.5 rounded-full text-[11px] font-bold whitespace-nowrap transition-colors ${l==="all"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:""}),Or.map(d=>c.jsx("button",{onClick:()=>u(d.id),className:`px-2.5 py-1.5 rounded-full text-[11px] font-bold whitespace-nowrap transition-colors ${l===d.id?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:d.name},d.id))]}),c.jsxs("div",{className:"mb-3 bg-blue-50 p-3 rounded-xl border border-blue-100",children:[c.jsxs("p",{className:"text-xs text-blue-700",children:[c.jsx("strong",{children:" "})," =   Day  365  100"]}),c.jsx("p",{className:"text-[10px] text-blue-600 mt-1",children:"        "})]}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:(()=>{let d=n;if(l!=="all"){const h=Or.find(f=>f.id===l);h&&(d=n.filter(f=>h.subgroups.indexOf(f.name)!==-1))}return d.length===0?c.jsx("div",{className:"text-center py-8 text-slate-500",children:c.jsx("p",{className:"text-sm",children:"    ."})}):d.map((h,f)=>{const p=h.name===s,y=f===0?"bg-yellow-100 text-yellow-700 border-yellow-200":f===1?"bg-slate-200 text-slate-700 border-slate-300":f===2?"bg-orange-100 text-orange-700 border-orange-200":"bg-slate-100 text-slate-600 border-slate-200";return c.jsxs("button",{onClick:()=>a(h.name),className:`w-full p-3 rounded-xl border-2 transition-all hover:shadow-md ${p?"bg-blue-50 border-blue-300 hover:bg-blue-100":"bg-white border-slate-100 hover:border-slate-300"}`,children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 shrink-0 ${y}`,children:f+1}),c.jsx("div",{className:"flex-1 min-w-0 text-left",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:`font-bold text-sm truncate pr-2 ${p?"text-blue-600":"text-slate-700"}`,children:[h.name," ",p&&"()"]}),c.jsxs("span",{className:"text-xs font-bold text-slate-500 shrink-0",children:[h.progressRate,"%"]})]})}),c.jsx(he,{name:"arrowRight",size:16,className:"text-slate-400"})]}),c.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full ${f===0?"bg-yellow-400":f===1?"bg-slate-400":f===2?"bg-orange-400":"bg-slate-300"}`,style:{width:`${h.progressRate}%`}})})]},f)})})()})]})})},hM=({show:t,onClose:e,memos:n,currentDay:r,score:s,streak:i,currentUser:o,generateMemosHTML:a})=>t?c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:l=>{l.target===l.currentTarget&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"   "}),c.jsx("button",{onClick:e,className:"text-slate-400",children:c.jsx(he,{name:"close"})})]}),c.jsx("div",{className:"bg-indigo-50 p-3 rounded-xl border border-indigo-100 mb-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"text-center flex-1",children:[c.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:Object.keys(n).length}),c.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]}),c.jsxs("div",{className:"text-center flex-1 border-l border-indigo-200",children:[c.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:r||1}),c.jsx("p",{className:"text-[10px] text-slate-500",children:" Day"})]}),c.jsxs("div",{className:"text-center flex-1 border-l border-indigo-200",children:[c.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:s||0}),c.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]})]})}),c.jsx("div",{className:"space-y-3 overflow-y-auto max-h-[45vh]",children:Object.keys(n).length>0?Object.keys(n).map(l=>[l,n[l]]).sort((l,u)=>Number(u[0])-Number(l[0])).map(l=>{const[u,d]=l;return c.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"text-xs font-bold text-blue-600",children:["DAY ",u," ",(d.texts&&d.texts.length||0)>1&&c.jsxs("span",{className:"ml-1 text-purple-500",children:["(",d.texts.length,")"]})]}),c.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(d.date).toLocaleDateString("ko-KR")})]}),c.jsx("p",{className:"text-xs text-slate-500 mb-1",children:d.title}),(d.texts||[d.text]).map((h,f)=>c.jsx("div",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-wrap "+(f>0?"mt-2 pt-2 border-t border-slate-200":""),children:h},f))]},u)}):c.jsxs("div",{className:"text-center py-8 text-slate-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("p",{className:"text-sm",children:"   ."})]})}),Object.keys(n).length>0&&c.jsx("button",{onClick:()=>a(o.name,n,{currentDay:r,score:s,streak:i}),className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-xl mt-4 flex items-center justify-center gap-2 hover:bg-indigo-700 transition-colors",children:"   "}),c.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-2 text-slate-600",children:""})]})}):null,fM=({show:t,onClose:e,currentUser:n,changeSubgroup:r})=>t?c.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:s=>{s.target===s.currentTarget&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:s=>s.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),c.jsx("button",{onClick:e,className:"text-slate-400",children:c.jsx(he,{name:"close"})})]}),c.jsx("div",{className:"mb-4 bg-blue-50 p-3 rounded-xl border border-blue-200",children:c.jsxs("p",{className:"text-sm text-blue-700",children:[" : ",c.jsx("strong",{children:n.subgroupId||""})]})}),c.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-[300px] overflow-y-auto",children:(()=>{const s=Or.find(i=>i.id===n.communityId);return s?s.subgroups.map((i,o)=>c.jsx("button",{onClick:()=>r(i),disabled:i===n.subgroupId,className:`p-3 rounded-xl text-sm font-bold transition-all ${i===n.subgroupId?"bg-blue-100 text-blue-600 border-2 border-blue-300":"bg-slate-50 text-slate-700 border-2 border-slate-200 hover:border-blue-300"}`,children:i},o)):null})()}),c.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,pM=({handleLogout:t,streak:e,score:n,myLevel:r,setShowScoreInfo:s,setShowAchievements:i,setShowDateSettings:o,setShowCalendar:a,setShowReadingGuide:l,getEncouragementMessage:u,communityName:d,setShowFullRanking:h,topProgressGroups:f,subgroupId:p,planTypeName:y,versionName:x,handleChangeVersionStart:w})=>c.jsxs("header",{className:"sticky top-0 z-30 space-y-4 mb-4",children:[c.jsx("div",{className:"bg-white/95 backdrop-blur-md border-b border-slate-200/60 shadow-sm",children:c.jsxs("div",{className:"px-4 py-2 flex flex-col md:flex-row justify-between items-center max-w-5xl mx-auto w-full gap-2.5 md:gap-4",children:[c.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto scrollbar-hide w-full md:w-auto md:order-2 justify-between md:justify-end py-1",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsxs("div",{className:`text-xs font-bold px-2.5 py-1.5 rounded-xl flex items-center gap-1 shrink-0 ${e>0?"bg-orange-50 text-orange-600 border border-orange-100":"bg-slate-100 text-slate-400"}`,children:[c.jsx(he,{name:"flame",size:12}),e,""]}),c.jsxs("button",{type:"button",onClick:g=>{g.stopPropagation(),s(!0)},className:"text-xs font-bold text-blue-600 bg-blue-50 border border-blue-100 px-2.5 py-1.5 rounded-xl hover:bg-blue-100 transition-colors shrink-0",children:[r.emoji," ",n||0,"pt"]}),c.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),i(!0)},className:"p-1.5 text-xs font-bold text-yellow-600 bg-yellow-50 border border-yellow-100 rounded-xl hover:bg-yellow-100 shrink-0",children:""}),c.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),o(!0)},className:"p-1.5 text-xs font-bold text-purple-600 bg-purple-50 border border-purple-100 rounded-xl hover:bg-purple-100 shrink-0",children:""}),c.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),a(!0)},className:"p-1.5 text-xs font-bold text-green-600 bg-green-50 border border-green-100 rounded-xl hover:bg-green-100 shrink-0",children:""}),c.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),l(!0)},className:"p-1.5 text-xs font-bold text-slate-600 bg-slate-100 border border-slate-200 rounded-xl hover:bg-slate-200 shrink-0",children:c.jsx(he,{name:"helpbook",size:14})})]}),c.jsxs("div",{className:"flex items-center shrink-0",children:[c.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),c.jsx("button",{onClick:t,className:"text-xs font-bold text-slate-400 hover:text-red-500 transition-colors shrink-0 px-1",children:""})]})]}),c.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-100/80 hover:bg-slate-200 rounded-full transition-colors group shrink-0 md:order-1 self-start md:self-center",children:[c.jsx("span",{className:"text-[11px] font-bold text-slate-500 tracking-tight",children:"  "}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-xs font-bold text-slate-700",children:y}),c.jsx("span",{className:"w-px h-2.5 bg-slate-300"}),c.jsx("span",{className:"text-xs font-bold text-blue-600",children:x}),c.jsx(he,{name:"refresh",size:10,className:"text-slate-400 group-hover:rotate-180 transition-transform duration-500"})]})]})]})}),c.jsx("div",{className:"px-4 w-full max-w-5xl mx-auto",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-md border border-slate-100/80 p-6 md:p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs font-bold text-blue-600 tracking-tight",children:u()}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-xl font-black text-slate-900",children:[" ",d]}),c.jsx("span",{className:"text-sm font-bold text-slate-400",children:" "})]})]}),c.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1 px-4 py-2 bg-slate-50 hover:bg-blue-50 text-blue-600 text-xs font-bold rounded-2xl transition-all border border-transparent hover:border-blue-100",children:[" ",c.jsx(he,{name:"right",size:10})]})]}),c.jsx("div",{className:"space-y-4",children:f.map((g,m)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 shrink-0 ${m===0?"bg-yellow-100 border-yellow-200 text-yellow-700":m===1?"bg-slate-100 border-slate-200 text-slate-700":"bg-orange-50 border-orange-100 text-orange-700"}`,children:m+1}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[c.jsx("span",{className:`font-bold truncate ${g.name===p?"text-blue-600":"text-slate-700"}`,children:g.name}),c.jsxs("span",{className:"font-bold text-slate-500 shrink-0",children:[" ",g.avgDay," (",g.progressRate,"%)"]})]}),c.jsx("div",{className:"h-4 w-full bg-slate-50 rounded-full border border-slate-100 overflow-hidden shadow-inner",children:c.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${m===0?"bg-gradient-to-r from-yellow-300 to-yellow-500":m===1?"bg-gradient-to-r from-slate-300 to-slate-500":"bg-gradient-to-r from-orange-300 to-orange-500"}`,style:{width:`${g.progressRate}%`}})})]})]},m))})]})})]}),mM=({racers:t,departmentChampions:e,getSubgroupDisplay:n})=>{const r=s=>{const i=Math.min(s,365);return i<=100?i/100*50:i<=200?50+(i-100)/100*30:80+(i-200)/165*20};return c.jsxs("div",{className:"mx-4 mb-6 relative h-64 bg-sky-texture overflow-hidden rounded-3xl shadow-xl border border-slate-100",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-12 bg-gradient-to-b from-white/20 to-transparent z-10"}),c.jsx("div",{className:"mountain-back"}),c.jsx("div",{className:"mountain-front"}),c.jsx("div",{className:"absolute top-2 left-10 text-2xl opacity-80 animate-float",children:""}),c.jsx("div",{className:"absolute top-5 right-20 text-xl opacity-60 animate-float-slow",children:""}),c.jsx("div",{className:"absolute top-8 left-1/2 text-lg opacity-50 animate-float",style:{animationDelay:"2s"},children:""}),c.jsx("div",{className:"absolute bottom-2 left-5 text-sm z-10 opacity-90",children:""}),c.jsx("div",{className:"absolute bottom-3 right-10 text-sm z-10 opacity-90",children:""}),c.jsx("div",{className:"absolute bottom-4 left-1/3 text-xs z-10 opacity-80",children:""}),[100,200,300].map(s=>{const i=r(s);return c.jsxs("div",{className:"absolute top-2 z-20 flex flex-col items-center",style:{left:`${i}%`,transform:"translateX(-50%)"},children:[c.jsx("div",{className:"bg-white/95 px-2 py-1 rounded-full shadow-md border-2 border-slate-400 flex items-center justify-center",children:c.jsx("span",{className:"text-[10px] font-bold text-slate-700 leading-none",children:s})}),c.jsx("div",{className:"w-0.5 h-screen bg-gradient-to-b from-slate-400 via-slate-300 to-transparent opacity-40"})]},s)}),c.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex flex-col justify-center items-center z-20 group",style:{top:"60%"},children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-yellow-400 rounded-full blur-xl opacity-70 animate-pulse"}),c.jsx("span",{className:"text-5xl relative z-10 drop-shadow-2xl",children:""})]}),c.jsx("span",{className:"text-[9px] font-bold text-slate-600 bg-white/90 px-2 py-0.5 rounded-full mt-2 shadow-sm border border-slate-200 relative z-20",children:""})]}),t.map((s,i)=>{const o=s.readCount||1,a=o>=2,l=a?s.currentDay:s.day,u=Math.min(r(l),100),d=s.isMe,h=n(s.subgroupId),f=e[s.uid],p=d?29:a?28:25,y=d?"50%":a?"8%":`${15+i%10*8}%`;return c.jsx("div",{className:"absolute transition-all duration-1000 ease-out",style:{left:`calc(${u}% - 16px)`,top:y,zIndex:p},children:c.jsxs("div",{className:"relative flex items-center",children:[o>1&&c.jsx("div",{className:"absolute -left-2 -top-1 w-4 h-4 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center border-2 border-white shadow-md z-10",children:c.jsx("span",{className:"text-[7px] font-bold text-white",children:o})}),c.jsxs("div",{className:`flex items-stretch rounded-full shadow-md overflow-hidden ${d?"ring-2 ring-yellow-400 ring-offset-1":""}`,children:[c.jsxs("div",{className:`text-[9px] pl-2 pr-1 py-0.5 font-bold whitespace-nowrap flex items-center gap-0.5 ${d?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-white/95 text-slate-700"}`,children:[f&&c.jsx("span",{className:"text-[11px]",title:`${f} 1`,children:""}),s.name]}),c.jsx("div",{className:`text-[9px] pl-1 pr-1.5 py-0.5 font-bold whitespace-nowrap text-white flex items-center ${h.bgColor} border-l border-white/30`,children:s.subgroupId})]})]})},s.uid||i)})]})},gM=({announcement:t})=>!t||!t.enabled||!t.text?null:c.jsx("div",{className:"bg-white border-2 border-slate-100 rounded-3xl p-7 shadow-sm mb-10",children:c.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[c.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-4xl shadow-inner border border-slate-100",children:""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-slate-900 font-bold leading-snug",children:c.jsx(jS,{content:t.text,fontSize:19})}),c.jsx("div",{className:"flex flex-wrap items-center gap-3 mt-6",children:t.links&&t.links.length>0?t.links.map((e,n)=>e.url&&e.text&&c.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center bg-[#03C75A] text-white px-8 py-3.5 rounded-2xl text-[17px] font-black hover:bg-[#02b351] transition-colors shadow-md active:scale-95 min-w-[140px]",children:e.text},n)):t.linkUrl&&t.linkText&&c.jsx("a",{href:t.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center bg-[#03C75A] text-white px-8 py-3.5 rounded-2xl text-[17px] font-black hover:bg-[#02b351] transition-colors shadow-md active:scale-95 min-w-[140px]",children:t.linkText})})]})]})}),yM=({verseData:t,viewingDay:e,setViewingDay:n,currentUser:r,daysRemaining:s,handleChangeVersionStart:i,getEncouragementMessage:o,fontSize:a,setFontSize:l,isSpeaking:u,isPaused:d,ttsSpeed:h,handleSpeedChange:f,handleSpeak:p,handleStop:y,availableVoices:x,selectedVoiceURI:w,setSelectedVoiceURI:g,activeChunkIndex:m,jumpToChunk:v,hasReadToday:b,handleRead:S})=>c.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-100",children:[c.jsxs("div",{className:"p-6 text-white relative bg-gradient-to-br from-indigo-600 to-blue-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2 px-2",children:[c.jsx("button",{onClick:()=>n(_=>Math.max(1,_-1)),className:"p-2 rounded-full bg-white/20 hover:bg-white/30 text-white transition-colors disabled:opacity-30",disabled:e<=1,children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-bold mb-1",children:t.loading?"...":t.title}),c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(r.readCount||1)>1&&c.jsxs("span",{className:"text-xs bg-purple-500/90 px-2 py-0.5 rounded-full",children:[" ",r.readCount,""]}),c.jsxs("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:[" D-",s]})]})]}),c.jsx("button",{onClick:()=>n(_=>Math.min(365,_+1)),className:"p-2 rounded-full bg-white/20 hover:bg-white/30 text-white transition-colors disabled:opacity-30",disabled:e>=365,children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"opacity-90 text-sm font-bold text-white/90 mb-1 flex items-center gap-2",children:t.subtitle}),c.jsx("p",{className:"opacity-80 text-xs",children:o()})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white/20 backdrop-blur-md rounded-full px-2 py-1 shadow-sm shrink-0 ml-4",children:[c.jsx("button",{onClick:()=>{const _=Math.max(12,a-2);l(_),localStorage.setItem("bible_fontSize",_)},className:"w-7 h-7 rounded-full bg-white/30 hover:bg-white/50 flex items-center justify-center text-white font-bold",children:""}),c.jsxs("div",{className:"flex flex-col items-center px-1",children:[c.jsx("span",{className:"text-white/60 text-[7px] font-bold leading-none",children:"SIZE"}),c.jsx("span",{className:"text-white text-xs font-bold leading-none",children:a})]}),c.jsx("button",{onClick:()=>{const _=Math.min(28,a+2);l(_),localStorage.setItem("bible_fontSize",_)},className:"w-7 h-7 rounded-full bg-white/30 hover:bg-white/50 flex items-center justify-center text-white font-bold",children:"+"})]})]}),t.text&&t.text.length>20&&!t.loading&&c.jsx("div",{className:"mt-3 bg-white/10 backdrop-blur-md p-3 rounded-2xl border border-white/20",children:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-base",children:u?"":""}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[10px] font-bold text-white/70 leading-tight",children:" "}),c.jsx("span",{className:"text-[9px] text-white/50 leading-tight",children:u?d?" ":" ...":" "})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"flex items-center bg-black/20 rounded-lg px-1 py-0.5",children:[c.jsx("button",{onClick:()=>f(-.1),disabled:h<=.6,className:"w-5 h-5 flex items-center justify-center text-white/80 hover:text-white disabled:opacity-30",children:"-"}),c.jsxs("span",{className:"text-[10px] font-bold text-white min-w-[24px] text-center",children:[h.toFixed(1),"x"]}),c.jsx("button",{onClick:()=>f(.1),disabled:h>=2,className:"w-5 h-5 flex items-center justify-center text-white/80 hover:text-white disabled:opacity-30",children:"+"})]}),c.jsx("button",{onClick:()=>u?y():p(t.text),className:`px-4 py-1.5 rounded-xl text-xs font-bold transition-all shadow-sm ${u?"bg-red-500 text-white hover:bg-red-600 ring-2 ring-red-400/50":"bg-white text-indigo-600 hover:bg-indigo-50"}`,children:u?" ":" "})]})]}),x.length>0&&c.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-white/10",children:[c.jsx("span",{className:"text-[9px] text-white/50 shrink-0",children:":"}),c.jsx("select",{value:w,onChange:_=>{const T=_.target.value;if(g(T),localStorage.setItem("bible_selectedVoiceURI",T),u){const j=m;y(),setTimeout(()=>{p(t.text,j)},100)}},className:"flex-1 bg-black/30 text-white text-[9px] py-1 px-2 rounded border border-white/10 focus:outline-none focus:ring-1 focus:ring-white/30 truncate",children:x.map(_=>c.jsx("option",{value:_.voiceURI,children:_.name},_.voiceURI))})]})]})})]}),c.jsxs("div",{className:"p-6 bg-white",children:[c.jsx("div",{className:"prose prose-slate max-w-none mb-10 min-h-[300px]",children:t.loading?c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 space-y-4",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-blue-100 border-t-blue-500 rounded-full animate-spin"}),c.jsx("p",{className:"text-slate-400 font-bold animate-pulse",children:"  ..."})]}):c.jsx(jS,{content:t.text,fontSize:a,activeChunkIndex:m,onSegmentClick:v})}),!t.loading&&c.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100",children:[c.jsxs("button",{onClick:S,className:`w-full py-5 rounded-3xl font-bold text-xl transition-all shadow-xl hover:shadow-2xl active:scale-95 flex items-center justify-center gap-3
                                ${b&&e===r.currentDay?"bg-slate-800 text-white":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700"}`,children:[c.jsx("span",{className:"text-2xl",children:""}),"    ( )"]}),c.jsx("p",{className:"text-center text-xs text-slate-400 mt-4 font-medium",children:b&&e===r.currentDay?"!       ":"    !"})]})]})]}),vM=({currentMemo:t,setCurrentMemo:e,setShowMemoList:n,saveMemo:r,viewingDay:s,currentDay:i,memos:o})=>c.jsxs("div",{className:"mt-4 bg-[#fdf4ff] p-5 rounded-3xl border border-purple-100 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("h3",{className:"font-bold text-purple-700 flex items-center gap-2",children:"  "}),c.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),n(!0)},className:"text-xs text-purple-500 underline hover:text-purple-700",children:"  "})]}),c.jsx("textarea",{value:t,onChange:a=>e(a.target.value),placeholder:`    ...

   
   
  `,className:"w-full p-4 text-sm border border-purple-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-400 resize-none bg-white shadow-inner",rows:8}),c.jsx("button",{onClick:()=>r(s?s-1:i-1,t,()=>e("")),disabled:!t.trim(),className:"w-full mt-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold py-3 rounded-2xl text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:from-purple-600 hover:to-indigo-600 transition-all shadow-md active:scale-[0.98]",children:"  "}),o[s?s-1:i-1]&&c.jsxs("div",{className:"mt-4 p-4 bg-white rounded-2xl border border-purple-100 max-h-40 overflow-y-auto shadow-sm",children:[c.jsx("p",{className:"text-[10px] text-purple-500 mb-2 font-bold flex items-center gap-1",children:"   :"}),(()=>{const a=o[s?s-1:i-1],l=a.texts||[a.text];return l.map((u,d)=>c.jsxs("div",{className:`text-sm text-slate-600 whitespace-pre-wrap leading-relaxed ${d>0?"mt-3 pt-3 border-t border-purple-50":""}`,children:[l.length>1&&c.jsxs("span",{className:"text-[10px] text-purple-400 font-bold",children:["#",d+1," "]}),u]},d))})()]})]}),xM=({communityName:t,getSubgroupRanking:e,subgroupId:n,communityId:r})=>{const s=e();return c.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 shadow-xl scroll-mt-20",children:[c.jsx("div",{className:"flex justify-between items-center mb-5",children:c.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[c.jsx(he,{name:"users",size:20,className:"text-indigo-500"})," "]})}),c.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:!s||s.length===0?c.jsx("div",{className:"text-center text-slate-400 py-8 text-sm",children:"  ..."}):s.map((i,o)=>{const a=i.communityId===r&&i.name===n,l=i.communityId==="senior"?i.name:`${i.communityName} ${i.name}`;return c.jsxs("div",{className:`relative transition-all ${a?"bg-blue-50/50 p-3 rounded-2xl ring-1 ring-blue-100":""}`,children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[c.jsxs("span",{className:`font-bold flex items-center gap-1.5 ${a?"text-blue-600":"text-slate-600"}`,children:[c.jsx("span",{className:`w-5 h-5 flex items-center justify-center rounded-full text-[10px] ${o===0?"bg-yellow-100 text-yellow-700":o===1?"bg-slate-100 text-slate-600":o===2?"bg-orange-50 text-orange-700":"bg-slate-100 text-slate-400"}`,children:o+1}),l," ",a&&c.jsx("span",{className:"text-[10px] opacity-70",children:"()"})]}),c.jsxs("span",{className:`font-bold ${a?"text-blue-600":"text-slate-400"}`,children:[" ",i.progressRate,"%"]})]}),c.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${a?"bg-blue-500":"bg-slate-300"}`,style:{width:`${i.progressRate}%`}})})]},o)})})]})},wM=({getWeeklyMVP:t})=>{if(typeof t!="function")return null;const e=t();if(!e)return null;const{streakMVP:n,progressMVP:r,weeklyTop10:s=[],totalTop10:i=[]}=e;if(!n&&!r)return null;const o=new Date,a=new Date(o);return a.setDate(o.getDate()-o.getDay()),a.setHours(0,0,0,0),c.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-blue-200 p-5 shadow-sm",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h3",{className:"font-bold text-blue-700 flex items-center gap-2",children:" "})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[c.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100 text-center",children:[c.jsx("div",{className:"text-2xl mb-1",children:""}),c.jsx("p",{className:"text-[10px] text-slate-500 mb-1",children:" "}),c.jsx("p",{className:"font-bold text-slate-800",children:n?n.name:"-"}),c.jsx("p",{className:"text-xs text-orange-500 mb-2 font-bold",children:(()=>n?`  ${(n.readHistory||[]).reduce((u,d)=>{const h=typeof d=="string"?d:d.date,f=typeof d=="string"?1:d.daysRead||1;return new Date(h)>=a?u+f:u},0)}`:"-")()}),c.jsx("p",{className:"text-[9px] text-slate-400 mt-2 pt-2 border-t border-slate-100",children:"     "})]}),c.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100 text-center",children:[c.jsx("div",{className:"text-2xl mb-1",children:""}),c.jsx("p",{className:"text-[10px] text-slate-500 mb-1",children:" "}),c.jsx("p",{className:"font-bold text-slate-800",children:r?r.name:"-"}),c.jsx("p",{className:"text-xs text-blue-500 mb-2 font-bold",children:(()=>{if(!r)return"-";const l=r.readCount||1,u=r.currentDay||0,d=(l-1)*365+u;return l>1?` ${d} (${l} ${u})`:` ${d}`})()}),c.jsx("p",{className:"text-[9px] text-slate-400 mt-2 pt-2 border-t border-slate-100",children:"   1"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100",children:[c.jsx("p",{className:"text-[10px] text-slate-500 font-bold mb-2 text-center",children:" 2-10"}),c.jsx("div",{className:"space-y-1",children:s.length>1?s.slice(1,10).map((l,u)=>{const d=(l.readHistory||[]).reduce((h,f)=>{const p=typeof f=="string"?f:f.date,y=typeof f=="string"?1:f.daysRead||1;return new Date(p)>=a?h+y:h},0);return c.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[c.jsxs("span",{className:"text-slate-600 truncate mr-1",children:[u+2,". ",l.name]}),c.jsxs("span",{className:"text-orange-500 font-bold shrink-0",children:[d,""]})]},l.uid)}):c.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:"-"})})]}),c.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100",children:[c.jsx("p",{className:"text-[10px] text-slate-500 font-bold mb-2 text-center",children:" 2-10"}),c.jsx("div",{className:"space-y-1",children:i.length>1?i.slice(1,10).map((l,u)=>{const d=((l.readCount||1)-1)*365+(l.currentDay||0);return c.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[c.jsxs("span",{className:"text-slate-600 truncate mr-1",children:[u+2,". ",l.name]}),c.jsxs("span",{className:"text-blue-600 font-bold shrink-0",children:[d,""]})]},l.uid)}):c.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:"-"})})]})]})]})},bM=({currentUser:t,communityMembers:e,allMembersForRace:n,memos:r,currentMemo:s,setCurrentMemo:i,readHistory:o,announcement:a,verseData:l,hasReadToday:u,viewingDay:d,setViewingDay:h,fontSize:f,setFontSize:p,isSpeaking:y,isPaused:x,handleTogglePause:w,ttsSpeed:g,handleSpeedChange:m,handleStop:v,handleSpeak:b,availableVoices:S,selectedVoiceURI:_,setSelectedVoiceURI:T,activeChunkIndex:j,jumpToChunk:q,handleRead:$,saveMemo:Q,handleLogout:Y,handleChangeVersionStart:ve,handleRestart:pe,changeSubgroup:at,changeStartDate:Xe,dateToOffset:Oe,showConfetti:F,levelUpToast:k,bonusToast:N,newAchievement:A,showScoreInfo:B,setShowScoreInfo:L,showReadingGuide:ee,setShowReadingGuide:xe,showMemoList:se,setShowMemoList:fe,showAchievements:yt,setShowAchievements:Br,showCalendar:ga,setShowCalendar:pr,showFullRanking:xv,setShowFullRanking:Uc,showDateSettings:hf,setShowDateSettings:Bc,showSubgroupChange:ff,setShowSubgroupChange:pf,showRestartConfirm:wv,setShowRestartConfirm:bv,showMonthlyContestInfo:_v,setShowMonthlyContestInfo:mf,calendarDate:gf,setCalendarDate:yf,dateSettingsDate:vf,setDateSettingsDate:xf,rankingCommunityFilter:wf,setRankingCommunityFilter:bf,selectedSubgroupDetail:_f,setSelectedSubgroupDetail:If,getSubgroupRanking:Ef,getProgressRanking:Nf,getSubgroupDisplay:Sf,generateMemosHTML:kf,getWeeklyMVP:Tf})=>{if(!t)return null;const{currentDay:kn,score:qi,subgroupId:ya,communityName:zc,planId:Cf,streak:zr}=t,[va,Df]=(Cf||"1year_revised").split("_"),qc=th.find(ne=>ne.id===va),Af=qc?qc.title:" ",Wc=ms[va]?ms[va].find(ne=>ne.id===Df):null,jf=Wc?Wc.name:"",xa=L$(qi||0),Hc=()=>{const ne=e.filter(Un=>Un.uid!==t.uid&&Math.abs(Un.currentDay-kn)<=1).length,Je=e.filter(Un=>Un.uid!==t.uid&&Un.currentDay>kn).length,vt=e.length>0?e.reduce((Un,Hi)=>Un+Hi.currentDay,0)/e.length:kn,Tn=kn<vt-3,gr=new Date().getDay()===0;if(Tn&&gr&&Je>0)return`  ${Je}   !   !`;if(zr>=7)return` ${zr}   ! !`;if(zr>=3)return` ${zr} !    !`;if(ne>0)return` ${ne}   !`;const qr=["   !","   , !","    !","    !"];return qr[kn%qr.length]},Rf=Math.max(0,AS-kn),Wi=n.map(ne=>{const vt=((ne.readCount||1)-1)*365+(ne.currentDay||1);return{...ne,day:vt,isMe:ne.uid===t.uid}}).sort((ne,Je)=>Je.day-ne.day),wa=Wi.slice(0,20),ba={},_a=[];["senior","youth","middlehigh","elementary","kinder"].forEach(ne=>{const Je=Or.find(gr=>gr.id===ne),vt=Je?Je.name:null,Tn=Wi.find(gr=>gr.communityId===ne||vt&&gr.communityName===vt);Tn&&(ba[Tn.uid]=vt||(ne==="senior"?"":ne),_a.push(Tn))});const Vn=Wi.find(ne=>ne.isMe);let Gc=[];if(Vn){const ne=Vn.communityId,Je=Vn.communityName;Gc=Wi.filter(vt=>{const Tn=ne&&vt.communityId===ne||Je&&vt.communityName===Je;return(!ne&&!Je?!0:Tn)&&!vt.isMe&&!wa.find(qr=>qr.uid===vt.uid)&&!_a.find(qr=>qr.uid===vt.uid)}).sort((vt,Tn)=>Math.abs(vt.day-Vn.day)-Math.abs(Tn.day-Vn.day)).slice(0,10)}const mr=[...wa];_a.forEach(ne=>{mr.find(Je=>Je.uid===ne.uid)||mr.push(ne)}),Vn&&!mr.find(ne=>ne.uid===Vn.uid)&&mr.push(Vn),Gc.forEach(ne=>{mr.find(Je=>Je.uid===ne.uid)||mr.push(ne)});const Of=mr.sort((ne,Je)=>ne.day-Je.day),Kc=Nf(),Lf=Kc.slice(0,3);return c.jsxs("div",{className:"min-h-screen bg-slate-50 overflow-hidden relative font-sans",children:[F&&c.jsx("div",{className:"fixed inset-0 z-50 flex justify-center pt-40 pointer-events-none",children:c.jsx("div",{className:"text-6xl animate-bounce",children:""})}),A&&c.jsx("div",{className:"fixed top-20 left-4 right-4 z-50 animate-bounce",children:c.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-4 rounded-2xl shadow-2xl flex items-center gap-3",children:[c.jsx("div",{className:"text-4xl",children:A.emoji}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold opacity-90",children:"   !"}),c.jsx("p",{className:"font-bold text-lg",children:A.title}),c.jsx("p",{className:"text-xs opacity-80",children:A.desc})]})]})}),k&&c.jsx("div",{className:"fixed top-20 left-4 right-4 z-50 animate-bounce",children:c.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-4 rounded-2xl shadow-2xl flex items-center gap-3",children:[c.jsx("div",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold opacity-90",children:"LEVEL UP!"}),c.jsxs("p",{className:"font-bold text-lg",children:[xa.name,"  !"]})]})]})}),N&&c.jsx("div",{className:"fixed top-32 left-1/2 -translate-x-1/2 z-50 animate-pulse",children:c.jsxs("div",{className:"bg-blue-600 text-white px-6 py-3 rounded-full shadow-2xl font-bold flex items-center gap-2",children:[c.jsx("span",{children:""}),N]})}),c.jsx(sM,{show:B,onClose:()=>L(!1),myLevel:xa,score:qi}),c.jsx(iM,{show:ee,onClose:()=>xe(!1)}),c.jsx(oM,{show:yt,onClose:()=>Br(!1)}),c.jsx(aM,{show:ga,onClose:()=>pr(!1),calendarDate:gf,setCalendarDate:yf,readHistory:o}),c.jsx(lM,{show:_v,onClose:()=>mf(!1)}),c.jsx(cM,{show:wv,onClose:()=>bv(!1),onRestart:pe}),c.jsx(uM,{show:hf,onClose:()=>Bc(!1),currentUser:t,currentDay:kn,dateSettingsDate:vf,setDateSettingsDate:xf,dateToOffset:Oe,changeStartDate:Xe}),c.jsx(dM,{show:xv,onClose:()=>Uc(!1),progressRanking:Kc,allMembersForRace:n,subgroupId:ya,currentUser:t,selectedSubgroupDetail:_f,setSelectedSubgroupDetail:If,rankingCommunityFilter:wf,setRankingCommunityFilter:bf}),c.jsx(hM,{show:se,onClose:()=>fe(!1),memos:r,currentDay:kn,score:qi,streak:zr,currentUser:t,generateMemosHTML:kf}),c.jsx(fM,{show:ff,onClose:()=>pf(!1),currentUser:t,changeSubgroup:at}),c.jsx(pM,{handleLogout:Y,streak:zr,score:qi,myLevel:xa,setShowScoreInfo:L,setShowAchievements:Br,setShowDateSettings:Bc,setShowCalendar:pr,setShowReadingGuide:xe,getEncouragementMessage:Hc,communityName:zc,setShowFullRanking:Uc,topProgressGroups:Lf,subgroupId:ya,planTypeName:Af,versionName:jf,handleChangeVersionStart:ve}),c.jsxs("div",{className:"max-w-5xl mx-auto w-full pb-10 mt-8",children:[c.jsx(mM,{racers:Of,departmentChampions:ba,getSubgroupDisplay:Sf}),c.jsxs("main",{className:"px-4 space-y-6",children:[c.jsx(gM,{announcement:a}),c.jsx(yM,{verseData:l,viewingDay:d,setViewingDay:h,currentUser:t,daysRemaining:Rf,handleChangeVersionStart:ve,getEncouragementMessage:Hc,fontSize:f,setFontSize:p,isSpeaking:y,isPaused:x,ttsSpeed:g,handleSpeedChange:m,handleSpeak:b,handleStop:v,availableVoices:S,selectedVoiceURI:_,setSelectedVoiceURI:T,activeChunkIndex:j,jumpToChunk:q,hasReadToday:u,handleRead:$}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(vM,{currentMemo:s,setCurrentMemo:i,setShowMemoList:fe,saveMemo:Q,viewingDay:d,currentDay:kn,memos:r}),c.jsx(xM,{communityName:zc,getSubgroupRanking:Ef,subgroupId:ya,communityId:t?t.communityId:null})]}),c.jsx(wM,{getWeeklyMVP:Tf})]})]}),y&&c.jsx("div",{className:"fixed bottom-10 left-6 z-[100] flex items-center gap-2",children:c.jsxs("button",{onClick:w,className:`flex items-center justify-center gap-2 px-5 py-3 rounded-full shadow-2xl transition-all active:scale-95 ${x?"bg-indigo-600 shadow-indigo-200":"bg-orange-500 shadow-orange-200"} text-white`,children:[c.jsx("span",{className:"text-sm font-bold",children:x?" ":" "}),c.jsx("span",{className:"text-xl",children:x?"":""})]})})]})},_M=t=>{const[e,n]=P.useState(!1),[r,s]=P.useState(!1),[i,o]=P.useState(()=>parseFloat(localStorage.getItem("bible_ttsSpeed"))||1),[a,l]=P.useState([]),[u,d]=P.useState(()=>localStorage.getItem("bible_selectedVoiceURI")||""),[h,f]=P.useState(-1),[p,y]=P.useState(!1),x=P.useRef([]),w=P.useRef(0),g=P.useRef(!1),m=P.useRef(null);P.useEffect(()=>{const q=()=>{if(!window.speechSynthesis)return;const Q=window.speechSynthesis.getVoices();if(Q.length===0)return;console.log("Loaded voices:",Q.length);const Y=Q.filter(ve=>ve.lang==="ko-KR"||ve.lang.startsWith("ko"));l(ve=>ve.length===Y.length&&ve.every((pe,at)=>pe.voiceURI===Y[at].voiceURI)?ve:Y)};q();const $=navigator.userAgent;return($.indexOf("NAVER")>-1||$.indexOf("KAKAOTALK")>-1)&&y(!0),window.speechSynthesis.addEventListener?(window.speechSynthesis.addEventListener("voiceschanged",q),()=>window.speechSynthesis.removeEventListener("voiceschanged",q)):(window.speechSynthesis.onvoiceschanged=q,()=>{window.speechSynthesis.onvoiceschanged=null})},[]),P.useEffect(()=>{if(a.length>0){const q=localStorage.getItem("bible_selectedVoiceURI"),$=q&&a.some(Q=>Q.voiceURI===q);if(!u)if($)d(q);else{const Q=a[0].voiceURI;d(Q),localStorage.setItem("bible_selectedVoiceURI",Q)}}},[a,u]);const v=q=>{o($=>{const Q=parseFloat(($+q).toFixed(1)),Y=Math.max(.6,Math.min(2,Q));return localStorage.setItem("bible_ttsSpeed",Y),e&&!r&&x.current.length>0&&(S(),setTimeout(()=>{T(t,w.current,Y)},50)),Y})},b=()=>{r?(s(!1),g.current=!1,_()):(s(!0),g.current=!0,window.speechSynthesis&&window.speechSynthesis.cancel())},S=()=>{window.speechSynthesis&&window.speechSynthesis.cancel(),n(!1),s(!1),g.current=!1,f(-1),x.current=[],w.current=0},_=(q=null)=>{if(!window.speechSynthesis)return;if(w.current>=x.current.length){n(!1),f(-1);return}f(w.current);const $=x.current[w.current];if(!$||$.trim().length===0){w.current++,_(q);return}const Q=new SpeechSynthesisUtterance($);if(u){const Y=a.find(ve=>ve.voiceURI===u);Y&&(Q.voice=Y)}Q.lang="ko-KR",Q.rate=q!==null?q:i,Q.pitch=1,Q.onend=()=>{g.current||(w.current++,_(q))},Q.onerror=Y=>{g.current||Y.error==="interrupted"||Y.error==="canceled"||(console.error("TTS Error:",Y),S())},m.current=Q,window.speechSynthesis.speak(Q)},T=(q,$=0,Q=null)=>{if(p){alert(`/     .

  '  ' 
  .`);return}if(!window.speechSynthesis){alert("     .");return}const Y=Q!==null?Q:i;(window.speechSynthesis.speaking||window.speechSynthesis.pending)&&window.speechSynthesis.cancel();const ve=q.split(`
`),pe=[];ve.forEach(at=>{const Xe=at.replace(/\[\[VERSE:\d+\]\]/g,"").trim();if(!Xe)return;let Oe=Xe;Xe.indexOf("#")===0?Oe=Xe.replace(/\([^)]*\)/g,"").replace(/[0-9]+/g,k=>M$(k)):Oe=Xe,Oe=Oe.replace(/^#+\s*/,"");const F=Oe.split(/([.?!])/g).reduce((k,N)=>[".","?","!"].indexOf(N)!==-1?(k.length>0&&(k[k.length-1]+=N),k):(N.trim().length>0&&k.push(N),k),[]);pe.push(...F)}),pe.length!==0&&(x.current=pe,w.current=$,n(!0),s(!1),g.current=!1,f($),setTimeout(()=>{_(Y)},50))},j=q=>{T(t,q)};return P.useEffect(()=>{t&&S()},[t]),P.useEffect(()=>()=>{window.speechSynthesis&&window.speechSynthesis.cancel()},[]),{isSpeaking:e,isPaused:r,ttsSpeed:i,availableVoices:a,selectedVoiceURI:u,activeChunkIndex:h,handleSpeedChange:v,handleTogglePause:b,handleStop:S,handleSpeak:T,jumpToChunk:j,setSelectedVoiceURI:d}},IM=()=>{const[t,e]=P.useState("login"),[n,r]=P.useState("login"),[s,i]=P.useState(""),[o,a]=P.useState(""),[l,u]=P.useState(""),[d,h]=P.useState(""),[f,p]=P.useState(""),[y,x]=P.useState(""),[w,g]=P.useState(null),{currentUser:m,setCurrentUser:v,authLoading:b}=Q$(),[S,_]=P.useState(""),{verseData:T,setVerseData:j,subgroupStats:q,setSubgroupStats:$,communityMembers:Q,setCommunityMembers:Y,allMembersForRace:ve,setAllMembersForRace:pe,memos:at,setMemos:Xe,readHistory:Oe,setReadHistory:F,announcement:k,setAnnouncement:N,viewingDay:A,setViewingDay:B,hasReadToday:L,setHasReadToday:ee,showConfetti:xe,setShowConfetti:se,levelUpToast:fe,setLevelUpToast:yt,bonusToast:Br,setBonusToast:ga,newAchievement:pr,setNewAchievement:xv,handleRead:Uc,saveMemo:hf,changeSubgroup:Bc,handleRestart:ff,changeStartDate:pf,loadAllMembers:wv,loadMemos:bv,loadAnnouncement:_v}=eM(m,v,t),[mf,gf]=P.useState(!1),[yf,vf]=P.useState("all");P.useState("all");const[xf,wf]=P.useState(!1),[bf,_f]=P.useState(!1),[If,Ef]=P.useState(!1),[Nf,Sf]=P.useState(!1),[kf,Tf]=P.useState(!1),[kn,qi]=P.useState(!1),[ya,zc]=P.useState(!1),[Cf,zr]=P.useState(!1),[va,Df]=P.useState(!1),[qc,Af]=P.useState(null),[Wc,jf]=P.useState(new Date),[xa,Hc]=P.useState(new Date),[Rf,Wi]=P.useState(""),[wa,ba]=P.useState(null),[_a,Pf]=P.useState(!1),{isSpeaking:Vn,isPaused:Gc,ttsSpeed:mr,availableVoices:Of,selectedVoiceURI:Kc,activeChunkIndex:Lf,handleSpeedChange:ne,handleTogglePause:Je,handleStop:vt,handleSpeak:Tn,jumpToChunk:gr,setSelectedVoiceURI:qr}=_M(T.text),[Un,Hi]=P.useState([]),[on,Qc]=P.useState(null),[RS,Iv]=P.useState(null),[Bs,Ev]=P.useState(""),[PS,OS]=P.useState("all"),[LS,$S]=P.useState("today"),[MS,FS]=P.useState("name"),[Yc,Nv]=P.useState({text:"",links:[{url:"",text:""}],enabled:!1}),[VS,Xc]=P.useState(null),[US,BS]=P.useState(()=>{const ue=localStorage.getItem("bible_fontSize");return ue?parseInt(ue,10):16}),[zS,Sv]=P.useState(null),[qS,WS]=P.useState(["1year_revised"]),[EM,HS]=P.useState(!1);P.useEffect(()=>{const ue=navigator.userAgent;(ue.indexOf("NAVER")>-1||ue.indexOf("KAKAOTALK")>-1)&&HS(!0)},[]),P.useEffect(()=>{b||(m?t==="login"&&(m.communityId&&m.subgroupId?e("dashboard"):(g(m),e("plan_type_select"))):t!=="login"&&e("login"))},[m,b]);const GS=async()=>{if(de)try{await de.collection("settings").doc("announcement").set({...Yc,updatedAt:Ae.firestore.FieldValue.serverTimestamp()}),N(Yc.enabled?Yc:null),alert(" !")}catch(ue){console.error("  :",ue),alert(" ")}},KS=async(ue,be)=>{if(confirm(`${be}   ?`))try{await de.collection("users").doc(ue).delete(),Hi(we=>we.filter(_e=>_e.uid!==ue)),alert(".")}catch(we){console.error(we),alert(" ")}},QS=async(ue,be,we)=>{if(!Bs||Bs.length<6){alert("  6  .");return}if(confirm(`${be}  ?

 : ${Bs}`))try{await de.collection("users").doc(ue).set({password:Bs,passwordResetRequired:!0,updatedAt:Ae.firestore.FieldValue.serverTimestamp()},{merge:!0}),alert(` ${be}  !

 : ${Bs}

    .`),Hi(_e=>_e.map(xt=>xt.uid===ue?{...xt,password:Bs}:xt)),Iv(null),Ev("")}catch(_e){console.error(_e),alert("  ")}},YS=ue=>Qc({...ue}),XS=async()=>{if(on)try{await de.collection("users").doc(on.uid).set({communityId:on.communityId,communityName:on.communityName,subgroupId:on.subgroupId,planId:on.planId,currentDay:on.currentDay,score:on.score,streak:on.streak,lastReadDate:on.lastReadDate||null,updatedAt:Ae.firestore.FieldValue.serverTimestamp()},{merge:!0}),Hi(ue=>ue.map(be=>be.uid===on.uid?on:be)),Qc(null),alert(".")}catch(ue){console.error(ue),alert(" ")}},JS=async ue=>{if(ue.preventDefault(),_(""),n==="signup"){if(console.log("===   ==="),console.log(":",s),console.log(" :",o.length),console.log(":",d),!s.trim()||!o.trim()||!d){_("  .");return}if(o!==l){_("  .");return}if(o.length<6){_(" 6  .");return}}const be=n==="signup"?s:f,we=n==="signup"?o:y;if(!be.trim()||!we.trim()){_("   .");return}if(be==="admin"&&we==="08283"&&n==="login")try{Pt&&!Pt.currentUser&&await Pt.signInAnonymously();const _e=await de.collection("users").get();Hi(_e.docs.map(wt=>Tg(wt)));const xt=await de.collection("settings").doc("announcement").get();if(xt.exists){const wt=xt.data();!wt.links&&wt.linkUrl&&wt.linkText&&(wt.links=[{url:wt.linkUrl,text:wt.linkText}]),wt.links||(wt.links=[{url:"",text:""}]),Nv(wt)}const Bn=await de.collection("settings").doc("sync").get();Bn.exists&&Sv(Bn.data()),Pf(!0);return}catch(_e){console.error(_e),_("   ");return}try{const _e=$$(be);console.log(" :",_e);let xt=null;try{console.log("  ..."),xt=await Pt.signInWithEmailAndPassword(_e,we),console.log(" !")}catch(Ve){if(console.log(" :",Ve.code,Ve.message),Ve&&Ve.code==="auth/user-not-found"||Ve&&Ve.code==="auth/invalid-login-credentials"||Ve&&Ve.code==="auth/invalid-credential"){if(n==="login"){_("  .   .");return}console.log("  ...");try{xt=await Pt.createUserWithEmailAndPassword(_e,we),console.log(" !")}catch(Ue){console.error("  :",Ue),console.error(" :",Ue?Ue.code:null),console.error(" :",Ue?Ue.message:null),Ue&&Ue.code==="auth/email-already-in-use"?_("   .      ."):Ue&&Ue.code==="auth/weak-password"?_(" 6  ."):Ue&&Ue.code==="auth/invalid-email"?_("    ."):_(` : ${Ue&&Ue.message||"   "}`);return}}else if(Ve&&Ve.code==="auth/wrong-password"){_(" .");return}else{console.error("    :",Ve),_(" (   )");return}}const Bn=xt.user.uid;console.log(" UID:",Bn);const wt=de.collection("users").doc(Bn),zs=await wt.get();if(!zs.exists){console.log("  - Firestore   ...");const Ve={name:be.trim(),password:we,startDate:new Date().toDateString(),currentDay:1,streak:0,score:0,lastReadDate:null,gender:"male",planId:"1year_revised",communityId:null,communityName:null,subgroupId:null,createdAt:Ae.firestore.FieldValue.serverTimestamp(),updatedAt:Ae.firestore.FieldValue.serverTimestamp()};await wt.set(Ve),console.log("Firestore   !"),g({...Ve,uid:Bn}),e("plan_type_select");return}console.log("  -   ");const qs=Tg(zs);v(qs),ee(qs.lastReadDate===new Date().toDateString()),!qs.communityId||!qs.subgroupId?(g(qs),e("plan_type_select")):e("dashboard")}catch(_e){console.error("  :",_e),_("   ")}},ZS=ue=>{ba(ue),e("bible_version_select")},ek=async ue=>{const be=`${wa}_${ue}`;if(w)g(we=>({...we,planId:be})),e("community_select");else if(m){const we={...m,planId:be};v(we);try{const _e=Pt.currentUser?Pt.currentUser.uid:null;_e&&await de.collection("users").doc(_e).set({planId:be,updatedAt:Ae.firestore.FieldValue.serverTimestamp()},{merge:!0})}catch(_e){console.error(_e)}e("dashboard"),se(!0),setTimeout(()=>se(!1),2e3)}},tk=(ue,be)=>{g(we=>({...we,communityId:ue,communityName:be})),e("subgroup_select")},nk=async ue=>{const be={...w,subgroupId:ue};v(be),g(null),e("dashboard");try{const we=(Pt.currentUser?Pt.currentUser.uid:null)||be.uid;we&&await de.collection("users").doc(we).set({...be,updatedAt:Ae.firestore.FieldValue.serverTimestamp()},{merge:!0})}catch(we){console.error(we),alert("  ")}},rk=td.replace("notion-proxy","notion-proxy-bulk"),sk=td.replace("notion-proxy","notion-proxy-page"),ik=async(ue=["1year_revised"])=>{if(!de||!td)return alert(" "),{success:0,error:0,failedItems:[]};let be=0,we=0;const _e=[];for(const xt of ue){const[Bn,wt]=xt.split("_"),zs=ms[Bn]?ms[Bn].find(Ue=>Ue.id===wt):null,qs=zs&&zs.tagName||" ",Ve=zs&&zs.name||xt;Xc({current:0,total:365,success:0,error:0,currentVersion:Ve,currentDay:0,status:"    ..."});try{console.log(` ${Ve}   ...`);const Ue=await fetch(rk,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:qs,includeContent:!1})});if(!Ue.ok)throw new Error(`Bulk API Error: ${Ue.status}`);const Jc=await Ue.json();if(console.log(` ${Jc.count}   `),!Jc.items||Jc.items.length===0)throw new Error("   ");const Tv={};for(let an=1;an<=365;an++){const zn=new Date(2025,0,an),qn=String(zn.getMonth()+1).padStart(2,"0"),eu=String(zn.getDate()).padStart(2,"0");Tv[`${qn}-${eu}`]=an}const $f=Jc.items;let Zc=0;for(const an of $f){const zn=Tv[an.date];if(!zn){console.log(`   : ${an.date}`),we++,_e.push({planId:xt,versionName:Ve,day:0,date:an.date,error:"  "});continue}try{const qn=await fetch(sk,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageId:an.pageId})});if(!qn.ok)throw new Error(`Page API Error: ${qn.status}`);const eu=await qn.json();if(eu.text){const ak=`${Bn}_${wt}_${zn}`;await de.collection("verses").doc(ak).set({title:an.title,text:eu.text,pageId:an.pageId,day:zn,planId:xt,syncedAt:Ae.firestore.FieldValue.serverTimestamp()}),be++,console.log(` Day ${zn} (${an.date})  `)}else throw new Error(" ")}catch(qn){we++,_e.push({planId:xt,versionName:Ve,day:zn,date:an.date,error:qn.message}),console.error(` Day ${zn} :`,qn.message)}Zc++,Zc%5===0&&Xc({current:Zc,total:$f.length,success:be,error:we,currentVersion:Ve,currentDay:zn,status:`   ... (${Zc}/${$f.length})`}),await new Promise(qn=>setTimeout(qn,200))}}catch(Ue){console.error(` ${Ve}  :`,Ue),we+=365,_e.push({planId:xt,versionName:Ve,day:0,date:"",error:` : ${Ue.message}`})}}return await de.collection("settings").doc("sync").set({lastSyncAt:Ae.firestore.FieldValue.serverTimestamp(),successCount:be,errorCount:we,syncedVersions:ue,failedItems:_e.slice(0,50)}),Xc(null),{success:be,error:we,failedItems:_e}},kv=()=>{Pt&&Pt.signOut(),v(null),Pf(!1),g(null),p(""),x(""),_(""),e("login"),ee(!1),Qc(null),Y([])},ok=()=>{ba(null),g(null),e("plan_type_select")};return b?c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-5xl mb-4 animate-bounce",children:""}),c.jsx("p",{className:"text-slate-500 font-bold",children:"  ..."})]})}):_a?c.jsx(nM,{handleLogout:kv,downloadCSV:K$,adminViewMode:LS,setAdminViewMode:$S,adminFilter:PS,setAdminFilter:OS,adminSortBy:MS,setAdminSortBy:FS,allUsers:Un,MOCK_COMMUNITIES:Or,BIBLE_VERSIONS:ms,announcementInput:Yc,setAnnouncementInput:Nv,saveAnnouncement:GS,generateMemosCSV:G$,generateMemosHTML:Lw,editingUser:on,setEditingUser:Qc,startEditUser:YS,saveEditUser:XS,changingPassword:RS,setChangingPassword:Iv,newPassword:Bs,setNewPassword:Ev,changePassword:QS,deleteUser:KS,lastSyncInfo:zS,setLastSyncInfo:Sv,syncProgress:VS,setSyncProgress:Xc,selectedSyncVersions:qS,setSelectedSyncVersions:WS,syncNotionToFirestore:ik,adminStats:W$(Un),db:de}):t==="login"?c.jsx(tM,{loginTab:n,setLoginTab:r,loginName:f,setLoginName:p,loginPw:y,setLoginPw:x,signupName:s,setSignupName:i,signupBirthdate:d,setSignupBirthdate:h,signupPw:o,setSignupPw:a,signupPwConfirm:l,setSignupPwConfirm:u,errorMsg:S,handleLogin:JS}):["plan_type_select","bible_version_select","community_select","subgroup_select"].includes(t)?c.jsx(rM,{view:t,currentUser:m,tempUser:w,setView:e,selectedPlanType:wa,handlePlanTypeSelect:ZS,handleVersionSelect:ek,handleCommunitySelect:tk,handleSubgroupSelect:nk}):t==="dashboard"&&m?c.jsx(bM,{currentUser:m,communityMembers:Q,allMembersForRace:ve,memos:at,currentMemo:Rf,setCurrentMemo:Wi,readHistory:Oe,announcement:k,verseData:T,hasReadToday:L,viewingDay:A,setViewingDay:B,fontSize:US,setFontSize:BS,isSpeaking:Vn,isPaused:Gc,handleTogglePause:Je,ttsSpeed:mr,handleSpeedChange:ne,handleStop:vt,handleSpeak:Tn,availableVoices:Of,selectedVoiceURI:Kc,setSelectedVoiceURI:qr,activeChunkIndex:Lf,jumpToChunk:gr,handleRead:Uc,saveMemo:hf,handleLogout:kv,handleChangeVersionStart:ok,handleRestart:ff,changeSubgroup:Bc,changeStartDate:pf,dateToOffset:F$,showConfetti:xe,levelUpToast:fe,bonusToast:Br,newAchievement:pr,showScoreInfo:xf,setShowScoreInfo:wf,showReadingGuide:bf,setShowReadingGuide:_f,showMemoList:If,setShowMemoList:Ef,showAchievements:Nf,setShowAchievements:Sf,showCalendar:kf,setShowCalendar:Tf,showFullRanking:kn,setShowFullRanking:qi,showDateSettings:ya,setShowDateSettings:zc,showSubgroupChange:Cf,setShowSubgroupChange:zr,showRestartConfirm:va,setShowRestartConfirm:Df,showMonthlyContestInfo:mf,setShowMonthlyContestInfo:gf,calendarDate:Wc,setCalendarDate:jf,dateSettingsDate:xa,setDateSettingsDate:Hc,rankingCommunityFilter:yf,setRankingCommunityFilter:vf,selectedSubgroupDetail:qc,setSelectedSubgroupDetail:Af,getSubgroupRanking:()=>z$(q),getProgressRanking:()=>q$(q),getSubgroupDisplay:H$,generateMemosHTML:Lw,getWeeklyMVP:()=>B$(Q)}):null};Mp.createRoot(document.getElementById("root")).render(c.jsx($p.StrictMode,{children:c.jsx(IM,{})}));
