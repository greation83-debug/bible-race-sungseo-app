(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function PE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kx={exports:{}},dh={},Qx={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wc=Symbol.for("react.element"),OE=Symbol.for("react.portal"),LE=Symbol.for("react.fragment"),ME=Symbol.for("react.strict_mode"),$E=Symbol.for("react.profiler"),FE=Symbol.for("react.provider"),VE=Symbol.for("react.context"),UE=Symbol.for("react.forward_ref"),BE=Symbol.for("react.suspense"),zE=Symbol.for("react.memo"),YE=Symbol.for("react.lazy"),V1=Symbol.iterator;function XE(t){return t===null||typeof t!="object"?null:(t=V1&&t[V1]||t["@@iterator"],typeof t=="function"?t:null)}var Jx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zx=Object.assign,eb={};function io(t,e,r){this.props=t,this.context=e,this.refs=eb,this.updater=r||Jx}io.prototype.isReactComponent={};io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tb(){}tb.prototype=io.prototype;function Vm(t,e,r){this.props=t,this.context=e,this.refs=eb,this.updater=r||Jx}var Um=Vm.prototype=new tb;Um.constructor=Vm;Zx(Um,io.prototype);Um.isPureReactComponent=!0;var U1=Array.isArray,rb=Object.prototype.hasOwnProperty,Bm={current:null},nb={key:!0,ref:!0,__self:!0,__source:!0};function ib(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)rb.call(e,n)&&!nb.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:wc,type:t,key:s,ref:a,props:i,_owner:Bm.current}}function qE(t,e){return{$$typeof:wc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zm(t){return typeof t=="object"&&t!==null&&t.$$typeof===wc}function WE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var B1=/\/+/g;function Hp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WE(""+t.key):e.toString(36)}function Fu(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case wc:case OE:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+Hp(a,0):n,U1(i)?(r="",t!=null&&(r=t.replace(B1,"$&/")+"/"),Fu(i,e,r,"",function(u){return u})):i!=null&&(zm(i)&&(i=qE(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(B1,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",U1(t))for(var o=0;o<t.length;o++){s=t[o];var c=n+Hp(s,o);a+=Fu(s,e,r,c,i)}else if(c=XE(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=n+Hp(s,o++),a+=Fu(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function cu(t,e,r){if(t==null)return t;var n=[],i=0;return Fu(t,n,"","",function(s){return e.call(r,s,i++)}),n}function HE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Vu={transition:null},GE={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Vu,ReactCurrentOwner:Bm};function sb(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:cu,forEach:function(t,e,r){cu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return cu(t,function(){e++}),e},toArray:function(t){return cu(t,function(e){return e})||[]},only:function(t){if(!zm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=io;le.Fragment=LE;le.Profiler=$E;le.PureComponent=Vm;le.StrictMode=ME;le.Suspense=BE;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GE;le.act=sb;le.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Zx({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Bm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)rb.call(e,c)&&!nb.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:wc,type:t.type,key:i,ref:s,props:n,_owner:a}};le.createContext=function(t){return t={$$typeof:VE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FE,_context:t},t.Consumer=t};le.createElement=ib;le.createFactory=function(t){var e=ib.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:UE,render:t}};le.isValidElement=zm;le.lazy=function(t){return{$$typeof:YE,_payload:{_status:-1,_result:t},_init:HE}};le.memo=function(t,e){return{$$typeof:zE,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Vu.transition;Vu.transition={};try{t()}finally{Vu.transition=e}};le.unstable_act=sb;le.useCallback=function(t,e){return Gt.current.useCallback(t,e)};le.useContext=function(t){return Gt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Gt.current.useEffect(t,e)};le.useId=function(){return Gt.current.useId()};le.useImperativeHandle=function(t,e,r){return Gt.current.useImperativeHandle(t,e,r)};le.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Gt.current.useMemo(t,e)};le.useReducer=function(t,e,r){return Gt.current.useReducer(t,e,r)};le.useRef=function(t){return Gt.current.useRef(t)};le.useState=function(t){return Gt.current.useState(t)};le.useSyncExternalStore=function(t,e,r){return Gt.current.useSyncExternalStore(t,e,r)};le.useTransition=function(){return Gt.current.useTransition()};le.version="18.3.1";Qx.exports=le;var C=Qx.exports;const Nl=PE(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE=C,QE=Symbol.for("react.element"),JE=Symbol.for("react.fragment"),ZE=Object.prototype.hasOwnProperty,e4=KE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t4={key:!0,ref:!0,__self:!0,__source:!0};function ab(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)ZE.call(e,n)&&!t4.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:QE,type:t,key:s,ref:a,props:i,_owner:e4.current}}dh.Fragment=JE;dh.jsx=ab;dh.jsxs=ab;Kx.exports=dh;var l=Kx.exports,Hf={},ob={exports:{}},br={},lb={exports:{}},cb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,q){var Q=$.length;$.push(q);e:for(;0<Q;){var ae=Q-1>>>1,D=$[ae];if(0<i(D,q))$[ae]=q,$[Q]=D,Q=ae;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var q=$[0],Q=$.pop();if(Q!==q){$[0]=Q;e:for(var ae=0,D=$.length,E=D>>>1;ae<E;){var A=2*(ae+1)-1,V=$[A],R=A+1,W=$[R];if(0>i(V,Q))R<D&&0>i(W,V)?($[ae]=W,$[R]=Q,ae=R):($[ae]=V,$[A]=Q,ae=A);else if(R<D&&0>i(W,Q))$[ae]=W,$[R]=Q,ae=R;else break e}}return q}function i($,q){var Q=$.sortIndex-q.sortIndex;return Q!==0?Q:$.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,h=null,p=3,g=!1,y=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var q=r(u);q!==null;){if(q.callback===null)n(u);else if(q.startTime<=$)n(u),q.sortIndex=q.expirationTime,e(c,q);else break;q=r(u)}}function b($){if(v=!1,w($),!y)if(r(c)!==null)y=!0,Me(_);else{var q=r(u);q!==null&&he(b,q.startTime-$)}}function _($,q){y=!1,v&&(v=!1,m(T),T=-1),g=!0;var Q=p;try{for(w(q),h=r(c);h!==null&&(!(h.expirationTime>q)||$&&!G());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,p=h.priorityLevel;var D=ae(h.expirationTime<=q);q=t.unstable_now(),typeof D=="function"?h.callback=D:h===r(c)&&n(c),w(q)}else n(c);h=r(c)}if(h!==null)var E=!0;else{var A=r(u);A!==null&&he(b,A.startTime-q),E=!1}return E}finally{h=null,p=Q,g=!1}}var S=!1,N=null,T=-1,F=5,O=-1;function G(){return!(t.unstable_now()-O<F)}function K(){if(N!==null){var $=t.unstable_now();O=$;var q=!0;try{q=N(!0,$)}finally{q?te():(S=!1,N=null)}}else S=!1}var te;if(typeof f=="function")te=function(){f(K)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ce=H.port2;H.port1.onmessage=K,te=function(){ce.postMessage(null)}}else te=function(){x(K,0)};function Me($){N=$,S||(S=!0,te())}function he($,q){T=x(function(){$(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Me(_))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var Q=p;p=q;try{return $()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=p;p=$;try{return q()}finally{p=Q}},t.unstable_scheduleCallback=function($,q,Q){var ae=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ae+Q:ae):Q=ae,$){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Q+D,$={id:d++,callback:q,priorityLevel:$,startTime:Q,expirationTime:D,sortIndex:-1},Q>ae?($.sortIndex=Q,e(u,$),r(c)===null&&$===r(u)&&(v?(m(T),T=-1):v=!0,he(b,Q-ae))):($.sortIndex=D,e(c,$),y||g||(y=!0,Me(_))),$},t.unstable_shouldYield=G,t.unstable_wrapCallback=function($){var q=p;return function(){var Q=p;p=q;try{return $.apply(this,arguments)}finally{p=Q}}}})(cb);lb.exports=cb;var r4=lb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n4=C,wr=r4;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ub=new Set,El={};function Vs(t,e){La(t,e),La(t+"Capture",e)}function La(t,e){for(El[t]=e,t=0;t<e.length;t++)ub.add(e[t])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=Object.prototype.hasOwnProperty,i4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z1={},Y1={};function s4(t){return Gf.call(Y1,t)?!0:Gf.call(z1,t)?!1:i4.test(t)?Y1[t]=!0:(z1[t]=!0,!1)}function a4(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function o4(t,e,r,n){if(e===null||typeof e>"u"||a4(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ym=/[\-:]([a-z])/g;function Xm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ym,Xm);At[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ym,Xm);At[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ym,Xm);At[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function qm(t,e,r,n){var i=At.hasOwnProperty(e)?At[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(o4(e,r,i,n)&&(r=null),n||i===null?s4(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Un=n4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uu=Symbol.for("react.element"),oa=Symbol.for("react.portal"),la=Symbol.for("react.fragment"),Wm=Symbol.for("react.strict_mode"),Kf=Symbol.for("react.profiler"),db=Symbol.for("react.provider"),hb=Symbol.for("react.context"),Hm=Symbol.for("react.forward_ref"),Qf=Symbol.for("react.suspense"),Jf=Symbol.for("react.suspense_list"),Gm=Symbol.for("react.memo"),ri=Symbol.for("react.lazy"),pb=Symbol.for("react.offscreen"),X1=Symbol.iterator;function Co(t){return t===null||typeof t!="object"?null:(t=X1&&t[X1]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Gp;function Ko(t){if(Gp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Gp=e&&e[1]||""}return`
`+Gp+t}var Kp=!1;function Qp(t,e){if(!t||Kp)return"";Kp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{Kp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ko(t):""}function l4(t){switch(t.tag){case 5:return Ko(t.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 2:case 15:return t=Qp(t.type,!1),t;case 11:return t=Qp(t.type.render,!1),t;case 1:return t=Qp(t.type,!0),t;default:return""}}function Zf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case la:return"Fragment";case oa:return"Portal";case Kf:return"Profiler";case Wm:return"StrictMode";case Qf:return"Suspense";case Jf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hb:return(t.displayName||"Context")+".Consumer";case db:return(t._context.displayName||"Context")+".Provider";case Hm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gm:return e=t.displayName||null,e!==null?e:Zf(t.type)||"Memo";case ri:e=t._payload,t=t._init;try{return Zf(t(e))}catch{}}return null}function c4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zf(e);case 8:return e===Wm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function u4(t){var e=fb(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function du(t){t._valueTracker||(t._valueTracker=u4(t))}function gb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=fb(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ud(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eg(t,e){var r=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function q1(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=_i(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mb(t,e){e=e.checked,e!=null&&qm(t,"checked",e,!1)}function tg(t,e){mb(t,e);var r=_i(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rg(t,e.type,r):e.hasOwnProperty("defaultValue")&&rg(t,e.type,_i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function W1(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function rg(t,e,r){(e!=="number"||ud(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Qo=Array.isArray;function ba(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+_i(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ng(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function H1(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(L(92));if(Qo(r)){if(1<r.length)throw Error(L(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:_i(r)}}function yb(t,e){var r=_i(e.value),n=_i(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function G1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ig(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hu,vb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hu=hu||document.createElement("div"),hu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},d4=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){d4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function xb(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function bb(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=xb(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var h4=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sg(t,e){if(e){if(h4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function ag(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var og=null;function Km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lg=null,_a=null,Sa=null;function K1(t){if(t=bc(t)){if(typeof lg!="function")throw Error(L(280));var e=t.stateNode;e&&(e=mh(e),lg(t.stateNode,t.type,e))}}function _b(t){_a?Sa?Sa.push(t):Sa=[t]:_a=t}function Sb(){if(_a){var t=_a,e=Sa;if(Sa=_a=null,K1(t),e)for(t=0;t<e.length;t++)K1(e[t])}}function kb(t,e){return t(e)}function Ib(){}var Jp=!1;function Nb(t,e,r){if(Jp)return t(e,r);Jp=!0;try{return kb(t,e,r)}finally{Jp=!1,(_a!==null||Sa!==null)&&(Ib(),Sb())}}function Cl(t,e){var r=t.stateNode;if(r===null)return null;var n=mh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(L(231,e,typeof r));return r}var cg=!1;if(Rn)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){cg=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{cg=!1}function p4(t,e,r,n,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var ll=!1,dd=null,hd=!1,ug=null,f4={onError:function(t){ll=!0,dd=t}};function g4(t,e,r,n,i,s,a,o,c){ll=!1,dd=null,p4.apply(f4,arguments)}function m4(t,e,r,n,i,s,a,o,c){if(g4.apply(this,arguments),ll){if(ll){var u=dd;ll=!1,dd=null}else throw Error(L(198));hd||(hd=!0,ug=u)}}function Us(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Eb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Q1(t){if(Us(t)!==t)throw Error(L(188))}function y4(t){var e=t.alternate;if(!e){if(e=Us(t),e===null)throw Error(L(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Q1(i),t;if(s===n)return Q1(i),e;s=s.sibling}throw Error(L(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(L(189))}}if(r.alternate!==n)throw Error(L(190))}if(r.tag!==3)throw Error(L(188));return r.stateNode.current===r?t:e}function Tb(t){return t=y4(t),t!==null?Cb(t):null}function Cb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cb(t);if(e!==null)return e;t=t.sibling}return null}var jb=wr.unstable_scheduleCallback,J1=wr.unstable_cancelCallback,w4=wr.unstable_shouldYield,v4=wr.unstable_requestPaint,Je=wr.unstable_now,x4=wr.unstable_getCurrentPriorityLevel,Qm=wr.unstable_ImmediatePriority,Db=wr.unstable_UserBlockingPriority,pd=wr.unstable_NormalPriority,b4=wr.unstable_LowPriority,Ab=wr.unstable_IdlePriority,hh=null,dn=null;function _4(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(hh,t,void 0,(t.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:I4,S4=Math.log,k4=Math.LN2;function I4(t){return t>>>=0,t===0?32:31-(S4(t)/k4|0)|0}var pu=64,fu=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fd(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Jo(o):(s&=a,s!==0&&(n=Jo(s)))}else a=r&~i,a!==0?n=Jo(a):s!==0&&(n=Jo(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Fr(e),i=1<<r,n|=t[r],e&=~i;return n}function N4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E4(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Fr(s),o=1<<a,c=i[a];c===-1?(!(o&r)||o&n)&&(i[a]=N4(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}}function dg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rb(){var t=pu;return pu<<=1,!(pu&4194240)&&(pu=64),t}function Zp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function vc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fr(e),t[e]=r}function T4(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Fr(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Jm(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Fr(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Se=0;function Pb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ob,Zm,Lb,Mb,$b,hg=!1,gu=[],hi=null,pi=null,fi=null,jl=new Map,Dl=new Map,ii=[],C4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Z1(t,e){switch(t){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":jl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(e.pointerId)}}function Do(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=bc(e),e!==null&&Zm(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function j4(t,e,r,n,i){switch(e){case"focusin":return hi=Do(hi,t,e,r,n,i),!0;case"dragenter":return pi=Do(pi,t,e,r,n,i),!0;case"mouseover":return fi=Do(fi,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return jl.set(s,Do(jl.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Dl.set(s,Do(Dl.get(s)||null,t,e,r,n,i)),!0}return!1}function Fb(t){var e=os(t.target);if(e!==null){var r=Us(e);if(r!==null){if(e=r.tag,e===13){if(e=Eb(r),e!==null){t.blockedOn=e,$b(t.priority,function(){Lb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=pg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);og=n,r.target.dispatchEvent(n),og=null}else return e=bc(r),e!==null&&Zm(e),t.blockedOn=r,!1;e.shift()}return!0}function ew(t,e,r){Uu(t)&&r.delete(e)}function D4(){hg=!1,hi!==null&&Uu(hi)&&(hi=null),pi!==null&&Uu(pi)&&(pi=null),fi!==null&&Uu(fi)&&(fi=null),jl.forEach(ew),Dl.forEach(ew)}function Ao(t,e){t.blockedOn===e&&(t.blockedOn=null,hg||(hg=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,D4)))}function Al(t){function e(i){return Ao(i,t)}if(0<gu.length){Ao(gu[0],t);for(var r=1;r<gu.length;r++){var n=gu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(hi!==null&&Ao(hi,t),pi!==null&&Ao(pi,t),fi!==null&&Ao(fi,t),jl.forEach(e),Dl.forEach(e),r=0;r<ii.length;r++)n=ii[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ii.length&&(r=ii[0],r.blockedOn===null);)Fb(r),r.blockedOn===null&&ii.shift()}var ka=Un.ReactCurrentBatchConfig,gd=!0;function A4(t,e,r,n){var i=Se,s=ka.transition;ka.transition=null;try{Se=1,e0(t,e,r,n)}finally{Se=i,ka.transition=s}}function R4(t,e,r,n){var i=Se,s=ka.transition;ka.transition=null;try{Se=4,e0(t,e,r,n)}finally{Se=i,ka.transition=s}}function e0(t,e,r,n){if(gd){var i=pg(t,e,r,n);if(i===null)uf(t,e,n,md,r),Z1(t,n);else if(j4(i,t,e,r,n))n.stopPropagation();else if(Z1(t,n),e&4&&-1<C4.indexOf(t)){for(;i!==null;){var s=bc(i);if(s!==null&&Ob(s),s=pg(t,e,r,n),s===null&&uf(t,e,n,md,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else uf(t,e,n,null,r)}}var md=null;function pg(t,e,r,n){if(md=null,t=Km(n),t=os(t),t!==null)if(e=Us(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Eb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return md=t,null}function Vb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x4()){case Qm:return 1;case Db:return 4;case pd:case b4:return 16;case Ab:return 536870912;default:return 16}default:return 16}}var li=null,t0=null,Bu=null;function Ub(){if(Bu)return Bu;var t,e=t0,r=e.length,n,i="value"in li?li.value:li.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return Bu=i.slice(t,1<n?1-n:void 0)}function zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mu(){return!0}function tw(){return!1}function _r(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mu:tw,this.isPropagationStopped=tw,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=mu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=mu)},persist:function(){},isPersistent:mu}),e}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},r0=_r(so),xc=Ye({},so,{view:0,detail:0}),P4=_r(xc),ef,tf,Ro,ph=Ye({},xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ro&&(Ro&&t.type==="mousemove"?(ef=t.screenX-Ro.screenX,tf=t.screenY-Ro.screenY):tf=ef=0,Ro=t),ef)},movementY:function(t){return"movementY"in t?t.movementY:tf}}),rw=_r(ph),O4=Ye({},ph,{dataTransfer:0}),L4=_r(O4),M4=Ye({},xc,{relatedTarget:0}),rf=_r(M4),$4=Ye({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),F4=_r($4),V4=Ye({},so,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),U4=_r(V4),B4=Ye({},so,{data:0}),nw=_r(B4),z4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=X4[t])?!!e[t]:!1}function n0(){return q4}var W4=Ye({},xc,{key:function(t){if(t.key){var e=z4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n0,charCode:function(t){return t.type==="keypress"?zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H4=_r(W4),G4=Ye({},ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iw=_r(G4),K4=Ye({},xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n0}),Q4=_r(K4),J4=Ye({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z4=_r(J4),eT=Ye({},ph,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tT=_r(eT),rT=[9,13,27,32],i0=Rn&&"CompositionEvent"in window,cl=null;Rn&&"documentMode"in document&&(cl=document.documentMode);var nT=Rn&&"TextEvent"in window&&!cl,Bb=Rn&&(!i0||cl&&8<cl&&11>=cl),sw=String.fromCharCode(32),aw=!1;function zb(t,e){switch(t){case"keyup":return rT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ca=!1;function iT(t,e){switch(t){case"compositionend":return Yb(e);case"keypress":return e.which!==32?null:(aw=!0,sw);case"textInput":return t=e.data,t===sw&&aw?null:t;default:return null}}function sT(t,e){if(ca)return t==="compositionend"||!i0&&zb(t,e)?(t=Ub(),Bu=t0=li=null,ca=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bb&&e.locale!=="ko"?null:e.data;default:return null}}var aT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ow(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aT[t.type]:e==="textarea"}function Xb(t,e,r,n){_b(n),e=yd(e,"onChange"),0<e.length&&(r=new r0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ul=null,Rl=null;function oT(t){r_(t,0)}function fh(t){var e=ha(t);if(gb(e))return t}function lT(t,e){if(t==="change")return e}var qb=!1;if(Rn){var nf;if(Rn){var sf="oninput"in document;if(!sf){var lw=document.createElement("div");lw.setAttribute("oninput","return;"),sf=typeof lw.oninput=="function"}nf=sf}else nf=!1;qb=nf&&(!document.documentMode||9<document.documentMode)}function cw(){ul&&(ul.detachEvent("onpropertychange",Wb),Rl=ul=null)}function Wb(t){if(t.propertyName==="value"&&fh(Rl)){var e=[];Xb(e,Rl,t,Km(t)),Nb(oT,e)}}function cT(t,e,r){t==="focusin"?(cw(),ul=e,Rl=r,ul.attachEvent("onpropertychange",Wb)):t==="focusout"&&cw()}function uT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fh(Rl)}function dT(t,e){if(t==="click")return fh(e)}function hT(t,e){if(t==="input"||t==="change")return fh(e)}function pT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ur=typeof Object.is=="function"?Object.is:pT;function Pl(t,e){if(Ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Gf.call(e,i)||!Ur(t[i],e[i]))return!1}return!0}function uw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dw(t,e){var r=uw(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=uw(r)}}function Hb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gb(){for(var t=window,e=ud();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ud(t.document)}return e}function s0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fT(t){var e=Gb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Hb(r.ownerDocument.documentElement,r)){if(n!==null&&s0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=dw(r,s);var a=dw(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gT=Rn&&"documentMode"in document&&11>=document.documentMode,ua=null,fg=null,dl=null,gg=!1;function hw(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;gg||ua==null||ua!==ud(n)||(n=ua,"selectionStart"in n&&s0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dl&&Pl(dl,n)||(dl=n,n=yd(fg,"onSelect"),0<n.length&&(e=new r0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ua)))}function yu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var da={animationend:yu("Animation","AnimationEnd"),animationiteration:yu("Animation","AnimationIteration"),animationstart:yu("Animation","AnimationStart"),transitionend:yu("Transition","TransitionEnd")},af={},Kb={};Rn&&(Kb=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function gh(t){if(af[t])return af[t];if(!da[t])return t;var e=da[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Kb)return af[t]=e[r];return t}var Qb=gh("animationend"),Jb=gh("animationiteration"),Zb=gh("animationstart"),e_=gh("transitionend"),t_=new Map,pw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){t_.set(t,e),Vs(e,[t])}for(var of=0;of<pw.length;of++){var lf=pw[of],mT=lf.toLowerCase(),yT=lf[0].toUpperCase()+lf.slice(1);Mi(mT,"on"+yT)}Mi(Qb,"onAnimationEnd");Mi(Jb,"onAnimationIteration");Mi(Zb,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi(e_,"onTransitionEnd");La("onMouseEnter",["mouseout","mouseover"]);La("onMouseLeave",["mouseout","mouseover"]);La("onPointerEnter",["pointerout","pointerover"]);La("onPointerLeave",["pointerout","pointerover"]);Vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function fw(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,m4(n,e,void 0,t),t.currentTarget=null}function r_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;fw(i,o,u),s=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;fw(i,o,u),s=c}}}if(hd)throw t=ug,hd=!1,ug=null,t}function De(t,e){var r=e[xg];r===void 0&&(r=e[xg]=new Set);var n=t+"__bubble";r.has(n)||(n_(e,t,2,!1),r.add(n))}function cf(t,e,r){var n=0;e&&(n|=4),n_(r,t,n,e)}var wu="_reactListening"+Math.random().toString(36).slice(2);function Ol(t){if(!t[wu]){t[wu]=!0,ub.forEach(function(r){r!=="selectionchange"&&(wT.has(r)||cf(r,!1,t),cf(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wu]||(e[wu]=!0,cf("selectionchange",!1,e))}}function n_(t,e,r,n){switch(Vb(e)){case 1:var i=A4;break;case 4:i=R4;break;default:i=e0}r=i.bind(null,e,r,t),i=void 0,!cg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function uf(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=os(o),a===null)return;if(c=a.tag,c===5||c===6){n=s=a;continue e}o=o.parentNode}}n=n.return}Nb(function(){var u=s,d=Km(r),h=[];e:{var p=t_.get(t);if(p!==void 0){var g=r0,y=t;switch(t){case"keypress":if(zu(r)===0)break e;case"keydown":case"keyup":g=H4;break;case"focusin":y="focus",g=rf;break;case"focusout":y="blur",g=rf;break;case"beforeblur":case"afterblur":g=rf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=rw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=L4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Q4;break;case Qb:case Jb:case Zb:g=F4;break;case e_:g=Z4;break;case"scroll":g=P4;break;case"wheel":g=tT;break;case"copy":case"cut":case"paste":g=U4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=iw}var v=(e&4)!==0,x=!v&&t==="scroll",m=v?p!==null?p+"Capture":null:p;v=[];for(var f=u,w;f!==null;){w=f;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=Cl(f,m),b!=null&&v.push(Ll(f,b,w)))),x)break;f=f.return}0<v.length&&(p=new g(p,y,null,r,d),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==og&&(y=r.relatedTarget||r.fromElement)&&(os(y)||y[Pn]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=r.relatedTarget||r.toElement,g=u,y=y?os(y):null,y!==null&&(x=Us(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(v=rw,b="onMouseLeave",m="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(v=iw,b="onPointerLeave",m="onPointerEnter",f="pointer"),x=g==null?p:ha(g),w=y==null?p:ha(y),p=new v(b,f+"leave",g,r,d),p.target=x,p.relatedTarget=w,b=null,os(d)===u&&(v=new v(m,f+"enter",y,r,d),v.target=w,v.relatedTarget=x,b=v),x=b,g&&y)t:{for(v=g,m=y,f=0,w=v;w;w=Zs(w))f++;for(w=0,b=m;b;b=Zs(b))w++;for(;0<f-w;)v=Zs(v),f--;for(;0<w-f;)m=Zs(m),w--;for(;f--;){if(v===m||m!==null&&v===m.alternate)break t;v=Zs(v),m=Zs(m)}v=null}else v=null;g!==null&&gw(h,p,g,v,!1),y!==null&&x!==null&&gw(h,x,y,v,!0)}}e:{if(p=u?ha(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var _=lT;else if(ow(p))if(qb)_=hT;else{_=uT;var S=cT}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=dT);if(_&&(_=_(t,u))){Xb(h,_,r,d);break e}S&&S(t,p,u),t==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&rg(p,"number",p.value)}switch(S=u?ha(u):window,t){case"focusin":(ow(S)||S.contentEditable==="true")&&(ua=S,fg=u,dl=null);break;case"focusout":dl=fg=ua=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,hw(h,r,d);break;case"selectionchange":if(gT)break;case"keydown":case"keyup":hw(h,r,d)}var N;if(i0)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ca?zb(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(Bb&&r.locale!=="ko"&&(ca||T!=="onCompositionStart"?T==="onCompositionEnd"&&ca&&(N=Ub()):(li=d,t0="value"in li?li.value:li.textContent,ca=!0)),S=yd(u,T),0<S.length&&(T=new nw(T,t,null,r,d),h.push({event:T,listeners:S}),N?T.data=N:(N=Yb(r),N!==null&&(T.data=N)))),(N=nT?iT(t,r):sT(t,r))&&(u=yd(u,"onBeforeInput"),0<u.length&&(d=new nw("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=N))}r_(h,e)})}function Ll(t,e,r){return{instance:t,listener:e,currentTarget:r}}function yd(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cl(t,r),s!=null&&n.unshift(Ll(t,s,i)),s=Cl(t,e),s!=null&&n.push(Ll(t,s,i))),t=t.return}return n}function Zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gw(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=Cl(r,s),c!=null&&a.unshift(Ll(r,c,o))):i||(c=Cl(r,s),c!=null&&a.push(Ll(r,c,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var vT=/\r\n?/g,xT=/\u0000|\uFFFD/g;function mw(t){return(typeof t=="string"?t:""+t).replace(vT,`
`).replace(xT,"")}function vu(t,e,r){if(e=mw(e),mw(t)!==e&&r)throw Error(L(425))}function wd(){}var mg=null,yg=null;function wg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vg=typeof setTimeout=="function"?setTimeout:void 0,bT=typeof clearTimeout=="function"?clearTimeout:void 0,yw=typeof Promise=="function"?Promise:void 0,_T=typeof queueMicrotask=="function"?queueMicrotask:typeof yw<"u"?function(t){return yw.resolve(null).then(t).catch(ST)}:vg;function ST(t){setTimeout(function(){throw t})}function df(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Al(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Al(e)}function gi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ww(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ao=Math.random().toString(36).slice(2),Zr="__reactFiber$"+ao,Ml="__reactProps$"+ao,Pn="__reactContainer$"+ao,xg="__reactEvents$"+ao,kT="__reactListeners$"+ao,IT="__reactHandles$"+ao;function os(t){var e=t[Zr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Pn]||r[Zr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ww(t);t!==null;){if(r=t[Zr])return r;t=ww(t)}return e}t=r,r=t.parentNode}return null}function bc(t){return t=t[Zr]||t[Pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function mh(t){return t[Ml]||null}var bg=[],pa=-1;function $i(t){return{current:t}}function Pe(t){0>pa||(t.current=bg[pa],bg[pa]=null,pa--)}function Ce(t,e){pa++,bg[pa]=t.current,t.current=e}var Si={},Ut=$i(Si),or=$i(!1),_s=Si;function Ma(t,e){var r=t.type.contextTypes;if(!r)return Si;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function lr(t){return t=t.childContextTypes,t!=null}function vd(){Pe(or),Pe(Ut)}function vw(t,e,r){if(Ut.current!==Si)throw Error(L(168));Ce(Ut,e),Ce(or,r)}function i_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(L(108,c4(t)||"Unknown",i));return Ye({},r,n)}function xd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Si,_s=Ut.current,Ce(Ut,t),Ce(or,or.current),!0}function xw(t,e,r){var n=t.stateNode;if(!n)throw Error(L(169));r?(t=i_(t,e,_s),n.__reactInternalMemoizedMergedChildContext=t,Pe(or),Pe(Ut),Ce(Ut,t)):Pe(or),Ce(or,r)}var Sn=null,yh=!1,hf=!1;function s_(t){Sn===null?Sn=[t]:Sn.push(t)}function NT(t){yh=!0,s_(t)}function Fi(){if(!hf&&Sn!==null){hf=!0;var t=0,e=Se;try{var r=Sn;for(Se=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Sn=null,yh=!1}catch(i){throw Sn!==null&&(Sn=Sn.slice(t+1)),jb(Qm,Fi),i}finally{Se=e,hf=!1}}return null}var fa=[],ga=0,bd=null,_d=0,Sr=[],kr=0,Ss=null,kn=1,In="";function Ji(t,e){fa[ga++]=_d,fa[ga++]=bd,bd=t,_d=e}function a_(t,e,r){Sr[kr++]=kn,Sr[kr++]=In,Sr[kr++]=Ss,Ss=t;var n=kn;t=In;var i=32-Fr(n)-1;n&=~(1<<i),r+=1;var s=32-Fr(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,kn=1<<32-Fr(e)+i|r<<i|n,In=s+t}else kn=1<<s|r<<i|n,In=t}function a0(t){t.return!==null&&(Ji(t,1),a_(t,1,0))}function o0(t){for(;t===bd;)bd=fa[--ga],fa[ga]=null,_d=fa[--ga],fa[ga]=null;for(;t===Ss;)Ss=Sr[--kr],Sr[kr]=null,In=Sr[--kr],Sr[kr]=null,kn=Sr[--kr],Sr[kr]=null}var yr=null,gr=null,$e=!1,Mr=null;function o_(t,e){var r=Nr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function bw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yr=t,gr=gi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yr=t,gr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ss!==null?{id:kn,overflow:In}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Nr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,yr=t,gr=null,!0):!1;default:return!1}}function _g(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sg(t){if($e){var e=gr;if(e){var r=e;if(!bw(t,e)){if(_g(t))throw Error(L(418));e=gi(r.nextSibling);var n=yr;e&&bw(t,e)?o_(n,r):(t.flags=t.flags&-4097|2,$e=!1,yr=t)}}else{if(_g(t))throw Error(L(418));t.flags=t.flags&-4097|2,$e=!1,yr=t}}}function _w(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yr=t}function xu(t){if(t!==yr)return!1;if(!$e)return _w(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wg(t.type,t.memoizedProps)),e&&(e=gr)){if(_g(t))throw l_(),Error(L(418));for(;e;)o_(t,e),e=gi(e.nextSibling)}if(_w(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){gr=gi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}gr=null}}else gr=yr?gi(t.stateNode.nextSibling):null;return!0}function l_(){for(var t=gr;t;)t=gi(t.nextSibling)}function $a(){gr=yr=null,$e=!1}function l0(t){Mr===null?Mr=[t]:Mr.push(t)}var ET=Un.ReactCurrentBatchConfig;function Po(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(L(309));var n=r.stateNode}if(!n)throw Error(L(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(L(284));if(!r._owner)throw Error(L(290,t))}return t}function bu(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Sw(t){var e=t._init;return e(t._payload)}function c_(t){function e(m,f){if(t){var w=m.deletions;w===null?(m.deletions=[f],m.flags|=16):w.push(f)}}function r(m,f){if(!t)return null;for(;f!==null;)e(m,f),f=f.sibling;return null}function n(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function i(m,f){return m=vi(m,f),m.index=0,m.sibling=null,m}function s(m,f,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<f?(m.flags|=2,f):w):(m.flags|=2,f)):(m.flags|=1048576,f)}function a(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,f,w,b){return f===null||f.tag!==6?(f=vf(w,m.mode,b),f.return=m,f):(f=i(f,w),f.return=m,f)}function c(m,f,w,b){var _=w.type;return _===la?d(m,f,w.props.children,b,w.key):f!==null&&(f.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ri&&Sw(_)===f.type)?(b=i(f,w.props),b.ref=Po(m,f,w),b.return=m,b):(b=Ku(w.type,w.key,w.props,null,m.mode,b),b.ref=Po(m,f,w),b.return=m,b)}function u(m,f,w,b){return f===null||f.tag!==4||f.stateNode.containerInfo!==w.containerInfo||f.stateNode.implementation!==w.implementation?(f=xf(w,m.mode,b),f.return=m,f):(f=i(f,w.children||[]),f.return=m,f)}function d(m,f,w,b,_){return f===null||f.tag!==7?(f=ms(w,m.mode,b,_),f.return=m,f):(f=i(f,w),f.return=m,f)}function h(m,f,w){if(typeof f=="string"&&f!==""||typeof f=="number")return f=vf(""+f,m.mode,w),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case uu:return w=Ku(f.type,f.key,f.props,null,m.mode,w),w.ref=Po(m,null,f),w.return=m,w;case oa:return f=xf(f,m.mode,w),f.return=m,f;case ri:var b=f._init;return h(m,b(f._payload),w)}if(Qo(f)||Co(f))return f=ms(f,m.mode,w,null),f.return=m,f;bu(m,f)}return null}function p(m,f,w,b){var _=f!==null?f.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:o(m,f,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case uu:return w.key===_?c(m,f,w,b):null;case oa:return w.key===_?u(m,f,w,b):null;case ri:return _=w._init,p(m,f,_(w._payload),b)}if(Qo(w)||Co(w))return _!==null?null:d(m,f,w,b,null);bu(m,w)}return null}function g(m,f,w,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,o(f,m,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case uu:return m=m.get(b.key===null?w:b.key)||null,c(f,m,b,_);case oa:return m=m.get(b.key===null?w:b.key)||null,u(f,m,b,_);case ri:var S=b._init;return g(m,f,w,S(b._payload),_)}if(Qo(b)||Co(b))return m=m.get(w)||null,d(f,m,b,_,null);bu(f,b)}return null}function y(m,f,w,b){for(var _=null,S=null,N=f,T=f=0,F=null;N!==null&&T<w.length;T++){N.index>T?(F=N,N=null):F=N.sibling;var O=p(m,N,w[T],b);if(O===null){N===null&&(N=F);break}t&&N&&O.alternate===null&&e(m,N),f=s(O,f,T),S===null?_=O:S.sibling=O,S=O,N=F}if(T===w.length)return r(m,N),$e&&Ji(m,T),_;if(N===null){for(;T<w.length;T++)N=h(m,w[T],b),N!==null&&(f=s(N,f,T),S===null?_=N:S.sibling=N,S=N);return $e&&Ji(m,T),_}for(N=n(m,N);T<w.length;T++)F=g(N,m,T,w[T],b),F!==null&&(t&&F.alternate!==null&&N.delete(F.key===null?T:F.key),f=s(F,f,T),S===null?_=F:S.sibling=F,S=F);return t&&N.forEach(function(G){return e(m,G)}),$e&&Ji(m,T),_}function v(m,f,w,b){var _=Co(w);if(typeof _!="function")throw Error(L(150));if(w=_.call(w),w==null)throw Error(L(151));for(var S=_=null,N=f,T=f=0,F=null,O=w.next();N!==null&&!O.done;T++,O=w.next()){N.index>T?(F=N,N=null):F=N.sibling;var G=p(m,N,O.value,b);if(G===null){N===null&&(N=F);break}t&&N&&G.alternate===null&&e(m,N),f=s(G,f,T),S===null?_=G:S.sibling=G,S=G,N=F}if(O.done)return r(m,N),$e&&Ji(m,T),_;if(N===null){for(;!O.done;T++,O=w.next())O=h(m,O.value,b),O!==null&&(f=s(O,f,T),S===null?_=O:S.sibling=O,S=O);return $e&&Ji(m,T),_}for(N=n(m,N);!O.done;T++,O=w.next())O=g(N,m,T,O.value,b),O!==null&&(t&&O.alternate!==null&&N.delete(O.key===null?T:O.key),f=s(O,f,T),S===null?_=O:S.sibling=O,S=O);return t&&N.forEach(function(K){return e(m,K)}),$e&&Ji(m,T),_}function x(m,f,w,b){if(typeof w=="object"&&w!==null&&w.type===la&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case uu:e:{for(var _=w.key,S=f;S!==null;){if(S.key===_){if(_=w.type,_===la){if(S.tag===7){r(m,S.sibling),f=i(S,w.props.children),f.return=m,m=f;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ri&&Sw(_)===S.type){r(m,S.sibling),f=i(S,w.props),f.ref=Po(m,S,w),f.return=m,m=f;break e}r(m,S);break}else e(m,S);S=S.sibling}w.type===la?(f=ms(w.props.children,m.mode,b,w.key),f.return=m,m=f):(b=Ku(w.type,w.key,w.props,null,m.mode,b),b.ref=Po(m,f,w),b.return=m,m=b)}return a(m);case oa:e:{for(S=w.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===w.containerInfo&&f.stateNode.implementation===w.implementation){r(m,f.sibling),f=i(f,w.children||[]),f.return=m,m=f;break e}else{r(m,f);break}else e(m,f);f=f.sibling}f=xf(w,m.mode,b),f.return=m,m=f}return a(m);case ri:return S=w._init,x(m,f,S(w._payload),b)}if(Qo(w))return y(m,f,w,b);if(Co(w))return v(m,f,w,b);bu(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,f!==null&&f.tag===6?(r(m,f.sibling),f=i(f,w),f.return=m,m=f):(r(m,f),f=vf(w,m.mode,b),f.return=m,m=f),a(m)):r(m,f)}return x}var Fa=c_(!0),u_=c_(!1),Sd=$i(null),kd=null,ma=null,c0=null;function u0(){c0=ma=kd=null}function d0(t){var e=Sd.current;Pe(Sd),t._currentValue=e}function kg(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ia(t,e){kd=t,c0=ma=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nr=!0),t.firstContext=null)}function Cr(t){var e=t._currentValue;if(c0!==t)if(t={context:t,memoizedValue:e,next:null},ma===null){if(kd===null)throw Error(L(308));ma=t,kd.dependencies={lanes:0,firstContext:t}}else ma=ma.next=t;return e}var ls=null;function h0(t){ls===null?ls=[t]:ls.push(t)}function d_(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,h0(e)):(r.next=i.next,i.next=r),e.interleaved=r,On(t,n)}function On(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ni=!1;function p0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mi(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,we&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,On(t,r)}return i=n.interleaved,i===null?(e.next=e,h0(n)):(e.next=i.next,i.next=e),n.interleaved=e,On(t,r)}function Yu(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Jm(t,r)}}function kw(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Id(t,e,r,n){var i=t.updateQueue;ni=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(s!==null){var h=i.baseState;a=0,d=u=c=null,o=s;do{var p=o.lane,g=o.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,v=o;switch(p=e,g=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(g,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(g,h,p):y,p==null)break e;h=Ye({},h,p);break e;case 2:ni=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else g={eventTime:g,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,a|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Is|=a,t.lanes=a,t.memoizedState=h}}function Iw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(L(191,i));i.call(n)}}}var _c={},hn=$i(_c),$l=$i(_c),Fl=$i(_c);function cs(t){if(t===_c)throw Error(L(174));return t}function f0(t,e){switch(Ce(Fl,e),Ce($l,t),Ce(hn,_c),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ig(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ig(e,t)}Pe(hn),Ce(hn,e)}function Va(){Pe(hn),Pe($l),Pe(Fl)}function p_(t){cs(Fl.current);var e=cs(hn.current),r=ig(e,t.type);e!==r&&(Ce($l,t),Ce(hn,r))}function g0(t){$l.current===t&&(Pe(hn),Pe($l))}var Be=$i(0);function Nd(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pf=[];function m0(){for(var t=0;t<pf.length;t++)pf[t]._workInProgressVersionPrimary=null;pf.length=0}var Xu=Un.ReactCurrentDispatcher,ff=Un.ReactCurrentBatchConfig,ks=0,ze=null,ut=null,gt=null,Ed=!1,hl=!1,Vl=0,TT=0;function Ot(){throw Error(L(321))}function y0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ur(t[r],e[r]))return!1;return!0}function w0(t,e,r,n,i,s){if(ks=s,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xu.current=t===null||t.memoizedState===null?AT:RT,t=r(n,i),hl){s=0;do{if(hl=!1,Vl=0,25<=s)throw Error(L(301));s+=1,gt=ut=null,e.updateQueue=null,Xu.current=PT,t=r(n,i)}while(hl)}if(Xu.current=Td,e=ut!==null&&ut.next!==null,ks=0,gt=ut=ze=null,Ed=!1,e)throw Error(L(300));return t}function v0(){var t=Vl!==0;return Vl=0,t}function Jr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?ze.memoizedState=gt=t:gt=gt.next=t,gt}function jr(){if(ut===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var e=gt===null?ze.memoizedState:gt.next;if(e!==null)gt=e,ut=t;else{if(t===null)throw Error(L(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},gt===null?ze.memoizedState=gt=t:gt=gt.next=t}return gt}function Ul(t,e){return typeof e=="function"?e(t):e}function gf(t){var e=jr(),r=e.queue;if(r===null)throw Error(L(311));r.lastRenderedReducer=t;var n=ut,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,c=null,u=s;do{var d=u.lane;if((ks&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,a=n):c=c.next=h,ze.lanes|=d,Is|=d}u=u.next}while(u!==null&&u!==s);c===null?a=n:c.next=o,Ur(n,e.memoizedState)||(nr=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,ze.lanes|=s,Is|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function mf(t){var e=jr(),r=e.queue;if(r===null)throw Error(L(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Ur(s,e.memoizedState)||(nr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function f_(){}function g_(t,e){var r=ze,n=jr(),i=e(),s=!Ur(n.memoizedState,i);if(s&&(n.memoizedState=i,nr=!0),n=n.queue,x0(w_.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,Bl(9,y_.bind(null,r,n,i,e),void 0,null),yt===null)throw Error(L(349));ks&30||m_(r,e,i)}return i}function m_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function y_(t,e,r,n){e.value=r,e.getSnapshot=n,v_(e)&&x_(t)}function w_(t,e,r){return r(function(){v_(e)&&x_(t)})}function v_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ur(t,r)}catch{return!0}}function x_(t){var e=On(t,1);e!==null&&Vr(e,t,1,-1)}function Nw(t){var e=Jr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:t},e.queue=t,t=t.dispatch=DT.bind(null,ze,t),[e.memoizedState,t]}function Bl(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function b_(){return jr().memoizedState}function qu(t,e,r,n){var i=Jr();ze.flags|=t,i.memoizedState=Bl(1|e,r,void 0,n===void 0?null:n)}function wh(t,e,r,n){var i=jr();n=n===void 0?null:n;var s=void 0;if(ut!==null){var a=ut.memoizedState;if(s=a.destroy,n!==null&&y0(n,a.deps)){i.memoizedState=Bl(e,r,s,n);return}}ze.flags|=t,i.memoizedState=Bl(1|e,r,s,n)}function Ew(t,e){return qu(8390656,8,t,e)}function x0(t,e){return wh(2048,8,t,e)}function __(t,e){return wh(4,2,t,e)}function S_(t,e){return wh(4,4,t,e)}function k_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function I_(t,e,r){return r=r!=null?r.concat([t]):null,wh(4,4,k_.bind(null,e,t),r)}function b0(){}function N_(t,e){var r=jr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&y0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function E_(t,e){var r=jr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&y0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function T_(t,e,r){return ks&21?(Ur(r,e)||(r=Rb(),ze.lanes|=r,Is|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nr=!0),t.memoizedState=r)}function CT(t,e){var r=Se;Se=r!==0&&4>r?r:4,t(!0);var n=ff.transition;ff.transition={};try{t(!1),e()}finally{Se=r,ff.transition=n}}function C_(){return jr().memoizedState}function jT(t,e,r){var n=wi(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},j_(t))D_(e,r);else if(r=d_(t,e,r,n),r!==null){var i=qt();Vr(r,t,n,i),A_(r,e,n)}}function DT(t,e,r){var n=wi(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(j_(t))D_(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,Ur(o,a)){var c=e.interleaved;c===null?(i.next=i,h0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=d_(t,e,i,n),r!==null&&(i=qt(),Vr(r,t,n,i),A_(r,e,n))}}function j_(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function D_(t,e){hl=Ed=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function A_(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Jm(t,r)}}var Td={readContext:Cr,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},AT={readContext:Cr,useCallback:function(t,e){return Jr().memoizedState=[t,e===void 0?null:e],t},useContext:Cr,useEffect:Ew,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,qu(4194308,4,k_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return qu(4194308,4,t,e)},useInsertionEffect:function(t,e){return qu(4,2,t,e)},useMemo:function(t,e){var r=Jr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Jr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=jT.bind(null,ze,t),[n.memoizedState,t]},useRef:function(t){var e=Jr();return t={current:t},e.memoizedState=t},useState:Nw,useDebugValue:b0,useDeferredValue:function(t){return Jr().memoizedState=t},useTransition:function(){var t=Nw(!1),e=t[0];return t=CT.bind(null,t[1]),Jr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ze,i=Jr();if($e){if(r===void 0)throw Error(L(407));r=r()}else{if(r=e(),yt===null)throw Error(L(349));ks&30||m_(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,Ew(w_.bind(null,n,s,t),[t]),n.flags|=2048,Bl(9,y_.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Jr(),e=yt.identifierPrefix;if($e){var r=In,n=kn;r=(n&~(1<<32-Fr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Vl++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=TT++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RT={readContext:Cr,useCallback:N_,useContext:Cr,useEffect:x0,useImperativeHandle:I_,useInsertionEffect:__,useLayoutEffect:S_,useMemo:E_,useReducer:gf,useRef:b_,useState:function(){return gf(Ul)},useDebugValue:b0,useDeferredValue:function(t){var e=jr();return T_(e,ut.memoizedState,t)},useTransition:function(){var t=gf(Ul)[0],e=jr().memoizedState;return[t,e]},useMutableSource:f_,useSyncExternalStore:g_,useId:C_,unstable_isNewReconciler:!1},PT={readContext:Cr,useCallback:N_,useContext:Cr,useEffect:x0,useImperativeHandle:I_,useInsertionEffect:__,useLayoutEffect:S_,useMemo:E_,useReducer:mf,useRef:b_,useState:function(){return mf(Ul)},useDebugValue:b0,useDeferredValue:function(t){var e=jr();return ut===null?e.memoizedState=t:T_(e,ut.memoizedState,t)},useTransition:function(){var t=mf(Ul)[0],e=jr().memoizedState;return[t,e]},useMutableSource:f_,useSyncExternalStore:g_,useId:C_,unstable_isNewReconciler:!1};function Or(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Ig(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ye({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var vh={isMounted:function(t){return(t=t._reactInternals)?Us(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=qt(),i=wi(t),s=jn(n,i);s.payload=e,r!=null&&(s.callback=r),e=mi(t,s,i),e!==null&&(Vr(e,t,i,n),Yu(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=qt(),i=wi(t),s=jn(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=mi(t,s,i),e!==null&&(Vr(e,t,i,n),Yu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=qt(),n=wi(t),i=jn(r,n);i.tag=2,e!=null&&(i.callback=e),e=mi(t,i,n),e!==null&&(Vr(e,t,n,r),Yu(e,t,n))}};function Tw(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Pl(r,n)||!Pl(i,s):!0}function R_(t,e,r){var n=!1,i=Si,s=e.contextType;return typeof s=="object"&&s!==null?s=Cr(s):(i=lr(e)?_s:Ut.current,n=e.contextTypes,s=(n=n!=null)?Ma(t,i):Si),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Cw(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&vh.enqueueReplaceState(e,e.state,null)}function Ng(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},p0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Cr(s):(s=lr(e)?_s:Ut.current,i.context=Ma(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ig(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&vh.enqueueReplaceState(i,i.state,null),Id(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ua(t,e){try{var r="",n=e;do r+=l4(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function yf(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Eg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var OT=typeof WeakMap=="function"?WeakMap:Map;function P_(t,e,r){r=jn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){jd||(jd=!0,Mg=n),Eg(t,e)},r}function O_(t,e,r){r=jn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Eg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Eg(t,e),typeof n!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function jw(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new OT;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=GT.bind(null,t,e,r),e.then(t,t))}function Dw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Aw(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=jn(-1,1),e.tag=2,mi(r,e,1))),r.lanes|=1),t)}var LT=Un.ReactCurrentOwner,nr=!1;function Bt(t,e,r,n){e.child=t===null?u_(e,null,r,n):Fa(e,t.child,r,n)}function Rw(t,e,r,n,i){r=r.render;var s=e.ref;return Ia(e,i),n=w0(t,e,r,n,s,i),r=v0(),t!==null&&!nr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):($e&&r&&a0(e),e.flags|=1,Bt(t,e,n,i),e.child)}function Pw(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!C0(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,L_(t,e,s,n,i)):(t=Ku(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Pl,r(a,n)&&t.ref===e.ref)return Ln(t,e,i)}return e.flags|=1,t=vi(s,n),t.ref=e.ref,t.return=e,e.child=t}function L_(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Pl(s,n)&&t.ref===e.ref)if(nr=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(nr=!0);else return e.lanes=t.lanes,Ln(t,e,i)}return Tg(t,e,r,n,i)}function M_(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(wa,pr),pr|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(wa,pr),pr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ce(wa,pr),pr|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ce(wa,pr),pr|=n;return Bt(t,e,i,r),e.child}function $_(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Tg(t,e,r,n,i){var s=lr(r)?_s:Ut.current;return s=Ma(e,s),Ia(e,i),r=w0(t,e,r,n,s,i),n=v0(),t!==null&&!nr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):($e&&n&&a0(e),e.flags|=1,Bt(t,e,r,i),e.child)}function Ow(t,e,r,n,i){if(lr(r)){var s=!0;xd(e)}else s=!1;if(Ia(e,i),e.stateNode===null)Wu(t,e),R_(e,r,n),Ng(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Cr(u):(u=lr(r)?_s:Ut.current,u=Ma(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Cw(e,a,n,u),ni=!1;var p=e.memoizedState;a.state=p,Id(e,n,a,i),c=e.memoizedState,o!==n||p!==c||or.current||ni?(typeof d=="function"&&(Ig(e,r,d,n),c=e.memoizedState),(o=ni||Tw(e,r,o,n,p,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,h_(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Or(e.type,o),a.props=u,h=e.pendingProps,p=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Cr(c):(c=lr(r)?_s:Ut.current,c=Ma(e,c));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||p!==c)&&Cw(e,a,n,c),ni=!1,p=e.memoizedState,a.state=p,Id(e,n,a,i);var y=e.memoizedState;o!==h||p!==y||or.current||ni?(typeof g=="function"&&(Ig(e,r,g,n),y=e.memoizedState),(u=ni||Tw(e,r,u,n,p,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return Cg(t,e,r,n,s,i)}function Cg(t,e,r,n,i,s){$_(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&xw(e,r,!1),Ln(t,e,s);n=e.stateNode,LT.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Fa(e,t.child,null,s),e.child=Fa(e,null,o,s)):Bt(t,e,o,s),e.memoizedState=n.state,i&&xw(e,r,!0),e.child}function F_(t){var e=t.stateNode;e.pendingContext?vw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vw(t,e.context,!1),f0(t,e.containerInfo)}function Lw(t,e,r,n,i){return $a(),l0(i),e.flags|=256,Bt(t,e,r,n),e.child}var jg={dehydrated:null,treeContext:null,retryLane:0};function Dg(t){return{baseLanes:t,cachePool:null,transitions:null}}function V_(t,e,r){var n=e.pendingProps,i=Be.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(Be,i&1),t===null)return Sg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=_h(a,n,0,null),t=ms(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Dg(r),e.memoizedState=jg,t):_0(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return MT(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=vi(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=vi(o,s):(s=ms(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?Dg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=jg,n}return s=t.child,t=s.sibling,n=vi(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function _0(t,e){return e=_h({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _u(t,e,r,n){return n!==null&&l0(n),Fa(e,t.child,null,r),t=_0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MT(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=yf(Error(L(422))),_u(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=_h({mode:"visible",children:n.children},i,0,null),s=ms(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Fa(e,t.child,null,a),e.child.memoizedState=Dg(a),e.memoizedState=jg,s);if(!(e.mode&1))return _u(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(L(419)),n=yf(s,n,void 0),_u(t,e,a,n)}if(o=(a&t.childLanes)!==0,nr||o){if(n=yt,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,On(t,i),Vr(n,t,i,-1))}return T0(),n=yf(Error(L(421))),_u(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=KT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,gr=gi(i.nextSibling),yr=e,$e=!0,Mr=null,t!==null&&(Sr[kr++]=kn,Sr[kr++]=In,Sr[kr++]=Ss,kn=t.id,In=t.overflow,Ss=e),e=_0(e,n.children),e.flags|=4096,e)}function Mw(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),kg(t.return,e,r)}function wf(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function U_(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Bt(t,e,n.children,r),n=Be.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mw(t,r,e);else if(t.tag===19)Mw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ce(Be,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Nd(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),wf(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Nd(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}wf(e,!0,r,null,s);break;case"together":wf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Is|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,r=vi(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=vi(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function $T(t,e,r){switch(e.tag){case 3:F_(e),$a();break;case 5:p_(e);break;case 1:lr(e.type)&&xd(e);break;case 4:f0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ce(Sd,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ce(Be,Be.current&1),e.flags|=128,null):r&e.child.childLanes?V_(t,e,r):(Ce(Be,Be.current&1),t=Ln(t,e,r),t!==null?t.sibling:null);Ce(Be,Be.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return U_(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Be,Be.current),n)break;return null;case 22:case 23:return e.lanes=0,M_(t,e,r)}return Ln(t,e,r)}var B_,Ag,z_,Y_;B_=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ag=function(){};z_=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,cs(hn.current);var s=null;switch(r){case"input":i=eg(t,i),n=eg(t,n),s=[];break;case"select":i=Ye({},i,{value:void 0}),n=Ye({},n,{value:void 0}),s=[];break;case"textarea":i=ng(t,i),n=ng(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=wd)}sg(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(El.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(El.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&De("scroll",t),s||o===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Y_=function(t,e,r,n){r!==n&&(e.flags|=4)};function Oo(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function FT(t,e,r){var n=e.pendingProps;switch(o0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return lr(e.type)&&vd(),Lt(e),null;case 3:return n=e.stateNode,Va(),Pe(or),Pe(Ut),m0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(xu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mr!==null&&(Vg(Mr),Mr=null))),Ag(t,e),Lt(e),null;case 5:g0(e);var i=cs(Fl.current);if(r=e.type,t!==null&&e.stateNode!=null)z_(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(L(166));return Lt(e),null}if(t=cs(hn.current),xu(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Zr]=e,n[Ml]=s,t=(e.mode&1)!==0,r){case"dialog":De("cancel",n),De("close",n);break;case"iframe":case"object":case"embed":De("load",n);break;case"video":case"audio":for(i=0;i<Zo.length;i++)De(Zo[i],n);break;case"source":De("error",n);break;case"img":case"image":case"link":De("error",n),De("load",n);break;case"details":De("toggle",n);break;case"input":q1(n,s),De("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},De("invalid",n);break;case"textarea":H1(n,s),De("invalid",n)}sg(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&vu(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&vu(n.textContent,o,t),i=["children",""+o]):El.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&De("scroll",n)}switch(r){case"input":du(n),W1(n,s,!0);break;case"textarea":du(n),G1(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=wd)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wb(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Zr]=e,t[Ml]=n,B_(t,e,!1,!1),e.stateNode=t;e:{switch(a=ag(r,n),r){case"dialog":De("cancel",t),De("close",t),i=n;break;case"iframe":case"object":case"embed":De("load",t),i=n;break;case"video":case"audio":for(i=0;i<Zo.length;i++)De(Zo[i],t);i=n;break;case"source":De("error",t),i=n;break;case"img":case"image":case"link":De("error",t),De("load",t),i=n;break;case"details":De("toggle",t),i=n;break;case"input":q1(t,n),i=eg(t,n),De("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Ye({},n,{value:void 0}),De("invalid",t);break;case"textarea":H1(t,n),i=ng(t,n),De("invalid",t);break;default:i=n}sg(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?bb(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vb(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Tl(t,c):typeof c=="number"&&Tl(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(El.hasOwnProperty(s)?c!=null&&s==="onScroll"&&De("scroll",t):c!=null&&qm(t,s,c,a))}switch(r){case"input":du(t),W1(t,n,!1);break;case"textarea":du(t),G1(t);break;case"option":n.value!=null&&t.setAttribute("value",""+_i(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?ba(t,!!n.multiple,s,!1):n.defaultValue!=null&&ba(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)Y_(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(L(166));if(r=cs(Fl.current),cs(hn.current),xu(e)){if(n=e.stateNode,r=e.memoizedProps,n[Zr]=e,(s=n.nodeValue!==r)&&(t=yr,t!==null))switch(t.tag){case 3:vu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vu(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Zr]=e,e.stateNode=n}return Lt(e),null;case 13:if(Pe(Be),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&gr!==null&&e.mode&1&&!(e.flags&128))l_(),$a(),e.flags|=98560,s=!1;else if(s=xu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(L(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[Zr]=e}else $a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),s=!1}else Mr!==null&&(Vg(Mr),Mr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?dt===0&&(dt=3):T0())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Va(),Ag(t,e),t===null&&Ol(e.stateNode.containerInfo),Lt(e),null;case 10:return d0(e.type._context),Lt(e),null;case 17:return lr(e.type)&&vd(),Lt(e),null;case 19:if(Pe(Be),s=e.memoizedState,s===null)return Lt(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Oo(s,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Nd(t),a!==null){for(e.flags|=128,Oo(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ce(Be,Be.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>Ba&&(e.flags|=128,n=!0,Oo(s,!1),e.lanes=4194304)}else{if(!n)if(t=Nd(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Oo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!$e)return Lt(e),null}else 2*Je()-s.renderingStartTime>Ba&&r!==1073741824&&(e.flags|=128,n=!0,Oo(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,r=Be.current,Ce(Be,n?r&1|2:r&1),e):(Lt(e),null);case 22:case 23:return E0(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?pr&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function VT(t,e){switch(o0(e),e.tag){case 1:return lr(e.type)&&vd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Va(),Pe(or),Pe(Ut),m0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return g0(e),null;case 13:if(Pe(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));$a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Be),null;case 4:return Va(),null;case 10:return d0(e.type._context),null;case 22:case 23:return E0(),null;case 24:return null;default:return null}}var Su=!1,$t=!1,UT=typeof WeakSet=="function"?WeakSet:Set,X=null;function ya(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){He(t,e,n)}else r.current=null}function Rg(t,e,r){try{r()}catch(n){He(t,e,n)}}var $w=!1;function BT(t,e){if(mg=gd,t=Gb(),s0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,c=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var g;h!==r||i!==0&&h.nodeType!==3||(o=a+i),h!==s||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===r&&++u===i&&(o=a),p===s&&++d===n&&(c=a),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(yg={focusedElem:t,selectionRange:r},gd=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,x=y.memoizedState,m=e.stateNode,f=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:Or(e.type,v),x);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(b){He(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return y=$w,$w=!1,y}function pl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Rg(e,r,s)}i=i.next}while(i!==n)}}function xh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Pg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function X_(t){var e=t.alternate;e!==null&&(t.alternate=null,X_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zr],delete e[Ml],delete e[xg],delete e[kT],delete e[IT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function q_(t){return t.tag===5||t.tag===3||t.tag===4}function Fw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Og(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=wd));else if(n!==4&&(t=t.child,t!==null))for(Og(t,e,r),t=t.sibling;t!==null;)Og(t,e,r),t=t.sibling}function Lg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Lg(t,e,r),t=t.sibling;t!==null;)Lg(t,e,r),t=t.sibling}var It=null,Lr=!1;function Kn(t,e,r){for(r=r.child;r!==null;)W_(t,e,r),r=r.sibling}function W_(t,e,r){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(hh,r)}catch{}switch(r.tag){case 5:$t||ya(r,e);case 6:var n=It,i=Lr;It=null,Kn(t,e,r),It=n,Lr=i,It!==null&&(Lr?(t=It,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):It.removeChild(r.stateNode));break;case 18:It!==null&&(Lr?(t=It,r=r.stateNode,t.nodeType===8?df(t.parentNode,r):t.nodeType===1&&df(t,r),Al(t)):df(It,r.stateNode));break;case 4:n=It,i=Lr,It=r.stateNode.containerInfo,Lr=!0,Kn(t,e,r),It=n,Lr=i;break;case 0:case 11:case 14:case 15:if(!$t&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Rg(r,e,a),i=i.next}while(i!==n)}Kn(t,e,r);break;case 1:if(!$t&&(ya(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){He(r,e,o)}Kn(t,e,r);break;case 21:Kn(t,e,r);break;case 22:r.mode&1?($t=(n=$t)||r.memoizedState!==null,Kn(t,e,r),$t=n):Kn(t,e,r);break;default:Kn(t,e,r)}}function Vw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new UT),e.forEach(function(n){var i=QT.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Pr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:It=o.stateNode,Lr=!1;break e;case 3:It=o.stateNode.containerInfo,Lr=!0;break e;case 4:It=o.stateNode.containerInfo,Lr=!0;break e}o=o.return}if(It===null)throw Error(L(160));W_(s,a,i),It=null,Lr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){He(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)H_(e,t),e=e.sibling}function H_(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pr(e,t),Kr(t),n&4){try{pl(3,t,t.return),xh(3,t)}catch(v){He(t,t.return,v)}try{pl(5,t,t.return)}catch(v){He(t,t.return,v)}}break;case 1:Pr(e,t),Kr(t),n&512&&r!==null&&ya(r,r.return);break;case 5:if(Pr(e,t),Kr(t),n&512&&r!==null&&ya(r,r.return),t.flags&32){var i=t.stateNode;try{Tl(i,"")}catch(v){He(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&mb(i,s),ag(o,a);var u=ag(o,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?bb(i,h):d==="dangerouslySetInnerHTML"?vb(i,h):d==="children"?Tl(i,h):qm(i,d,h,u)}switch(o){case"input":tg(i,s);break;case"textarea":yb(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ba(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?ba(i,!!s.multiple,s.defaultValue,!0):ba(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ml]=s}catch(v){He(t,t.return,v)}}break;case 6:if(Pr(e,t),Kr(t),n&4){if(t.stateNode===null)throw Error(L(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){He(t,t.return,v)}}break;case 3:if(Pr(e,t),Kr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Al(e.containerInfo)}catch(v){He(t,t.return,v)}break;case 4:Pr(e,t),Kr(t);break;case 13:Pr(e,t),Kr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(I0=Je())),n&4&&Vw(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?($t=(u=$t)||d,Pr(e,t),$t=u):Pr(e,t),Kr(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(h=X=d;X!==null;){switch(p=X,g=p.child,p.tag){case 0:case 11:case 14:case 15:pl(4,p,p.return);break;case 1:ya(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){He(n,r,v)}}break;case 5:ya(p,p.return);break;case 22:if(p.memoizedState!==null){Bw(h);continue}}g!==null?(g.return=p,X=g):Bw(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=xb("display",a))}catch(v){He(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){He(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pr(e,t),Kr(t),n&4&&Vw(t);break;case 21:break;default:Pr(e,t),Kr(t)}}function Kr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(q_(r)){var n=r;break e}r=r.return}throw Error(L(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Tl(i,""),n.flags&=-33);var s=Fw(t);Lg(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Fw(t);Og(t,o,a);break;default:throw Error(L(161))}}catch(c){He(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zT(t,e,r){X=t,G_(t)}function G_(t,e,r){for(var n=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Su;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||$t;o=Su;var u=$t;if(Su=a,($t=c)&&!u)for(X=i;X!==null;)a=X,c=a.child,a.tag===22&&a.memoizedState!==null?zw(i):c!==null?(c.return=a,X=c):zw(i);for(;s!==null;)X=s,G_(s),s=s.sibling;X=i,Su=o,$t=u}Uw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):Uw(t)}}function Uw(t){for(;X!==null;){var e=X;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||xh(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!$t)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Or(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Iw(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Iw(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Al(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}$t||e.flags&512&&Pg(e)}catch(p){He(e,e.return,p)}}if(e===t){X=null;break}if(r=e.sibling,r!==null){r.return=e.return,X=r;break}X=e.return}}function Bw(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var r=e.sibling;if(r!==null){r.return=e.return,X=r;break}X=e.return}}function zw(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{xh(4,e)}catch(c){He(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){He(e,i,c)}}var s=e.return;try{Pg(e)}catch(c){He(e,s,c)}break;case 5:var a=e.return;try{Pg(e)}catch(c){He(e,a,c)}}}catch(c){He(e,e.return,c)}if(e===t){X=null;break}var o=e.sibling;if(o!==null){o.return=e.return,X=o;break}X=e.return}}var YT=Math.ceil,Cd=Un.ReactCurrentDispatcher,S0=Un.ReactCurrentOwner,Tr=Un.ReactCurrentBatchConfig,we=0,yt=null,at=null,Ct=0,pr=0,wa=$i(0),dt=0,zl=null,Is=0,bh=0,k0=0,fl=null,rr=null,I0=0,Ba=1/0,_n=null,jd=!1,Mg=null,yi=null,ku=!1,ci=null,Dd=0,gl=0,$g=null,Hu=-1,Gu=0;function qt(){return we&6?Je():Hu!==-1?Hu:Hu=Je()}function wi(t){return t.mode&1?we&2&&Ct!==0?Ct&-Ct:ET.transition!==null?(Gu===0&&(Gu=Rb()),Gu):(t=Se,t!==0||(t=window.event,t=t===void 0?16:Vb(t.type)),t):1}function Vr(t,e,r,n){if(50<gl)throw gl=0,$g=null,Error(L(185));vc(t,r,n),(!(we&2)||t!==yt)&&(t===yt&&(!(we&2)&&(bh|=r),dt===4&&si(t,Ct)),cr(t,n),r===1&&we===0&&!(e.mode&1)&&(Ba=Je()+500,yh&&Fi()))}function cr(t,e){var r=t.callbackNode;E4(t,e);var n=fd(t,t===yt?Ct:0);if(n===0)r!==null&&J1(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&J1(r),e===1)t.tag===0?NT(Yw.bind(null,t)):s_(Yw.bind(null,t)),_T(function(){!(we&6)&&Fi()}),r=null;else{switch(Pb(n)){case 1:r=Qm;break;case 4:r=Db;break;case 16:r=pd;break;case 536870912:r=Ab;break;default:r=pd}r=n2(r,K_.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function K_(t,e){if(Hu=-1,Gu=0,we&6)throw Error(L(327));var r=t.callbackNode;if(Na()&&t.callbackNode!==r)return null;var n=fd(t,t===yt?Ct:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ad(t,n);else{e=n;var i=we;we|=2;var s=J_();(yt!==t||Ct!==e)&&(_n=null,Ba=Je()+500,gs(t,e));do try{WT();break}catch(o){Q_(t,o)}while(1);u0(),Cd.current=s,we=i,at!==null?e=0:(yt=null,Ct=0,e=dt)}if(e!==0){if(e===2&&(i=dg(t),i!==0&&(n=i,e=Fg(t,i))),e===1)throw r=zl,gs(t,0),si(t,n),cr(t,Je()),r;if(e===6)si(t,n);else{if(i=t.current.alternate,!(n&30)&&!XT(i)&&(e=Ad(t,n),e===2&&(s=dg(t),s!==0&&(n=s,e=Fg(t,s))),e===1))throw r=zl,gs(t,0),si(t,n),cr(t,Je()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(L(345));case 2:Zi(t,rr,_n);break;case 3:if(si(t,n),(n&130023424)===n&&(e=I0+500-Je(),10<e)){if(fd(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){qt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vg(Zi.bind(null,t,rr,_n),e);break}Zi(t,rr,_n);break;case 4:if(si(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-Fr(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=Je()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*YT(n/1960))-n,10<n){t.timeoutHandle=vg(Zi.bind(null,t,rr,_n),n);break}Zi(t,rr,_n);break;case 5:Zi(t,rr,_n);break;default:throw Error(L(329))}}}return cr(t,Je()),t.callbackNode===r?K_.bind(null,t):null}function Fg(t,e){var r=fl;return t.current.memoizedState.isDehydrated&&(gs(t,e).flags|=256),t=Ad(t,e),t!==2&&(e=rr,rr=r,e!==null&&Vg(e)),t}function Vg(t){rr===null?rr=t:rr.push.apply(rr,t)}function XT(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Ur(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function si(t,e){for(e&=~k0,e&=~bh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Fr(e),n=1<<r;t[r]=-1,e&=~n}}function Yw(t){if(we&6)throw Error(L(327));Na();var e=fd(t,0);if(!(e&1))return cr(t,Je()),null;var r=Ad(t,e);if(t.tag!==0&&r===2){var n=dg(t);n!==0&&(e=n,r=Fg(t,n))}if(r===1)throw r=zl,gs(t,0),si(t,e),cr(t,Je()),r;if(r===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zi(t,rr,_n),cr(t,Je()),null}function N0(t,e){var r=we;we|=1;try{return t(e)}finally{we=r,we===0&&(Ba=Je()+500,yh&&Fi())}}function Ns(t){ci!==null&&ci.tag===0&&!(we&6)&&Na();var e=we;we|=1;var r=Tr.transition,n=Se;try{if(Tr.transition=null,Se=1,t)return t()}finally{Se=n,Tr.transition=r,we=e,!(we&6)&&Fi()}}function E0(){pr=wa.current,Pe(wa)}function gs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,bT(r)),at!==null)for(r=at.return;r!==null;){var n=r;switch(o0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&vd();break;case 3:Va(),Pe(or),Pe(Ut),m0();break;case 5:g0(n);break;case 4:Va();break;case 13:Pe(Be);break;case 19:Pe(Be);break;case 10:d0(n.type._context);break;case 22:case 23:E0()}r=r.return}if(yt=t,at=t=vi(t.current,null),Ct=pr=e,dt=0,zl=null,k0=bh=Is=0,rr=fl=null,ls!==null){for(e=0;e<ls.length;e++)if(r=ls[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}ls=null}return t}function Q_(t,e){do{var r=at;try{if(u0(),Xu.current=Td,Ed){for(var n=ze.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ed=!1}if(ks=0,gt=ut=ze=null,hl=!1,Vl=0,S0.current=null,r===null||r.return===null){dt=1,zl=e,at=null;break}e:{var s=t,a=r.return,o=r,c=e;if(e=Ct,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Dw(a);if(g!==null){g.flags&=-257,Aw(g,a,o,s,e),g.mode&1&&jw(s,u,e),e=g,c=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(c),e.updateQueue=v}else y.add(c);break e}else{if(!(e&1)){jw(s,u,e),T0();break e}c=Error(L(426))}}else if($e&&o.mode&1){var x=Dw(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Aw(x,a,o,s,e),l0(Ua(c,o));break e}}s=c=Ua(c,o),dt!==4&&(dt=2),fl===null?fl=[s]:fl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=P_(s,c,e);kw(s,m);break e;case 1:o=c;var f=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(yi===null||!yi.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=O_(s,o,e);kw(s,b);break e}}s=s.return}while(s!==null)}e2(r)}catch(_){e=_,at===r&&r!==null&&(at=r=r.return);continue}break}while(1)}function J_(){var t=Cd.current;return Cd.current=Td,t===null?Td:t}function T0(){(dt===0||dt===3||dt===2)&&(dt=4),yt===null||!(Is&268435455)&&!(bh&268435455)||si(yt,Ct)}function Ad(t,e){var r=we;we|=2;var n=J_();(yt!==t||Ct!==e)&&(_n=null,gs(t,e));do try{qT();break}catch(i){Q_(t,i)}while(1);if(u0(),we=r,Cd.current=n,at!==null)throw Error(L(261));return yt=null,Ct=0,dt}function qT(){for(;at!==null;)Z_(at)}function WT(){for(;at!==null&&!w4();)Z_(at)}function Z_(t){var e=r2(t.alternate,t,pr);t.memoizedProps=t.pendingProps,e===null?e2(t):at=e,S0.current=null}function e2(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=VT(r,e),r!==null){r.flags&=32767,at=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,at=null;return}}else if(r=FT(r,e,pr),r!==null){at=r;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);dt===0&&(dt=5)}function Zi(t,e,r){var n=Se,i=Tr.transition;try{Tr.transition=null,Se=1,HT(t,e,r,n)}finally{Tr.transition=i,Se=n}return null}function HT(t,e,r,n){do Na();while(ci!==null);if(we&6)throw Error(L(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(T4(t,s),t===yt&&(at=yt=null,Ct=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ku||(ku=!0,n2(pd,function(){return Na(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Tr.transition,Tr.transition=null;var a=Se;Se=1;var o=we;we|=4,S0.current=null,BT(t,r),H_(r,t),fT(yg),gd=!!mg,yg=mg=null,t.current=r,zT(r),v4(),we=o,Se=a,Tr.transition=s}else t.current=r;if(ku&&(ku=!1,ci=t,Dd=i),s=t.pendingLanes,s===0&&(yi=null),_4(r.stateNode),cr(t,Je()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(jd)throw jd=!1,t=Mg,Mg=null,t;return Dd&1&&t.tag!==0&&Na(),s=t.pendingLanes,s&1?t===$g?gl++:(gl=0,$g=t):gl=0,Fi(),null}function Na(){if(ci!==null){var t=Pb(Dd),e=Tr.transition,r=Se;try{if(Tr.transition=null,Se=16>t?16:t,ci===null)var n=!1;else{if(t=ci,ci=null,Dd=0,we&6)throw Error(L(331));var i=we;for(we|=4,X=t.current;X!==null;){var s=X,a=s.child;if(X.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:pl(8,d,s)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var p=d.sibling,g=d.return;if(X_(d),d===u){X=null;break}if(p!==null){p.return=g,X=p;break}X=g}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}X=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,X=a;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:pl(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,X=m;break e}X=s.return}}var f=t.current;for(X=f;X!==null;){a=X;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,X=w;else e:for(a=f;X!==null;){if(o=X,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:xh(9,o)}}catch(_){He(o,o.return,_)}if(o===a){X=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,X=b;break e}X=o.return}}if(we=i,Fi(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(hh,t)}catch{}n=!0}return n}finally{Se=r,Tr.transition=e}}return!1}function Xw(t,e,r){e=Ua(r,e),e=P_(t,e,1),t=mi(t,e,1),e=qt(),t!==null&&(vc(t,1,e),cr(t,e))}function He(t,e,r){if(t.tag===3)Xw(t,t,r);else for(;e!==null;){if(e.tag===3){Xw(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(yi===null||!yi.has(n))){t=Ua(r,t),t=O_(e,t,1),e=mi(e,t,1),t=qt(),e!==null&&(vc(e,1,t),cr(e,t));break}}e=e.return}}function GT(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&r,yt===t&&(Ct&r)===r&&(dt===4||dt===3&&(Ct&130023424)===Ct&&500>Je()-I0?gs(t,0):k0|=r),cr(t,e)}function t2(t,e){e===0&&(t.mode&1?(e=fu,fu<<=1,!(fu&130023424)&&(fu=4194304)):e=1);var r=qt();t=On(t,e),t!==null&&(vc(t,e,r),cr(t,r))}function KT(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),t2(t,r)}function QT(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(L(314))}n!==null&&n.delete(e),t2(t,r)}var r2;r2=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||or.current)nr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return nr=!1,$T(t,e,r);nr=!!(t.flags&131072)}else nr=!1,$e&&e.flags&1048576&&a_(e,_d,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Wu(t,e),t=e.pendingProps;var i=Ma(e,Ut.current);Ia(e,r),i=w0(null,e,n,t,i,r);var s=v0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lr(n)?(s=!0,xd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,p0(e),i.updater=vh,e.stateNode=i,i._reactInternals=e,Ng(e,n,t,r),e=Cg(null,e,n,!0,s,r)):(e.tag=0,$e&&s&&a0(e),Bt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Wu(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=ZT(n),t=Or(n,t),i){case 0:e=Tg(null,e,n,t,r);break e;case 1:e=Ow(null,e,n,t,r);break e;case 11:e=Rw(null,e,n,t,r);break e;case 14:e=Pw(null,e,n,Or(n.type,t),r);break e}throw Error(L(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Or(n,i),Tg(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Or(n,i),Ow(t,e,n,i,r);case 3:e:{if(F_(e),t===null)throw Error(L(387));n=e.pendingProps,s=e.memoizedState,i=s.element,h_(t,e),Id(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ua(Error(L(423)),e),e=Lw(t,e,n,r,i);break e}else if(n!==i){i=Ua(Error(L(424)),e),e=Lw(t,e,n,r,i);break e}else for(gr=gi(e.stateNode.containerInfo.firstChild),yr=e,$e=!0,Mr=null,r=u_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if($a(),n===i){e=Ln(t,e,r);break e}Bt(t,e,n,r)}e=e.child}return e;case 5:return p_(e),t===null&&Sg(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,wg(n,i)?a=null:s!==null&&wg(n,s)&&(e.flags|=32),$_(t,e),Bt(t,e,a,r),e.child;case 6:return t===null&&Sg(e),null;case 13:return V_(t,e,r);case 4:return f0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Fa(e,null,n,r):Bt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Or(n,i),Rw(t,e,n,i,r);case 7:return Bt(t,e,e.pendingProps,r),e.child;case 8:return Bt(t,e,e.pendingProps.children,r),e.child;case 12:return Bt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ce(Sd,n._currentValue),n._currentValue=a,s!==null)if(Ur(s.value,a)){if(s.children===i.children&&!or.current){e=Ln(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=jn(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),kg(s.return,r,e),o.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(L(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),kg(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Bt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Ia(e,r),i=Cr(i),n=n(i),e.flags|=1,Bt(t,e,n,r),e.child;case 14:return n=e.type,i=Or(n,e.pendingProps),i=Or(n.type,i),Pw(t,e,n,i,r);case 15:return L_(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Or(n,i),Wu(t,e),e.tag=1,lr(n)?(t=!0,xd(e)):t=!1,Ia(e,r),R_(e,n,i),Ng(e,n,i,r),Cg(null,e,n,!0,t,r);case 19:return U_(t,e,r);case 22:return M_(t,e,r)}throw Error(L(156,e.tag))};function n2(t,e){return jb(t,e)}function JT(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(t,e,r,n){return new JT(t,e,r,n)}function C0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZT(t){if(typeof t=="function")return C0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hm)return 11;if(t===Gm)return 14}return 2}function vi(t,e){var r=t.alternate;return r===null?(r=Nr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ku(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")C0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case la:return ms(r.children,i,s,e);case Wm:a=8,i|=8;break;case Kf:return t=Nr(12,r,e,i|2),t.elementType=Kf,t.lanes=s,t;case Qf:return t=Nr(13,r,e,i),t.elementType=Qf,t.lanes=s,t;case Jf:return t=Nr(19,r,e,i),t.elementType=Jf,t.lanes=s,t;case pb:return _h(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case db:a=10;break e;case hb:a=9;break e;case Hm:a=11;break e;case Gm:a=14;break e;case ri:a=16,n=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Nr(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function ms(t,e,r,n){return t=Nr(7,t,n,e),t.lanes=r,t}function _h(t,e,r,n){return t=Nr(22,t,n,e),t.elementType=pb,t.lanes=r,t.stateNode={isHidden:!1},t}function vf(t,e,r){return t=Nr(6,t,null,e),t.lanes=r,t}function xf(t,e,r){return e=Nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eC(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zp(0),this.expirationTimes=Zp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function j0(t,e,r,n,i,s,a,o,c){return t=new eC(t,e,r,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},p0(s),t}function tC(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oa,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function i2(t){if(!t)return Si;t=t._reactInternals;e:{if(Us(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var r=t.type;if(lr(r))return i_(t,r,e)}return e}function s2(t,e,r,n,i,s,a,o,c){return t=j0(r,n,!0,t,i,s,a,o,c),t.context=i2(null),r=t.current,n=qt(),i=wi(r),s=jn(n,i),s.callback=e??null,mi(r,s,i),t.current.lanes=i,vc(t,i,n),cr(t,n),t}function Sh(t,e,r,n){var i=e.current,s=qt(),a=wi(i);return r=i2(r),e.context===null?e.context=r:e.pendingContext=r,e=jn(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=mi(i,e,a),t!==null&&(Vr(t,i,a,s),Yu(t,i,a)),a}function Rd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function D0(t,e){qw(t,e),(t=t.alternate)&&qw(t,e)}function rC(){return null}var a2=typeof reportError=="function"?reportError:function(t){console.error(t)};function A0(t){this._internalRoot=t}kh.prototype.render=A0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));Sh(t,e,null,null)};kh.prototype.unmount=A0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ns(function(){Sh(null,t,null,null)}),e[Pn]=null}};function kh(t){this._internalRoot=t}kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Mb();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ii.length&&e!==0&&e<ii[r].priority;r++);ii.splice(r,0,t),r===0&&Fb(t)}};function R0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ih(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ww(){}function nC(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Rd(a);s.call(u)}}var a=s2(e,n,t,0,null,!1,!1,"",Ww);return t._reactRootContainer=a,t[Pn]=a.current,Ol(t.nodeType===8?t.parentNode:t),Ns(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Rd(c);o.call(u)}}var c=j0(t,0,!1,null,null,!1,!1,"",Ww);return t._reactRootContainer=c,t[Pn]=c.current,Ol(t.nodeType===8?t.parentNode:t),Ns(function(){Sh(e,c,r,n)}),c}function Nh(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=Rd(a);o.call(c)}}Sh(e,a,t,i)}else a=nC(r,e,t,i,n);return Rd(a)}Ob=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Jo(e.pendingLanes);r!==0&&(Jm(e,r|1),cr(e,Je()),!(we&6)&&(Ba=Je()+500,Fi()))}break;case 13:Ns(function(){var n=On(t,1);if(n!==null){var i=qt();Vr(n,t,1,i)}}),D0(t,1)}};Zm=function(t){if(t.tag===13){var e=On(t,134217728);if(e!==null){var r=qt();Vr(e,t,134217728,r)}D0(t,134217728)}};Lb=function(t){if(t.tag===13){var e=wi(t),r=On(t,e);if(r!==null){var n=qt();Vr(r,t,e,n)}D0(t,e)}};Mb=function(){return Se};$b=function(t,e){var r=Se;try{return Se=t,e()}finally{Se=r}};lg=function(t,e,r){switch(e){case"input":if(tg(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=mh(n);if(!i)throw Error(L(90));gb(n),tg(n,i)}}}break;case"textarea":yb(t,r);break;case"select":e=r.value,e!=null&&ba(t,!!r.multiple,e,!1)}};kb=N0;Ib=Ns;var iC={usingClientEntryPoint:!1,Events:[bc,ha,mh,_b,Sb,N0]},Lo={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sC={bundleType:Lo.bundleType,version:Lo.version,rendererPackageName:Lo.rendererPackageName,rendererConfig:Lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Tb(t),t===null?null:t.stateNode},findFiberByHostInstance:Lo.findFiberByHostInstance||rC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iu.isDisabled&&Iu.supportsFiber)try{hh=Iu.inject(sC),dn=Iu}catch{}}br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iC;br.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R0(e))throw Error(L(200));return tC(t,e,null,r)};br.createRoot=function(t,e){if(!R0(t))throw Error(L(299));var r=!1,n="",i=a2;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=j0(t,1,!1,null,null,r,!1,n,i),t[Pn]=e.current,Ol(t.nodeType===8?t.parentNode:t),new A0(e)};br.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=Tb(e),t=t===null?null:t.stateNode,t};br.flushSync=function(t){return Ns(t)};br.hydrate=function(t,e,r){if(!Ih(e))throw Error(L(200));return Nh(null,t,e,!0,r)};br.hydrateRoot=function(t,e,r){if(!R0(t))throw Error(L(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=a2;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=s2(e,null,t,1,r??null,i,!1,s,a),t[Pn]=e.current,Ol(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new kh(e)};br.render=function(t,e,r){if(!Ih(e))throw Error(L(200));return Nh(null,t,e,!1,r)};br.unmountComponentAtNode=function(t){if(!Ih(t))throw Error(L(40));return t._reactRootContainer?(Ns(function(){Nh(null,null,t,!1,function(){t._reactRootContainer=null,t[Pn]=null})}),!0):!1};br.unstable_batchedUpdates=N0;br.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ih(r))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Nh(t,e,r,!1,n)};br.version="18.3.1-next-f1338f8080-20240426";function o2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o2)}catch(t){console.error(t)}}o2(),ob.exports=br;var aC=ob.exports,Hw=aC;Hf.createRoot=Hw.createRoot,Hf.hydrateRoot=Hw.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},oC=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],o=t[r++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},c2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let p=(o&15)<<2|u>>6,g=u&63;c||(g=64,a||(p=64)),n.push(r[d],r[h],r[p],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const h=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||o==null||u==null||h==null)throw new lC;const p=s<<2|o>>4;if(n.push(p),u!==64){const g=o<<4&240|u>>2;if(n.push(g),h!==64){const y=u<<6&192|h;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cC=function(t){const e=l2(t);return c2.encodeByteArray(e,!0)},Pd=function(t){return cC(t).replace(/\./g,"")},u2=function(t){try{return c2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Od(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const r=e;return new Date(r.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const r in e)!e.hasOwnProperty(r)||!uC(r)||(t[r]=Od(t[r],e[r]));return t}function uC(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=()=>dC().__FIREBASE_DEFAULTS__,pC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&u2(t[1]);return e&&JSON.parse(e)},P0=()=>{try{return hC()||pC()||fC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},d2=()=>{var t;return(t=P0())===null||t===void 0?void 0:t.config},gC=t=>{var e;return(e=P0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),o="";return[Pd(JSON.stringify(r)),Pd(JSON.stringify(a)),o].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function O0(){var t;const e=(t=P0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vC(){return typeof self=="object"&&self.self===self}function h2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function L0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function p2(){const t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xC(){return!O0()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yl(){try{return typeof indexedDB=="object"}catch{return!1}}function bC(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="FirebaseError";class Wt extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=_C,Object.setPrototypeOf(this,Wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bs.prototype.create)}}class Bs{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?SC(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Wt(i,o,n)}}function SC(t,e){return t.replace(kC,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const kC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function IC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ug(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(Kw(s)&&Kw(a)){if(!Ug(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function Kw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function va(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function el(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function f2(t,e){const r=new NC(t,e);return r.subscribe.bind(r)}class NC{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");EC(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=bf),i.error===void 0&&(i.error=bf),i.complete===void 0&&(i.complete=bf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EC(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function bf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t){return t&&t._delegate?t._delegate:t}class mn{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new mC;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jC(e))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=es){return this.instances.has(e)}getOptions(e=es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:CC(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=es){return this.component?this.component.multipleInstances?e:es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CC(t){return t===es?void 0:t}function jC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new TC(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=[];var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const g2={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},AC=me.INFO,RC={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},PC=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=RC[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Eh{constructor(e){this.name=e,this._logLevel=AC,this._logHandler=PC,this._userLogHandler=null,M0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}function OC(t){M0.forEach(e=>{e.setLogLevel(t)})}function LC(t,e){for(const r of M0){let n=null;e&&e.level&&(n=g2[e.level]),t===null?r.userLogHandler=null:r.userLogHandler=(i,s,...a)=>{const o=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(n??i.logLevel)&&t({level:me[s].toLowerCase(),message:o,args:a,type:i.name})}}}const MC=(t,e)=>e.some(r=>t instanceof r);let Qw,Jw;function $C(){return Qw||(Qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FC(){return Jw||(Jw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m2=new WeakMap,Bg=new WeakMap,y2=new WeakMap,_f=new WeakMap,$0=new WeakMap;function VC(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(xi(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&m2.set(r,t)}).catch(()=>{}),$0.set(e,t),e}function UC(t){if(Bg.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Bg.set(t,e)}let zg={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||y2.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return xi(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BC(t){zg=t(zg)}function zC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Sf(this),e,...r);return y2.set(n,e.sort?e.sort():[e]),xi(n)}:FC().includes(t)?function(...e){return t.apply(Sf(this),e),xi(m2.get(this))}:function(...e){return xi(t.apply(Sf(this),e))}}function YC(t){return typeof t=="function"?zC(t):(t instanceof IDBTransaction&&UC(t),MC(t,$C())?new Proxy(t,zg):t)}function xi(t){if(t instanceof IDBRequest)return VC(t);if(_f.has(t))return _f.get(t);const e=YC(t);return e!==t&&(_f.set(t,e),$0.set(e,t)),e}const Sf=t=>$0.get(t);function XC(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=xi(a);return n&&a.addEventListener("upgradeneeded",c=>{n(xi(a.result),c.oldVersion,c.newVersion,xi(a.transaction),c)}),r&&a.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const qC=["get","getKey","getAll","getAllKeys","count"],WC=["put","add","delete","clear"],kf=new Map;function Zw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kf.get(e))return kf.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=WC.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||qC.includes(r)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),i&&c.done]))[0]};return kf.set(e,s),s}BC(t=>({...t,get:(e,r,n)=>Zw(e,r)||t.get(e,r,n),has:(e,r)=>!!Zw(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(GC(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function GC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yg="@firebase/app",ev="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Eh("@firebase/app"),KC="@firebase/app-compat",QC="@firebase/analytics-compat",JC="@firebase/analytics",ZC="@firebase/app-check-compat",ej="@firebase/app-check",tj="@firebase/auth",rj="@firebase/auth-compat",nj="@firebase/database",ij="@firebase/database-compat",sj="@firebase/functions",aj="@firebase/functions-compat",oj="@firebase/installations",lj="@firebase/installations-compat",cj="@firebase/messaging",uj="@firebase/messaging-compat",dj="@firebase/performance",hj="@firebase/performance-compat",pj="@firebase/remote-config",fj="@firebase/remote-config-compat",gj="@firebase/storage",mj="@firebase/storage-compat",yj="@firebase/firestore",wj="@firebase/firestore-compat",vj="firebase",xj="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="[DEFAULT]",bj={[Yg]:"fire-core",[KC]:"fire-core-compat",[JC]:"fire-analytics",[QC]:"fire-analytics-compat",[ej]:"fire-app-check",[ZC]:"fire-app-check-compat",[tj]:"fire-auth",[rj]:"fire-auth-compat",[nj]:"fire-rtdb",[ij]:"fire-rtdb-compat",[sj]:"fire-fn",[aj]:"fire-fn-compat",[oj]:"fire-iid",[lj]:"fire-iid-compat",[cj]:"fire-fcm",[uj]:"fire-fcm-compat",[dj]:"fire-perf",[hj]:"fire-perf-compat",[pj]:"fire-rc",[fj]:"fire-rc-compat",[gj]:"fire-gcs",[mj]:"fire-gcs-compat",[yj]:"fire-fst",[wj]:"fire-fst-compat","fire-js":"fire-js",[vj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=new Map,Xl=new Map;function Ld(t,e){try{t.container.addComponent(e)}catch(r){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function w2(t,e){t.container.addOrOverwriteComponent(e)}function Ni(t){const e=t.name;if(Xl.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;Xl.set(e,t);for(const r of Ii.values())Ld(r,t);return!0}function v2(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function _j(t,e,r=ki){v2(t,e).clearInstance(r)}function Sj(){Xl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Dn=new Bs("app","Firebase",kj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ij=class{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=xj;function F0(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:ki,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Dn.create("bad-app-name",{appName:String(i)});if(r||(r=d2()),!r)throw Dn.create("no-options");const s=Ii.get(i);if(s){if(Ug(r,s.options)&&Ug(n,s.config))return s;throw Dn.create("duplicate-app",{appName:i})}const a=new DC(i);for(const c of Xl.values())a.addComponent(c);const o=new Ij(r,n,a);return Ii.set(i,o),o}function Nj(t=ki){const e=Ii.get(t);if(!e&&t===ki&&d2())return F0();if(!e)throw Dn.create("no-app",{appName:t});return e}function Ej(){return Array.from(Ii.values())}async function x2(t){const e=t.name;Ii.has(e)&&(Ii.delete(e),await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function pn(t,e,r){var n;let i=(n=bj[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(o.join(" "));return}Ni(new mn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function b2(t,e){if(t!==null&&typeof t!="function")throw Dn.create("invalid-log-argument");LC(t,e)}function _2(t){OC(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="firebase-heartbeat-database",Cj=1,ql="firebase-heartbeat-store";let If=null;function S2(){return If||(If=XC(Tj,Cj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ql)}}}).catch(t=>{throw Dn.create("idb-open",{originalErrorMessage:t.message})})),If}async function jj(t){try{return await(await S2()).transaction(ql).objectStore(ql).get(k2(t))}catch(e){if(e instanceof Wt)Es.warn(e.message);else{const r=Dn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(r.message)}}}async function tv(t,e){try{const n=(await S2()).transaction(ql,"readwrite");await n.objectStore(ql).put(e,k2(t)),await n.done}catch(r){if(r instanceof Wt)Es.warn(r.message);else{const n=Dn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Es.warn(n.message)}}}function k2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=1024,Aj=30*24*60*60*1e3;class Rj{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Oj(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=rv();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=Aj}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=rv(),{heartbeatsToSend:r,unsentEntries:n}=Pj(this._heartbeatsCache.heartbeats),i=Pd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function rv(){return new Date().toISOString().substring(0,10)}function Pj(t,e=Dj){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),nv(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),nv(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Oj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yl()?bC().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await jj(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return tv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return tv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nv(t){return Pd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){Ni(new mn("platform-logger",e=>new HC(e),"PRIVATE")),Ni(new mn("heartbeat",e=>new Rj(e),"PRIVATE")),pn(Yg,ev,t),pn(Yg,ev,"esm2017"),pn("fire-js","")}Lj("");const Mj=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Wt,SDK_VERSION:Vi,_DEFAULT_ENTRY_NAME:ki,_addComponent:Ld,_addOrOverwriteComponent:w2,_apps:Ii,_clearComponents:Sj,_components:Xl,_getProvider:v2,_registerComponent:Ni,_removeServiceInstance:_j,deleteApp:x2,getApp:Nj,getApps:Ej,initializeApp:F0,onLog:b2,registerVersion:pn,setLogLevel:_2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,r){this._delegate=e,this.firebase=r,Ld(e,new mn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),x2(this._delegate)))}_getService(e,r=ki){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((n=i.getComponent())===null||n===void 0?void 0:n.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:r})}_removeServiceInstance(e,r=ki){this._delegate.container.getProvider(e).clearInstance(r)}_addComponent(e){Ld(this._delegate,e)}_addOrOverwriteComponent(e){w2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},iv=new Bs("app-compat","Firebase",Fj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){const e={},r={__esModule:!0,initializeApp:s,app:i,registerVersion:pn,setLogLevel:_2,onLog:b2,apps:null,SDK_VERSION:Vi,INTERNAL:{registerComponent:o,removeApp:n,useAsService:c,modularAPIs:Mj}};r.default=r,Object.defineProperty(r,"apps",{get:a});function n(u){delete e[u]}function i(u){if(u=u||ki,!Gw(e,u))throw iv.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,d={}){const h=F0(u,d);if(Gw(e,h.name))return e[h.name];const p=new t(h,r);return e[h.name]=p,p}function a(){return Object.keys(e).map(u=>e[u])}function o(u){const d=u.name,h=d.replace("-compat","");if(Ni(u)&&u.type==="PUBLIC"){const p=(g=i())=>{if(typeof g[h]!="function")throw iv.create("invalid-app-argument",{appName:d});return g[h]()};u.serviceProps!==void 0&&Od(p,u.serviceProps),r[h]=p,t.prototype[h]=function(...g){return this._getService.bind(this,d).apply(this,u.multipleInstances?g:[])}}return u.type==="PUBLIC"?r[h]:null}function c(u,d){return d==="serverAuth"?null:d}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(){const t=Vj($j);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:I2,extendNamespace:e,createSubscribe:f2,ErrorFactory:Bs,deepExtend:Od});function e(r){Od(t,r)}return t}const Uj=I2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=new Eh("@firebase/app-compat"),Bj="@firebase/app-compat",zj="0.2.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){pn(Bj,zj,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(vC()&&self.firebase!==void 0){sv.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&sv.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Ne=Uj;Yj();var Xj="firebase",qj="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ne.registerVersion(Xj,qj,"app-compat");function V0(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}const Mo={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ea={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}}function N2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hj=Wj,Gj=N2,E2=new Bs("auth","Firebase",N2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new Eh("@firebase/auth");function Kj(t,...e){Md.logLevel<=me.WARN&&Md.warn(`Auth (${Vi}): ${t}`,...e)}function Qu(t,...e){Md.logLevel<=me.ERROR&&Md.error(`Auth (${Vi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,...e){throw U0(t,...e)}function jt(t,...e){return U0(t,...e)}function T2(t,e,r){const n=Object.assign(Object.assign({},Gj()),{[e]:r});return new Bs("auth","Firebase",n).create(e,{appName:t.name})}function lo(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Rt(t,"argument-error"),T2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function U0(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return E2.create(t,...e)}function M(t,e,...r){if(!t)throw U0(e,...r)}function an(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qu(e),new Error(e)}function Br(t,e){t||an(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function B0(){return av()==="http:"||av()==="https:"}function av(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B0()||h2()||"connection"in navigator)?navigator.onLine:!0}function Jj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,r){this.shortDelay=e,this.longDelay=r,Br(r>e,"Short delay should be less than long delay!"),this.isMobile=wC()||L0()}get(){return Qj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(t,e){Br(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;an("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;an("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;an("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new Sc(3e4,6e4);function ot(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pt(t,e,r,n,i={}){return j2(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=oo(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),C2.fetch()(D2(t,t.config.apiHost,r,o),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function j2(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Zj),e);try{const i=new t3(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw tl(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw tl(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw tl(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw tl(t,"user-disabled",a);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw T2(t,d,u);Rt(t,d)}}catch(i){if(i instanceof Wt)throw i;Rt(t,"network-request-failed",{message:String(i)})}}async function Bn(t,e,r,n,i={}){const s=await pt(t,e,r,n,i);return"mfaPendingCredential"in s&&Rt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function D2(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?z0(t.config,i):`${t.config.apiScheme}://${i}`}class t3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(jt(this.auth,"network-request-failed")),e3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tl(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=jt(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(t,e){return pt(t,"POST","/v1/accounts:delete",e)}async function n3(t,e){return pt(t,"POST","/v1/accounts:update",e)}async function i3(t,e){return pt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function s3(t,e=!1){const r=ee(t),n=await r.getIdToken(e),i=Th(n);M(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:ml(Nf(i.auth_time)),issuedAtTime:ml(Nf(i.iat)),expirationTime:ml(Nf(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Nf(t){return Number(t)*1e3}function Th(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const i=u2(r);return i?JSON.parse(i):(Qu("Failed to decode base64 JWT payload"),null)}catch(i){return Qu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function a3(t){const e=Th(t);return M(e,"internal-error"),M(typeof e.exp<"u","internal-error"),M(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mn(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Wt&&o3(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function o3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ml(this.lastLoginAt),this.creationTime=ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Mn(t,i3(r,{idToken:n}));M(i==null?void 0:i.users.length,r,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?d3(s.providerUserInfo):[],o=u3(t.providerData,a),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new A2(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function c3(t){const e=ee(t);await Hl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function u3(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function d3(t){return t.map(e=>{var{providerId:r}=e,n=V0(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h3(t,e){const r=await j2(t,{},async()=>{const n=oo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=D2(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",C2.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){M(e.idToken,"internal-error"),M(typeof e.idToken<"u","internal-error"),M(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}async getToken(e,r=!1){return M(!this.accessToken||this.refreshToken,e,"user-token-expired"),!r&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await h3(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new Gl;return n&&(M(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(M(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(M(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gl,this.toJSON())}_performRefresh(){return an("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,e){M(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ys{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,s=V0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new A2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Mn(this,this.stsTokenManager.getToken(this.auth,e));return M(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return s3(this,e)}reload(){return c3(this)}_assign(e){this!==e&&(M(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){M(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Hl(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Mn(this,r3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,s,a,o,c,u,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,p=(i=r.email)!==null&&i!==void 0?i:void 0,g=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,y=(a=r.photoURL)!==null&&a!==void 0?a:void 0,v=(o=r.tenantId)!==null&&o!==void 0?o:void 0,x=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,m=(u=r.createdAt)!==null&&u!==void 0?u:void 0,f=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:b,isAnonymous:_,providerData:S,stsTokenManager:N}=r;M(w&&N,e,"internal-error");const T=Gl.fromJSON(this.name,N);M(typeof w=="string",e,"internal-error"),Qn(h,e.name),Qn(p,e.name),M(typeof b=="boolean",e,"internal-error"),M(typeof _=="boolean",e,"internal-error"),Qn(g,e.name),Qn(y,e.name),Qn(v,e.name),Qn(x,e.name),Qn(m,e.name),Qn(f,e.name);const F=new ys({uid:w,auth:e,email:p,emailVerified:b,displayName:h,isAnonymous:_,photoURL:y,phoneNumber:g,tenantId:v,stsTokenManager:T,createdAt:m,lastLoginAt:f});return S&&Array.isArray(S)&&(F.providerData=S.map(O=>Object.assign({},O))),x&&(F._redirectEventId=x),F}static async _fromIdTokenResponse(e,r,n=!1){const i=new Gl;i.updateFromServerResponse(r);const s=new ys({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Hl(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;function mr(t){Br(t instanceof Function,"Expected a class definition");let e=ov.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ov.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}R2.type="NONE";const za=R2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t,e,r){return`firebase:${t}:${e}:${r}`}class Ea{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=ws(this.userKey,i.apiKey,s),this.fullPersistenceKey=ws("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ys._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ea(mr(za),e,n);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||mr(za);const a=ws(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const d=await u._get(a);if(d){const h=ys._fromJSON(e,d);u!==s&&(o=h),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ea(s,e,n):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Ea(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(P2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M2(e))return"Blackberry";if($2(e))return"Webos";if(Y0(e))return"Safari";if((e.includes("chrome/")||O2(e))&&!e.includes("edge/"))return"Chrome";if(kc(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function P2(t=Xe()){return/firefox\//i.test(t)}function Y0(t=Xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function O2(t=Xe()){return/crios\//i.test(t)}function L2(t=Xe()){return/iemobile/i.test(t)}function kc(t=Xe()){return/android/i.test(t)}function M2(t=Xe()){return/blackberry/i.test(t)}function $2(t=Xe()){return/webos/i.test(t)}function co(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p3(t=Xe()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function f3(t=Xe()){var e;return co(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function g3(){return p2()&&document.documentMode===10}function F2(t=Xe()){return co(t)||kc(t)||$2(t)||M2(t)||/windows phone/i.test(t)||L2(t)}function m3(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t,e=[]){let r;switch(t){case"Browser":r=lv(Xe());break;case"Worker":r=`${lv(Xe())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Vi}/${n}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y3(t){return(await pt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function U2(t,e){return pt(t,"GET","/v2/recaptchaConfig",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){return t!==void 0&&t.getResponse!==void 0}function uv(t){return t!==void 0&&t.enterprise!==void 0}class B2{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(r=>r.provider==="EMAIL_PASSWORD_PROVIDER"&&r.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function X0(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=jt("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",w3().appendChild(n)})}function z2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const v3="https://www.google.com/recaptcha/enterprise.js?render=",x3="recaptcha-enterprise",b3="NO_RECAPTCHA";class Y2{constructor(e){this.type=x3,this.auth=rt(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{U2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new B2(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;uv(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(b3)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{n(this.auth).then(o=>{if(!r&&uv(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}X0(v3+o).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function Ei(t,e,r,n=!1){const i=new Y2(t);let s;try{s=await i.verify(r)}catch{s=await i.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dv(this),this.idTokenSubscription=new dv(this),this.beforeStateQueue=new _3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=mr(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ea.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var r;const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return M(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Hl(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Jj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const r=e?ee(e):null;return r&&M(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&M(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(mr(e))})}async initializeRecaptchaConfig(){const e=await U2(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new B2(e);this.tenantId==null?this._agentRecaptchaConfig=r:this._tenantRecaptchaConfigs[this.tenantId]=r,r.emailPasswordEnabled&&new Y2(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bs("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&mr(e)||this._popupRedirectResolver;M(r,this,"argument-error"),this.redirectPersistenceManager=await Ea.create(this,[mr(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r),a=this._isInitialized?Promise.resolve():this._initializationPromise;return M(a,this,"internal-error"),a.then(()=>s(this.currentUser)),typeof r=="function"?e.addObserver(r,n,i):e.addObserver(r)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return M(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Kj(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function rt(t){return ee(t)}class dv{constructor(e){this.auth=e,this.observer=null,this.addObserver=f2(r=>this.observer=r)}get next(){return M(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function k3(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(mr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function I3(t,e,r){const n=rt(t);M(n._canInitEmulator,n,"emulator-config-failed"),M(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),s=X2(e),{host:a,port:o}=N3(e),c=o===null?"":`:${o}`;n.config.emulator={url:`${s}//${a}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||E3()}function X2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function N3(t){const e=X2(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:hv(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:hv(a)}}}function hv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function E3(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return an("not implemented")}_getIdTokenResponse(e){return an("not implemented")}_linkToIdToken(e,r){return an("not implemented")}_getReauthenticationResolver(e){return an("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q2(t,e){return pt(t,"POST","/v1/accounts:resetPassword",ot(t,e))}async function W2(t,e){return pt(t,"POST","/v1/accounts:update",e)}async function T3(t,e){return pt(t,"POST","/v1/accounts:update",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ef(t,e){return Bn(t,"POST","/v1/accounts:signInWithPassword",ot(t,e))}async function Ch(t,e){return pt(t,"POST","/v1/accounts:sendOobCode",ot(t,e))}async function C3(t,e){return Ch(t,e)}async function Tf(t,e){return Ch(t,e)}async function Cf(t,e){return Ch(t,e)}async function j3(t,e){return Ch(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D3(t,e){return Bn(t,"POST","/v1/accounts:signInWithEmailLink",ot(t,e))}async function A3(t,e){return Bn(t,"POST","/v1/accounts:signInWithEmailLink",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends uo{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new Kl(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Kl(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){var r;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((r=e._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const i=await Ei(e,n,"signInWithPassword");return Ef(e,i)}else return Ef(e,n).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await Ei(e,n,"signInWithPassword");return Ef(e,s)}else return Promise.reject(i)});case"emailLink":return D3(e,{email:this._email,oobCode:this._password});default:Rt(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":return W2(e,{idToken:r,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return A3(e,{idToken:r,email:this._email,oobCode:this._password});default:Rt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function An(t,e){return Bn(t,"POST","/v1/accounts:signInWithIdp",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="http://localhost";class yn extends uo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new yn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Rt("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,s=V0(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new yn(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return An(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,An(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,An(e,r)}buildRequest(){const e={requestUri:R3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=oo(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3(t,e){return pt(t,"POST","/v1/accounts:sendVerificationCode",ot(t,e))}async function O3(t,e){return Bn(t,"POST","/v1/accounts:signInWithPhoneNumber",ot(t,e))}async function L3(t,e){const r=await Bn(t,"POST","/v1/accounts:signInWithPhoneNumber",ot(t,e));if(r.temporaryProof)throw tl(t,"account-exists-with-different-credential",r);return r}const M3={USER_NOT_FOUND:"user-not-found"};async function $3(t,e){const r=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Bn(t,"POST","/v1/accounts:signInWithPhoneNumber",ot(t,r),M3)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends uo{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,r){return new vs({verificationId:e,verificationCode:r})}static _fromTokenResponse(e,r){return new vs({phoneNumber:e,temporaryProof:r})}_getIdTokenResponse(e){return O3(e,this._makeVerificationRequest())}_linkToIdToken(e,r){return L3(e,Object.assign({idToken:r},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return $3(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:r,verificationId:n,verificationCode:i}=this.params;return e&&r?{temporaryProof:e,phoneNumber:r}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:r,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return!n&&!r&&!i&&!s?null:new vs({verificationId:r,verificationCode:n,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V3(t){const e=va(el(t)).link,r=e?va(el(e)).deep_link_id:null,n=va(el(t)).deep_link_id;return(n?va(el(n)).link:null)||n||r||e||t}class jh{constructor(e){var r,n,i,s,a,o;const c=va(el(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,h=F3((i=c.mode)!==null&&i!==void 0?i:null);M(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=V3(e);try{return new jh(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.providerId=Ui.PROVIDER_ID}static credential(e,r){return Kl._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=jh.parseLink(r);return M(n,"argument-error"),Kl._fromEmailAndCode(e,n.code,n.tenantId)}}Ui.PROVIDER_ID="password";Ui.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ui.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends zn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ta extends ho{static credentialFromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;return M("providerId"in r&&"signInMethod"in r,"argument-error"),yn._fromParams(r)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return M(e.idToken||e.accessToken,"argument-error"),yn._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ta.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ta.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=e;if(!n&&!i&&!r&&!s||!o)return null;try{return new Ta(o)._credential({idToken:r,accessToken:n,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en extends ho{constructor(){super("facebook.com")}static credential(e){return yn._fromParams({providerId:en.PROVIDER_ID,signInMethod:en.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return en.credentialFromTaggedObject(e)}static credentialFromError(e){return en.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return en.credential(e.oauthAccessToken)}catch{return null}}}en.FACEBOOK_SIGN_IN_METHOD="facebook.com";en.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends ho{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return yn._fromParams({providerId:tn.PROVIDER_ID,signInMethod:tn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return tn.credentialFromTaggedObject(e)}static credentialFromError(e){return tn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return tn.credential(r,n)}catch{return null}}}tn.GOOGLE_SIGN_IN_METHOD="google.com";tn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn extends ho{constructor(){super("github.com")}static credential(e){return yn._fromParams({providerId:rn.PROVIDER_ID,signInMethod:rn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rn.credentialFromTaggedObject(e)}static credentialFromError(e){return rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rn.credential(e.oauthAccessToken)}catch{return null}}}rn.GITHUB_SIGN_IN_METHOD="github.com";rn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3="http://localhost";class Ya extends uo{constructor(e,r){super(e,e),this.pendingToken=r}_getIdTokenResponse(e){const r=this.buildRequest();return An(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,An(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,An(e,r)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:s}=r;return!n||!i||!s||n!==i?null:new Ya(n,s)}static _create(e,r){return new Ya(e,r)}buildRequest(){return{requestUri:U3,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3="saml.";class $d extends zn{constructor(e){M(e.startsWith(B3),"argument-error"),super(e)}static credentialFromResult(e){return $d.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return $d.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const r=Ya.fromJSON(e);return M(r,"argument-error"),r}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:r,providerId:n}=e;if(!r||!n)return null;try{return Ya._create(n,r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends ho{constructor(){super("twitter.com")}static credential(e,r){return yn._fromParams({providerId:nn.PROVIDER_ID,signInMethod:nn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return nn.credentialFromTaggedObject(e)}static credentialFromError(e){return nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return nn.credential(r,n)}catch{return null}}}nn.TWITTER_SIGN_IN_METHOD="twitter.com";nn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ju(t,e){return Bn(t,"POST","/v1/accounts:signUp",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await ys._fromIdTokenResponse(e,n,i),a=pv(n);return new Dr({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=pv(n);return new Dr({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function pv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(t){var e;const r=rt(t);if(await r._initializationPromise,!((e=r.currentUser)===null||e===void 0)&&e.isAnonymous)return new Dr({user:r.currentUser,providerId:null,operationType:"signIn"});const n=await Ju(r,{returnSecureToken:!0}),i=await Dr._fromIdTokenResponse(r,"signIn",n,!0);return await r._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends Wt{constructor(e,r,n,i){var s;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Fd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Fd(e,r,n,i)}}function H2(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fd._fromErrorAndOperation(t,s,e,n):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y3(t,e){const r=ee(t);await Dh(!0,r,e);const{providerUserInfo:n}=await n3(r.auth,{idToken:await r.getIdToken(),deleteProvider:[e]}),i=G2(n||[]);return r.providerData=r.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(r.phoneNumber=null),await r.auth._persistUserIfCurrent(r),r}async function q0(t,e,r=!1){const n=await Mn(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Dr._forOperation(t,"link",n)}async function Dh(t,e,r){await Hl(e);const n=G2(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";M(n.has(r)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(t,e,r=!1){const{auth:n}=t,i="reauthenticate";try{const s=await Mn(t,H2(n,i,e,t),r);M(s.idToken,n,"internal-error");const a=Th(s.idToken);M(a,n,"internal-error");const{sub:o}=a;return M(t.uid===o,n,"user-mismatch"),Dr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rt(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(t,e,r=!1){const n="signIn",i=await H2(t,n,e),s=await Dr._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}async function Ah(t,e){return Q2(rt(t),e)}async function J2(t,e){const r=ee(t);return await Dh(!1,r,e.providerId),q0(r,e)}async function Z2(t,e){return K2(ee(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X3(t,e){return Bn(t,"POST","/v1/accounts:signInWithCustomToken",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(t,e){const r=rt(t),n=await X3(r,{token:e,returnSecureToken:!0}),i=await Dr._fromIdTokenResponse(r,"signIn",n);return await r._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,r){this.factorId=e,this.uid=r.mfaEnrollmentId,this.enrollmentTime=new Date(r.enrolledAt).toUTCString(),this.displayName=r.displayName}static _fromServerResponse(e,r){return"phoneInfo"in r?W0._fromServerResponse(e,r):"totpInfo"in r?H0._fromServerResponse(e,r):Rt(e,"internal-error")}}class W0 extends Ic{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,r){return new W0(r)}}class H0 extends Ic{constructor(e){super("totp",e)}static _fromServerResponse(e,r){return new H0(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t,e,r){var n;M(((n=r.url)===null||n===void 0?void 0:n.length)>0,t,"invalid-continue-uri"),M(typeof r.dynamicLinkDomain>"u"||r.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=r.url,e.dynamicLinkDomain=r.dynamicLinkDomain,e.canHandleCodeInApp=r.handleCodeInApp,r.iOS&&(M(r.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=r.iOS.bundleId),r.android&&(M(r.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=r.android.installApp,e.androidMinimumVersionCode=r.android.minimumVersion,e.androidPackageName=r.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t,e,r){var n;const i=rt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((n=i._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const a=await Ei(i,s,"getOobCode",!0);r&&Ca(i,a,r),await Tf(i,a)}else r&&Ca(i,s,r),await Tf(i,s).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const o=await Ei(i,s,"getOobCode",!0);r&&Ca(i,o,r),await Tf(i,o)}else return Promise.reject(a)})}async function H3(t,e,r){await q2(ee(t),{oobCode:e,newPassword:r})}async function G3(t,e){await T3(ee(t),{oobCode:e})}async function eS(t,e){const r=ee(t),n=await q2(r,{oobCode:e}),i=n.requestType;switch(M(i,r,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":M(n.newEmail,r,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":M(n.mfaInfo,r,"internal-error");default:M(n.email,r,"internal-error")}let s=null;return n.mfaInfo&&(s=Ic._fromServerResponse(rt(r),n.mfaInfo)),{data:{email:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.newEmail:n.email)||null,previousEmail:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.email:n.newEmail)||null,multiFactorInfo:s},operation:i}}async function K3(t,e){const{data:r}=await eS(ee(t),e);return r.email}async function Q3(t,e,r){var n;const i=rt(t),s={returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"};let a;if(!((n=i._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const u=await Ei(i,s,"signUpPassword");a=Ju(i,u)}else a=Ju(i,s).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=await Ei(i,s,"signUpPassword");return Ju(i,d)}else return Promise.reject(u)});const o=await a.catch(u=>Promise.reject(u)),c=await Dr._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(c.user),c}function J3(t,e,r){return Ah(ee(t),Ui.credential(e,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e,r){var n;const i=rt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(o,c){M(c.handleCodeInApp,i,"argument-error"),c&&Ca(i,o,c)}if(!((n=i._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const o=await Ei(i,s,"getOobCode",!0);a(o,r),await Cf(i,o)}else a(s,r),await Cf(i,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const c=await Ei(i,s,"getOobCode",!0);a(c,r),await Cf(i,c)}else return Promise.reject(o)})}function e5(t,e){const r=jh.parseLink(e);return(r==null?void 0:r.operation)==="EMAIL_SIGNIN"}async function t5(t,e,r){const n=ee(t),i=Ui.credentialWithLink(e,r||Wl());return M(i._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),Ah(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r5(t,e){return pt(t,"POST","/v1/accounts:createAuthUri",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e){const r=B0()?Wl():"http://localhost",n={identifier:e,continueUri:r},{signinMethods:i}=await r5(ee(t),n);return i||[]}async function i5(t,e){const r=ee(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Ca(r.auth,i,e);const{email:s}=await C3(r.auth,i);s!==t.email&&await t.reload()}async function s5(t,e,r){const n=ee(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};r&&Ca(n.auth,s,r);const{email:a}=await j3(n.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(t,e){return pt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o5(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=ee(t),s={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await Mn(n,a5(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function l5(t,e){return tS(ee(t),e,null)}function c5(t,e){return tS(ee(t),null,e)}async function tS(t,e,r){const{auth:n}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),r&&(s.password=r);const a=await Mn(t,W2(n,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(t){var e,r;if(!t)return null;const{providerId:n}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!n&&(t!=null&&t.idToken)){const a=(r=(e=Th(t.idToken))===null||e===void 0?void 0:e.firebase)===null||r===void 0?void 0:r.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new ja(s,o)}}if(!n)return null;switch(n){case"facebook.com":return new d5(s,i);case"github.com":return new h5(s,i);case"google.com":return new p5(s,i);case"twitter.com":return new f5(s,i,t.screenName||null);case"custom":case"anonymous":return new ja(s,null);default:return new ja(s,n,i)}}class ja{constructor(e,r,n={}){this.isNewUser=e,this.providerId=r,this.profile=n}}class rS extends ja{constructor(e,r,n,i){super(e,r,n),this.username=i}}class d5 extends ja{constructor(e,r){super(e,"facebook.com",r)}}class h5 extends rS{constructor(e,r){super(e,"github.com",r,typeof(r==null?void 0:r.login)=="string"?r==null?void 0:r.login:null)}}class p5 extends ja{constructor(e,r){super(e,"google.com",r)}}class f5 extends rS{constructor(e,r,n){super(e,"twitter.com",r,n)}}function g5(t){const{user:e,_tokenResponse:r}=t;return e.isAnonymous&&!r?{providerId:null,isNewUser:!1,profile:null}:u5(r)}class us{constructor(e,r,n){this.type=e,this.credential=r,this.auth=n}static _fromIdtoken(e,r){return new us("enroll",e,r)}static _fromMfaPendingCredential(e){return new us("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var r,n;if(e!=null&&e.multiFactorSession){if(!((r=e.multiFactorSession)===null||r===void 0)&&r.pendingCredential)return us._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((n=e.multiFactorSession)===null||n===void 0)&&n.idToken)return us._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,r,n){this.session=e,this.hints=r,this.signInResolver=n}static _fromError(e,r){const n=rt(e),i=r.customData._serverResponse,s=(i.mfaInfo||[]).map(o=>Ic._fromServerResponse(n,o));M(i.mfaPendingCredential,n,"internal-error");const a=us._fromMfaPendingCredential(i.mfaPendingCredential);return new G0(a,s,async o=>{const c=await o._process(n,a);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(r.operationType){case"signIn":const d=await Dr._fromIdTokenResponse(n,r.operationType,u);return await n._updateCurrentUser(d.user),d;case"reauthenticate":return M(r.user,n,"internal-error"),Dr._forOperation(r.user,r.operationType,u);default:Rt(n,"internal-error")}})}async resolveSignIn(e){const r=e;return this.signInResolver(r)}}function m5(t,e){var r;const n=ee(t),i=e;return M(e.customData.operationType,n,"argument-error"),M((r=i.customData._serverResponse)===null||r===void 0?void 0:r.mfaPendingCredential,n,"argument-error"),G0._fromError(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(t,e){return pt(t,"POST","/v2/accounts/mfaEnrollment:start",ot(t,e))}function w5(t,e){return pt(t,"POST","/v2/accounts/mfaEnrollment:finalize",ot(t,e))}function v5(t,e){return pt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ot(t,e))}class K0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(r=>{r.mfaInfo&&(this.enrolledFactors=r.mfaInfo.map(n=>Ic._fromServerResponse(e.auth,n)))})}static _fromUser(e){return new K0(e)}async getSession(){return us._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,r){const n=e,i=await this.getSession(),s=await Mn(this.user,n._process(this.user.auth,i,r));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const r=typeof e=="string"?e:e.uid,n=await this.user.getIdToken();try{const i=await Mn(this.user,v5(this.user.auth,{idToken:n,mfaEnrollmentId:r}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==r),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const jf=new WeakMap;function x5(t){const e=ee(t);return jf.has(e)||jf.set(e,K0._fromUser(e)),jf.get(e)}const Vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Vd,"1"),this.storage.removeItem(Vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(){const t=Xe();return Y0(t)||co(t)}const _5=1e3,S5=10;class iS extends nS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=b5()&&m3(),this.fallbackToPolling=F2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const n=e.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(n);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!r)return}const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);g3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,S5):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},_5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}iS.type="LOCAL";const Q0=iS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends nS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}sS.type="SESSION";const Ts=sS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Rh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async u=>u(r.origin,s)),c=await k5(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const u=Nc("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(p.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(){return window}function N5(t){st().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(){return typeof st().WorkerGlobalScope<"u"&&typeof st().importScripts=="function"}async function E5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function T5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function C5(){return J0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firebaseLocalStorageDb",j5=1,Ud="firebaseLocalStorage",oS="fbase_key";class Ec{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Ph(t,e){return t.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function D5(){const t=indexedDB.deleteDatabase(aS);return new Ec(t).toPromise()}function Xg(){const t=indexedDB.open(aS,j5);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Ud,{keyPath:oS})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Ud)?e(n):(n.close(),await D5(),e(await Xg()))})})}async function fv(t,e,r){const n=Ph(t,!0).put({[oS]:e,value:r});return new Ec(n).toPromise()}async function A5(t,e){const r=Ph(t,!1).get(e),n=await new Ec(r).toPromise();return n===void 0?null:n.value}function gv(t,e){const r=Ph(t,!0).delete(e);return new Ec(r).toPromise()}const R5=800,P5=3;class lS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>P5)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rh._getInstance(C5()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await E5(),!this.activeServiceWorker)return;this.sender=new I5(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||T5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xg();return await fv(e,Vd,"1"),await gv(e,Vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>fv(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>A5(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>gv(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ph(i,!1).getAll();return new Ec(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lS.type="LOCAL";const Ql=lS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t,e){return pt(t,"POST","/v2/accounts/mfaSignIn:start",ot(t,e))}function L5(t,e){return pt(t,"POST","/v2/accounts/mfaSignIn:finalize",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=500,$5=6e4,Nu=1e12;class F5{constructor(e){this.auth=e,this.counter=Nu,this._widgets=new Map}render(e,r){const n=this.counter;return this._widgets.set(n,new V5(e,this.auth.name,r||{})),this.counter++,n}reset(e){var r;const n=e||Nu;(r=this._widgets.get(n))===null||r===void 0||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Nu;return((r=this._widgets.get(n))===null||r===void 0?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Nu;return(r=this._widgets.get(n))===null||r===void 0||r.execute(),""}}class V5{constructor(e,r,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;M(i,"argument-error",{appName:r}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=U5(50);const{callback:e,"expired-callback":r}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,r)try{r()}catch{}this.isVisible&&this.execute()},$5)},M5))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function U5(t){const e=[],r="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<t;n++)e.push(r.charAt(Math.floor(Math.random()*r.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=z2("rcb"),B5=new Sc(3e4,6e4),z5="https://www.google.com/recaptcha/api.js?";class Y5{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=st().grecaptcha)===null||e===void 0)&&e.render)}load(e,r=""){return M(X5(r),e,"argument-error"),this.shouldResolveImmediately(r)&&cv(st().grecaptcha)?Promise.resolve(st().grecaptcha):new Promise((n,i)=>{const s=st().setTimeout(()=>{i(jt(e,"network-request-failed"))},B5.get());st()[Df]=()=>{st().clearTimeout(s),delete st()[Df];const o=st().grecaptcha;if(!o||!cv(o)){i(jt(e,"internal-error"));return}const c=o.render;o.render=(u,d)=>{const h=c(u,d);return this.counter++,h},this.hostLanguage=r,n(o)};const a=`${z5}?${oo({onload:Df,render:"explicit",hl:r})}`;X0(a).catch(()=>{clearTimeout(s),i(jt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var r;return!!(!((r=st().grecaptcha)===null||r===void 0)&&r.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function X5(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class q5{async load(e){return new F5(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="recaptcha",W5={theme:"light",type:"image"};let H5=class{constructor(e,r=Object.assign({},W5),n){this.parameters=r,this.type=cS,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rt(n),this.isInvisible=this.parameters.size==="invisible",M(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;M(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new q5:new Y5,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),r=this.getAssertedRecaptcha(),n=r.getResponse(e);return n||new Promise(i=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),i(a))};this.tokenChangeListeners.add(s),this.isInvisible&&r.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){M(!this.parameters.sitekey,this.auth,"argument-error"),M(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),M(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return r=>{if(this.tokenChangeListeners.forEach(n=>n(r)),typeof e=="function")e(r);else if(typeof e=="string"){const n=st()[e];typeof n=="function"&&n(r)}}}assertNotDestroyed(){M(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const r=document.createElement("div");e.appendChild(r),e=r}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){M(B0()&&!J0(),this.auth,"internal-error"),await G5(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await y3(this.auth);M(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return M(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function G5(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,r){this.verificationId=e,this.onConfirmation=r}confirm(e){const r=vs._fromVerification(this.verificationId,e);return this.onConfirmation(r)}}async function K5(t,e,r){const n=rt(t),i=await Oh(n,e,ee(r));return new Z0(i,s=>Ah(n,s))}async function Q5(t,e,r){const n=ee(t);await Dh(!1,n,"phone");const i=await Oh(n.auth,e,ee(r));return new Z0(i,s=>J2(n,s))}async function J5(t,e,r){const n=ee(t),i=await Oh(n.auth,e,ee(r));return new Z0(i,s=>Z2(n,s))}async function Oh(t,e,r){var n;const i=await r.verify();try{M(typeof i=="string",t,"argument-error"),M(r.type===cS,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return M(a.type==="enroll",t,"internal-error"),(await y5(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{M(a.type==="signin",t,"internal-error");const o=((n=s.multiFactorHint)===null||n===void 0?void 0:n.uid)||s.multiFactorUid;return M(o,t,"missing-multi-factor-info"),(await O5(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await P3(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return a}}finally{r._reset()}}async function Z5(t,e){await q0(ee(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cs=class Zu{constructor(e){this.providerId=Zu.PROVIDER_ID,this.auth=rt(e)}verifyPhoneNumber(e,r){return Oh(this.auth,e,ee(r))}static credential(e,r){return vs._fromVerification(e,r)}static credentialFromResult(e){const r=e;return Zu.credentialFromTaggedObject(r)}static credentialFromError(e){return Zu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:r,temporaryProof:n}=e;return r&&n?vs._fromTokenResponse(r,n):null}};Cs.PROVIDER_ID="phone";Cs.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t,e){return e?mr(e):(M(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends uo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return An(e,this._buildIdpRequest())}_linkToIdToken(e,r){return An(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return An(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function eD(t){return Q2(t.auth,new ey(t),t.bypassAuthState)}function tD(t){const{auth:e,user:r}=t;return M(r,e,"internal-error"),K2(r,new ey(t),t.bypassAuthState)}async function rD(t){const{auth:e,user:r}=t;return M(r,e,"internal-error"),q0(r,new ey(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eD;case"linkViaPopup":case"linkViaRedirect":return rD;case"reauthViaPopup":case"reauthViaRedirect":return tD;default:Rt(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=new Sc(2e3,1e4);async function iD(t,e,r){const n=rt(t);lo(t,e,zn);const i=zs(n,r);return new Nn(n,"signInViaPopup",e,i).executeNotNull()}async function sD(t,e,r){const n=ee(t);lo(n.auth,e,zn);const i=zs(n.auth,r);return new Nn(n.auth,"reauthViaPopup",e,i,n).executeNotNull()}async function aD(t,e,r){const n=ee(t);lo(n.auth,e,zn);const i=zs(n.auth,r);return new Nn(n.auth,"linkViaPopup",e,i,n).executeNotNull()}class Nn extends uS{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Nn.currentPopupAction&&Nn.currentPopupAction.cancel(),Nn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return M(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=Nc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nD.get())};e()}}Nn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD="pendingRedirect",yl=new Map;class lD extends uS{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=yl.get(this.auth._key());if(!e){try{const n=await cD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}yl.set(this.auth._key(),e)}return this.bypassAuthState||yl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cD(t,e){const r=hS(e),n=dS(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}async function ty(t,e){return dS(t)._set(hS(e),"true")}function uD(){yl.clear()}function ry(t,e){yl.set(t._key(),e)}function dS(t){return mr(t._redirectPersistence)}function hS(t){return ws(oD,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t,e,r){return hD(t,e,r)}async function hD(t,e,r){const n=rt(t);lo(t,e,zn),await n._initializationPromise;const i=zs(n,r);return await ty(i,n),i._openRedirect(n,e,"signInViaRedirect")}function pD(t,e,r){return fD(t,e,r)}async function fD(t,e,r){const n=ee(t);lo(n.auth,e,zn),await n.auth._initializationPromise;const i=zs(n.auth,r);await ty(i,n.auth);const s=await pS(n);return i._openRedirect(n.auth,e,"reauthViaRedirect",s)}function gD(t,e,r){return mD(t,e,r)}async function mD(t,e,r){const n=ee(t);lo(n.auth,e,zn),await n.auth._initializationPromise;const i=zs(n.auth,r);await Dh(!1,n,e.providerId),await ty(i,n.auth);const s=await pS(n);return i._openRedirect(n.auth,e,"linkViaRedirect",s)}async function yD(t,e){return await rt(t)._initializationPromise,Lh(t,e,!1)}async function Lh(t,e,r=!1){const n=rt(t),i=zs(n,e),a=await new lD(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}async function pS(t){const e=Nc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=10*60*1e3;class fS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vD(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!gS(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(jt(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wD&&this.cachedEventUids.clear(),this.cachedEventUids.has(mv(e))}saveEventToCache(e){this.cachedEventUids.add(mv(e)),this.lastProcessedEventTime=Date.now()}}function mv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(t,e={}){return pt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bD=/^https?/;async function _D(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mS(t);for(const r of e)try{if(SD(r))return}catch{}Rt(t,"unauthorized-domain")}function SD(t){const e=Wl(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!bD.test(r))return!1;if(xD.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=new Sc(3e4,6e4);function yv(){const t=st().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function ID(t){return new Promise((e,r)=>{var n,i,s;function a(){yv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yv(),r(jt(t,"network-request-failed"))},timeout:kD.get()})}if(!((i=(n=st().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=st().gapi)===null||s===void 0)&&s.load)a();else{const o=z2("iframefcb");return st()[o]=()=>{gapi.load?a():r(jt(t,"network-request-failed"))},X0(`https://apis.google.com/js/api.js?onload=${o}`).catch(c=>r(c))}}).catch(e=>{throw ed=null,e})}let ed=null;function ND(t){return ed=ed||ID(t),ed}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new Sc(5e3,15e3),TD="__/auth/iframe",CD="emulator/auth/iframe",jD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AD(t){const e=t.config;M(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?z0(e,CD):`https://${t.config.authDomain}/${TD}`,n={apiKey:e.apiKey,appName:t.name,v:Vi},i=DD.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${oo(n).slice(1)}`}async function RD(t){const e=await ND(t),r=st().gapi;return M(r,t,"internal-error"),e.open({where:document.body,url:AD(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jD,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=jt(t,"network-request-failed"),o=st().setTimeout(()=>{s(a)},ED.get());function c(){st().clearTimeout(o),i(n)}n.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OD=500,LD=600,MD="_blank",$D="http://localhost";class wv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FD(t,e,r,n=OD,i=LD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c=Object.assign(Object.assign({},PD),{width:n.toString(),height:i.toString(),top:s,left:a}),u=Xe().toLowerCase();r&&(o=O2(u)?MD:r),P2(u)&&(e=e||$D,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(f3(u)&&o!=="_self")return VD(e||"",o),new wv(null);const h=window.open(e||"",o,d);M(h,t,"popup-blocked");try{h.focus()}catch{}return new wv(h)}function VD(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="__/auth/handler",BD="emulator/auth/handler",zD=encodeURIComponent("fac");async function qg(t,e,r,n,i,s){M(t.config.authDomain,t,"auth-domain-config-required"),M(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Vi,eventId:i};if(e instanceof zn){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",IC(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))a[d]=h}if(e instanceof ho){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await t._getAppCheckToken(),u=c?`#${zD}=${encodeURIComponent(c)}`:"";return`${YD(t)}?${oo(o).slice(1)}${u}`}function YD({config:t}){return t.emulator?z0(t,BD):`https://${t.authDomain}/${UD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="webStorageSupport";class XD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ts,this._completeRedirectFn=Lh,this._overrideRedirectResult=ry}async _openPopup(e,r,n,i){var s;Br((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await qg(e,r,n,Wl(),i);return FD(e,a,Nc())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await qg(e,r,n,Wl(),i);return N5(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(Br(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await RD(e),n=new fS(e);return r.register("authEvent",i=>(M(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Af,{type:Af},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Af];a!==void 0&&r(!!a),Rt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=_D(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return F2()||Y0()||co()}}const qD=XD;class WD{constructor(e){this.factorId=e}_process(e,r,n){switch(r.type){case"enroll":return this._finalizeEnroll(e,r.credential,n);case"signin":return this._finalizeSignIn(e,r.credential);default:return an("unexpected MultiFactorSessionType")}}}class ny extends WD{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ny(e)}_finalizeEnroll(e,r,n){return w5(e,{idToken:r,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,r){return L5(e,{mfaPendingCredential:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class yS{constructor(){}static assertion(e){return ny._fromCredential(e)}}yS.FACTOR_ID="phone";var vv="@firebase/auth",xv="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){M(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function KD(t){Ni(new mn("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;M(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V2(t)},u=new S3(n,i,s,c);return k3(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ni(new mn("auth-internal",e=>{const r=rt(e.getProvider("auth").getImmediate());return(n=>new HD(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),pn(vv,xv,GD(t)),pn(vv,xv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=5*60;gC("authIdTokenMaxAge");KD("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=2e3;async function ZD(t,e,r){var n;const{BuildInfo:i}=js();Br(e.sessionId,"AuthEvent did not contain a session ID");const s=await i6(e.sessionId),a={};return co()?a.ibi=i.packageName:kc()?a.apn=i.packageName:Rt(t,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,qg(t,r,e.type,void 0,(n=e.eventId)!==null&&n!==void 0?n:void 0,a)}async function e6(t){const{BuildInfo:e}=js(),r={};co()?r.iosBundleId=e.packageName:kc()?r.androidPackageName=e.packageName:Rt(t,"operation-not-supported-in-this-environment"),await mS(t,r)}function t6(t){const{cordova:e}=js();return new Promise(r=>{e.plugins.browsertab.isAvailable(n=>{let i=null;n?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,p3()?"_blank":"_system","location=yes"),r(i)})})}async function r6(t,e,r){const{cordova:n}=js();let i=()=>{};try{await new Promise((s,a)=>{let o=null;function c(){var h;s();const p=(h=n.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof p=="function"&&p(),typeof(r==null?void 0:r.close)=="function"&&r.close()}function u(){o||(o=window.setTimeout(()=>{a(jt(t,"redirect-cancelled-by-user"))},JD))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(c),document.addEventListener("resume",u,!1),kc()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",d,!1),o&&window.clearTimeout(o)}})}finally{i()}}function n6(t){var e,r,n,i,s,a,o,c,u,d;const h=js();M(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),M(typeof((r=h==null?void 0:h.BuildInfo)===null||r===void 0?void 0:r.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),M(typeof((s=(i=(n=h==null?void 0:h.cordova)===null||n===void 0?void 0:n.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),M(typeof((c=(o=(a=h==null?void 0:h.cordova)===null||a===void 0?void 0:a.plugins)===null||o===void 0?void 0:o.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),M(typeof((d=(u=h==null?void 0:h.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function i6(t){const e=s6(t),r=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}function s6(t){if(Br(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),r=new Uint8Array(e);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=20;class o6 extends fS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(r=>r(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function l6(t,e,r=null){return{type:e,eventId:r,urlResponse:null,sessionId:d6(),postBody:null,tenantId:t.tenantId,error:jt(t,"no-auth-event")}}function c6(t,e){return Wg()._set(Hg(t),e)}async function bv(t){const e=await Wg()._get(Hg(t));return e&&await Wg()._remove(Hg(t)),e}function u6(t,e){var r,n;const i=p6(e);if(i.includes("/__/auth/callback")){const s=td(i),a=s.firebaseError?h6(decodeURIComponent(s.firebaseError)):null,o=(n=(r=a==null?void 0:a.code)===null||r===void 0?void 0:r.split("auth/"))===null||n===void 0?void 0:n[1],c=o?jt(o):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function d6(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<a6;r++){const n=Math.floor(Math.random()*e.length);t.push(e.charAt(n))}return t.join("")}function Wg(){return mr(Q0)}function Hg(t){return ws("authEvent",t.config.apiKey,t.name)}function h6(t){try{return JSON.parse(t)}catch{return null}}function p6(t){const e=td(t),r=e.link?decodeURIComponent(e.link):void 0,n=td(r).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return td(i).link||i||n||r||t}function td(t){if(!(t!=null&&t.includes("?")))return{};const[e,...r]=t.split("?");return va(r.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=500;class g6{constructor(){this._redirectPersistence=Ts,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Lh,this._overrideRedirectResult=ry}async _initialize(e){const r=e._key();let n=this.eventManagers.get(r);return n||(n=new o6(e),this.eventManagers.set(r,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Rt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,r,n,i){n6(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),uD(),await this._originValidation(e);const a=l6(e,n,i);await c6(e,a);const o=await ZD(e,a,r),c=await t6(o);return r6(e,s,c)}_isIframeWebStorageSupported(e,r){throw new Error("Method not implemented.")}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=e6(e)),this.originValidationPromises[r]}attachCallbackListeners(e,r){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=js(),a=setTimeout(async()=>{await bv(e),r.onEvent(_v())},f6),o=async d=>{clearTimeout(a);const h=await bv(e);let p=null;h&&(d!=null&&d.url)&&(p=u6(h,d.url)),r.onEvent(p||_v())};typeof n<"u"&&typeof n.subscribe=="function"&&n.subscribe(null,o);const c=i,u=`${s.packageName.toLowerCase()}://`;js().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(u)&&o({url:d}),typeof c=="function")try{c(d)}catch(h){console.error(h)}}}}const m6=g6;function _v(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:jt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(t,e){rt(t)._logFramework(e)}var w6="@firebase/auth-compat",v6="0.4.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=1e3;function wl(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function b6(){return wl()==="http:"||wl()==="https:"}function wS(t=Xe()){return!!((wl()==="file:"||wl()==="ionic:"||wl()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _6(){return L0()||O0()}function S6(){return p2()&&(document==null?void 0:document.documentMode)===11}function k6(t=Xe()){return/Edge\/\d+/.test(t)}function I6(t=Xe()){return S6()||k6(t)}function vS(){try{const t=self.localStorage,e=Nc();if(t)return t.setItem(e,"1"),t.removeItem(e),I6()?Yl():!0}catch{return iy()&&Yl()}return!1}function iy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rf(){return(b6()||h2()||wS())&&!_6()&&vS()&&!iy()}function xS(){return wS()&&typeof document<"u"}async function N6(){return xS()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},x6);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function E6(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr={LOCAL:"local",NONE:"none",SESSION:"session"},$o=M,bS="persistence";function T6(t,e){if($o(Object.values(fr).includes(e),t,"invalid-persistence-type"),L0()){$o(e!==fr.SESSION,t,"unsupported-persistence-type");return}if(O0()){$o(e===fr.NONE,t,"unsupported-persistence-type");return}if(iy()){$o(e===fr.NONE||e===fr.LOCAL&&Yl(),t,"unsupported-persistence-type");return}$o(e===fr.NONE||vS(),t,"unsupported-persistence-type")}async function Gg(t){await t._initializationPromise;const e=_S(),r=ws(bS,t.config.apiKey,t.name);e&&e.setItem(r,t._getPersistence())}function C6(t,e){const r=_S();if(!r)return[];const n=ws(bS,t,e);switch(r.getItem(n)){case fr.NONE:return[za];case fr.LOCAL:return[Ql,Ts];case fr.SESSION:return[Ts];default:return[]}}function _S(){var t;try{return((t=E6())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=M;class ui{constructor(){this.browserResolver=mr(qD),this.cordovaResolver=mr(m6),this.underlyingResolver=null,this._redirectPersistence=Ts,this._completeRedirectFn=Lh,this._overrideRedirectResult=ry}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,r,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,r,n,i)}async _openRedirect(e,r,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,r,n,i)}_isIframeWebStorageSupported(e,r){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,r)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return xS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return j6(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await N6();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){return t.unwrap()}function D6(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(t){return kS(t)}function R6(t,e){var r;const n=(r=e.customData)===null||r===void 0?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new P6(t,m5(t,e))}else if(n){const i=kS(e),s=e;i&&(s.credential=i,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function kS(t){const{_tokenResponse:e}=t instanceof Wt?t.customData:t;if(!e)return null;if(!(t instanceof Wt)&&"temporaryProof"in e&&"phoneNumber"in e)return Cs.credentialFromResult(t);const r=e.providerId;if(!r||r===Mo.PASSWORD)return null;let n;switch(r){case Mo.GOOGLE:n=tn;break;case Mo.FACEBOOK:n=en;break;case Mo.GITHUB:n=rn;break;case Mo.TWITTER:n=nn;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:c}=e;return!s&&!a&&!i&&!o?null:o?r.startsWith("saml.")?Ya._create(r,o):yn._fromParams({providerId:r,signInMethod:r,pendingToken:o,idToken:i,accessToken:s}):new Ta(r).credential({idToken:i,accessToken:s,rawNonce:c})}return t instanceof Wt?n.credentialFromError(t):n.credentialFromResult(t)}function er(t,e){return e.catch(r=>{throw r instanceof Wt&&R6(t,r),r}).then(r=>{const n=r.operationType,i=r.user;return{operationType:n,credential:A6(r),additionalUserInfo:g5(r),user:En.getOrCreate(i)}})}async function Kg(t,e){const r=await e;return{verificationId:r.verificationId,confirm:n=>er(t,r.confirm(n))}}class P6{constructor(e,r){this.resolver=r,this.auth=D6(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return er(SS(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._delegate=e,this.multiFactor=x5(e)}static getOrCreate(e){return En.USER_MAP.has(e)||En.USER_MAP.set(e,new En(e)),En.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return er(this.auth,J2(this._delegate,e))}async linkWithPhoneNumber(e,r){return Kg(this.auth,Q5(this._delegate,e,r))}async linkWithPopup(e){return er(this.auth,aD(this._delegate,e,ui))}async linkWithRedirect(e){return await Gg(rt(this.auth)),gD(this._delegate,e,ui)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return er(this.auth,Z2(this._delegate,e))}reauthenticateWithPhoneNumber(e,r){return Kg(this.auth,J5(this._delegate,e,r))}reauthenticateWithPopup(e){return er(this.auth,sD(this._delegate,e,ui))}async reauthenticateWithRedirect(e){return await Gg(rt(this.auth)),pD(this._delegate,e,ui)}sendEmailVerification(e){return i5(this._delegate,e)}async unlink(e){return await Y3(this._delegate,e),this}updateEmail(e){return l5(this._delegate,e)}updatePassword(e){return c5(this._delegate,e)}updatePhoneNumber(e){return Z5(this._delegate,e)}updateProfile(e){return o5(this._delegate,e)}verifyBeforeUpdateEmail(e,r){return s5(this._delegate,e,r)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}En.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=M;class Qg{constructor(e,r){if(this.app=e,r.isInitialized()){this._delegate=r.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:n}=e.options;Fo(n,"invalid-api-key",{appName:e.name}),Fo(n,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?ui:void 0;this._delegate=r.initialize({options:{persistence:O6(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Hj),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?En.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,r){I3(this._delegate,e,r)}applyActionCode(e){return G3(this._delegate,e)}checkActionCode(e){return eS(this._delegate,e)}confirmPasswordReset(e,r){return H3(this._delegate,e,r)}async createUserWithEmailAndPassword(e,r){return er(this._delegate,Q3(this._delegate,e,r))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return n5(this._delegate,e)}isSignInWithEmailLink(e){return e5(this._delegate,e)}async getRedirectResult(){Fo(Rf(),this._delegate,"operation-not-supported-in-this-environment");const e=await yD(this._delegate,ui);return e?er(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){y6(this._delegate,e)}onAuthStateChanged(e,r,n){const{next:i,error:s,complete:a}=Sv(e,r,n);return this._delegate.onAuthStateChanged(i,s,a)}onIdTokenChanged(e,r,n){const{next:i,error:s,complete:a}=Sv(e,r,n);return this._delegate.onIdTokenChanged(i,s,a)}sendSignInLinkToEmail(e,r){return Z3(this._delegate,e,r)}sendPasswordResetEmail(e,r){return W3(this._delegate,e,r||void 0)}async setPersistence(e){T6(this._delegate,e);let r;switch(e){case fr.SESSION:r=Ts;break;case fr.LOCAL:r=await mr(Ql)._isAvailable()?Ql:Q0;break;case fr.NONE:r=za;break;default:return Rt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(r)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return er(this._delegate,z3(this._delegate))}signInWithCredential(e){return er(this._delegate,Ah(this._delegate,e))}signInWithCustomToken(e){return er(this._delegate,q3(this._delegate,e))}signInWithEmailAndPassword(e,r){return er(this._delegate,J3(this._delegate,e,r))}signInWithEmailLink(e,r){return er(this._delegate,t5(this._delegate,e,r))}signInWithPhoneNumber(e,r){return Kg(this._delegate,K5(this._delegate,e,r))}async signInWithPopup(e){return Fo(Rf(),this._delegate,"operation-not-supported-in-this-environment"),er(this._delegate,iD(this._delegate,e,ui))}async signInWithRedirect(e){return Fo(Rf(),this._delegate,"operation-not-supported-in-this-environment"),await Gg(this._delegate),dD(this._delegate,e,ui)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return K3(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Qg.Persistence=fr;function Sv(t,e,r){let n=t;typeof t!="function"&&({next:n,error:e,complete:r}=t);const i=n;return{next:a=>i(a&&En.getOrCreate(a)),error:e,complete:r}}function O6(t,e){const r=C6(t,e);if(typeof self<"u"&&!r.includes(Ql)&&r.push(Ql),typeof window<"u")for(const n of[Q0,Ts])r.includes(n)||r.push(n);return r.includes(za)||r.push(za),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.providerId="phone",this._delegate=new Cs(SS(Ne.auth()))}static credential(e,r){return Cs.credential(e,r)}verifyPhoneNumber(e,r){return this._delegate.verifyPhoneNumber(e,r)}unwrap(){return this._delegate}}sy.PHONE_SIGN_IN_METHOD=Cs.PHONE_SIGN_IN_METHOD;sy.PROVIDER_ID=Cs.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=M;class M6{constructor(e,r,n=Ne.app()){var i;L6((i=n.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new H5(e,r,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="auth-compat";function F6(t){t.INTERNAL.registerComponent(new mn($6,e=>{const r=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Qg(r,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ea.EMAIL_SIGNIN,PASSWORD_RESET:ea.PASSWORD_RESET,RECOVER_EMAIL:ea.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ea.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ea.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ea.VERIFY_EMAIL}},EmailAuthProvider:Ui,FacebookAuthProvider:en,GithubAuthProvider:rn,GoogleAuthProvider:tn,OAuthProvider:Ta,SAMLAuthProvider:$d,PhoneAuthProvider:sy,PhoneMultiFactorGenerator:yS,RecaptchaVerifier:M6,TwitterAuthProvider:nn,Auth:Qg,AuthCredential:uo,Error:Wt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(w6,v6)}F6(Ne);var V6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,ay=ay||{},re=V6||self;function Mh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Tc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function U6(t){return Object.prototype.hasOwnProperty.call(t,Pf)&&t[Pf]||(t[Pf]=++B6)}var Pf="closure_uid_"+(1e9*Math.random()>>>0),B6=0;function z6(t,e,r){return t.call.apply(t.bind,arguments)}function Y6(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ft(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ft=z6:Ft=Y6,Ft.apply(null,arguments)}function Eu(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function xt(t,e){function r(){}r.prototype=e.prototype,t.$=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.ac=function(n,i,s){for(var a=Array(arguments.length-2),o=2;o<arguments.length;o++)a[o-2]=arguments[o];return e.prototype[i].apply(n,a)}}function Bi(){this.s=this.s,this.o=this.o}var X6=0;Bi.prototype.s=!1;Bi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),X6!=0)&&U6(this)};Bi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const IS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1};function oy(t){const e=t.length;if(0<e){const r=Array(e);for(let n=0;n<e;n++)r[n]=t[n];return r}return[]}function kv(t,e){for(let r=1;r<arguments.length;r++){const n=arguments[r];if(Mh(n)){const i=t.length||0,s=n.length||0;t.length=i+s;for(let a=0;a<s;a++)t[i+a]=n[a]}else t.push(n)}}function Vt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var q6=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{re.addEventListener("test",()=>{},e),re.removeEventListener("test",()=>{},e)}catch{}return t}();function Jl(t){return/^[\s\xa0]*$/.test(t)}function $h(){var t=re.navigator;return t&&(t=t.userAgent)?t:""}function sn(t){return $h().indexOf(t)!=-1}function ly(t){return ly[" "](t),t}ly[" "]=function(){};function W6(t,e){var r=FA;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=e(t)}var H6=sn("Opera"),Xa=sn("Trident")||sn("MSIE"),NS=sn("Edge"),Jg=NS||Xa,ES=sn("Gecko")&&!($h().toLowerCase().indexOf("webkit")!=-1&&!sn("Edge"))&&!(sn("Trident")||sn("MSIE"))&&!sn("Edge"),G6=$h().toLowerCase().indexOf("webkit")!=-1&&!sn("Edge");function TS(){var t=re.document;return t?t.documentMode:void 0}var Zg;e:{var Of="",Lf=function(){var t=$h();if(ES)return/rv:([^\);]+)(\)|;)/.exec(t);if(NS)return/Edge\/([\d\.]+)/.exec(t);if(Xa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(G6)return/WebKit\/(\S+)/.exec(t);if(H6)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Lf&&(Of=Lf?Lf[1]:""),Xa){var Mf=TS();if(Mf!=null&&Mf>parseFloat(Of)){Zg=String(Mf);break e}}Zg=Of}var em;if(re.document&&Xa){var Iv=TS();em=Iv||parseInt(Zg,10)||void 0}else em=void 0;var K6=em;function Zl(t,e){if(Vt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ES){e:{try{ly(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Q6[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Zl.$.h.call(this)}}xt(Zl,Vt);var Q6={2:"touch",3:"pen",4:"mouse"};Zl.prototype.h=function(){Zl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Cc="closure_listenable_"+(1e6*Math.random()|0),J6=0;function Z6(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.la=i,this.key=++J6,this.fa=this.ia=!1}function Fh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function cy(t,e,r){for(const n in t)e.call(r,t[n],n,t)}function eA(t,e){for(const r in t)e.call(void 0,t[r],r,t)}function CS(t){const e={};for(const r in t)e[r]=t[r];return e}const Nv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jS(t,e){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)t[r]=n[r];for(let s=0;s<Nv.length;s++)r=Nv[s],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function Vh(t){this.src=t,this.g={},this.h=0}Vh.prototype.add=function(t,e,r,n,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var a=rm(t,e,n,i);return-1<a?(e=t[a],r||(e.ia=!1)):(e=new Z6(e,this.src,s,!!n,i),e.ia=r,t.push(e)),e};function tm(t,e){var r=e.type;if(r in t.g){var n=t.g[r],i=IS(n,e),s;(s=0<=i)&&Array.prototype.splice.call(n,i,1),s&&(Fh(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function rm(t,e,r,n){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!r&&s.la==n)return i}return-1}var uy="closure_lm_"+(1e6*Math.random()|0),$f={};function DS(t,e,r,n,i){if(n&&n.once)return RS(t,e,r,n,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)DS(t,e[s],r,n,i);return null}return r=py(r),t&&t[Cc]?t.O(e,r,Tc(n)?!!n.capture:!!n,i):AS(t,e,r,!1,n,i)}function AS(t,e,r,n,i,s){if(!e)throw Error("Invalid event type");var a=Tc(i)?!!i.capture:!!i,o=hy(t);if(o||(t[uy]=o=new Vh(t)),r=o.add(e,r,n,a,s),r.proxy)return r;if(n=tA(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)q6||(i=a),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(OS(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function tA(){function t(r){return e.call(t.src,t.listener,r)}const e=rA;return t}function RS(t,e,r,n,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)RS(t,e[s],r,n,i);return null}return r=py(r),t&&t[Cc]?t.P(e,r,Tc(n)?!!n.capture:!!n,i):AS(t,e,r,!0,n,i)}function PS(t,e,r,n,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)PS(t,e[s],r,n,i);else n=Tc(n)?!!n.capture:!!n,r=py(r),t&&t[Cc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],r=rm(s,r,n,i),-1<r&&(Fh(s[r]),Array.prototype.splice.call(s,r,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=hy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=rm(e,r,n,i)),(r=-1<t?e[t]:null)&&dy(r))}function dy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Cc])tm(e.i,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(OS(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=hy(e))?(tm(r,t),r.h==0&&(r.src=null,e[uy]=null)):Fh(t)}}}function OS(t){return t in $f?$f[t]:$f[t]="on"+t}function rA(t,e){if(t.fa)t=!0;else{e=new Zl(e,this);var r=t.listener,n=t.la||t.src;t.ia&&dy(t),t=r.call(n,e)}return t}function hy(t){return t=t[uy],t instanceof Vh?t:null}var Ff="__closure_events_fn_"+(1e9*Math.random()>>>0);function py(t){return typeof t=="function"?t:(t[Ff]||(t[Ff]=function(e){return t.handleEvent(e)}),t[Ff])}function vt(){Bi.call(this),this.i=new Vh(this),this.S=this,this.J=null}xt(vt,Bi);vt.prototype[Cc]=!0;vt.prototype.removeEventListener=function(t,e,r,n){PS(this,t,e,r,n)};function Dt(t,e){var r,n=t.J;if(n)for(r=[];n;n=n.J)r.push(n);if(t=t.S,n=e.type||e,typeof e=="string")e=new Vt(e,t);else if(e instanceof Vt)e.target=e.target||t;else{var i=e;e=new Vt(n,t),jS(e,i)}if(i=!0,r)for(var s=r.length-1;0<=s;s--){var a=e.g=r[s];i=Tu(a,n,!0,e)&&i}if(a=e.g=t,i=Tu(a,n,!0,e)&&i,i=Tu(a,n,!1,e)&&i,r)for(s=0;s<r.length;s++)a=e.g=r[s],i=Tu(a,n,!1,e)&&i}vt.prototype.N=function(){if(vt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)Fh(r[n]);delete t.g[e],t.h--}}this.J=null};vt.prototype.O=function(t,e,r,n){return this.i.add(String(t),e,!1,r,n)};vt.prototype.P=function(t,e,r,n){return this.i.add(String(t),e,!0,r,n)};function Tu(t,e,r,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==r){var o=a.listener,c=a.la||a.src;a.ia&&tm(t.i,a),i=o.call(c,n)!==!1&&i}}return i&&!n.defaultPrevented}var fy=re.JSON.stringify;class nA{constructor(e,r){this.i=e,this.j=r,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function iA(){var t=gy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class sA{constructor(){this.h=this.g=null}add(e,r){const n=LS.get();n.set(e,r),this.h?this.h.next=n:this.g=n,this.h=n}}var LS=new nA(()=>new aA,t=>t.reset());class aA{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function oA(t){var e=1;t=t.split(":");const r=[];for(;0<e&&t.length;)r.push(t.shift()),e--;return t.length&&r.push(t.join(":")),r}function lA(t){re.setTimeout(()=>{throw t},0)}let ec,tc=!1,gy=new sA,MS=()=>{const t=re.Promise.resolve(void 0);ec=()=>{t.then(cA)}};var cA=()=>{for(var t;t=iA();){try{t.h.call(t.g)}catch(r){lA(r)}var e=LS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}tc=!1};function Uh(t,e){vt.call(this),this.h=t||1,this.g=e||re,this.j=Ft(this.qb,this),this.l=Date.now()}xt(Uh,vt);z=Uh.prototype;z.ga=!1;z.T=null;z.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Dt(this,"tick"),this.ga&&(my(this),this.start()))}};z.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function my(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}z.N=function(){Uh.$.N.call(this),my(this),delete this.g};function yy(t,e,r){if(typeof t=="function")r&&(t=Ft(t,r));else if(t&&typeof t.handleEvent=="function")t=Ft(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:re.setTimeout(t,e||0)}function $S(t){t.g=yy(()=>{t.g=null,t.i&&(t.i=!1,$S(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class uA extends Bi{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$S(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rc(t){Bi.call(this),this.h=t,this.g={}}xt(rc,Bi);var Ev=[];function FS(t,e,r,n){Array.isArray(r)||(r&&(Ev[0]=r.toString()),r=Ev);for(var i=0;i<r.length;i++){var s=DS(e,r[i],n||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function VS(t){cy(t.g,function(e,r){this.g.hasOwnProperty(r)&&dy(e)},t),t.g={}}rc.prototype.N=function(){rc.$.N.call(this),VS(this)};rc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Bh(){this.g=!0}Bh.prototype.Ea=function(){this.g=!1};function dA(t,e,r,n,i,s){t.info(function(){if(t.g)if(s)for(var a="",o=s.split("&"),c=0;c<o.length;c++){var u=o[c].split("=");if(1<u.length){var d=u[0];u=u[1];var h=d.split("_");a=2<=h.length&&h[1]=="type"?a+(d+"="+u+"&"):a+(d+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+r+`
`+a})}function hA(t,e,r,n,i,s,a){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+r+`
`+s+" "+a})}function xa(t,e,r,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+fA(t,r)+(n?" "+n:"")})}function pA(t,e){t.info(function(){return"TIMEOUT: "+e})}Bh.prototype.info=function(){};function fA(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return fy(r)}catch{return e}}var Ys={},Tv=null;function zh(){return Tv=Tv||new vt}Ys.Ta="serverreachability";function US(t){Vt.call(this,Ys.Ta,t)}xt(US,Vt);function nc(t){const e=zh();Dt(e,new US(e))}Ys.STAT_EVENT="statevent";function BS(t,e){Vt.call(this,Ys.STAT_EVENT,t),this.stat=e}xt(BS,Vt);function Xt(t){const e=zh();Dt(e,new BS(e,t))}Ys.Ua="timingevent";function zS(t,e){Vt.call(this,Ys.Ua,t),this.size=e}xt(zS,Vt);function jc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){t()},e)}var Yh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},YS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wy(){}wy.prototype.h=null;function Cv(t){return t.h||(t.h=t.i())}function XS(){}var Dc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vy(){Vt.call(this,"d")}xt(vy,Vt);function xy(){Vt.call(this,"c")}xt(xy,Vt);var nm;function Xh(){}xt(Xh,wy);Xh.prototype.g=function(){return new XMLHttpRequest};Xh.prototype.i=function(){return{}};nm=new Xh;function Ac(t,e,r,n){this.l=t,this.j=e,this.m=r,this.W=n||1,this.U=new rc(this),this.P=gA,t=Jg?125:void 0,this.V=new Uh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new qS}function qS(){this.i=null,this.g="",this.h=!1}var gA=45e3,im={},Bd={};z=Ac.prototype;z.setTimeout=function(t){this.P=t};function sm(t,e,r){t.L=1,t.v=Wh($n(e)),t.s=r,t.S=!0,WS(t,null)}function WS(t,e){t.G=Date.now(),Rc(t),t.A=$n(t.v);var r=t.A,n=t.W;Array.isArray(n)||(n=[String(n)]),tk(r.i,"t",n),t.C=0,r=t.l.J,t.h=new qS,t.g=_k(t.l,r?e:null,!t.s),0<t.O&&(t.M=new uA(Ft(t.Pa,t,t.g),t.O)),FS(t.U,t.g,"readystatechange",t.nb),e=t.I?CS(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),nc(),dA(t.j,t.u,t.A,t.m,t.W,t.s)}z.nb=function(t){t=t.target;const e=this.M;e&&on(t)==3?e.l():this.Pa(t)};z.Pa=function(t){try{if(t==this.g)e:{const d=on(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||Jg||this.g&&(this.h.h||this.g.ja()||Rv(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?nc(3):nc(2)),qh(this);var r=this.g.da();this.ca=r;t:if(HS(this)){var n=Rv(this.g);t="";var i=n.length,s=on(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ds(this),vl(this);var a="";break t}this.h.i=new re.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:s&&e==i-1});n.splice(0,i),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=r==200,hA(this.j,this.u,this.A,this.m,this.W,d,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,c=this.g;if((o=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jl(o)){var u=o;break t}}u=null}if(r=u)xa(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,am(this,r);else{this.i=!1,this.o=3,Xt(12),ds(this),vl(this);break e}}this.S?(GS(this,d,a),Jg&&this.i&&d==3&&(FS(this.U,this.V,"tick",this.mb),this.V.start())):(xa(this.j,this.m,a,null),am(this,a)),d==4&&ds(this),this.i&&!this.J&&(d==4?wk(this.l,this):(this.i=!1,Rc(this)))}else LA(this.g),r==400&&0<a.indexOf("Unknown SID")?(this.o=3,Xt(12)):(this.o=0,Xt(13)),ds(this),vl(this)}}}catch{}finally{}};function HS(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function GS(t,e,r){let n=!0,i;for(;!t.J&&t.C<r.length;)if(i=mA(t,r),i==Bd){e==4&&(t.o=4,Xt(14),n=!1),xa(t.j,t.m,null,"[Incomplete Response]");break}else if(i==im){t.o=4,Xt(15),xa(t.j,t.m,r,"[Invalid Chunk]"),n=!1;break}else xa(t.j,t.m,i,null),am(t,i);HS(t)&&i!=Bd&&i!=im&&(t.h.g="",t.C=0),e!=4||r.length!=0||t.h.h||(t.o=1,Xt(16),n=!1),t.i=t.i&&n,n?0<r.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),Ny(e),e.M=!0,Xt(11))):(xa(t.j,t.m,r,"[Invalid Chunked Response]"),ds(t),vl(t))}z.mb=function(){if(this.g){var t=on(this.g),e=this.g.ja();this.C<e.length&&(qh(this),GS(this,t,e),this.i&&t!=4&&Rc(this))}};function mA(t,e){var r=t.C,n=e.indexOf(`
`,r);return n==-1?Bd:(r=Number(e.substring(r,n)),isNaN(r)?im:(n+=1,n+r>e.length?Bd:(e=e.slice(n,n+r),t.C=n+r,e)))}z.cancel=function(){this.J=!0,ds(this)};function Rc(t){t.Y=Date.now()+t.P,KS(t,t.P)}function KS(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=jc(Ft(t.lb,t),e)}function qh(t){t.B&&(re.clearTimeout(t.B),t.B=null)}z.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(pA(this.j,this.A),this.L!=2&&(nc(),Xt(17)),ds(this),this.o=2,vl(this)):KS(this,this.Y-t)};function vl(t){t.l.H==0||t.J||wk(t.l,t)}function ds(t){qh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,my(t.V),VS(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function am(t,e){try{var r=t.l;if(r.H!=0&&(r.g==t||om(r.i,t))){if(!t.K&&om(r.i,t)&&r.H==3){try{var n=r.Ja.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){e:if(!r.u){if(r.g)if(r.g.G+3e3<t.G)Xd(r),Kh(r);else break e;Iy(r),Xt(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.G&&r.A==0&&!r.v&&(r.v=jc(Ft(r.ib,r),6e3));if(1>=ik(r.i)&&r.oa){try{r.oa()}catch{}r.oa=void 0}}else hs(r,11)}else if((t.K||r.g==t)&&Xd(r),!Jl(e))for(i=r.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(r.V=u[0],u=u[1],r.H==2)if(u[0]=="c"){r.K=u[1],r.pa=u[2];const d=u[3];d!=null&&(r.ra=d,r.l.info("VER="+r.ra));const h=u[4];h!=null&&(r.Ga=h,r.l.info("SVER="+r.Ga));const p=u[5];p!=null&&typeof p=="number"&&0<p&&(n=1.5*p,r.L=n,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;const g=t.g;if(g){const y=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=n.i;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(by(s,s.h),s.h=null))}if(n.F){const v=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(n.Da=v,Ae(n.I,n.F,v))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-t.G,r.l.info("Handshake RTT: "+r.S+"ms")),n=r;var a=t;if(n.wa=bk(n,n.J?n.pa:null,n.Y),a.K){sk(n.i,a);var o=a,c=n.L;c&&o.setTimeout(c),o.B&&(qh(o),Rc(o)),n.g=a}else mk(n);0<r.j.length&&Qh(r)}else u[0]!="stop"&&u[0]!="close"||hs(r,7);else r.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?hs(r,7):ky(r):u[0]!="noop"&&r.h&&r.h.Aa(u),r.A=0)}}nc(4)}catch{}}function yA(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Mh(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}e=[],r=0;for(n in t)e[r++]=t[n];return e}function wA(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Mh(t)||typeof t=="string"){var e=[];t=t.length;for(var r=0;r<t;r++)e.push(r);return e}e=[],r=0;for(const n in t)e[r++]=n;return e}}}function QS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Mh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var r=wA(t),n=yA(t),i=n.length,s=0;s<i;s++)e.call(void 0,n[s],r&&r[s],t)}var JS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vA(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var s=t[r].substring(0,n);i=t[r].substring(n+1)}else s=t[r];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function xs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof xs){this.h=t.h,zd(this,t.j),this.s=t.s,this.g=t.g,Yd(this,t.m),this.l=t.l;var e=t.i,r=new ic;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),jv(this,r),this.o=t.o}else t&&(e=String(t).match(JS))?(this.h=!1,zd(this,e[1]||"",!0),this.s=rl(e[2]||""),this.g=rl(e[3]||"",!0),Yd(this,e[4]),this.l=rl(e[5]||"",!0),jv(this,e[6]||"",!0),this.o=rl(e[7]||"")):(this.h=!1,this.i=new ic(null,this.h))}xs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(nl(e,Dv,!0),":");var r=this.g;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(nl(e,Dv,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&t.push("/"),t.push(nl(r,r.charAt(0)=="/"?_A:bA,!0))),(r=this.i.toString())&&t.push("?",r),(r=this.o)&&t.push("#",nl(r,kA)),t.join("")};function $n(t){return new xs(t)}function zd(t,e,r){t.j=r?rl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Yd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function jv(t,e,r){e instanceof ic?(t.i=e,IA(t.i,t.h)):(r||(e=nl(e,SA)),t.i=new ic(e,t.h))}function Ae(t,e,r){t.i.set(e,r)}function Wh(t){return Ae(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function rl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function nl(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,xA),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xA(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Dv=/[#\/\?@]/g,bA=/[#\?:]/g,_A=/[#\?]/g,SA=/[#\?@]/g,kA=/#/g;function ic(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function zi(t){t.g||(t.g=new Map,t.h=0,t.i&&vA(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}z=ic.prototype;z.add=function(t,e){zi(this),this.i=null,t=po(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function ZS(t,e){zi(t),e=po(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ek(t,e){return zi(t),e=po(t,e),t.g.has(e)}z.forEach=function(t,e){zi(this),this.g.forEach(function(r,n){r.forEach(function(i){t.call(e,i,n,this)},this)},this)};z.ta=function(){zi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let n=0;n<e.length;n++){const i=t[n];for(let s=0;s<i.length;s++)r.push(e[n])}return r};z.Z=function(t){zi(this);let e=[];if(typeof t=="string")ek(this,t)&&(e=e.concat(this.g.get(po(this,t))));else{t=Array.from(this.g.values());for(let r=0;r<t.length;r++)e=e.concat(t[r])}return e};z.set=function(t,e){return zi(this),this.i=null,t=po(this,t),ek(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function tk(t,e,r){ZS(t,e),0<r.length&&(t.i=null,t.g.set(po(t,e),oy(r)),t.h+=r.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var n=e[r];const s=encodeURIComponent(String(n)),a=this.Z(n);for(n=0;n<a.length;n++){var i=s;a[n]!==""&&(i+="="+encodeURIComponent(String(a[n]))),t.push(i)}}return this.i=t.join("&")};function po(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function IA(t,e){e&&!t.j&&(zi(t),t.i=null,t.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(ZS(this,n),tk(this,i,r))},t)),t.j=e}var NA=class{constructor(t,e){this.g=t,this.map=e}};function rk(t){this.l=t||EA,re.PerformanceNavigationTiming?(t=re.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var EA=10;function nk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ik(t){return t.h?1:t.g?t.g.size:0}function om(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function by(t,e){t.g?t.g.add(e):t.h=e}function sk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}rk.prototype.cancel=function(){if(this.i=ak(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function ak(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.F);return e}return oy(t.i)}var TA=class{stringify(t){return re.JSON.stringify(t,void 0)}parse(t){return re.JSON.parse(t,void 0)}};function CA(){this.g=new TA}function jA(t,e,r){const n=r||"";try{QS(t,function(i,s){let a=i;Tc(i)&&(a=fy(i)),e.push(n+s+"="+encodeURIComponent(a))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function DA(t,e){const r=new Bh;if(re.Image){const n=new Image;n.onload=Eu(Cu,r,n,"TestLoadImage: loaded",!0,e),n.onerror=Eu(Cu,r,n,"TestLoadImage: error",!1,e),n.onabort=Eu(Cu,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=Eu(Cu,r,n,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Cu(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function Pc(t){this.l=t.fc||null,this.j=t.ob||!1}xt(Pc,wy);Pc.prototype.g=function(){return new Hh(this.l,this.j)};Pc.prototype.i=function(t){return function(){return t}}({});function Hh(t,e){vt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=_y,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xt(Hh,vt);var _y=0;z=Hh.prototype;z.open=function(t,e){if(this.readyState!=_y)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,sc(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oc(this)),this.readyState=_y};z.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,sc(this)),this.g&&(this.readyState=3,sc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ok(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ok(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}z.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Oc(this):sc(this),this.readyState==3&&ok(this)}};z.Za=function(t){this.g&&(this.response=this.responseText=t,Oc(this))};z.Ya=function(t){this.g&&(this.response=t,Oc(this))};z.ka=function(){this.g&&Oc(this)};function Oc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,sc(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function sc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Hh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var AA=re.JSON.parse;function Ke(t){vt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=lk,this.L=this.M=!1}xt(Ke,vt);var lk="",RA=/^https?$/i,PA=["POST","PUT"];z=Ke.prototype;z.Oa=function(t){this.M=t};z.ha=function(t,e,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():nm.g(),this.C=this.u?Cv(this.u):Cv(nm),this.g.onreadystatechange=Ft(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Av(this,s);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const s of n.keys())r.set(s,n.get(s));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(r.keys()).find(s=>s.toLowerCase()=="content-type"),i=re.FormData&&t instanceof re.FormData,!(0<=IS(PA,e))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of r)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dk(this),0<this.B&&((this.L=OA(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ft(this.ua,this)):this.A=yy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Av(this,s)}};function OA(t){return Xa&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.ua=function(){typeof ay<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dt(this,"timeout"),this.abort(8))};function Av(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ck(t),Gh(t)}function ck(t){t.F||(t.F=!0,Dt(t,"complete"),Dt(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Dt(this,"complete"),Dt(this,"abort"),Gh(this))};z.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gh(this,!0)),Ke.$.N.call(this)};z.La=function(){this.s||(this.G||this.v||this.l?uk(this):this.kb())};z.kb=function(){uk(this)};function uk(t){if(t.h&&typeof ay<"u"&&(!t.C[1]||on(t)!=4||t.da()!=2)){if(t.v&&on(t)==4)yy(t.La,0,t);else if(Dt(t,"readystatechange"),on(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var n;if(n=a===0){var i=String(t.I).match(JS)[1]||null;!i&&re.self&&re.self.location&&(i=re.self.location.protocol.slice(0,-1)),n=!RA.test(i?i.toLowerCase():"")}r=n}if(r)Dt(t,"complete"),Dt(t,"success");else{t.m=6;try{var s=2<on(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",ck(t)}}finally{Gh(t)}}}}function Gh(t,e){if(t.g){dk(t);const r=t.g,n=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Dt(t,"ready");try{r.onreadystatechange=n}catch{}}}function dk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(re.clearTimeout(t.A),t.A=null)}z.isActive=function(){return!!this.g};function on(t){return t.g?t.g.readyState:0}z.da=function(){try{return 2<on(this)?this.g.status:-1}catch{return-1}};z.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),AA(e)}};function Rv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case lk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function LA(t){const e={};t=(t.g&&2<=on(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<t.length;n++){if(Jl(t[n]))continue;var r=oA(t[n]);const i=r[0];if(r=r[1],typeof r!="string")continue;r=r.trim();const s=e[i]||[];e[i]=s,s.push(r)}eA(e,function(n){return n.join(", ")})}z.Ia=function(){return this.m};z.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function hk(t){let e="";return cy(t,function(r,n){e+=n,e+=":",e+=r,e+=`\r
`}),e}function Sy(t,e,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=hk(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):Ae(t,e,r))}function Vo(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function pk(t){this.Ga=0,this.j=[],this.l=new Bh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vo("baseRetryDelayMs",5e3,t),this.hb=Vo("retryDelaySeedMs",1e4,t),this.eb=Vo("forwardChannelMaxRetries",2,t),this.xa=Vo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new rk(t&&t.concurrentRequestLimit),this.Ja=new CA,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}z=pk.prototype;z.ra=8;z.H=1;function ky(t){if(fk(t),t.H==3){var e=t.W++,r=$n(t.I);if(Ae(r,"SID",t.K),Ae(r,"RID",e),Ae(r,"TYPE","terminate"),Lc(t,r),e=new Ac(t,t.l,e),e.L=2,e.v=Wh($n(r)),r=!1,re.navigator&&re.navigator.sendBeacon)try{r=re.navigator.sendBeacon(e.v.toString(),"")}catch{}!r&&re.Image&&(new Image().src=e.v,r=!0),r||(e.g=_k(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Rc(e)}xk(t)}function Kh(t){t.g&&(Ny(t),t.g.cancel(),t.g=null)}function fk(t){Kh(t),t.u&&(re.clearTimeout(t.u),t.u=null),Xd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&re.clearTimeout(t.m),t.m=null)}function Qh(t){if(!nk(t.i)&&!t.m){t.m=!0;var e=t.Na;ec||MS(),tc||(ec(),tc=!0),gy.add(e,t),t.C=0}}function MA(t,e){return ik(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=jc(Ft(t.Na,t,e),vk(t,t.C)),t.C++,!0)}z.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Ac(this,this.l,t);let s=this.s;if(this.U&&(s?(s=CS(s),jS(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,r=0;r<this.j.length;r++){t:{var n=this.j[r];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=r;break e}if(e===4096||r===this.j.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=gk(this,i,e),r=$n(this.I),Ae(r,"RID",t),Ae(r,"CVER",22),this.F&&Ae(r,"X-HTTP-Session-Id",this.F),Lc(this,r),s&&(this.O?e="headers="+encodeURIComponent(String(hk(s)))+"&"+e:this.o&&Sy(r,this.o,s)),by(this.i,i),this.bb&&Ae(r,"TYPE","init"),this.P?(Ae(r,"$req",e),Ae(r,"SID","null"),i.aa=!0,sm(i,r,null)):sm(i,r,e),this.H=2}}else this.H==3&&(t?Pv(this,t):this.j.length==0||nk(this.i)||Pv(this))};function Pv(t,e){var r;e?r=e.m:r=t.W++;const n=$n(t.I);Ae(n,"SID",t.K),Ae(n,"RID",r),Ae(n,"AID",t.V),Lc(t,n),t.o&&t.s&&Sy(n,t.o,t.s),r=new Ac(t,t.l,r,t.C+1),t.o===null&&(r.I=t.s),e&&(t.j=e.F.concat(t.j)),e=gk(t,r,1e3),r.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),by(t.i,r),sm(r,n,e)}function Lc(t,e){t.na&&cy(t.na,function(r,n){Ae(e,n,r)}),t.h&&QS({},function(r,n){Ae(e,n,r)})}function gk(t,e,r){r=Math.min(t.j.length,r);var n=t.h?Ft(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const a=["count="+r];s==-1?0<r?(s=i[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let o=!0;for(let c=0;c<r;c++){let u=i[c].g;const d=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),o=!1;else try{jA(d,a,"req"+u+"_")}catch{n&&n(d)}}if(o){n=a.join("&");break e}}}return t=t.j.splice(0,r),e.F=t,n}function mk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ec||MS(),tc||(ec(),tc=!0),gy.add(e,t),t.A=0}}function Iy(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=jc(Ft(t.Ma,t),vk(t,t.A)),t.A++,!0)}z.Ma=function(){if(this.u=null,yk(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=jc(Ft(this.jb,this),t)}};z.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xt(10),Kh(this),yk(this))};function Ny(t){t.B!=null&&(re.clearTimeout(t.B),t.B=null)}function yk(t){t.g=new Ac(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=$n(t.wa);Ae(e,"RID","rpc"),Ae(e,"SID",t.K),Ae(e,"AID",t.V),Ae(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ae(e,"TO",t.qa),Ae(e,"TYPE","xmlhttp"),Lc(t,e),t.o&&t.s&&Sy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var r=t.g;t=t.pa,r.L=1,r.v=Wh($n(e)),r.s=null,r.S=!0,WS(r,t)}z.ib=function(){this.v!=null&&(this.v=null,Kh(this),Iy(this),Xt(19))};function Xd(t){t.v!=null&&(re.clearTimeout(t.v),t.v=null)}function wk(t,e){var r=null;if(t.g==e){Xd(t),Ny(t),t.g=null;var n=2}else if(om(t.i,e))r=e.F,sk(t.i,e),n=1;else return;if(t.H!=0){if(e.i)if(n==1){r=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;n=zh(),Dt(n,new zS(n,r)),Qh(t)}else mk(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(n==1&&MA(t,e)||n==2&&Iy(t)))switch(r&&0<r.length&&(e=t.i,e.i=e.i.concat(r)),i){case 1:hs(t,5);break;case 4:hs(t,10);break;case 3:hs(t,6);break;default:hs(t,2)}}}function vk(t,e){let r=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(r*=2),r*e}function hs(t,e){if(t.l.info("Error code "+e),e==2){var r=null;t.h&&(r=null);var n=Ft(t.pb,t);r||(r=new xs("//www.google.com/images/cleardot.gif"),re.location&&re.location.protocol=="http"||zd(r,"https"),Wh(r)),DA(r.toString(),n)}else Xt(2);t.H=0,t.h&&t.h.za(e),xk(t),fk(t)}z.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Xt(2)):(this.l.info("Failed to ping google.com"),Xt(1))};function xk(t){if(t.H=0,t.ma=[],t.h){const e=ak(t.i);(e.length!=0||t.j.length!=0)&&(kv(t.ma,e),kv(t.ma,t.j),t.i.i.length=0,oy(t.j),t.j.length=0),t.h.ya()}}function bk(t,e,r){var n=r instanceof xs?$n(r):new xs(r);if(n.g!="")e&&(n.g=e+"."+n.g),Yd(n,n.m);else{var i=re.location;n=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new xs(null);n&&zd(s,n),e&&(s.g=e),i&&Yd(s,i),r&&(s.l=r),n=s}return r=t.F,e=t.Da,r&&e&&Ae(n,r,e),Ae(n,"VER",t.ra),Lc(t,n),n}function _k(t,e,r){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=r&&t.Ha&&!t.va?new Ke(new Pc({ob:!0})):new Ke(t.va),e.Oa(t.J),e}z.isActive=function(){return!!this.h&&this.h.isActive(this)};function Sk(){}z=Sk.prototype;z.Ba=function(){};z.Aa=function(){};z.za=function(){};z.ya=function(){};z.isActive=function(){return!0};z.Va=function(){};function qd(){if(Xa&&!(10<=Number(K6)))throw Error("Environmental error: no available transport.")}qd.prototype.g=function(t,e){return new vr(t,e)};function vr(t,e){vt.call(this),this.g=new pk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Jl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new fo(this)}xt(vr,vt);vr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,r=this.h||void 0;Xt(0),t.Y=e,t.na=r||{},t.G=t.aa,t.I=bk(t,null,t.Y),Qh(t)};vr.prototype.close=function(){ky(this.g)};vr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var r={};r.__data__=t,t=r}else this.v&&(r={},r.__data__=fy(t),t=r);e.j.push(new NA(e.fb++,t)),e.H==3&&Qh(e)};vr.prototype.N=function(){this.g.h=null,delete this.j,ky(this.g),delete this.g,vr.$.N.call(this)};function kk(t){vy.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}xt(kk,vy);function Ik(){xy.call(this),this.status=1}xt(Ik,xy);function fo(t){this.g=t}xt(fo,Sk);fo.prototype.Ba=function(){Dt(this.g,"a")};fo.prototype.Aa=function(t){Dt(this.g,new kk(t))};fo.prototype.za=function(t){Dt(this.g,new Ik)};fo.prototype.ya=function(){Dt(this.g,"b")};function $A(){this.blockSize=-1}function zr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}xt(zr,$A);zr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Vf(t,e,r){r||(r=0);var n=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)n[i]=e.charCodeAt(r++)|e.charCodeAt(r++)<<8|e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;e=t.g[0],r=t.g[1],i=t.g[2];var s=t.g[3],a=e+(s^r&(i^s))+n[0]+3614090360&4294967295;e=r+(a<<7&4294967295|a>>>25),a=s+(i^e&(r^i))+n[1]+3905402710&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(r^s&(e^r))+n[2]+606105819&4294967295,i=s+(a<<17&4294967295|a>>>15),a=r+(e^i&(s^e))+n[3]+3250441966&4294967295,r=i+(a<<22&4294967295|a>>>10),a=e+(s^r&(i^s))+n[4]+4118548399&4294967295,e=r+(a<<7&4294967295|a>>>25),a=s+(i^e&(r^i))+n[5]+1200080426&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(r^s&(e^r))+n[6]+2821735955&4294967295,i=s+(a<<17&4294967295|a>>>15),a=r+(e^i&(s^e))+n[7]+4249261313&4294967295,r=i+(a<<22&4294967295|a>>>10),a=e+(s^r&(i^s))+n[8]+1770035416&4294967295,e=r+(a<<7&4294967295|a>>>25),a=s+(i^e&(r^i))+n[9]+2336552879&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(r^s&(e^r))+n[10]+4294925233&4294967295,i=s+(a<<17&4294967295|a>>>15),a=r+(e^i&(s^e))+n[11]+2304563134&4294967295,r=i+(a<<22&4294967295|a>>>10),a=e+(s^r&(i^s))+n[12]+1804603682&4294967295,e=r+(a<<7&4294967295|a>>>25),a=s+(i^e&(r^i))+n[13]+4254626195&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(r^s&(e^r))+n[14]+2792965006&4294967295,i=s+(a<<17&4294967295|a>>>15),a=r+(e^i&(s^e))+n[15]+1236535329&4294967295,r=i+(a<<22&4294967295|a>>>10),a=e+(i^s&(r^i))+n[1]+4129170786&4294967295,e=r+(a<<5&4294967295|a>>>27),a=s+(r^i&(e^r))+n[6]+3225465664&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^r&(s^e))+n[11]+643717713&4294967295,i=s+(a<<14&4294967295|a>>>18),a=r+(s^e&(i^s))+n[0]+3921069994&4294967295,r=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(r^i))+n[5]+3593408605&4294967295,e=r+(a<<5&4294967295|a>>>27),a=s+(r^i&(e^r))+n[10]+38016083&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^r&(s^e))+n[15]+3634488961&4294967295,i=s+(a<<14&4294967295|a>>>18),a=r+(s^e&(i^s))+n[4]+3889429448&4294967295,r=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(r^i))+n[9]+568446438&4294967295,e=r+(a<<5&4294967295|a>>>27),a=s+(r^i&(e^r))+n[14]+3275163606&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^r&(s^e))+n[3]+4107603335&4294967295,i=s+(a<<14&4294967295|a>>>18),a=r+(s^e&(i^s))+n[8]+1163531501&4294967295,r=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(r^i))+n[13]+2850285829&4294967295,e=r+(a<<5&4294967295|a>>>27),a=s+(r^i&(e^r))+n[2]+4243563512&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^r&(s^e))+n[7]+1735328473&4294967295,i=s+(a<<14&4294967295|a>>>18),a=r+(s^e&(i^s))+n[12]+2368359562&4294967295,r=i+(a<<20&4294967295|a>>>12),a=e+(r^i^s)+n[5]+4294588738&4294967295,e=r+(a<<4&4294967295|a>>>28),a=s+(e^r^i)+n[8]+2272392833&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^r)+n[11]+1839030562&4294967295,i=s+(a<<16&4294967295|a>>>16),a=r+(i^s^e)+n[14]+4259657740&4294967295,r=i+(a<<23&4294967295|a>>>9),a=e+(r^i^s)+n[1]+2763975236&4294967295,e=r+(a<<4&4294967295|a>>>28),a=s+(e^r^i)+n[4]+1272893353&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^r)+n[7]+4139469664&4294967295,i=s+(a<<16&4294967295|a>>>16),a=r+(i^s^e)+n[10]+3200236656&4294967295,r=i+(a<<23&4294967295|a>>>9),a=e+(r^i^s)+n[13]+681279174&4294967295,e=r+(a<<4&4294967295|a>>>28),a=s+(e^r^i)+n[0]+3936430074&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^r)+n[3]+3572445317&4294967295,i=s+(a<<16&4294967295|a>>>16),a=r+(i^s^e)+n[6]+76029189&4294967295,r=i+(a<<23&4294967295|a>>>9),a=e+(r^i^s)+n[9]+3654602809&4294967295,e=r+(a<<4&4294967295|a>>>28),a=s+(e^r^i)+n[12]+3873151461&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^r)+n[15]+530742520&4294967295,i=s+(a<<16&4294967295|a>>>16),a=r+(i^s^e)+n[2]+3299628645&4294967295,r=i+(a<<23&4294967295|a>>>9),a=e+(i^(r|~s))+n[0]+4096336452&4294967295,e=r+(a<<6&4294967295|a>>>26),a=s+(r^(e|~i))+n[7]+1126891415&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~r))+n[14]+2878612391&4294967295,i=s+(a<<15&4294967295|a>>>17),a=r+(s^(i|~e))+n[5]+4237533241&4294967295,r=i+(a<<21&4294967295|a>>>11),a=e+(i^(r|~s))+n[12]+1700485571&4294967295,e=r+(a<<6&4294967295|a>>>26),a=s+(r^(e|~i))+n[3]+2399980690&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~r))+n[10]+4293915773&4294967295,i=s+(a<<15&4294967295|a>>>17),a=r+(s^(i|~e))+n[1]+2240044497&4294967295,r=i+(a<<21&4294967295|a>>>11),a=e+(i^(r|~s))+n[8]+1873313359&4294967295,e=r+(a<<6&4294967295|a>>>26),a=s+(r^(e|~i))+n[15]+4264355552&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~r))+n[6]+2734768916&4294967295,i=s+(a<<15&4294967295|a>>>17),a=r+(s^(i|~e))+n[13]+1309151649&4294967295,r=i+(a<<21&4294967295|a>>>11),a=e+(i^(r|~s))+n[4]+4149444226&4294967295,e=r+(a<<6&4294967295|a>>>26),a=s+(r^(e|~i))+n[11]+3174756917&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~r))+n[2]+718787259&4294967295,i=s+(a<<15&4294967295|a>>>17),a=r+(s^(i|~e))+n[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}zr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var r=e-this.blockSize,n=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=r;)Vf(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(n[i++]=t.charCodeAt(s++),i==this.blockSize){Vf(this,n),i=0;break}}else for(;s<e;)if(n[i++]=t[s++],i==this.blockSize){Vf(this,n),i=0;break}}this.h=i,this.i+=e};zr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var r=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=r&255,r/=256;for(this.j(t),t=Array(16),e=r=0;4>e;++e)for(var n=0;32>n;n+=8)t[r++]=this.g[e]>>>n&255;return t};function ke(t,e){this.h=e;for(var r=[],n=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;n&&s==e||(r[i]=s,n=!1)}this.g=r}var FA={};function Ey(t){return-128<=t&&128>t?W6(t,function(e){return new ke([e|0],0>e?-1:0)}):new ke([t|0],0>t?-1:0)}function ln(t){if(isNaN(t)||!isFinite(t))return Da;if(0>t)return Et(ln(-t));for(var e=[],r=1,n=0;t>=r;n++)e[n]=t/r|0,r*=lm;return new ke(e,0)}function Nk(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Et(Nk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ln(Math.pow(e,8)),n=Da,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+s),e);8>s?(s=ln(Math.pow(e,s)),n=n.R(s).add(ln(a))):(n=n.R(r),n=n.add(ln(a)))}return n}var lm=4294967296,Da=Ey(0),cm=Ey(1),Ov=Ey(16777216);z=ke.prototype;z.ea=function(){if(Ir(this))return-Et(this).ea();for(var t=0,e=1,r=0;r<this.g.length;r++){var n=this.D(r);t+=(0<=n?n:lm+n)*e,e*=lm}return t};z.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Tn(this))return"0";if(Ir(this))return"-"+Et(this).toString(t);for(var e=ln(Math.pow(t,6)),r=this,n="";;){var i=Hd(r,e).g;r=Wd(r,i.R(e));var s=((0<r.g.length?r.g[0]:r.h)>>>0).toString(t);if(r=i,Tn(r))return s+n;for(;6>s.length;)s="0"+s;n=s+n}};z.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Tn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ir(t){return t.h==-1}z.X=function(t){return t=Wd(this,t),Ir(t)?-1:Tn(t)?0:1};function Et(t){for(var e=t.g.length,r=[],n=0;n<e;n++)r[n]=~t.g[n];return new ke(r,~t.h).add(cm)}z.abs=function(){return Ir(this)?Et(this):this};z.add=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0,i=0;i<=e;i++){var s=n+(this.D(i)&65535)+(t.D(i)&65535),a=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);n=a>>>16,s&=65535,a&=65535,r[i]=a<<16|s}return new ke(r,r[r.length-1]&-2147483648?-1:0)};function Wd(t,e){return t.add(Et(e))}z.R=function(t){if(Tn(this)||Tn(t))return Da;if(Ir(this))return Ir(t)?Et(this).R(Et(t)):Et(Et(this).R(t));if(Ir(t))return Et(this.R(Et(t)));if(0>this.X(Ov)&&0>t.X(Ov))return ln(this.ea()*t.ea());for(var e=this.g.length+t.g.length,r=[],n=0;n<2*e;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var i=0;i<t.g.length;i++){var s=this.D(n)>>>16,a=this.D(n)&65535,o=t.D(i)>>>16,c=t.D(i)&65535;r[2*n+2*i]+=a*c,ju(r,2*n+2*i),r[2*n+2*i+1]+=s*c,ju(r,2*n+2*i+1),r[2*n+2*i+1]+=a*o,ju(r,2*n+2*i+1),r[2*n+2*i+2]+=s*o,ju(r,2*n+2*i+2)}for(n=0;n<e;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=e;n<2*e;n++)r[n]=0;return new ke(r,0)};function ju(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Uo(t,e){this.g=t,this.h=e}function Hd(t,e){if(Tn(e))throw Error("division by zero");if(Tn(t))return new Uo(Da,Da);if(Ir(t))return e=Hd(Et(t),e),new Uo(Et(e.g),Et(e.h));if(Ir(e))return e=Hd(t,Et(e)),new Uo(Et(e.g),e.h);if(30<t.g.length){if(Ir(t)||Ir(e))throw Error("slowDivide_ only works with positive integers.");for(var r=cm,n=e;0>=n.X(t);)r=Lv(r),n=Lv(n);var i=ta(r,1),s=ta(n,1);for(n=ta(n,2),r=ta(r,2);!Tn(n);){var a=s.add(n);0>=a.X(t)&&(i=i.add(r),s=a),n=ta(n,1),r=ta(r,1)}return e=Wd(t,i.R(e)),new Uo(i,e)}for(i=Da;0<=t.X(e);){for(r=Math.max(1,Math.floor(t.ea()/e.ea())),n=Math.ceil(Math.log(r)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),s=ln(r),a=s.R(e);Ir(a)||0<a.X(t);)r-=n,s=ln(r),a=s.R(e);Tn(s)&&(s=cm),i=i.add(s),t=Wd(t,a)}return new Uo(i,t)}z.gb=function(t){return Hd(this,t).h};z.and=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)&t.D(n);return new ke(r,this.h&t.h)};z.or=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)|t.D(n);return new ke(r,this.h|t.h)};z.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)^t.D(n);return new ke(r,this.h^t.h)};function Lv(t){for(var e=t.g.length+1,r=[],n=0;n<e;n++)r[n]=t.D(n)<<1|t.D(n-1)>>>31;return new ke(r,t.h)}function ta(t,e){var r=e>>5;e%=32;for(var n=t.g.length-r,i=[],s=0;s<n;s++)i[s]=0<e?t.D(s+r)>>>e|t.D(s+r+1)<<32-e:t.D(s+r);return new ke(i,t.h)}qd.prototype.createWebChannel=qd.prototype.g;vr.prototype.send=vr.prototype.u;vr.prototype.open=vr.prototype.m;vr.prototype.close=vr.prototype.close;Yh.NO_ERROR=0;Yh.TIMEOUT=8;Yh.HTTP_ERROR=6;YS.COMPLETE="complete";XS.EventType=Dc;Dc.OPEN="a";Dc.CLOSE="b";Dc.ERROR="c";Dc.MESSAGE="d";vt.prototype.listen=vt.prototype.O;Ke.prototype.listenOnce=Ke.prototype.P;Ke.prototype.getLastError=Ke.prototype.Sa;Ke.prototype.getLastErrorCode=Ke.prototype.Ia;Ke.prototype.getStatus=Ke.prototype.da;Ke.prototype.getResponseJson=Ke.prototype.Wa;Ke.prototype.getResponseText=Ke.prototype.ja;Ke.prototype.send=Ke.prototype.ha;Ke.prototype.setWithCredentials=Ke.prototype.Oa;zr.prototype.digest=zr.prototype.l;zr.prototype.reset=zr.prototype.reset;zr.prototype.update=zr.prototype.j;ke.prototype.add=ke.prototype.add;ke.prototype.multiply=ke.prototype.R;ke.prototype.modulo=ke.prototype.gb;ke.prototype.compare=ke.prototype.X;ke.prototype.toNumber=ke.prototype.ea;ke.prototype.toString=ke.prototype.toString;ke.prototype.getBits=ke.prototype.D;ke.fromNumber=ln;ke.fromString=Nk;var VA=function(){return new qd},UA=function(){return zh()},Uf=Yh,BA=YS,zA=Ys,Mv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},YA=Pc,Du=XS,XA=Ke,qA=zr,Aa=ke;const $v="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new Eh("@firebase/firestore");function um(){return Ti.logLevel}function WA(t){Ti.setLogLevel(t)}function P(t,...e){if(Ti.logLevel<=me.DEBUG){const r=e.map(Ty);Ti.debug(`Firestore (${go}): ${t}`,...r)}}function Ze(t,...e){if(Ti.logLevel<=me.ERROR){const r=e.map(Ty);Ti.error(`Firestore (${go}): ${t}`,...r)}}function Yr(t,...e){if(Ti.logLevel<=me.WARN){const r=e.map(Ty);Ti.warn(`Firestore (${go}): ${t}`,...r)}}function Ty(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: `+t;throw Ze(e),new Error(e)}function Z(t,e){t||Y()}function HA(t,e){t||Y()}function B(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Wt{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(mt.UNAUTHENTICATED))}shutdown(){}}class KA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class QA{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new wt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wt,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wt)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Z(typeof n.accessToken=="string"),new Ek(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new mt(e)}}class JA{constructor(e,r,n){this.h=e,this.l=r,this.m=n,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ZA{constructor(e,r,n){this.h=e,this.l=r,this.m=n}getToken(){return Promise.resolve(new JA(this.h,this.l,this.m))}start(e,r){e.enqueueRetryable(()=>r(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tR{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,r){const n=s=>{s.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.T;return this.T=s.token,P("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Z(typeof r.token=="string"),this.T=r.token,new eR(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=rR(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%e.length))}return n}}function ne(t,e){return t<e?-1:t>e?1:0}function qa(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}function Ck(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new j(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new j(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new j(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Ve(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Ve(0,0))}static max(){return new J(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,r,n){r===void 0?r=0:r>e.length&&Y(),n===void 0?n=e.length-r:n>e.length-r&&Y(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ac.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ac?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=e.get(i),a=r.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ye extends ac{construct(e,r,n){return new ye(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new j(I.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new ye(r)}static emptyPath(){return new ye([])}}const nR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends ac{construct(e,r,n){return new et(e,r,n)}static isValidIdentifier(e){return nR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new j(I.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new j(I.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(I.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new j(I.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(r)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.path=e}static fromPath(e){return new U(ye.fromString(e))}static fromName(e){return new U(ye.fromString(e).popFirst(5))}static empty(){return new U(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ye.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new U(new ye(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,r,n,i){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=i}}function dm(t){return t.fields.find(e=>e.kind===2)}function ts(t){return t.fields.filter(e=>e.kind!==2)}jk.UNKNOWN_ID=-1;class iR{constructor(e,r){this.fieldPath=e,this.kind=r}}class Gd{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Gd(0,xr.min())}}function Dk(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(n===1e9?new Ve(r+1,0):new Ve(r,n));return new xr(i,U.empty(),e)}function Ak(t){return new xr(t.readTime,t.key,-1)}class xr{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new xr(J.min(),U.empty(),-1)}static max(){return new xr(J.max(),U.empty(),-1)}}function Cy(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=U.comparator(t.documentKey,e.documentKey),r!==0?r:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t){if(t.code!==I.FAILED_PRECONDITION||t.message!==Rk)throw t;P("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new k((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof k?r:k.resolve(r)}catch(r){return k.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):k.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):k.reject(r)}static resolve(e){return new k((r,n)=>{r(e)})}static reject(e){return new k((r,n)=>{n(e)})}static waitFor(e){return new k((r,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&r()},c=>n(c))}),a=!0,s===i&&r()})}static or(e){let r=k.resolve(!1);for(const n of e)r=r.next(i=>i?k.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,s)=>{n.push(r.call(this,i,s))}),this.waitFor(n)}static mapArray(e,r){return new k((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{a[u]=d,++o,o===s&&n(a)},d=>i(d))}})}static doWhile(e,r){return new k((n,i)=>{const s=()=>{e()===!0?r().next(()=>{s()},i):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.v=new wt,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{r.error?this.v.reject(new xl(e,r.error)):this.v.resolve()},this.transaction.onerror=n=>{const i=jy(n.target.error);this.v.reject(new xl(e,i))}}static open(e,r,n,i){try{return new Jh(r,e.transaction(i,n))}catch(s){throw new xl(r,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new aR(r)}}class $r{constructor(e,r,n){this.name=e,this.version=r,this.V=n,$r.S(Xe())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return P("SimpleDb","Removing database:",e),rs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Yl())return!1;if($r.C())return!0;const e=Xe(),r=$r.S(e),n=0<r&&r<10,i=$r.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.k)==="YES"}static M(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const r=e.match(/Android ([\d.]+)/i),n=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(P("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;r(a)},i.onblocked=()=>{n(new xl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?n(new j(I.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new j(I.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new xl(e,a))},i.onupgradeneeded=s=>{P("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.V.O(a,i.transaction,s.oldVersion,this.version).next(()=>{P("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=r=>this.F(r)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const s=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.$(e);const o=Jh.open(this.db,e,s?"readonly":"readwrite",n),c=i(o).next(u=>(o.P(),u)).catch(u=>(o.abort(u),k.reject(u))).toPromise();return c.catch(()=>{}),await o.R,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&a<3;if(P("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class sR{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return rs(this.L.delete())}}class xl extends j{constructor(e,r){super(I.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Xi(t){return t.name==="IndexedDbTransactionError"}class aR{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(P("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),rs(n)}add(e){return P("SimpleDb","ADD",this.store.name,e,e),rs(this.store.add(e))}get(e){return rs(this.store.get(e)).next(r=>(r===void 0&&(r=null),P("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return P("SimpleDb","DELETE",this.store.name,e),rs(this.store.delete(e))}count(){return P("SimpleDb","COUNT",this.store.name),rs(this.store.count())}j(e,r){const n=this.options(e,r);if(n.index||typeof this.store.getAll!="function"){const i=this.cursor(n),s=[];return this.W(i,(a,o)=>{s.push(o)}).next(()=>s)}{const i=this.store.getAll(n.range);return new k((s,a)=>{i.onerror=o=>{a(o.target.error)},i.onsuccess=o=>{s(o.target.result)}})}}H(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new k((i,s)=>{n.onerror=a=>{s(a.target.error)},n.onsuccess=a=>{i(a.target.result)}})}J(e,r){P("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.Y=!1;const i=this.cursor(n);return this.W(i,(s,a,o)=>o.delete())}X(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.W(i,r)}Z(e){const r=this.cursor({});return new k((n,i)=>{r.onerror=s=>{const a=jy(s.target.error);i(a)},r.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new k((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const c=new sR(o),u=r(o.primaryKey,o.value,c);if(u instanceof k){const d=u.catch(h=>(c.done(),k.reject(h)));n.push(d)}c.isDone?i():c.K===null?o.continue():o.continue(c.K)}}).next(()=>k.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function rs(t){return new k((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=jy(n.target.error);r(i)}})}let Fv=!1;function jy(t){const e=$r.S(Xe());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fv||(Fv=!0,setTimeout(()=>{throw n},0)),n}}return t}class oR{constructor(e,r){this.asyncQueue=e,this.tt=r,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}et(e){P("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{P("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(r){Xi(r)?P("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):await Yi(r)}await this.et(6e4)})}}class lR{constructor(e,r){this.localStore=e,this.persistence=r}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.st(r,e))}st(e,r){const n=new Set;let i=r,s=!0;return k.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return P("IndexBackiller",`Processing collection: ${a}`),this.it(e,a,i).next(o=>{i-=o,n.add(a)});s=!1})).next(()=>r-i)}it(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(i=>this.localStore.localDocuments.getNextDocuments(e,r,i,n).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.rt(i,s)).next(o=>(P("IndexBackiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}rt(e,r){let n=e;return r.changes.forEach((i,s)=>{const a=Ak(s);Cy(a,n)>0&&(n=a)}),new xr(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ot(n),this.ut=n=>r.writeSequenceNumber(n))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}ir.ct=-1;function Mc(t){return t==null}function oc(t){return t===0&&1/t==-1/0}function Ok(t){return typeof t=="number"&&Number.isInteger(t)&&!oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Vv(e)),e=cR(t.get(r),e);return Vv(e)}function cR(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const s=t.charAt(i);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function Vv(t){return t+""}function cn(t){const e=t.length;if(Z(e>=2),e===2)return Z(t.charAt(0)===""&&t.charAt(1)===""),ye.emptyPath();const r=e-2,n=[];let i="";for(let s=0;s<e;){const a=t.indexOf("",s);switch((a<0||a>r)&&Y(),t.charAt(a+1)){case"":const o=t.substring(s,a);let c;i.length===0?c=o:(i+=o,c=i,i=""),n.push(c);break;case"":i+=t.substring(s,a),i+="\0";break;case"":i+=t.substring(s,a+1);break;default:Y()}s=a+2}return new ye(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t,e){return[t,Ht(e)]}function Lk(t,e,r){return[t,Ht(e),r]}const uR={},dR=["prefixPath","collectionGroup","readTime","documentId"],hR=["prefixPath","collectionGroup","documentId"],pR=["collectionGroup","readTime","prefixPath","documentId"],fR=["canonicalId","targetId"],gR=["targetId","path"],mR=["path","targetId"],yR=["collectionId","parent"],wR=["indexId","uid"],vR=["uid","sequenceNumber"],xR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bR=["indexId","uid","orderedDocumentKey"],_R=["userId","collectionPath","documentId"],SR=["userId","collectionPath","largestBatchId"],kR=["userId","collectionGroup","largestBatchId"],Mk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IR=[...Mk,"documentOverlays"],$k=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fk=$k,NR=[...Fk,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends Pk{constructor(e,r){super(),this.ht=e,this.currentSequenceNumber=r}}function bt(t,e){const r=B(t);return $r.M(r.ht,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Xs(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Vk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,r){this.comparator=e,this.root=r||Nt.EMPTY}insert(e,r){return new je(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Au(this.root,e,this.comparator,!1)}getReverseIterator(){return new Au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Au(this.root,e,this.comparator,!0)}}class Au{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??Nt.RED,this.left=i??Nt.EMPTY,this.right=s??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new Nt(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Nt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(t,e,r,n,i){return this}insert(t,e,r){return new Nt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new zv(this.data.getIterator())}getIteratorFrom(e){return new zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Oe)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Oe(this.comparator);return r.data=e,r}}class zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ra(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new sr([])}unionWith(e){let r=new Oe(et.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new sr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(n){try{return atob(n)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Uk("Invalid base64 string: "+i):i}}(e);return new ht(r)}static fromUint8Array(e){const r=function(n){let i="";for(let s=0;s<n.length;++s)i+=String.fromCharCode(n[s]);return i}(e);return new ht(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const TR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(t){if(Z(!!t),typeof t=="string"){let e=0;const r=TR.exec(t);if(Z(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ji(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Dy(t){const e=t.mapValue.fields.__previous_value__;return Zh(e)?Dy(e):e}function lc(t){const e=Ci(t.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,r,n,i,s,a,o,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class Di{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Di("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Di&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nd={nullValue:"NULL_VALUE"};function Ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zh(t)?4:Bk(t)?9007199254740991:10:Y()}function wn(t,e){if(t===e)return!0;const r=Ds(t);if(r!==Ds(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lc(t).isEqual(lc(e));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const s=Ci(n.timestampValue),a=Ci(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,i){return ji(n.bytesValue).isEqual(ji(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,i){return Ge(n.geoPointValue.latitude)===Ge(i.geoPointValue.latitude)&&Ge(n.geoPointValue.longitude)===Ge(i.geoPointValue.longitude)}(t,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return Ge(n.integerValue)===Ge(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const s=Ge(n.doubleValue),a=Ge(i.doubleValue);return s===a?oc(s)===oc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return qa(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:return function(n,i){const s=n.mapValue.fields||{},a=i.mapValue.fields||{};if(Bv(s)!==Bv(a))return!1;for(const o in s)if(s.hasOwnProperty(o)&&(a[o]===void 0||!wn(s[o],a[o])))return!1;return!0}(t,e);default:return Y()}}function cc(t,e){return(t.values||[]).find(r=>wn(r,e))!==void 0}function Ai(t,e){if(t===e)return 0;const r=Ds(t),n=Ds(e);if(r!==n)return ne(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(i,s){const a=Ge(i.integerValue||i.doubleValue),o=Ge(s.integerValue||s.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return Yv(t.timestampValue,e.timestampValue);case 4:return Yv(lc(t),lc(e));case 5:return ne(t.stringValue,e.stringValue);case 6:return function(i,s){const a=ji(i),o=ji(s);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const a=i.split("/"),o=s.split("/");for(let c=0;c<a.length&&c<o.length;c++){const u=ne(a[c],o[c]);if(u!==0)return u}return ne(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const a=ne(Ge(i.latitude),Ge(s.latitude));return a!==0?a:ne(Ge(i.longitude),Ge(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const a=i.values||[],o=s.values||[];for(let c=0;c<a.length&&c<o.length;++c){const u=Ai(a[c],o[c]);if(u)return u}return ne(a.length,o.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===di.mapValue&&s===di.mapValue)return 0;if(i===di.mapValue)return 1;if(s===di.mapValue)return-1;const a=i.fields||{},o=Object.keys(a),c=s.fields||{},u=Object.keys(c);o.sort(),u.sort();for(let d=0;d<o.length&&d<u.length;++d){const h=ne(o[d],u[d]);if(h!==0)return h;const p=Ai(a[o[d]],c[u[d]]);if(p!==0)return p}return ne(o.length,u.length)}(t.mapValue,e.mapValue);default:throw Y()}}function Yv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const r=Ci(t),n=Ci(e),i=ne(r.seconds,n.seconds);return i!==0?i:ne(r.nanos,n.nanos)}function Wa(t){return pm(t)}function pm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ci(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ji(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,U.fromName(r).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=pm(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of i)a?a=!1:s+=",",s+=`${o}:${pm(n.fields[o])}`;return s+"}"}(t.mapValue):Y();var e,r}function As(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fm(t){return!!t&&"integerValue"in t}function uc(t){return!!t&&"arrayValue"in t}function Xv(t){return!!t&&"nullValue"in t}function qv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function id(t){return!!t&&"mapValue"in t}function bl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xs(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=bl(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=bl(t.arrayValue.values[r]);return e}return Object.assign({},t)}function Bk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function jR(t){return"nullValue"in t?nd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?As(Di.empty(),U.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Y()}function DR(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?As(Di.empty(),U.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?di:Y()}function Wv(t,e){const r=Ai(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Hv(t,e){const r=Ai(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.value=e}static empty(){return new Tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!id(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=bl(r)}setAll(e){let r=et.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=o.popLast()}a?n[o.lastSegment()]=bl(a):i.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());id(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];id(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Xs(r,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new Tt(bl(this.value))}}function zk(t){const e=[];return Xs(t.fields,(r,n)=>{const i=new et([r]);if(id(n)){const s=zk(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,r,n,i,s,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Re(e,0,J.min(),J.min(),J.min(),Tt.empty(),0)}static newFoundDocument(e,r,n,i){return new Re(e,1,r,J.min(),n,i,0)}static newNoDocument(e,r){return new Re(e,2,r,J.min(),J.min(),Tt.empty(),0)}static newUnknownDocument(e,r){return new Re(e,3,r,J.min(),J.min(),Tt.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Re&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Re(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,r){this.position=e,this.inclusive=r}}function Gv(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=U.comparator(U.fromName(a.referenceValue),r.key):n=Ai(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Kv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!wn(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,r="asc"){this.field=e,this.dir=r}}function AR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{}class de extends Yk{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new RR(e,r,n):r==="array-contains"?new LR(e,n):r==="in"?new Kk(e,n):r==="not-in"?new MR(e,n):r==="array-contains-any"?new $R(e,n):new de(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new PR(e,n):new OR(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Ai(r,this.value)):r!==null&&Ds(this.value)===Ds(r)&&this.matchesComparison(Ai(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _e extends Yk{constructor(e,r){super(),this.filters=e,this.op=r,this.lt=null}static create(e,r){return new _e(e,r)}matches(e){return Ha(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(r=>r.isInequality());return e!==null?e.field:null}ft(e){for(const r of this.getFlattenedFilters())if(e(r))return r;return null}}function Ha(t){return t.op==="and"}function gm(t){return t.op==="or"}function Ay(t){return Xk(t)&&Ha(t)}function Xk(t){for(const e of t.filters)if(e instanceof _e)return!1;return!0}function mm(t){if(t instanceof de)return t.field.canonicalString()+t.op.toString()+Wa(t.value);if(Ay(t))return t.filters.map(e=>mm(e)).join(",");{const e=t.filters.map(r=>mm(r)).join(",");return`${t.op}(${e})`}}function qk(t,e){return t instanceof de?function(r,n){return n instanceof de&&r.op===n.op&&r.field.isEqual(n.field)&&wn(r.value,n.value)}(t,e):t instanceof _e?function(r,n){return n instanceof _e&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((i,s,a)=>i&&qk(s,n.filters[a]),!0):!1}(t,e):void Y()}function Wk(t,e){const r=t.filters.concat(e);return _e.create(r,t.op)}function Hk(t){return t instanceof de?function(e){return`${e.field.canonicalString()} ${e.op} ${Wa(e.value)}`}(t):t instanceof _e?function(e){return e.op.toString()+" {"+e.getFilters().map(Hk).join(" ,")+"}"}(t):"Filter"}class RR extends de{constructor(e,r,n){super(e,r,n),this.key=U.fromName(n.referenceValue)}matches(e){const r=U.comparator(e.key,this.key);return this.matchesComparison(r)}}class PR extends de{constructor(e,r){super(e,"in",r),this.keys=Gk("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class OR extends de{constructor(e,r){super(e,"not-in",r),this.keys=Gk("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Gk(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>U.fromName(n.referenceValue))}class LR extends de{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return uc(r)&&cc(r.arrayValue,this.value)}}class Kk extends de{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&cc(this.value.arrayValue,r)}}class MR extends de{constructor(e,r){super(e,"not-in",r)}matches(e){if(cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!cc(this.value.arrayValue,r)}}class $R extends de{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!uc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>cc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,r=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.dt=null}}function ym(t,e=null,r=[],n=[],i=null,s=null,a=null){return new FR(t,e,r,n,i,s,a)}function Rs(t){const e=B(t);if(e.dt===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>mm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Mc(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Wa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Wa(n)).join(",")),e.dt=r}return e.dt}function $c(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!AR(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!qk(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kv(t.startAt,e.startAt)&&Kv(t.endAt,e.endAt)}function Kd(t){return U.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qd(t,e){return t.filters.filter(r=>r instanceof de&&r.field.isEqual(e))}function Qv(t,e,r){let n=nd,i=!0;for(const s of Qd(t,e)){let a=nd,o=!0;switch(s.op){case"<":case"<=":a=jR(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=nd}Wv({value:n,inclusive:i},{value:a,inclusive:o})<0&&(n=a,i=o)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=r.position[s];Wv({value:n,inclusive:i},{value:a,inclusive:r.inclusive})<0&&(n=a,i=r.inclusive);break}}return{value:n,inclusive:i}}function Jv(t,e,r){let n=di,i=!0;for(const s of Qd(t,e)){let a=di,o=!0;switch(s.op){case">=":case">":a=DR(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=di}Hv({value:n,inclusive:i},{value:a,inclusive:o})>0&&(n=a,i=o)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=r.position[s];Hv({value:n,inclusive:i},{value:a,inclusive:r.inclusive})>0&&(n=a,i=r.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,r=null,n=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.wt=null,this._t=null,this.startAt,this.endAt}}function Qk(t,e,r,n,i,s,a,o){return new Yn(t,e,r,n,i,s,a,o)}function mo(t){return new Yn(t)}function Zv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ry(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ep(t){for(const e of t.filters){const r=e.getFirstInequalityField();if(r!==null)return r}return null}function Py(t){return t.collectionGroup!==null}function bs(t){const e=B(t);if(e.wt===null){e.wt=[];const r=ep(e),n=Ry(e);if(r!==null&&n===null)r.isKeyField()||e.wt.push(new Ra(r)),e.wt.push(new Ra(et.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ra(et.keyField(),s))}}}return e.wt}function ur(t){const e=B(t);if(!e._t)if(e.limitType==="F")e._t=ym(e.path,e.collectionGroup,bs(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const s of bs(e)){const a=s.dir==="desc"?"asc":"desc";r.push(new Ra(s.field,a))}const n=e.endAt?new Ri(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ri(e.startAt.position,e.startAt.inclusive):null;e._t=ym(e.path,e.collectionGroup,r,e.filters,e.limit,n,i)}return e._t}function wm(t,e){e.getFirstInequalityField(),ep(t);const r=t.filters.concat([e]);return new Yn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Jd(t,e,r){return new Yn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Fc(t,e){return $c(ur(t),ur(e))&&t.limitType===e.limitType}function Jk(t){return`${Rs(ur(t))}|lt:${t.limitType}`}function vm(t){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(n=>Hk(n)).join(", ")}]`),Mc(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Wa(n)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Wa(n)).join(",")),`Target(${r})`}(ur(t))}; limitType=${t.limitType})`}function Vc(t,e){return e.isFoundDocument()&&function(r,n){const i=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):U.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,n){for(const i of bs(r))if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,n){for(const i of r.filters)if(!i.matches(n))return!1;return!0}(t,e)&&function(r,n){return!(r.startAt&&!function(i,s,a){const o=Gv(i,s,a);return i.inclusive?o<=0:o<0}(r.startAt,bs(r),n)||r.endAt&&!function(i,s,a){const o=Gv(i,s,a);return i.inclusive?o>=0:o>0}(r.endAt,bs(r),n))}(t,e)}function Zk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eI(t){return(e,r)=>{let n=!1;for(const i of bs(t)){const s=VR(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function VR(t,e,r){const n=t.field.isKeyField()?U.comparator(e.key,r.key):function(i,s,a){const o=s.data.field(i),c=a.data.field(i);return o!==null&&c!==null?Ai(o,c):Y()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xs(this.inner,(r,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return Vk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=new je(U.comparator);function ar(){return UR}const tI=new je(U.comparator);function il(...t){let e=tI;for(const r of t)e=e.insert(r.key,r);return e}function rI(t){let e=tI;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function un(){return _l()}function nI(){return _l()}function _l(){return new qi(t=>t.toString(),(t,e)=>t.isEqual(e))}const BR=new je(U.comparator),zR=new Oe(U.comparator);function ie(...t){let e=zR;for(const r of t)e=e.add(r);return e}const YR=new Oe(ne);function Oy(){return YR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oc(e)?"-0":e}}function sI(t){return{integerValue:""+t}}function aI(t,e){return Ok(e)?sI(e):iI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this._=void 0}}function XR(t,e,r){return t instanceof Ga?function(n,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&Zh(i)&&(i=Dy(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(r,e):t instanceof Ps?lI(t,e):t instanceof Os?cI(t,e):function(n,i){const s=oI(n,i),a=ex(s)+ex(n.gt);return fm(s)&&fm(n.gt)?sI(a):iI(n.serializer,a)}(t,e)}function qR(t,e,r){return t instanceof Ps?lI(t,e):t instanceof Os?cI(t,e):r}function oI(t,e){return t instanceof Ka?fm(r=e)||function(n){return!!n&&"doubleValue"in n}(r)?e:{integerValue:0}:null;var r}class Ga extends tp{}class Ps extends tp{constructor(e){super(),this.elements=e}}function lI(t,e){const r=uI(e);for(const n of t.elements)r.some(i=>wn(i,n))||r.push(n);return{arrayValue:{values:r}}}class Os extends tp{constructor(e){super(),this.elements=e}}function cI(t,e){let r=uI(e);for(const n of t.elements)r=r.filter(i=>!wn(i,n));return{arrayValue:{values:r}}}class Ka extends tp{constructor(e,r){super(),this.serializer=e,this.gt=r}}function ex(t){return Ge(t.integerValue||t.doubleValue)}function uI(t){return uc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,r){this.field=e,this.transform=r}}function WR(t,e){return t.field.isEqual(e.field)&&function(r,n){return r instanceof Ps&&n instanceof Ps||r instanceof Os&&n instanceof Os?qa(r.elements,n.elements,wn):r instanceof Ka&&n instanceof Ka?wn(r.gt,n.gt):r instanceof Ga&&n instanceof Ga}(t.transform,e.transform)}class HR{constructor(e,r){this.version=e,this.transformResults=r}}class Fe{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Fe}static exists(e){return new Fe(void 0,e)}static updateTime(e){return new Fe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rp{}function dI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wo(t.key,Fe.none()):new yo(t.key,t.data,Fe.none());{const r=t.data,n=Tt.empty();let i=new Oe(et.comparator);for(let s of e.fields)if(!i.has(s)){let a=r.field(s);a===null&&s.length>1&&(s=s.popLast(),a=r.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Xn(t.key,n,new sr(i.toArray()),Fe.none())}}function GR(t,e,r){t instanceof yo?function(n,i,s){const a=n.value.clone(),o=rx(n.fieldTransforms,i,s.transformResults);a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Xn?function(n,i,s){if(!sd(n.precondition,i))return void i.convertToUnknownDocument(s.version);const a=rx(n.fieldTransforms,i,s.transformResults),o=i.data;o.setAll(hI(n)),o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,r):function(n,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function Sl(t,e,r,n){return t instanceof yo?function(i,s,a,o){if(!sd(i.precondition,s))return a;const c=i.value.clone(),u=nx(i.fieldTransforms,o,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Xn?function(i,s,a,o){if(!sd(i.precondition,s))return a;const c=nx(i.fieldTransforms,o,s),u=s.data;return u.setAll(hI(i)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,s,a){return sd(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,r)}function KR(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=oI(n.transform,i||null);s!=null&&(r===null&&(r=Tt.empty()),r.set(n.field,s))}return r||null}function tx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&qa(r,n,(i,s)=>WR(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yo extends rp{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xn extends rp{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function hI(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function rx(t,e,r){const n=new Map;Z(t.length===r.length);for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,qR(a,o,r[i]))}return n}function nx(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,XR(s,a,e))}return n}class wo extends rp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ly extends rp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&GR(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Sl(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Sl(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=nI();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=r.has(i.key)?null:o;const c=dI(a,o);c!==null&&n.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(J.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ie())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,(r,n)=>tx(r,n))&&qa(this.baseMutations,e.baseMutations,(r,n)=>tx(r,n))}}class $y{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Z(e.mutations.length===n.length);let i=BR;const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new $y(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,ge;function pI(t){switch(t){default:return Y();case I.CANCELLED:case I.UNKNOWN:case I.DEADLINE_EXCEEDED:case I.RESOURCE_EXHAUSTED:case I.INTERNAL:case I.UNAVAILABLE:case I.UNAUTHENTICATED:return!1;case I.INVALID_ARGUMENT:case I.NOT_FOUND:case I.ALREADY_EXISTS:case I.PERMISSION_DENIED:case I.FAILED_PRECONDITION:case I.ABORTED:case I.OUT_OF_RANGE:case I.UNIMPLEMENTED:case I.DATA_LOSS:return!0}}function fI(t){if(t===void 0)return Ze("GRPC error has no .code"),I.UNKNOWN;switch(t){case it.OK:return I.OK;case it.CANCELLED:return I.CANCELLED;case it.UNKNOWN:return I.UNKNOWN;case it.DEADLINE_EXCEEDED:return I.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return I.RESOURCE_EXHAUSTED;case it.INTERNAL:return I.INTERNAL;case it.UNAVAILABLE:return I.UNAVAILABLE;case it.UNAUTHENTICATED:return I.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return I.INVALID_ARGUMENT;case it.NOT_FOUND:return I.NOT_FOUND;case it.ALREADY_EXISTS:return I.ALREADY_EXISTS;case it.PERMISSION_DENIED:return I.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return I.FAILED_PRECONDITION;case it.ABORTED:return I.ABORTED;case it.OUT_OF_RANGE:return I.OUT_OF_RANGE;case it.UNIMPLEMENTED:return I.UNIMPLEMENTED;case it.DATA_LOSS:return I.DATA_LOSS;default:return Y()}}(ge=it||(it={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ru}static getOrCreateInstance(){return Ru===null&&(Ru=new Vy),Ru}onExistenceFilterMismatch(e){const r=Symbol();return this.onExistenceFilterMismatchCallbacks.set(r,e),()=>this.onExistenceFilterMismatchCallbacks.delete(r)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(r=>r(e))}}let Ru=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new Aa([4294967295,4294967295],0);function ix(t){const e=gI().encode(t),r=new qA;return r.update(e),new Uint8Array(r.digest())}function sx(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Aa([r,n],0),new Aa([i,s],0)]}class Uy{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new sl(`Invalid padding: ${r}`);if(n<0)throw new sl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new sl(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new sl(`Invalid padding when bitmap length is 0: ${r}`);this.It=8*e.length-r,this.Tt=Aa.fromNumber(this.It)}Et(e,r,n){let i=e.add(r.multiply(Aa.fromNumber(n)));return i.compare(JR)===1&&(i=new Aa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const r=ix(e),[n,i]=sx(r);for(let s=0;s<this.hashCount;s++){const a=this.Et(n,i,s);if(!this.At(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Uy(s,i,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.It===0)return;const r=ix(e),[n,i]=sx(r);for(let s=0;s<this.hashCount;s++){const a=this.Et(n,i,s);this.Rt(a)}}Rt(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Bc(J.min(),i,new je(ne),ar(),ie())}}class zc{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new zc(n,r,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,r,n,i){this.Pt=e,this.removedTargetIds=r,this.key=n,this.bt=i}}class mI{constructor(e,r){this.targetId=e,this.Vt=r}}class yI{constructor(e,r,n=ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class ax{constructor(){this.St=0,this.Dt=lx(),this.Ct=ht.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ie(),r=ie(),n=ie();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Y()}}),new zc(this.Ct,this.xt,e,r,n)}Ft(){this.Nt=!1,this.Dt=lx()}Bt(e,r){this.Nt=!0,this.Dt=this.Dt.insert(e,r)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ZR{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ar(),this.zt=ox(),this.Wt=new je(ne)}Ht(e){for(const r of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt);for(const r of e.removedTargetIds)this.Yt(r,e.key,e.bt)}Xt(e){this.forEachTarget(e,r=>{const n=this.Zt(r);switch(e.state){case 0:this.te(r)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(r);break;case 3:this.te(r)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(r)&&(this.ee(r),n.$t(e.resumeToken));break;default:Y()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Qt.forEach((n,i)=>{this.te(i)&&r(i)})}ne(e){var r;const n=e.targetId,i=e.Vt.count,s=this.se(n);if(s){const a=s.target;if(Kd(a))if(i===0){const o=new U(a.path);this.Yt(n,o,Re.newNoDocument(o,J.min()))}else Z(i===1);else{const o=this.ie(n);if(o!==i){const c=this.re(e,o);if(c!==0){this.ee(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,u)}(r=Vy.instance)===null||r===void 0||r.notifyOnExistenceFilterMismatch(function(u,d,h){var p,g,y,v,x,m;const f={localCacheCount:d,existenceFilterCount:h.count},w=h.unchangedNames;return w&&(f.bloomFilter={applied:u===0,hashCount:(p=w==null?void 0:w.hashCount)!==null&&p!==void 0?p:0,bitmapLength:(v=(y=(g=w==null?void 0:w.bits)===null||g===void 0?void 0:g.bitmap)===null||y===void 0?void 0:y.length)!==null&&v!==void 0?v:0,padding:(m=(x=w==null?void 0:w.bits)===null||x===void 0?void 0:x.padding)!==null&&m!==void 0?m:0}),f}(c,o,e.Vt))}}}}re(e,r){const{unchangedNames:n,count:i}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:s="",padding:a=0},hashCount:o=0}=n;let c,u;try{c=ji(s).toUint8Array()}catch(d){if(d instanceof Uk)return Yr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw d}try{u=new Uy(c,a,o)}catch(d){return Yr(d instanceof sl?"BloomFilter error: ":"Applying bloom filter failed: ",d),1}return u.It===0?1:i!==r-this.oe(e.targetId,u)?2:0}oe(e,r){const n=this.Gt.getRemoteKeysForTarget(e);let i=0;return n.forEach(s=>{const a=this.Gt.ue(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;r.vt(o)||(this.Yt(e,s,null),i++)}),i}ce(e){const r=new Map;this.Qt.forEach((s,a)=>{const o=this.se(a);if(o){if(s.current&&Kd(o.target)){const c=new U(o.target.path);this.jt.get(c)!==null||this.ae(a,c)||this.Yt(a,c,Re.newNoDocument(c,e))}s.Mt&&(r.set(a,s.Ot()),s.Ft())}});let n=ie();this.zt.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.se(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.jt.forEach((s,a)=>a.setReadTime(e));const i=new Bc(e,r,this.Wt,this.jt,n);return this.jt=ar(),this.zt=ox(),this.Wt=new je(ne),i}Jt(e,r){if(!this.te(e))return;const n=this.ae(e,r.key)?2:0;this.Zt(e).Bt(r.key,n),this.jt=this.jt.insert(r.key,r),this.zt=this.zt.insert(r.key,this.he(r.key).add(e))}Yt(e,r,n){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,r)?i.Bt(r,1):i.Lt(r),this.zt=this.zt.insert(r,this.he(r).delete(e)),n&&(this.jt=this.jt.insert(r,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const r=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let r=this.Qt.get(e);return r||(r=new ax,this.Qt.set(e,r)),r}he(e){let r=this.zt.get(e);return r||(r=new Oe(ne),this.zt=this.zt.insert(e,r)),r}te(e){const r=this.se(e)!==null;return r||P("WatchChangeAggregator","Detected inactive target",e),r}se(e){const r=this.Qt.get(e);return r&&r.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new ax),this.Gt.getRemoteKeysForTarget(e).forEach(r=>{this.Yt(e,r,null)})}ae(e,r){return this.Gt.getRemoteKeysForTarget(e).has(r)}}function ox(){return new je(U.comparator)}function lx(){return new je(U.comparator)}const eP=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),tP=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),rP=(()=>({and:"AND",or:"OR"}))();class nP{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function xm(t,e){return t.useProto3Json||Mc(e)?e:{value:e}}function Qa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iP(t,e){return Qa(t,e.toTimestamp())}function tt(t){return Z(!!t),J.fromTimestamp(function(e){const r=Ci(e);return new Ve(r.seconds,r.nanos)}(t))}function By(t,e){return function(r){return new ye(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function vI(t){const e=ye.fromString(t);return Z(TI(e)),e}function dc(t,e){return By(t.databaseId,e.path)}function fn(t,e){const r=vI(e);if(r.get(1)!==t.databaseId.projectId)throw new j(I.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new j(I.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new U(bI(r))}function bm(t,e){return By(t.databaseId,e)}function xI(t){const e=vI(t);return e.length===4?ye.emptyPath():bI(e)}function hc(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bI(t){return Z(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cx(t,e,r){return{name:dc(t,e),fields:r.value.mapValue.fields}}function _I(t,e,r){const n=fn(t,e.name),i=tt(e.updateTime),s=e.createTime?tt(e.createTime):J.min(),a=new Tt({mapValue:{fields:e.fields}}),o=Re.newFoundDocument(n,i,s,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function sP(t,e){return"found"in e?function(r,n){Z(!!n.found),n.found.name,n.found.updateTime;const i=fn(r,n.found.name),s=tt(n.found.updateTime),a=n.found.createTime?tt(n.found.createTime):J.min(),o=new Tt({mapValue:{fields:n.found.fields}});return Re.newFoundDocument(i,s,a,o)}(t,e):"missing"in e?function(r,n){Z(!!n.missing),Z(!!n.readTime);const i=fn(r,n.missing),s=tt(n.readTime);return Re.newNoDocument(i,s)}(t,e):Y()}function aP(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Z(u===void 0||typeof u=="string"),ht.fromBase64String(u||"")):(Z(u===void 0||u instanceof Uint8Array),ht.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?I.UNKNOWN:fI(c.code);return new j(u,c.message||"")}(a);r=new yI(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=fn(t,n.document.name),s=tt(n.document.updateTime),a=n.document.createTime?tt(n.document.createTime):J.min(),o=new Tt({mapValue:{fields:n.document.fields}}),c=Re.newFoundDocument(i,s,a,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new ad(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=fn(t,n.document),s=n.readTime?tt(n.readTime):J.min(),a=Re.newNoDocument(i,s),o=n.removedTargetIds||[];r=new ad([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=fn(t,n.document),s=n.removedTargetIds||[];r=new ad([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new QR(i,s),o=n.targetId;r=new mI(o,a)}}return r}function pc(t,e){let r;if(e instanceof yo)r={update:cx(t,e.key,e.value)};else if(e instanceof wo)r={delete:dc(t,e.key)};else if(e instanceof Xn)r={update:cx(t,e.key,e.data),updateMask:hP(e.fieldMask)};else{if(!(e instanceof Ly))return Y();r={verify:dc(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,s){const a=s.transform;if(a instanceof Ga)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ps)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Os)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ka)return{fieldPath:s.field.canonicalString(),increment:a.gt};throw Y()}(0,n))),e.precondition.isNone||(r.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:iP(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),r}function _m(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?Fe.updateTime(tt(i.updateTime)):i.exists!==void 0?Fe.exists(i.exists):Fe.none()}(e.currentDocument):Fe.none(),n=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let o=null;if("setToServerValue"in a)Z(a.setToServerValue==="REQUEST_TIME"),o=new Ga;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];o=new Ps(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];o=new Os(u)}else"increment"in a?o=new Ka(s,a.increment):Y();const c=et.fromServerFormat(a.fieldPath);return new Uc(c,o)}(t,i)):[];if(e.update){e.update.name;const i=fn(t,e.update.name),s=new Tt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(o){const c=o.fieldPaths||[];return new sr(c.map(u=>et.fromServerFormat(u)))}(e.updateMask);return new Xn(i,s,a,r,n)}return new yo(i,s,r,n)}if(e.delete){const i=fn(t,e.delete);return new wo(i,r)}if(e.verify){const i=fn(t,e.verify);return new Ly(i,r)}return Y()}function oP(t,e){return t&&t.length>0?(Z(e!==void 0),t.map(r=>function(n,i){let s=n.updateTime?tt(n.updateTime):tt(i);return s.isEqual(J.min())&&(s=tt(i)),new HR(s,n.transformResults||[])}(r,e))):[]}function SI(t,e){return{documents:[bm(t,e.path)]}}function kI(t,e){const r={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(r.parent=bm(t,n),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=bm(t,n.popLast()),r.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(c){if(c.length!==0)return EI(_e.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const s=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:ia(d.field),direction:cP(d.dir)}}(u))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const a=xm(t,e.limit);var o;return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt={before:(o=e.startAt).inclusive,values:o.position}),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),r}function II(t){let e=xI(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Z(n===1);const d=r.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(d){const h=NI(d);return h instanceof _e&&Ay(h)?h.getFilters():[h]}(r.where));let a=[];r.orderBy&&(a=r.orderBy.map(d=>function(h){return new Ra(sa(h.field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(d)));let o=null;r.limit&&(o=function(d){let h;return h=typeof d=="object"?d.value:d,Mc(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(d){const h=!!d.before,p=d.values||[];return new Ri(p,h)}(r.startAt));let u=null;return r.endAt&&(u=function(d){const h=!d.before,p=d.values||[];return new Ri(p,h)}(r.endAt)),Qk(e,i,a,s,o,"F",c,u)}function lP(t,e){const r=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function NI(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=sa(e.unaryFilter.field);return de.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=sa(e.unaryFilter.field);return de.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=sa(e.unaryFilter.field);return de.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=sa(e.unaryFilter.field);return de.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(e){return de.create(sa(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return _e.create(e.compositeFilter.filters.map(r=>NI(r)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Y()}}(e.compositeFilter.op))}(t):Y()}function cP(t){return eP[t]}function uP(t){return tP[t]}function dP(t){return rP[t]}function ia(t){return{fieldPath:t.canonicalString()}}function sa(t){return et.fromServerFormat(t.fieldPath)}function EI(t){return t instanceof de?function(e){if(e.op==="=="){if(qv(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NAN"}};if(Xv(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(qv(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NOT_NAN"}};if(Xv(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ia(e.field),op:uP(e.op),value:e.value}}}(t):t instanceof _e?function(e){const r=e.getFilters().map(n=>EI(n));return r.length===1?r[0]:{compositeFilter:{op:dP(e.op),filters:r}}}(t):Y()}function hP(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function TI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,r,n,i,s=J.min(),a=J.min(),o=ht.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new Cn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Cn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.fe=e}}function pP(t,e){let r;if(e.document)r=_I(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=U.fromSegments(e.noDocument.path),i=Ms(e.noDocument.readTime);r=Re.newNoDocument(n,i),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{const n=U.fromSegments(e.unknownDocument.path),i=Ms(e.unknownDocument.version);r=Re.newUnknownDocument(n,i)}}return e.readTime&&r.setReadTime(function(n){const i=new Ve(n[0],n[1]);return J.fromTimestamp(i)}(e.readTime)),r}function ux(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Zd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,s){return{name:dc(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Qa(i,s.version.toTimestamp()),createTime:Qa(i,s.createTime.toTimestamp())}}(t.fe,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Ls(e.version)};else{if(!e.isUnknownDocument())return Y();n.unknownDocument={path:r.path.toArray(),version:Ls(e.version)}}return n}function Zd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ls(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ms(t){const e=new Ve(t.seconds,t.nanoseconds);return J.fromTimestamp(e)}function ns(t,e){const r=(e.baseMutations||[]).map(s=>_m(t.fe,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>_m(t.fe,s)),i=Ve.fromMillis(e.localWriteTimeMs);return new My(e.batchId,i,r,n)}function al(t){const e=Ms(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Ms(t.lastLimboFreeSnapshotVersion):J.min();let n;var i;return t.query.documents!==void 0?(Z((i=t.query).documents.length===1),n=ur(mo(xI(i.documents[0])))):n=function(s){return ur(II(s))}(t.query),new Cn(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ht.fromBase64String(t.resumeToken))}function jI(t,e){const r=Ls(e.snapshotVersion),n=Ls(e.lastLimboFreeSnapshotVersion);let i;i=Kd(e.target)?SI(t.fe,e.target):kI(t.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Rs(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function zy(t){const e=II({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jd(e,e.limit,"L"):e}function Bf(t,e){return new Fy(e.largestBatchId,_m(t.fe,e.overlayMutation))}function dx(t,e){const r=e.path.lastSegment();return[t,Ht(e.path.popLast()),r]}function hx(t,e,r,n){return{indexId:t,uid:e.uid||"",sequenceNumber:r,readTime:Ls(n.readTime),documentKey:Ht(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{getBundleMetadata(e,r){return px(e).get(r).next(n=>{if(n)return{id:(i=n).bundleId,createTime:Ms(i.createTime),version:i.version};var i})}saveBundleMetadata(e,r){return px(e).put({bundleId:(n=r).id,createTime:Ls(tt(n.createTime)),version:n.version});var n}getNamedQuery(e,r){return fx(e).get(r).next(n=>{if(n)return{name:(i=n).name,query:zy(i.bundledQuery),readTime:Ms(i.readTime)};var i})}saveNamedQuery(e,r){return fx(e).put(function(n){return{name:n.name,readTime:Ls(tt(n.readTime)),bundledQuery:n.bundledQuery}}(r))}}function px(t){return bt(t,"bundles")}function fx(t){return bt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,r){this.serializer=e,this.userId=r}static de(e,r){const n=r.uid||"";return new np(e,n)}getOverlay(e,r){return Bo(e).get(dx(this.userId,r)).next(n=>n?Bf(this.serializer,n):null)}getOverlays(e,r){const n=un();return k.forEach(r,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,r,n){const i=[];return n.forEach((s,a)=>{const o=new Fy(r,a);i.push(this.we(e,o))}),k.waitFor(i)}removeOverlaysForBatchId(e,r,n){const i=new Set;r.forEach(a=>i.add(Ht(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);s.push(Bo(e).J("collectionPathOverlayIndex",o))}),k.waitFor(s)}getOverlaysForCollection(e,r,n){const i=un(),s=Ht(r),a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Bo(e).j("collectionPathOverlayIndex",a).next(o=>{for(const c of o){const u=Bf(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,r,n,i){const s=un();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Bo(e).X({index:"collectionGroupOverlayIndex",range:o},(c,u,d)=>{const h=Bf(this.serializer,u);s.size()<i||h.largestBatchId===a?(s.set(h.getKey(),h),a=h.largestBatchId):d.done()}).next(()=>s)}we(e,r){return Bo(e).put(function(n,i,s){const[a,o,c]=dx(i,s.mutation.key);return{userId:i,collectionPath:o,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:pc(n.fe,s.mutation)}}(this.serializer,this.userId,r))}}function Bo(t){return bt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){}_e(e,r){this.me(e,r),r.ge()}me(e,r){if("nullValue"in e)this.ye(r,5);else if("booleanValue"in e)this.ye(r,10),r.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(r,15),r.pe(Ge(e.integerValue));else if("doubleValue"in e){const n=Ge(e.doubleValue);isNaN(n)?this.ye(r,13):(this.ye(r,15),oc(n)?r.pe(0):r.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(r,20),typeof n=="string"?r.Ie(n):(r.Ie(`${n.seconds||""}`),r.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,r),this.Ee(r);else if("bytesValue"in e)this.ye(r,30),r.Ae(ji(e.bytesValue)),this.Ee(r);else if("referenceValue"in e)this.ve(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(r,45),r.pe(n.latitude||0),r.pe(n.longitude||0)}else"mapValue"in e?Bk(e)?this.ye(r,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,r),this.Ee(r)):"arrayValue"in e?(this.Pe(e.arrayValue,r),this.Ee(r)):Y()}Te(e,r){this.ye(r,25),this.be(e,r)}be(e,r){r.Ie(e)}Re(e,r){const n=e.fields||{};this.ye(r,55);for(const i of Object.keys(n))this.Te(i,r),this.me(n[i],r)}Pe(e,r){const n=e.values||[];this.ye(r,50);for(const i of n)this.me(i,r)}ve(e,r){this.ye(r,37),U.fromName(e).path.forEach(n=>{this.ye(r,60),this.be(n,r)})}ye(e,r){e.pe(r)}Ee(e){e.pe(2)}}is.Ve=new is;function gP(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function gx(t){const e=64-function(r){let n=0;for(let i=0;i<8;++i){const s=gP(255&r[i]);if(n+=s,s!==8)break}return n}(t);return Math.ceil(e/8)}class mP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.De(n.value),n=r.next();this.Ce()}xe(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ne(n.value),n=r.next();this.ke()}Me(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.De(n);else if(n<2048)this.De(960|n>>>6),this.De(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.De(480|n>>>12),this.De(128|63&n>>>6),this.De(128|63&n);else{const i=r.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ne(n);else if(n<2048)this.Ne(960|n>>>6),this.Ne(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ne(480|n>>>12),this.Ne(128|63&n>>>6),this.Ne(128|63&n);else{const i=r.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const r=this.Fe(e),n=gx(r);this.Be(1+n),this.buffer[this.position++]=255&n;for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=255&r[i]}Le(e){const r=this.Fe(e),n=gx(r);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=~(255&r[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const r=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let i=1;i<r.length;++i)r[i]^=n?255:0;return r}De(e){const r=255&e;r===0?(this.Ue(0),this.Ue(255)):r===255?(this.Ue(255),this.Ue(0)):this.Ue(r)}Ne(e){const r=255&e;r===0?(this.Ge(0),this.Ge(255)):r===255?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class yP{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class wP{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class zo{constructor(){this.je=new mP,this.ze=new yP(this.je),this.We=new wP(this.je)}seed(e){this.je.seed(e)}He(e){return e===0?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,r,n,i){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=i}Je(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new ss(this.indexId,this.documentKey,this.arrayValue,n)}}function Jn(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=mx(t.arrayValue,e.arrayValue),r!==0?r:(r=mx(t.directionalValue,e.directionalValue),r!==0?r:U.comparator(t.documentKey,e.documentKey)))}function mx(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const r of e.filters){const n=r;n.isInequality()?this.Ze=n:this.Xe.push(n)}}tn(e){Z(e.collectionGroup===this.collectionId);const r=dm(e);if(r!==void 0&&!this.en(r))return!1;const n=ts(e);let i=new Set,s=0,a=0;for(;s<n.length&&this.en(n[s]);++s)i=i.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Ze!==void 0){if(!i.has(this.Ze.field.canonicalString())){const o=n[s];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++s}for(;s<n.length;++s){const o=n[s];if(a>=this.Ye.length||!this.sn(this.Ye[a++],o))return!1}return!0}en(e){for(const r of this.Xe)if(this.nn(r,e))return!0;return!1}nn(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}sn(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){var e,r;if(Z(t instanceof de||t instanceof _e),t instanceof de){if(t instanceof Kk){const i=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>de.create(t.field,"==",s)))||[];return _e.create(i,"or")}return t}const n=t.filters.map(i=>DI(i));return _e.create(n,t.op)}function xP(t){if(t.getFilters().length===0)return[];const e=Im(DI(t));return Z(AI(e)),Sm(e)||km(e)?[e]:e.getFilters()}function Sm(t){return t instanceof de}function km(t){return t instanceof _e&&Ay(t)}function AI(t){return Sm(t)||km(t)||function(e){if(e instanceof _e&&gm(e)){for(const r of e.getFilters())if(!Sm(r)&&!km(r))return!1;return!0}return!1}(t)}function Im(t){if(Z(t instanceof de||t instanceof _e),t instanceof de)return t;if(t.filters.length===1)return Im(t.filters[0]);const e=t.filters.map(n=>Im(n));let r=_e.create(e,t.op);return r=eh(r),AI(r)?r:(Z(r instanceof _e),Z(Ha(r)),Z(r.filters.length>1),r.filters.reduce((n,i)=>Yy(n,i)))}function Yy(t,e){let r;return Z(t instanceof de||t instanceof _e),Z(e instanceof de||e instanceof _e),r=t instanceof de?e instanceof de?function(n,i){return _e.create([n,i],"and")}(t,e):yx(t,e):e instanceof de?yx(e,t):function(n,i){if(Z(n.filters.length>0&&i.filters.length>0),Ha(n)&&Ha(i))return Wk(n,i.getFilters());const s=gm(n)?n:i,a=gm(n)?i:n,o=s.filters.map(c=>Yy(c,a));return _e.create(o,"or")}(t,e),eh(r)}function yx(t,e){if(Ha(e))return Wk(e,t.getFilters());{const r=e.filters.map(n=>Yy(t,n));return _e.create(r,"or")}}function eh(t){if(Z(t instanceof de||t instanceof _e),t instanceof de)return t;const e=t.getFilters();if(e.length===1)return eh(e[0]);if(Xk(t))return t;const r=e.map(i=>eh(i)),n=[];return r.forEach(i=>{i instanceof de?n.push(i):i instanceof _e&&(i.op===t.op?n.push(...i.filters):n.push(i))}),n.length===1?n[0]:_e.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.rn=new Xy}addToCollectionParentIndex(e,r){return this.rn.add(r),k.resolve()}getCollectionParents(e,r){return k.resolve(this.rn.getEntries(r))}addFieldIndex(e,r){return k.resolve()}deleteFieldIndex(e,r){return k.resolve()}getDocumentsMatchingTarget(e,r){return k.resolve(null)}getIndexType(e,r){return k.resolve(0)}getFieldIndexes(e,r){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,r){return k.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,r){return k.resolve(xr.min())}updateCollectionGroup(e,r,n){return k.resolve()}updateIndexEntries(e,r){return k.resolve()}}class Xy{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Oe(ye.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Oe(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new Uint8Array(0);class _P{constructor(e,r){this.user=e,this.databaseId=r,this.on=new Xy,this.un=new qi(n=>Rs(n),(n,i)=>$c(n,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.on.has(r)){const n=r.lastSegment(),i=r.popLast();e.addOnCommittedListener(()=>{this.on.add(r)});const s={collectionId:n,parent:Ht(i)};return wx(e).put(s)}return k.resolve()}getCollectionParents(e,r){const n=[],i=IDBKeyRange.bound([r,""],[Ck(r),""],!1,!0);return wx(e).j(i).next(s=>{for(const a of s){if(a.collectionId!==r)break;n.push(cn(a.parent))}return n})}addFieldIndex(e,r){const n=Ou(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(r);delete i.indexId;const s=n.add(i);if(r.indexState){const a=Xo(e);return s.next(o=>{a.put(hx(o,this.user,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=Ou(e),i=Xo(e),s=Yo(e);return n.delete(r.indexId).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const n=Yo(e);let i=!0;const s=new Map;return k.forEach(this.cn(r),a=>this.an(e,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=ie();const o=[];return k.forEach(s,(c,u)=>{var d;P("IndexedDbIndexManager",`Using index ${d=c,`id=${d.indexId}|cg=${d.collectionGroup}|f=${d.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`} to execute ${Rs(r)}`);const h=function(w,b){const _=dm(b);if(_===void 0)return null;for(const S of Qd(w,_.fieldPath))switch(S.op){case"array-contains-any":return S.value.arrayValue.values||[];case"array-contains":return[S.value]}return null}(u,c),p=function(w,b){const _=new Map;for(const S of ts(b))for(const N of Qd(w,S.fieldPath))switch(N.op){case"==":case"in":_.set(S.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return _.set(S.fieldPath.canonicalString(),N.value),Array.from(_.values())}return null}(u,c),g=function(w,b){const _=[];let S=!0;for(const N of ts(b)){const T=N.kind===0?Qv(w,N.fieldPath,w.startAt):Jv(w,N.fieldPath,w.startAt);_.push(T.value),S&&(S=T.inclusive)}return new Ri(_,S)}(u,c),y=function(w,b){const _=[];let S=!0;for(const N of ts(b)){const T=N.kind===0?Jv(w,N.fieldPath,w.endAt):Qv(w,N.fieldPath,w.endAt);_.push(T.value),S&&(S=T.inclusive)}return new Ri(_,S)}(u,c),v=this.hn(c,u,g),x=this.hn(c,u,y),m=this.ln(c,u,p),f=this.fn(c.indexId,h,v,g.inclusive,x,y.inclusive,m);return k.forEach(f,w=>n.H(w,r.limit).next(b=>{b.forEach(_=>{const S=U.fromSegments(_.documentKey);a.has(S)||(a=a.add(S),o.push(S))})}))}).next(()=>o)}return k.resolve(null)})}cn(e){let r=this.un.get(e);return r||(e.filters.length===0?r=[e]:r=xP(_e.create(e.filters,"and")).map(n=>ym(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,r),r)}fn(e,r,n,i,s,a,o){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let h=0;h<c;++h){const p=r?this.dn(r[h/u]):Pu,g=this.wn(e,p,n[h%u],i),y=this._n(e,p,s[h%u],a),v=o.map(x=>this.wn(e,p,x,!0));d.push(...this.createRange(g,y,v))}return d}wn(e,r,n,i){const s=new ss(e,U.empty(),r,n);return i?s:s.Je()}_n(e,r,n,i){const s=new ss(e,U.empty(),r,n);return i?s.Je():s}an(e,r){const n=new vP(r),i=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const o of s)n.tn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const i=this.cn(r);return k.forEach(i,s=>this.an(e,s).next(a=>{a?n!==0&&a.fields.length<function(o){let c=new Oe(et.comparator),u=!1;for(const d of o.filters)for(const h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:c=c.add(h.field));for(const d of o.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(s)&&(n=1):n=0})).next(()=>function(s){return s.limit!==null}(r)&&i.length>1&&n===2?1:n)}mn(e,r){const n=new zo;for(const i of ts(e)){const s=r.data.field(i.fieldPath);if(s==null)return null;const a=n.He(i.kind);is.Ve._e(s,a)}return n.Qe()}dn(e){const r=new zo;return is.Ve._e(e,r.He(0)),r.Qe()}gn(e,r){const n=new zo;return is.Ve._e(As(this.databaseId,r),n.He(function(i){const s=ts(i);return s.length===0?0:s[s.length-1].kind}(e))),n.Qe()}ln(e,r,n){if(n===null)return[];let i=[];i.push(new zo);let s=0;for(const a of ts(e)){const o=n[s++];for(const c of i)if(this.yn(r,a.fieldPath)&&uc(o))i=this.pn(i,a,o);else{const u=c.He(a.kind);is.Ve._e(o,u)}}return this.In(i)}hn(e,r,n){return this.ln(e,r,n.position)}In(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].Qe();return r}pn(e,r,n){const i=[...e],s=[];for(const a of n.arrayValue.values||[])for(const o of i){const c=new zo;c.seed(o.Qe()),is.Ve._e(a,c.He(r.kind)),s.push(c)}return s}yn(e,r){return!!e.filters.find(n=>n instanceof de&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Ou(e),i=Xo(e);return(r?n.j("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.j()).next(s=>{const a=[];return k.forEach(s,o=>i.get([o.indexId,this.uid]).next(c=>{a.push(function(u,d){const h=d?new Gd(d.sequenceNumber,new xr(Ms(d.readTime),new U(cn(d.documentKey)),d.largestBatchId)):Gd.empty(),p=u.fields.map(([g,y])=>new iR(et.fromServerFormat(g),y));return new jk(u.indexId,u.collectionGroup,p,h)}(o,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,i)=>{const s=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ne(n.collectionGroup,i.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const i=Ou(e),s=Xo(e);return this.Tn(e).next(a=>i.j("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>k.forEach(o,c=>s.put(hx(c.indexId,this.user,a,n)))))}updateIndexEntries(e,r){const n=new Map;return k.forEach(r,(i,s)=>{const a=n.get(i.collectionGroup);return(a?k.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(o=>(n.set(i.collectionGroup,o),k.forEach(o,c=>this.En(e,i,c).next(u=>{const d=this.An(s,c);return u.isEqual(d)?k.resolve():this.vn(e,s,c,u,d)}))))})}Rn(e,r,n,i){return Yo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(n,r.key),documentKey:r.key.path.toArray()})}Pn(e,r,n,i){return Yo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(n,r.key),r.key.path.toArray()])}En(e,r,n){const i=Yo(e);let s=new Oe(Jn);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,r)])},(a,o)=>{s=s.add(new ss(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>s)}An(e,r){let n=new Oe(Jn);const i=this.mn(r,e);if(i==null)return n;const s=dm(r);if(s!=null){const a=e.data.field(s.fieldPath);if(uc(a))for(const o of a.arrayValue.values||[])n=n.add(new ss(r.indexId,e.key,this.dn(o),i))}else n=n.add(new ss(r.indexId,e.key,Pu,i));return n}vn(e,r,n,i,s){P("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(o,c,u,d,h){const p=o.getIterator(),g=c.getIterator();let y=ra(p),v=ra(g);for(;y||v;){let x=!1,m=!1;if(y&&v){const f=u(y,v);f<0?m=!0:f>0&&(x=!0)}else y!=null?m=!0:x=!0;x?(d(v),v=ra(g)):m?(h(y),y=ra(p)):(y=ra(p),v=ra(g))}}(i,s,Jn,o=>{a.push(this.Rn(e,r,n,o))},o=>{a.push(this.Pn(e,r,n,o))}),k.waitFor(a)}Tn(e){let r=1;return Xo(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,i,s)=>{s.done(),r=i.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>Jn(a,o)).filter((a,o,c)=>!o||Jn(a,c[o-1])!==0);const i=[];i.push(e);for(const a of n){const o=Jn(a,e),c=Jn(a,r);if(o===0)i[0]=e.Je();else if(o>0&&c<0)i.push(a),i.push(a.Je());else if(c>0)break}i.push(r);const s=[];for(let a=0;a<i.length;a+=2){if(this.bn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Pu,[]],c=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Pu,[]];s.push(IDBKeyRange.bound(o,c))}return s}bn(e,r){return Jn(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(vx)}getMinOffset(e,r){return k.mapArray(this.cn(r),n=>this.an(e,n).next(i=>i||Y())).next(vx)}}function wx(t){return bt(t,"collectionParents")}function Yo(t){return bt(t,"indexEntries")}function Ou(t){return bt(t,"indexConfiguration")}function Xo(t){return bt(t,"indexState")}function vx(t){Z(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const i=t[n].indexState.offset;Cy(i,e)<0&&(e=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new xr(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new tr(e,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e,r){const n=t.store("mutations"),i=t.store("documentMutations"),s=[],a=IDBKeyRange.only(r.batchId);let o=0;const c=n.X({range:a},(d,h,p)=>(o++,p.delete()));s.push(c.next(()=>{Z(o===1)}));const u=[];for(const d of r.mutations){const h=Lk(e,d.key.path,r.batchId);s.push(i.delete(h)),u.push(d.key)}return k.waitFor(s).next(()=>u)}function th(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Y();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr.DEFAULT_COLLECTION_PERCENTILE=10,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tr.DEFAULT=new tr(41943040,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tr.DISABLED=new tr(-1,0,0);class ip{constructor(e,r,n,i){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=i,this.Vn={}}static de(e,r,n,i){Z(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new ip(s,r,n,i)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zn(e).X({index:"userMutationsIndex",range:n},(i,s,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,i){const s=aa(e),a=Zn(e);return a.add({}).next(o=>{Z(typeof o=="number");const c=new My(o,r,n,i),u=function(p,g,y){const v=y.baseMutations.map(m=>pc(p.fe,m)),x=y.mutations.map(m=>pc(p.fe,m));return{userId:g,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:v,mutations:x}}(this.serializer,this.userId,c),d=[];let h=new Oe((p,g)=>ne(p.canonicalString(),g.canonicalString()));for(const p of i){const g=Lk(this.userId,p.key.path,o);h=h.add(p.key.path.popLast()),d.push(a.put(u)),d.push(s.put(g,uR))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Vn[o]=c.keys()}),k.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return Zn(e).get(r).next(n=>n?(Z(n.userId===this.userId),ns(this.serializer,n)):null)}Sn(e,r){return this.Vn[r]?k.resolve(this.Vn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const i=n.keys();return this.Vn[r]=i,i}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Zn(e).X({index:"userMutationsIndex",range:i},(a,o,c)=>{o.userId===this.userId&&(Z(o.batchId>=n),s=ns(this.serializer,o)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Zn(e).X({index:"userMutationsIndex",range:r,reverse:!0},(i,s,a)=>{n=s.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zn(e).j("userMutationsIndex",r).next(n=>n.map(i=>ns(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=rd(this.userId,r.path),i=IDBKeyRange.lowerBound(n),s=[];return aa(e).X({range:i},(a,o,c)=>{const[u,d,h]=a,p=cn(d);if(u===this.userId&&r.path.isEqual(p))return Zn(e).get(h).next(g=>{if(!g)throw Y();Z(g.userId===this.userId),s.push(ns(this.serializer,g))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Oe(ne);const i=[];return r.forEach(s=>{const a=rd(this.userId,s.path),o=IDBKeyRange.lowerBound(a),c=aa(e).X({range:o},(u,d,h)=>{const[p,g,y]=u,v=cn(g);p===this.userId&&s.path.isEqual(v)?n=n.add(y):h.done()});i.push(c)}),k.waitFor(i).next(()=>this.Dn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1,s=rd(this.userId,n),a=IDBKeyRange.lowerBound(s);let o=new Oe(ne);return aa(e).X({range:a},(c,u,d)=>{const[h,p,g]=c,y=cn(p);h===this.userId&&n.isPrefixOf(y)?y.length===i&&(o=o.add(g)):d.done()}).next(()=>this.Dn(e,o))}Dn(e,r){const n=[],i=[];return r.forEach(s=>{i.push(Zn(e).get(s).next(a=>{if(a===null)throw Y();Z(a.userId===this.userId),n.push(ns(this.serializer,a))}))}),k.waitFor(i).next(()=>n)}removeMutationBatch(e,r){return RI(e.ht,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.Cn(r.batchId)}),k.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return k.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return aa(e).X({range:n},(s,a,o)=>{if(s[0]===this.userId){const c=cn(s[1]);i.push(c)}else o.done()}).next(()=>{Z(i.length===0)})})}containsKey(e,r){return PI(e,this.userId,r)}xn(e){return OI(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function PI(t,e,r){const n=rd(e,r.path),i=n[1],s=IDBKeyRange.lowerBound(n);let a=!1;return aa(t).X({range:s,Y:!0},(o,c,u)=>{const[d,h,p]=o;d===e&&h===i&&(a=!0),u.done()}).next(()=>a)}function Zn(t){return bt(t,"mutations")}function aa(t){return bt(t,"documentMutations")}function OI(t){return bt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new $s(0)}static Mn(){return new $s(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.$n(e).next(r=>{const n=new $s(r.highestTargetId);return r.highestTargetId=n.next(),this.On(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(r=>J.fromTimestamp(new Ve(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.$n(e).next(i=>(i.highestListenSequenceNumber=r,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),r>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=r),this.On(e,i)))}addTargetData(e,r){return this.Fn(e,r).next(()=>this.$n(e).next(n=>(n.targetCount+=1,this.Bn(r,n),this.On(e,n))))}updateTargetData(e,r){return this.Fn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>na(e).delete(r.targetId)).next(()=>this.$n(e)).next(n=>(Z(n.targetCount>0),n.targetCount-=1,this.On(e,n)))}removeTargets(e,r,n){let i=0;const s=[];return na(e).X((a,o)=>{const c=al(o);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>k.waitFor(s)).next(()=>i)}forEachTarget(e,r){return na(e).X((n,i)=>{const s=al(i);r(s)})}$n(e){return bx(e).get("targetGlobalKey").next(r=>(Z(r!==null),r))}On(e,r){return bx(e).put("targetGlobalKey",r)}Fn(e,r){return na(e).put(jI(this.serializer,r))}Bn(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Rs(r),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return na(e).X({range:i,index:"queryTargetsIndex"},(a,o,c)=>{const u=al(o);$c(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const i=[],s=ai(e);return r.forEach(a=>{const o=Ht(a.path);i.push(s.put({targetId:n,path:o})),i.push(this.referenceDelegate.addReference(e,n,a))}),k.waitFor(i)}removeMatchingKeys(e,r,n){const i=ai(e);return k.forEach(r,s=>{const a=Ht(s.path);return k.waitFor([i.delete([n,a]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=ai(e),i=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),i=ai(e);let s=ie();return i.X({range:n,Y:!0},(a,o,c)=>{const u=cn(a[1]),d=new U(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=Ht(r.path),i=IDBKeyRange.bound([n],[Ck(n)],!1,!0);let s=0;return ai(e).X({index:"documentTargetsIndex",Y:!0,range:i},([a,o],c,u)=>{a!==0&&(s++,u.done())}).next(()=>s>0)}le(e,r){return na(e).get(r).next(n=>n?al(n):null)}}function na(t){return bt(t,"targets")}function bx(t){return bt(t,"targetGlobal")}function ai(t){return bt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x([t,e],[r,n]){const i=ne(t,r);return i===0?ne(e,n):i}class kP{constructor(e){this.Ln=e,this.buffer=new Oe(_x),this.qn=0}Un(){return++this.qn}Kn(e){const r=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();_x(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class IP{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}Qn(e){P("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Xi(r)?P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Yi(r)}await this.Qn(3e5)})}}class NP{constructor(e,r){this.jn=e,this.params=r}calculateTargetCount(e,r){return this.jn.zn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return k.resolve(ir.ct);const n=new kP(r);return this.jn.forEachTarget(e,i=>n.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>n.Kn(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(xx)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xx):this.Hn(e,r))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,r){let n,i,s,a,o,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,a=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,r))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),um()<=me.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function EP(t,e){return new NP(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,r){this.db=e,this.garbageCollector=EP(this,r)}zn(e){const r=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}Jn(e){let r=0;return this.Wn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Wn(e,r){return this.Yn(e,(n,i)=>r(i))}addReference(e,r,n){return Lu(e,n)}removeReference(e,r,n){return Lu(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Lu(e,r)}Xn(e,r){return function(n,i){let s=!1;return OI(n).Z(a=>PI(n,a,i).next(o=>(o&&(s=!0),k.resolve(!o)))).next(()=>s)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(a,o)=>{if(o<=r){const c=this.Xn(e,a).next(u=>{if(!u)return s++,n.getEntry(e,a).next(()=>(n.removeEntry(a,J.min()),ai(e).delete([0,Ht(a.path)])))});i.push(c)}}).next(()=>k.waitFor(i)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Lu(e,r)}Yn(e,r){const n=ai(e);let i,s=ir.ct;return n.X({index:"documentTargetsIndex"},([a,o],{path:c,sequenceNumber:u})=>{a===0?(s!==ir.ct&&r(new U(cn(i)),s),s=u,i=c):s=ir.ct}).next(()=>{s!==ir.ct&&r(new U(cn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lu(t,e){return ai(t).put(function(r,n){return{targetId:0,path:Ht(r.path),sequenceNumber:n}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.changes=new qi(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Re.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?k.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Ki(e).put(n)}removeEntry(e,r,n){return Ki(e).delete(function(i,s){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Zd(s),a[a.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.Zn(e,n)))}getEntry(e,r){let n=Re.newInvalidDocument(r);return Ki(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(qo(r))},(i,s)=>{n=this.ts(r,s)}).next(()=>n)}es(e,r){let n={size:0,document:Re.newInvalidDocument(r)};return Ki(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(qo(r))},(i,s)=>{n={document:this.ts(r,s),size:th(s)}}).next(()=>n)}getEntries(e,r){let n=ar();return this.ns(e,r,(i,s)=>{const a=this.ts(i,s);n=n.insert(i,a)}).next(()=>n)}ss(e,r){let n=ar(),i=new je(U.comparator);return this.ns(e,r,(s,a)=>{const o=this.ts(s,a);n=n.insert(s,o),i=i.insert(s,th(a))}).next(()=>({documents:n,rs:i}))}ns(e,r,n){if(r.isEmpty())return k.resolve();let i=new Oe(Ix);r.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(qo(i.first()),qo(i.last())),a=i.getIterator();let o=a.getNext();return Ki(e).X({index:"documentKeyIndex",range:s},(c,u,d)=>{const h=U.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&Ix(o,h)<0;)n(o,null),o=a.getNext();o&&o.isEqual(h)&&(n(o,u),o=a.hasNext()?a.getNext():null),o?d.G(qo(o)):d.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,i){const s=r.path,a=[s.popLast().toArray(),s.lastSegment(),Zd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ki(e).j(IDBKeyRange.bound(a,o,!0)).next(c=>{let u=ar();for(const d of c){const h=this.ts(U.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Vc(r,h)||i.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,r,n,i){let s=ar();const a=kx(r,n),o=kx(r,xr.max());return Ki(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(c,u,d)=>{const h=this.ts(U.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new jP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Sx(e).get("remoteDocumentGlobalKey").next(r=>(Z(!!r),r))}Zn(e,r){return Sx(e).put("remoteDocumentGlobalKey",r)}ts(e,r){if(r){const n=pP(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(J.min())))return n}return Re.newInvalidDocument(e)}}function MI(t){return new CP(t)}class jP extends LI{constructor(e,r){super(),this.os=e,this.trackRemovals=r,this.us=new qi(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(e){const r=[];let n=0,i=new Oe((s,a)=>ne(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.us.get(s);if(r.push(this.os.removeEntry(e,s,o.readTime)),a.isValidDocument()){const c=ux(this.os.serializer,a);i=i.add(s.path.popLast());const u=th(c);n+=u-o.size,r.push(this.os.addEntry(e,s,c))}else if(n-=o.size,this.trackRemovals){const c=ux(this.os.serializer,a.convertToNoDocument(J.min()));r.push(this.os.addEntry(e,s,c))}}),i.forEach(s=>{r.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.os.updateMetadata(e,n)),k.waitFor(r)}getFromCache(e,r){return this.os.es(e,r).next(n=>(this.us.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.os.ss(e,r).next(({documents:n,rs:i})=>(i.forEach((s,a)=>{this.us.set(s,{size:a,readTime:n.get(s).readTime})}),n))}}function Sx(t){return bt(t,"remoteDocumentGlobal")}function Ki(t){return bt(t,"remoteDocumentsV14")}function qo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kx(t,e){const r=e.documentKey.path.toArray();return[t,Zd(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Ix(t,e){const r=t.path.toArray(),n=e.path.toArray();let i=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(i=ne(r[s],n[s]),i)return i;return i=ne(r.length,n.length),i||(i=ne(r[r.length-2],n[n.length-2]),i||ne(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Sl(n.mutation,i,sr.empty(),Ve.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ie()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ie()){const i=un();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(s=>{let a=il();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=un();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ie()))}populateOverlays(e,r,n){const i=[];return n.forEach(s=>{r.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,i){let s=ar();const a=_l(),o=_l();return r.forEach((c,u)=>{const d=n.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Xn)?s=s.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),Sl(d.mutation,u,d.mutation.getFieldMask(),Ve.now())):a.set(u.key,sr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>a.set(u,d)),r.forEach((u,d)=>{var h;return o.set(u,new DP(d,(h=a.get(u))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,r){const n=_l();let i=new je((a,o)=>a-o),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||sr.empty();d=o.applyToLocalView(u,d),n.set(c,d);const h=(i.get(o.batchId)||ie()).add(c);i=i.insert(o.batchId,h)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,h=nI();d.forEach(p=>{if(!s.has(p)){const g=dI(r.get(p),n.get(p));g!==null&&h.set(p,g),s=s.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,h))}return k.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n){return function(i){return U.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Py(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n):this.getDocumentsMatchingCollectionQuery(e,r,n)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):k.resolve(un());let o=-1,c=s;return a.next(u=>k.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,ie())).next(d=>({batchId:o,changes:rI(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new U(r)).next(n=>{let i=il();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n){const i=r.collectionGroup;let s=il();return this.indexManager.getCollectionParents(e,i).next(a=>k.forEach(a,o=>{const c=function(u,d){return new Yn(d,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(r,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i))).next(s=>{i.forEach((o,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,Re.newInvalidDocument(u)))});let a=il();return s.forEach((o,c)=>{const u=i.get(o);u!==void 0&&Sl(u.mutation,c,sr.empty(),Ve.now()),Vc(r,c)&&(a=a.insert(o,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,r){return k.resolve(this.cs.get(r))}saveBundleMetadata(e,r){var n;return this.cs.set(r.id,{id:(n=r).id,version:n.version,createTime:tt(n.createTime)}),k.resolve()}getNamedQuery(e,r){return k.resolve(this.hs.get(r))}saveNamedQuery(e,r){return this.hs.set(r.name,function(n){return{name:n.name,query:zy(n.bundledQuery),readTime:tt(n.readTime)}}(r)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.overlays=new je(U.comparator),this.ls=new Map}getOverlay(e,r){return k.resolve(this.overlays.get(r))}getOverlays(e,r){const n=un();return k.forEach(r,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,s)=>{this.we(e,r,s)}),k.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.ls.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(n)),k.resolve()}getOverlaysForCollection(e,r,n){const i=un(),s=r.length+1,a=new U(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new je((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=un(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=un(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=i)););return k.resolve(o)}we(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.ls.get(i.largestBatchId).delete(n.key);this.ls.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Fy(r,n));let s=this.ls.get(r);s===void 0&&(s=ie(),this.ls.set(r,s)),this.ls.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.fs=new Oe(ft.ds),this.ws=new Oe(ft._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,r){const n=new ft(e,r);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.ys(new ft(e,r))}ps(e,r){e.forEach(n=>this.removeReference(n,r))}Is(e){const r=new U(new ye([])),n=new ft(r,e),i=new ft(r,e+1),s=[];return this.ws.forEachInRange([n,i],a=>{this.ys(a),s.push(a.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const r=new U(new ye([])),n=new ft(r,e),i=new ft(r,e+1);let s=ie();return this.ws.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const r=new ft(e,0),n=this.fs.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ft{constructor(e,r){this.key=e,this.As=r}static ds(e,r){return U.comparator(e.key,r.key)||ne(e.As,r.As)}static _s(e,r){return ne(e.As,r.As)||U.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.vs=1,this.Rs=new Oe(ft.ds)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new My(s,r,n,i);this.mutationQueue.push(a);for(const o of i)this.Rs=this.Rs.add(new ft(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return k.resolve(a)}lookupMutationBatch(e,r){return k.resolve(this.Ps(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.bs(n),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ft(r,0),i=new ft(r,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([n,i],a=>{const o=this.Ps(a.As);s.push(o)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Oe(ne);return r.forEach(i=>{const s=new ft(i,0),a=new ft(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,a],o=>{n=n.add(o.As)})}),k.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;U.isDocumentKey(s)||(s=s.child(""));const a=new ft(new U(s),0);let o=new Oe(ne);return this.Rs.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.As)),!0)},a),k.resolve(this.Vs(o))}Vs(e){const r=[];return e.forEach(n=>{const i=this.Ps(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Z(this.Ss(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Rs;return k.forEach(r.mutations,i=>{const s=new ft(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,r){const n=new ft(r,0),i=this.Rs.firstAfterOrEqual(n);return k.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Ss(e,r){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const r=this.bs(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.Ds=e,this.docs=new je(U.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.Ds(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return k.resolve(n?n.document.mutableCopy():Re.newInvalidDocument(r))}getEntries(e,r){let n=ar();return r.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Re.newInvalidDocument(i))}),k.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=ar();const a=r.path,o=new U(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||Cy(Ak(d),n)<=0||(i.has(d.key)||Vc(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,r,n,i){Y()}Cs(e,r){return k.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new LP(this)}getSize(e){return k.resolve(this.size)}}class LP extends LI{constructor(e){super(),this.os=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.os.addEntry(e,i)):this.os.removeEntry(n)}),k.waitFor(r)}getFromCache(e,r){return this.os.getEntry(e,r)}getAllFromCache(e,r){return this.os.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.persistence=e,this.xs=new qi(r=>Rs(r),$c),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Ns=0,this.ks=new qy,this.targetCount=0,this.Ms=$s.kn()}forEachTarget(e,r){return this.xs.forEach((n,i)=>r(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Ns&&(this.Ns=r),k.resolve()}Fn(e){this.xs.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ms=new $s(r),this.highestTargetId=r),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,r){return this.Fn(r),this.targetCount+=1,k.resolve()}updateTargetData(e,r){return this.Fn(r),k.resolve()}removeTargetData(e,r){return this.xs.delete(r.target),this.ks.Is(r.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.xs.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.xs.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,r){const n=this.xs.get(r)||null;return k.resolve(n)}addMatchingKeys(e,r,n){return this.ks.gs(r,n),k.resolve()}removeMatchingKeys(e,r,n){this.ks.ps(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.ks.Is(r),k.resolve()}getMatchingKeysForTargetId(e,r){const n=this.ks.Es(r);return k.resolve(n)}containsKey(e,r){return k.resolve(this.ks.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,r){this.$s={},this.overlays={},this.Os=new ir(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new MP(this),this.indexManager=new bP,this.remoteDocumentCache=function(n){return new OP(n)}(n=>this.referenceDelegate.Ls(n)),this.serializer=new CI(r),this.qs=new AP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new RP,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.$s[e.toKey()];return n||(n=new PP(r,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,r,n){P("MemoryPersistence","Starting transaction:",e);const i=new $P(this.Os.next());return this.referenceDelegate.Us(),n(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,r){return k.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,r)))}}class $P extends Pk{constructor(e){super(),this.currentSequenceNumber=e}}class sp{constructor(e){this.persistence=e,this.Qs=new qy,this.js=null}static zs(e){return new sp(e)}get Ws(){if(this.js)return this.js;throw Y()}addReference(e,r,n){return this.Qs.addReference(n,r),this.Ws.delete(n.toString()),k.resolve()}removeReference(e,r,n){return this.Qs.removeReference(n,r),this.Ws.add(n.toString()),k.resolve()}markPotentiallyOrphaned(e,r){return this.Ws.add(r.toString()),k.resolve()}removeTarget(e,r){this.Qs.Is(r.targetId).forEach(i=>this.Ws.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Us(){this.js=new Set}Ks(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Ws,n=>{const i=U.fromPath(n);return this.Hs(e,i).next(s=>{s||r.removeEntry(i,J.min())})}).next(()=>(this.js=null,r.apply(e)))}updateLimboDocument(e,r){return this.Hs(e,r).next(n=>{n?this.Ws.delete(r.toString()):this.Ws.add(r.toString())})}Ls(e){return 0}Hs(e,r){return k.or([()=>k.resolve(this.Qs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Gs(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.serializer=e}O(e,r,n,i){const s=new Jh("createOrUpgrade",r);n<1&&i>=1&&(function(o){o.createObjectStore("owner")}(e),function(o){o.createObjectStore("mutationQueues",{keyPath:"userId"}),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uv,{unique:!0}),o.createObjectStore("documentMutations")}(e),Nx(e),function(o){o.createObjectStore("remoteDocuments")}(e));let a=k.resolve();return n<3&&i>=3&&(n!==0&&(function(o){o.deleteObjectStore("targetDocuments"),o.deleteObjectStore("targets"),o.deleteObjectStore("targetGlobal")}(e),Nx(e)),a=a.next(()=>function(o){const c=o.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),n<4&&i>=4&&(n!==0&&(a=a.next(()=>function(o,c){return c.store("mutations").j().next(u=>{o.deleteObjectStore("mutations"),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uv,{unique:!0});const d=c.store("mutations"),h=u.map(p=>d.put(p));return k.waitFor(h)})}(e,s))),a=a.next(()=>{(function(o){o.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&i>=5&&(a=a.next(()=>this.Ys(s))),n<6&&i>=6&&(a=a.next(()=>(function(o){o.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),n<7&&i>=7&&(a=a.next(()=>this.Zs(s))),n<8&&i>=8&&(a=a.next(()=>this.ti(e,s))),n<9&&i>=9&&(a=a.next(()=>{(function(o){o.objectStoreNames.contains("remoteDocumentChanges")&&o.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&i>=10&&(a=a.next(()=>this.ei(s))),n<11&&i>=11&&(a=a.next(()=>{(function(o){o.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(o){o.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&i>=12&&(a=a.next(()=>{(function(o){const c=o.createObjectStore("documentOverlays",{keyPath:_R});c.createIndex("collectionPathOverlayIndex",SR,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",kR,{unique:!1})})(e)})),n<13&&i>=13&&(a=a.next(()=>function(o){const c=o.createObjectStore("remoteDocumentsV14",{keyPath:dR});c.createIndex("documentKeyIndex",hR),c.createIndex("collectionGroupIndex",pR)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&i>=14&&(a=a.next(()=>this.si(e,s))),n<15&&i>=15&&(a=a.next(()=>function(o){o.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),o.createObjectStore("indexState",{keyPath:wR}).createIndex("sequenceNumberIndex",vR,{unique:!1}),o.createObjectStore("indexEntries",{keyPath:xR}).createIndex("documentKeyIndex",bR,{unique:!1})}(e))),a}Xs(e){let r=0;return e.store("remoteDocuments").X((n,i)=>{r+=th(i)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Ys(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.j().next(i=>k.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",a).next(o=>k.forEach(o,c=>{Z(c.userId===s.userId);const u=ns(this.serializer,c);return RI(e,s.userId,u).next(()=>{})}))}))}Zs(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return n.X((a,o)=>{const c=new ye(a),u=function(d){return[0,Ht(d)]}(c);s.push(r.get(u).next(d=>d?k.resolve():(h=>r.put({targetId:0,path:Ht(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>k.waitFor(s))})}ti(e,r){e.createObjectStore("collectionParents",{keyPath:yR});const n=r.store("collectionParents"),i=new Xy,s=a=>{if(i.add(a)){const o=a.lastSegment(),c=a.popLast();return n.put({collectionId:o,parent:Ht(c)})}};return r.store("remoteDocuments").X({Y:!0},(a,o)=>{const c=new ye(a);return s(c.popLast())}).next(()=>r.store("documentMutations").X({Y:!0},([a,o,c],u)=>{const d=cn(o);return s(d.popLast())}))}ei(e){const r=e.store("targets");return r.X((n,i)=>{const s=al(i),a=jI(this.serializer,s);return r.put(a)})}ni(e,r){const n=r.store("remoteDocuments"),i=[];return n.X((s,a)=>{const o=r.store("remoteDocumentsV14"),c=(u=a,u.document?new U(ye.fromString(u.document.name).popFirst(5)):u.noDocument?U.fromSegments(u.noDocument.path):u.unknownDocument?U.fromSegments(u.unknownDocument.path):Y()).path.toArray();var u;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(d))}).next(()=>k.waitFor(i))}si(e,r){const n=r.store("mutations"),i=MI(this.serializer),s=new FI(sp.zs,this.serializer.fe);return n.j().next(a=>{const o=new Map;return a.forEach(c=>{var u;let d=(u=o.get(c.userId))!==null&&u!==void 0?u:ie();ns(this.serializer,c).keys().forEach(h=>d=d.add(h)),o.set(c.userId,d)}),k.forEach(o,(c,u)=>{const d=new mt(u),h=np.de(this.serializer,d),p=s.getIndexManager(d),g=ip.de(d,this.serializer,p,s.referenceDelegate);return new $I(i,g,h,p).recalculateAndSaveOverlaysForDocumentKeys(new hm(r,ir.ct),c).next()})})}}function Nx(t){t.createObjectStore("targetDocuments",{keyPath:gR}).createIndex("documentTargetsIndex",mR,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fR,{unique:!0}),t.createObjectStore("targetGlobal")}const zf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wy{constructor(e,r,n,i,s,a,o,c,u,d,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ii=s,this.window=a,this.document=o,this.ri=u,this.oi=d,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=p=>Promise.resolve(),!Wy.D())throw new j(I.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new TP(this,i),this.di=r+"main",this.serializer=new CI(c),this.wi=new $r(this.di,this.ui,new FP(this.serializer)),this.Bs=new SP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=MI(this.serializer),this.qs=new fP,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,d===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(I.FAILED_PRECONDITION,zf);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ir(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(r=>{r||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(r=>this.isPrimary&&!r?this.Ai(e).next(()=>!1):!!r&&this.vi(e).next(()=>!0))).catch(e=>{if(Xi(e))return P("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Wo(e).get("owner").next(r=>k.resolve(this.Ri(r)))}Pi(e){return Mu(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=bt(r,"clientMetadata");return n.j().next(i=>{const s=this.Si(i,18e5),a=i.filter(o=>s.indexOf(o)===-1);return k.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this._i)for(const r of e)this._i.removeItem(this.Di(r.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?k.resolve(!0):Wo(e).get("owner").next(r=>{if(r!==null&&this.Vi(r.leaseTimestampMs,5e3)&&!this.Ci(r.ownerId)){if(this.Ri(r)&&this.networkEnabled)return!0;if(!this.Ri(r)){if(!r.allowTabSynchronization)throw new j(I.FAILED_PRECONDITION,zf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mu(e).j().next(n=>this.Si(n,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&P("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new hm(e,ir.ct);return this.Ai(r).next(()=>this.Pi(r))}),this.wi.close(),this.Mi()}Si(e,r){return e.filter(n=>this.Vi(n.updateTimeMs,r)&&!this.Ci(n.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Mu(e).j().next(r=>this.Si(r,18e5).map(n=>n.clientId)))}get started(){return this.Fs}getMutationQueue(e,r){return ip.de(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _P(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return np.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,r,n){P("IndexedDbPersistence","Starting transaction:",e);const i=r==="readonly"?"readonly":"readwrite",s=(a=this.ui)===15?NR:a===14?Fk:a===13?$k:a===12?IR:a===11?Mk:void Y();var a;let o;return this.wi.runTransaction(e,i,s,c=>(o=new hm(c,this.Os?this.Os.next():ir.ct),r==="readwrite-primary"?this.Ti(o).next(u=>!!u||this.Ei(o)).next(u=>{if(!u)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new j(I.FAILED_PRECONDITION,Rk);return n(o)}).next(u=>this.vi(o).next(()=>u)):this.Oi(o).next(()=>n(o)))).then(c=>(o.raiseOnCommittedEvent(),c))}Oi(e){return Wo(e).get("owner").next(r=>{if(r!==null&&this.Vi(r.leaseTimestampMs,5e3)&&!this.Ci(r.ownerId)&&!this.Ri(r)&&!(this.oi||this.allowTabSynchronization&&r.allowTabSynchronization))throw new j(I.FAILED_PRECONDITION,zf)})}vi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wo(e).put("owner",r)}static D(){return $r.D()}Ai(e){const r=Wo(e);return r.get("owner").next(n=>this.Ri(n)?(P("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):k.resolve())}Vi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Ze(`Detected an update time that is in the future: ${e} > ${n}`),!1))}gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const r=/(?:Version|Mobile)\/1[456]/;xC()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var r;try{const n=((r=this._i)===null||r===void 0?void 0:r.getItem(this.Di(e)))!==null;return P("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ze("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wo(t){return bt(t,"owner")}function Mu(t){return bt(t,"clientMetadata")}function Hy(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Fi=n,this.Bi=i}static Li(e,r){let n=ie(),i=ie();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Gy(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.qi=!1}initialize(e,r){this.Ui=e,this.indexManager=r,this.qi=!0}getDocumentsMatchingQuery(e,r,n,i){return this.Ki(e,r).next(s=>s||this.Gi(e,r,i,n)).next(s=>s||this.Qi(e,r))}Ki(e,r){if(Zv(r))return k.resolve(null);let n=ur(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Jd(r,null,"F"),n=ur(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=ie(...s);return this.Ui.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ji(r,o);return this.zi(r,u,a,c.readTime)?this.Ki(e,Jd(r,null,"F")):this.Wi(e,u,r,c)}))})))}Gi(e,r,n,i){return Zv(r)||i.isEqual(J.min())?this.Qi(e,r):this.Ui.getDocuments(e,n).next(s=>{const a=this.ji(r,s);return this.zi(r,a,n,i)?this.Qi(e,r):(um()<=me.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vm(r)),this.Wi(e,a,r,Dk(i,-1)))})}ji(e,r){let n=new Oe(eI(e));return r.forEach((i,s)=>{Vc(e,s)&&(n=n.add(s))}),n}zi(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,r){return um()<=me.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",vm(r)),this.Ui.getDocumentsMatchingQuery(e,r,xr.min())}Wi(e,r,n,i){return this.Ui.getDocumentsMatchingQuery(e,n,i).next(s=>(r.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,r,n,i){this.persistence=e,this.Hi=r,this.serializer=i,this.Ji=new je(ne),this.Yi=new qi(s=>Rs(s),$c),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $I(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ji))}}function UI(t,e,r,n){return new VP(t,e,r,n)}async function BI(t,e){const r=B(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,r.tr(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let c=ie();for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({er:u,removedBatchIds:a,addedBatchIds:o}))})})}function UP(t,e){const r=B(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=r.Zi.newChangeBuffer({trackRemovals:!0});return function(a,o,c,u){const d=c.batch,h=d.keys();let p=k.resolve();return h.forEach(g=>{p=p.next(()=>u.getEntry(o,g)).next(y=>{const v=c.docVersions.get(g);Z(v!==null),y.version.compareTo(v)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(o,d))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let o=ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(o=o.add(a.batch.mutations[c].key));return o}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function zI(t){const e=B(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Bs.getLastRemoteSnapshotVersion(r))}function BP(t,e){const r=B(t),n=e.snapshotVersion;let i=r.Ji;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=r.Zi.newChangeBuffer({trackRemovals:!0});i=r.Ji;const o=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;o.push(r.Bs.removeMatchingKeys(s,d.removedDocuments,h).next(()=>r.Bs.addMatchingKeys(s,d.addedDocuments,h)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(ht.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),i=i.insert(h,g),function(y,v,x){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,g,d)&&o.push(r.Bs.updateTargetData(s,g))});let c=ar(),u=ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(YI(s,a,e.documentUpdates).next(d=>{c=d.nr,u=d.sr})),!n.isEqual(J.min())){const d=r.Bs.getLastRemoteSnapshotVersion(s).next(h=>r.Bs.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return k.waitFor(o).next(()=>a.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ji=i,s))}function YI(t,e,r){let n=ie(),i=ie();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let a=ar();return r.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):P("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{nr:a,sr:i}})}function zP(t,e){const r=B(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Ja(t,e){const r=B(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Bs.getTargetData(n,e).next(s=>s?(i=s,k.resolve(i)):r.Bs.allocateTargetId(n).next(a=>(i=new Cn(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Bs.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.Ji.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ji=r.Ji.insert(n.targetId,n),r.Yi.set(e,n.targetId)),n})}async function Za(t,e,r){const n=B(t),i=n.Ji.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Xi(a))throw a;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ji=n.Ji.remove(e),n.Yi.delete(i.target)}function rh(t,e,r){const n=B(t);let i=J.min(),s=ie();return n.persistence.runTransaction("Execute query","readonly",a=>function(o,c,u){const d=B(o),h=d.Yi.get(u);return h!==void 0?k.resolve(d.Ji.get(h)):d.Bs.getTargetData(c,u)}(n,a,ur(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Bs.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>n.Hi.getDocumentsMatchingQuery(a,e,r?i:J.min(),r?s:ie())).next(o=>(WI(n,Zk(e),o),{documents:o,ir:s})))}function XI(t,e){const r=B(t),n=B(r.Bs),i=r.Ji.get(e);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",s=>n.le(s,e).next(a=>a?a.target:null))}function qI(t,e){const r=B(t),n=r.Xi.get(e)||J.min();return r.persistence.runTransaction("Get new document changes","readonly",i=>r.Zi.getAllFromCollectionGroup(i,e,Dk(n,-1),Number.MAX_SAFE_INTEGER)).then(i=>(WI(r,e,i),i))}function WI(t,e,r){let n=t.Xi.get(e)||J.min();r.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Xi.set(e,n)}async function YP(t,e,r,n){const i=B(t);let s=ie(),a=ar();for(const u of r){const d=e.rr(u.metadata.name);u.document&&(s=s.add(d));const h=e.ur(u);h.setReadTime(e.cr(u.metadata.readTime)),a=a.insert(d,h)}const o=i.Zi.newChangeBuffer({trackRemovals:!0}),c=await Ja(i,function(u){return ur(mo(ye.fromString(`__bundle__/docs/${u}`)))}(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>YI(u,o,a).next(d=>(o.apply(u),d)).next(d=>i.Bs.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Bs.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.nr,d.sr)).next(()=>d.nr)))}async function XP(t,e,r=ie()){const n=await Ja(t,ur(zy(e.bundledQuery))),i=B(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const a=tt(e.readTime);if(n.snapshotVersion.compareTo(a)>=0)return i.qs.saveNamedQuery(s,e);const o=n.withResumeToken(ht.EMPTY_BYTE_STRING,a);return i.Ji=i.Ji.insert(o.targetId,o),i.Bs.updateTargetData(s,o).next(()=>i.Bs.removeMatchingKeysForTargetId(s,n.targetId)).next(()=>i.Bs.addMatchingKeys(s,r,n.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}function Ex(t,e){return`firestore_clients_${t}_${e}`}function Tx(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Yf(t,e){return`firestore_targets_${t}_${e}`}class nh{constructor(e,r,n,i){this.user=e,this.batchId=r,this.state=n,this.error=i}static ar(e,r,n){const i=JSON.parse(n);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new j(i.error.code,i.error.message))),a?new nh(e,r,i.state,s):(Ze("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kl{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static ar(e,r){const n=JSON.parse(r);let i,s=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return s&&n.error&&(s=typeof n.error.message=="string"&&typeof n.error.code=="string",s&&(i=new j(n.error.code,n.error.message))),s?new kl(e,n.state,i):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ih{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static ar(e,r){const n=JSON.parse(r);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,s=Oy();for(let a=0;i&&a<n.activeTargetIds.length;++a)i=Ok(n.activeTargetIds[a]),s=s.add(n.activeTargetIds[a]);return i?new ih(e,s):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Ky{constructor(e,r){this.clientId=e,this.onlineState=r}static ar(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new Ky(r.clientId,r.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Nm{constructor(){this.activeTargetIds=Oy()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xf{constructor(e,r,n,i,s){this.window=e,this.ii=r,this.persistenceKey=n,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new je(ne),this.started=!1,this.yr=[];const a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=Ex(this.persistenceKey,this.wr),this.Ir=function(o){return`firestore_sequence_number_${o}`}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new Nm),this.Tr=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vr=function(o){return`firestore_online_state_${o}`}(this.persistenceKey),this.Rr=function(o){return`firestore_bundle_loaded_v2_${o}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.wr)continue;const i=this.getItem(Ex(this.persistenceKey,n));if(i){const s=ih.ar(n,i);s&&(this.gr=this.gr.insert(s.clientId,s))}}this.Pr();const r=this.storage.getItem(this.vr);if(r){const n=this.br(r);n&&this.Vr(n)}for(const n of this.yr)this.mr(n);this.yr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let r=!1;return this.gr.forEach((n,i)=>{i.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,r,n){this.Dr(e,r,n),this.Cr(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Yf(this.persistenceKey,e));if(n){const i=kl.ar(e,n);i&&(r=i.state)}}return this.Nr.lr(e),this.Pr(),r}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yf(this.persistenceKey,e))}updateQueryState(e,r,n){this.kr(e,r,n)}handleUserChange(e,r,n){r.forEach(i=>{this.Cr(i)}),this.currentUser=e,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return P("SharedClientState","READ",e,r),r}setItem(e,r){P("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){P("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const r=e;if(r.storageArea===this.storage){if(P("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Tr.test(r.key)){if(r.newValue==null){const n=this.Or(r.key);return this.Fr(n,null)}{const n=this.Br(r.key,r.newValue);if(n)return this.Fr(n.clientId,n)}}else if(this.Er.test(r.key)){if(r.newValue!==null){const n=this.Lr(r.key,r.newValue);if(n)return this.qr(n)}}else if(this.Ar.test(r.key)){if(r.newValue!==null){const n=this.Ur(r.key,r.newValue);if(n)return this.Kr(n)}}else if(r.key===this.vr){if(r.newValue!==null){const n=this.br(r.newValue);if(n)return this.Vr(n)}}else if(r.key===this.Ir){const n=function(i){let s=ir.ct;if(i!=null)try{const a=JSON.parse(i);Z(typeof a=="number"),s=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(r.newValue);n!==ir.ct&&this.sequenceNumberHandler(n)}else if(r.key===this.Rr){const n=this.Gr(r.newValue);await Promise.all(n.map(i=>this.syncEngine.Qr(i)))}}}else this.yr.push(r)})}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,r,n){const i=new nh(this.currentUser,e,r,n),s=Tx(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const r=Tx(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Mr(e){const r={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(r))}kr(e,r,n){const i=Yf(this.persistenceKey,e),s=new kl(e,r,n);this.setItem(i,s.hr())}$r(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Rr,r)}Or(e){const r=this.Tr.exec(e);return r?r[1]:null}Br(e,r){const n=this.Or(e);return ih.ar(n,r)}Lr(e,r){const n=this.Er.exec(e),i=Number(n[1]),s=n[2]!==void 0?n[2]:null;return nh.ar(new mt(s),i,r)}Ur(e,r){const n=this.Ar.exec(e),i=Number(n[1]);return kl.ar(i,r)}br(e){return Ky.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);P("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,r){const n=r?this.gr.insert(e,r):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(n),a=[],o=[];return s.forEach(c=>{i.has(c)||a.push(c)}),i.forEach(c=>{s.has(c)||o.push(c)}),this.syncEngine.Wr(a,o).then(()=>{this.gr=n})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let r=Oy();return e.forEach((n,i)=>{r=r.unionWith(i.activeTargetIds)}),r}}class HI{constructor(){this.Hr=new Nm,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,r,n){this.Jr[e]=r}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Nm,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=null;function qf(){return $u===null?$u=268435456+Math.round(2147483648*Math.random()):$u++,"0x"+$u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class GP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http";this.mo=r+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,r,n,i,s){const a=qf(),o=this.To(e,r);P("RestConnection",`Sending RPC '${e}' ${a}:`,o,n);const c={};return this.Eo(c,i,s),this.Ao(e,o,c,n).then(u=>(P("RestConnection",`Received RPC '${e}' ${a}: `,u),u),u=>{throw Yr("RestConnection",`RPC '${e}' ${a} failed with error: `,u,"url: ",o,"request:",n),u})}vo(e,r,n,i,s,a){return this.Io(e,r,n,i,s)}Eo(e,r,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+go,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}To(e,r){const n=WP[e];return`${this.mo}/v1/${r}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,r,n,i){const s=qf();return new Promise((a,o)=>{const c=new XA;c.setWithCredentials(!0),c.listenOnce(BA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Uf.NO_ERROR:const d=c.getResponseJson();P(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case Uf.TIMEOUT:P(Mt,`RPC '${e}' ${s} timed out`),o(new j(I.DEADLINE_EXCEEDED,"Request time out"));break;case Uf.HTTP_ERROR:const h=c.getStatus();if(P(Mt,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(I).indexOf(x)>=0?x:I.UNKNOWN}(g.status);o(new j(y,g.message))}else o(new j(I.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new j(I.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{P(Mt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);P(Mt,`RPC '${e}' ${s} sending request:`,i),c.send(r,"POST",u,n,15)})}Ro(e,r,n){const i=qf(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=VA(),o=UA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new YA({})),this.Eo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");P(Mt,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=a.createWebChannel(d,c);let p=!1,g=!1;const y=new HP({ro:x=>{g?P(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(P(Mt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),P(Mt,`RPC '${e}' stream ${i} sending:`,x),h.send(x))},oo:()=>h.close()}),v=(x,m,f)=>{x.listen(m,w=>{try{f(w)}catch(b){setTimeout(()=>{throw b},0)}})};return v(h,Du.EventType.OPEN,()=>{g||P(Mt,`RPC '${e}' stream ${i} transport opened.`)}),v(h,Du.EventType.CLOSE,()=>{g||(g=!0,P(Mt,`RPC '${e}' stream ${i} transport closed`),y.wo())}),v(h,Du.EventType.ERROR,x=>{g||(g=!0,Yr(Mt,`RPC '${e}' stream ${i} transport errored:`,x),y.wo(new j(I.UNAVAILABLE,"The operation could not be completed")))}),v(h,Du.EventType.MESSAGE,x=>{var m;if(!g){const f=x.data[0];Z(!!f);const w=f,b=w.error||((m=w[0])===null||m===void 0?void 0:m.error);if(b){P(Mt,`RPC '${e}' stream ${i} received error:`,b);const _=b.status;let S=function(T){const F=it[T];if(F!==void 0)return fI(F)}(_),N=b.message;S===void 0&&(S=I.INTERNAL,N="Unknown error status: "+_+" with message "+b.message),g=!0,y.wo(new j(S,N)),h.close()}else P(Mt,`RPC '${e}' stream ${i} received:`,f),y._o(f)}}),v(o,zA.STAT_EVENT,x=>{x.stat===Mv.PROXY?P(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Mv.NOPROXY&&P(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(){return typeof window<"u"?window:null}function od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){return new nP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,r,n=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=r,this.Po=n,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const r=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),i=Math.max(0,r-n);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,r,n,i,s,a,o,c){this.ii=e,this.$o=n,this.Oo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Qy(e,r)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,r){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():r&&r.code===I.RESOURCE_EXHAUSTED?(Ze(r.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):r&&r.code===I.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(r)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),r=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Fo===r&&this.Zo(n,i)},n=>{e(()=>{const i=new j(I.UNKNOWN,"Fetching auth token failed: "+n.message);return this.tu(i)})})}Zo(e,r){const n=this.Xo(this.Fo);this.stream=this.eu(e,r),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{n(()=>this.tu(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return r=>{this.ii.enqueueAndForget(()=>this.Fo===e?r():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KP extends KI{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}eu(e,r){return this.connection.Ro("Listen",e,r)}onMessage(e){this.qo.reset();const r=aP(this.serializer,e),n=function(i){if(!("targetChange"in i))return J.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?tt(s.readTime):J.min()}(e);return this.listener.nu(r,n)}su(e){const r={};r.database=hc(this.serializer),r.addTarget=function(i,s){let a;const o=s.target;if(a=Kd(o)?{documents:SI(i,o)}:{query:kI(i,o)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=wI(i,s.resumeToken);const c=xm(i,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Qa(i,s.snapshotVersion.toTimestamp());const c=xm(i,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=lP(this.serializer,e);n&&(r.labels=n),this.Wo(r)}iu(e){const r={};r.database=hc(this.serializer),r.removeTarget=e,this.Wo(r)}}class QP extends KI{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,r){return this.connection.Ro("Write",e,r)}onMessage(e){if(Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const r=oP(e.writeResults,e.commitTime),n=tt(e.commitTime);return this.listener.cu(n,r)}return Z(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=hc(this.serializer),this.Wo(e)}uu(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>pc(this.serializer,n))};this.Wo(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new j(I.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,r,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,r,n,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new j(I.UNKNOWN,i.toString())})}vo(e,r,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,r,n,s,a,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(I.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class ZP{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ze(r),this.mu=!1):P("OnlineStateTracker",r)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{n.enqueueAndForget(async()=>{Wi(this)&&(P("RemoteStore","Restarting streams for network reachability change."),await async function(o){const c=B(o);c.vu.add(4),await vo(c),c.bu.set("Unknown"),c.vu.delete(4),await Xc(c)}(this))})}),this.bu=new ZP(n,i)}}async function Xc(t){if(Wi(t))for(const e of t.Ru)await e(!0)}async function vo(t){for(const e of t.Ru)await e(!1)}function ap(t,e){const r=B(t);r.Au.has(e.targetId)||(r.Au.set(e.targetId,e),e1(r)?Zy(r):bo(r).Ko()&&Jy(r,e))}function fc(t,e){const r=B(t),n=bo(r);r.Au.delete(e),n.Ko()&&QI(r,e),r.Au.size===0&&(n.Ko()?n.jo():Wi(r)&&r.bu.set("Unknown"))}function Jy(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}bo(t).su(e)}function QI(t,e){t.Vu.qt(e),bo(t).iu(e)}function Zy(t){t.Vu=new ZR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.bu.gu()}function e1(t){return Wi(t)&&!bo(t).Uo()&&t.Au.size>0}function Wi(t){return B(t).vu.size===0}function JI(t){t.Vu=void 0}async function tO(t){t.Au.forEach((e,r)=>{Jy(t,e)})}async function rO(t,e){JI(t),e1(t)?(t.bu.Iu(e),Zy(t)):t.bu.set("Unknown")}async function nO(t,e,r){if(t.bu.set("Online"),e instanceof yI&&e.state===2&&e.cause)try{await async function(n,i){const s=i.cause;for(const a of i.targetIds)n.Au.has(a)&&(await n.remoteSyncer.rejectListen(a,s),n.Au.delete(a),n.Vu.removeTarget(a))}(t,e)}catch(n){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await sh(t,n)}else if(e instanceof ad?t.Vu.Ht(e):e instanceof mI?t.Vu.ne(e):t.Vu.Xt(e),!r.isEqual(J.min()))try{const n=await zI(t.localStore);r.compareTo(n)>=0&&await function(i,s){const a=i.Vu.ce(s);return a.targetChanges.forEach((o,c)=>{if(o.resumeToken.approximateByteSize()>0){const u=i.Au.get(c);u&&i.Au.set(c,u.withResumeToken(o.resumeToken,s))}}),a.targetMismatches.forEach((o,c)=>{const u=i.Au.get(o);if(!u)return;i.Au.set(o,u.withResumeToken(ht.EMPTY_BYTE_STRING,u.snapshotVersion)),QI(i,o);const d=new Cn(u.target,o,c,u.sequenceNumber);Jy(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){P("RemoteStore","Failed to raise snapshot:",n),await sh(t,n)}}async function sh(t,e,r){if(!Xi(e))throw e;t.vu.add(1),await vo(t),t.bu.set("Offline"),r||(r=()=>zI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{P("RemoteStore","Retrying IndexedDB access"),await r(),t.vu.delete(1),await Xc(t)})}function ZI(t,e){return e().catch(r=>sh(t,r,e))}async function xo(t){const e=B(t),r=Pi(e);let n=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;iO(e);)try{const i=await zP(e.localStore,n);if(i===null){e.Eu.length===0&&r.jo();break}n=i.batchId,sO(e,i)}catch(i){await sh(e,i)}eN(e)&&tN(e)}function iO(t){return Wi(t)&&t.Eu.length<10}function sO(t,e){t.Eu.push(e);const r=Pi(t);r.Ko()&&r.ou&&r.uu(e.mutations)}function eN(t){return Wi(t)&&!Pi(t).Uo()&&t.Eu.length>0}function tN(t){Pi(t).start()}async function aO(t){Pi(t).hu()}async function oO(t){const e=Pi(t);for(const r of t.Eu)e.uu(r.mutations)}async function lO(t,e,r){const n=t.Eu.shift(),i=$y.from(n,e,r);await ZI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xo(t)}async function cO(t,e){e&&Pi(t).ou&&await async function(r,n){if(i=n.code,pI(i)&&i!==I.ABORTED){const s=r.Eu.shift();Pi(r).Qo(),await ZI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,n)),await xo(r)}var i}(t,e),eN(t)&&tN(t)}async function jx(t,e){const r=B(t);r.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");const n=Wi(r);r.vu.add(3),await vo(r),n&&r.bu.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.vu.delete(3),await Xc(r)}async function Em(t,e){const r=B(t);e?(r.vu.delete(2),await Xc(r)):e||(r.vu.add(2),await vo(r),r.bu.set("Unknown"))}function bo(t){return t.Su||(t.Su=function(e,r,n){const i=B(e);return i.fu(),new KP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{uo:tO.bind(null,t),ao:rO.bind(null,t),nu:nO.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),e1(t)?Zy(t):t.bu.set("Unknown")):(await t.Su.stop(),JI(t))})),t.Su}function Pi(t){return t.Du||(t.Du=function(e,r,n){const i=B(e);return i.fu(),new QP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{uo:aO.bind(null,t),ao:cO.bind(null,t),au:oO.bind(null,t),cu:lO.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await xo(t)):(await t.Du.stop(),t.Eu.length>0&&(P("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,o=new t1(e,r,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(I.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _o(t,e){if(Ze("AsyncQueue",`${e}: ${t}`),Xi(t))return new j(I.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.comparator=e?(r,n)=>e(r,n)||U.comparator(r.key,n.key):(r,n)=>U.comparator(r.key,n.key),this.keyedMap=il(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new Pa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Pa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.Cu=new je(U.comparator)}track(e){const r=e.doc.key,n=this.Cu.get(r);n?e.type!==0&&n.type===3?this.Cu=this.Cu.insert(r,e):e.type===3&&n.type!==1?this.Cu=this.Cu.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Cu=this.Cu.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Cu=this.Cu.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Cu=this.Cu.remove(r):e.type===1&&n.type===2?this.Cu=this.Cu.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Cu=this.Cu.insert(r,{type:2,doc:e.doc}):Y():this.Cu=this.Cu.insert(r,e)}xu(){const e=[];return this.Cu.inorderTraversal((r,n)=>{e.push(n)}),e}}class eo{constructor(e,r,n,i,s,a,o,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,i,s){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new eo(e,r,Pa.emptySet(r),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.Nu=void 0,this.listeners=[]}}class dO{constructor(){this.queries=new qi(e=>Jk(e),Fc),this.onlineState="Unknown",this.ku=new Set}}async function r1(t,e){const r=B(t),n=e.query;let i=!1,s=r.queries.get(n);if(s||(i=!0,s=new uO),i)try{s.Nu=await r.onListen(n)}catch(a){const o=_o(a,`Initialization of query '${vm(e.query)}' failed`);return void e.onError(o)}r.queries.set(n,s),s.listeners.push(e),e.Mu(r.onlineState),s.Nu&&e.$u(s.Nu)&&i1(r)}async function n1(t,e){const r=B(t),n=e.query;let i=!1;const s=r.queries.get(n);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function hO(t,e){const r=B(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const o of a.listeners)o.$u(i)&&(n=!0);a.Nu=i}}n&&i1(r)}function pO(t,e,r){const n=B(t),i=n.queries.get(e);if(i)for(const s of i.listeners)s.onError(r);n.queries.delete(e)}function i1(t){t.ku.forEach(e=>{e.next()})}class s1{constructor(e,r,n){this.query=e,this.Ou=r,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new eo(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),r=!0):this.qu(e,this.onlineState)&&(this.Uu(e),r=!0),this.Bu=e,r}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let r=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),r=!0),r}qu(e,r){if(!e.fromCache)return!0;const n=r!=="Offline";return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const r=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Uu(e){e=eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,r){this.Gu=e,this.byteLength=r}Qu(){return"metadata"in this.Gu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.serializer=e}rr(e){return fn(this.serializer,e)}ur(e){return e.metadata.exists?_I(this.serializer,e.document,!1):Re.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return tt(e)}}class gO{constructor(e,r,n){this.ju=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rN(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++r;const n=ye.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}Wu(e){const r=new Map,n=new Ax(this.serializer);for(const i of e)if(i.metadata.queries){const s=n.rr(i.metadata.name);for(const a of i.metadata.queries){const o=(r.get(a)||ie()).add(s);r.set(a,o)}}return r}async complete(){const e=await YP(this.localStore,new Ax(this.serializer),this.documents,this.ju.id),r=this.Wu(this.documents);for(const n of this.queries)await XP(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function rN(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.key=e}}class iN{constructor(e){this.key=e}}class sN{constructor(e,r){this.query=e,this.Yu=r,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ie(),this.mutatedKeys=ie(),this.tc=eI(e),this.ec=new Pa(this.tc)}get nc(){return this.Yu}sc(e,r){const n=r?r.ic:new Dx,i=r?r.ec:this.ec;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),g=Vc(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;p&&g?p.data.isEqual(g.data)?y!==v&&(n.track({type:3,doc:g}),x=!0):this.rc(p,g)||(n.track({type:2,doc:g}),x=!0,(c&&this.tc(g,c)>0||u&&this.tc(g,u)<0)&&(o=!0)):!p&&g?(n.track({type:0,doc:g}),x=!0):p&&!g&&(n.track({type:1,doc:p}),x=!0,(c||u)&&(o=!0)),x&&(g?(a=a.add(g),s=v?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{ec:a,ic:n,zi:o,mutatedKeys:s}}rc(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((u,d)=>function(h,p){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return g(h)-g(p)}(u.type,d.type)||this.tc(u.doc,d.doc)),this.oc(n);const a=r?this.uc():[],o=this.Zu.size===0&&this.current?1:0,c=o!==this.Xu;return this.Xu=o,s.length!==0||c?{snapshot:new eo(this.query,e.ec,i,s,e.mutatedKeys,o===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:a}:{cc:a}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Dx,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(r=>this.Yu=this.Yu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Yu=this.Yu.delete(r)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ie(),this.ec.forEach(n=>{this.ac(n.key)&&(this.Zu=this.Zu.add(n.key))});const r=[];return e.forEach(n=>{this.Zu.has(n)||r.push(new iN(n))}),this.Zu.forEach(n=>{e.has(n)||r.push(new nN(n))}),r}hc(e){this.Yu=e.ir,this.Zu=ie();const r=this.sc(e.documents);return this.applyChanges(r,!0)}lc(){return eo.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class mO{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class yO{constructor(e){this.key=e,this.fc=!1}}class wO{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.dc={},this.wc=new qi(o=>Jk(o),Fc),this._c=new Map,this.mc=new Set,this.gc=new je(U.comparator),this.yc=new Map,this.Ic=new qy,this.Tc={},this.Ec=new Map,this.Ac=$s.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function vO(t,e){const r=u1(t);let n,i;const s=r.wc.get(e);if(s)n=s.targetId,r.sharedClientState.addLocalQueryTarget(n),i=s.view.lc();else{const a=await Ja(r.localStore,ur(e)),o=r.sharedClientState.addLocalQueryTarget(a.targetId);n=a.targetId,i=await a1(r,e,n,o==="current",a.resumeToken),r.isPrimaryClient&&ap(r.remoteStore,a)}return i}async function a1(t,e,r,n,i){t.Rc=(h,p,g)=>async function(y,v,x,m){let f=v.view.sc(x);f.zi&&(f=await rh(y.localStore,v.query,!1).then(({documents:_})=>v.view.sc(_,f)));const w=m&&m.targetChanges.get(v.targetId),b=v.view.applyChanges(f,y.isPrimaryClient,w);return Tm(y,v.targetId,b.cc),b.snapshot}(t,h,p,g);const s=await rh(t.localStore,e,!0),a=new sN(e,s.ir),o=a.sc(s.documents),c=zc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),u=a.applyChanges(o,t.isPrimaryClient,c);Tm(t,r,u.cc);const d=new mO(e,r,a);return t.wc.set(e,d),t._c.has(r)?t._c.get(r).push(e):t._c.set(r,[e]),u.snapshot}async function xO(t,e){const r=B(t),n=r.wc.get(e),i=r._c.get(n.targetId);if(i.length>1)return r._c.set(n.targetId,i.filter(s=>!Fc(s,e))),void r.wc.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await Za(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),fc(r.remoteStore,n.targetId),to(r,n.targetId)}).catch(Yi)):(to(r,n.targetId),await Za(r.localStore,n.targetId,!0))}async function bO(t,e,r){const n=d1(t);try{const i=await function(s,a){const o=B(s),c=Ve.now(),u=a.reduce((p,g)=>p.add(g.key),ie());let d,h;return o.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=ar(),y=ie();return o.Zi.getEntries(p,u).next(v=>{g=v,g.forEach((x,m)=>{m.isValidDocument()||(y=y.add(x))})}).next(()=>o.localDocuments.getOverlayedDocuments(p,g)).next(v=>{d=v;const x=[];for(const m of a){const f=KR(m,d.get(m.key).overlayedDocument);f!=null&&x.push(new Xn(m.key,f,zk(f.value.mapValue),Fe.exists(!0)))}return o.mutationQueue.addMutationBatch(p,c,x,a)}).next(v=>{h=v;const x=v.applyToLocalDocumentSet(d,y);return o.documentOverlayCache.saveOverlays(p,v.batchId,x)})}).then(()=>({batchId:h.batchId,changes:rI(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,a,o){let c=s.Tc[s.currentUser.toKey()];c||(c=new je(ne)),c=c.insert(a,o),s.Tc[s.currentUser.toKey()]=c}(n,i.batchId,r),await qn(n,i.changes),await xo(n.remoteStore)}catch(i){const s=_o(i,"Failed to persist write");r.reject(s)}}async function aN(t,e){const r=B(t);try{const n=await BP(r.localStore,e);e.targetChanges.forEach((i,s)=>{const a=r.yc.get(s);a&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.fc=!0:i.modifiedDocuments.size>0?Z(a.fc):i.removedDocuments.size>0&&(Z(a.fc),a.fc=!1))}),await qn(r,n,e)}catch(n){await Yi(n)}}function Rx(t,e,r){const n=B(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.wc.forEach((s,a)=>{const o=a.view.Mu(e);o.snapshot&&i.push(o.snapshot)}),function(s,a){const o=B(s);o.onlineState=a;let c=!1;o.queries.forEach((u,d)=>{for(const h of d.listeners)h.Mu(a)&&(c=!0)}),c&&i1(o)}(n.eventManager,e),i.length&&n.dc.nu(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function _O(t,e,r){const n=B(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.yc.get(e),s=i&&i.key;if(s){let a=new je(U.comparator);a=a.insert(s,Re.newNoDocument(s,J.min()));const o=ie().add(s),c=new Bc(J.min(),new Map,new je(ne),a,o);await aN(n,c),n.gc=n.gc.remove(s),n.yc.delete(e),c1(n)}else await Za(n.localStore,e,!1).then(()=>to(n,e,r)).catch(Yi)}async function SO(t,e){const r=B(t),n=e.batch.batchId;try{const i=await UP(r.localStore,e);l1(r,n,null),o1(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await qn(r,i)}catch(i){await Yi(i)}}async function kO(t,e,r){const n=B(t);try{const i=await function(s,a){const o=B(s);return o.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return o.mutationQueue.lookupMutationBatch(c,a).next(d=>(Z(d!==null),u=d.keys(),o.mutationQueue.removeMutationBatch(c,d))).next(()=>o.mutationQueue.performConsistencyCheck(c)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>o.localDocuments.getDocuments(c,u))})}(n.localStore,e);l1(n,e,r),o1(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await qn(n,i)}catch(i){await Yi(i)}}async function IO(t,e){const r=B(t);Wi(r.remoteStore)||P("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(s){const a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",o=>a.mutationQueue.getHighestUnacknowledgedBatchId(o))}(r.localStore);if(n===-1)return void e.resolve();const i=r.Ec.get(n)||[];i.push(e),r.Ec.set(n,i)}catch(n){const i=_o(n,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function o1(t,e){(t.Ec.get(e)||[]).forEach(r=>{r.resolve()}),t.Ec.delete(e)}function l1(t,e,r){const n=B(t);let i=n.Tc[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Tc[n.currentUser.toKey()]=i}}function to(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t._c.get(e))t.wc.delete(n),r&&t.dc.Pc(n,r);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(n=>{t.Ic.containsKey(n)||oN(t,n)})}function oN(t,e){t.mc.delete(e.path.canonicalString());const r=t.gc.get(e);r!==null&&(fc(t.remoteStore,r),t.gc=t.gc.remove(e),t.yc.delete(r),c1(t))}function Tm(t,e,r){for(const n of r)n instanceof nN?(t.Ic.addReference(n.key,e),NO(t,n)):n instanceof iN?(P("SyncEngine","Document no longer in limbo: "+n.key),t.Ic.removeReference(n.key,e),t.Ic.containsKey(n.key)||oN(t,n.key)):Y()}function NO(t,e){const r=e.key,n=r.path.canonicalString();t.gc.get(r)||t.mc.has(n)||(P("SyncEngine","New document in limbo: "+r),t.mc.add(n),c1(t))}function c1(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const r=new U(ye.fromString(e)),n=t.Ac.next();t.yc.set(n,new yO(r)),t.gc=t.gc.insert(r,n),ap(t.remoteStore,new Cn(ur(mo(r.path)),n,"TargetPurposeLimboResolution",ir.ct))}}async function qn(t,e,r){const n=B(t),i=[],s=[],a=[];n.wc.isEmpty()||(n.wc.forEach((o,c)=>{a.push(n.Rc(c,e,r).then(u=>{if((u||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(c.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const d=Gy.Li(c.targetId,u);s.push(d)}}))}),await Promise.all(a),n.dc.nu(i),await async function(o,c){const u=B(o);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>k.forEach(c,h=>k.forEach(h.Fi,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>k.forEach(h.Bi,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!Xi(d))throw d;P("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const p=u.Ji.get(h),g=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(g);u.Ji=u.Ji.insert(h,y)}}}(n.localStore,s))}async function EO(t,e){const r=B(t);if(!r.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());const n=await BI(r.localStore,e);r.currentUser=e,function(i,s){i.Ec.forEach(a=>{a.forEach(o=>{o.reject(new j(I.CANCELLED,s))})}),i.Ec.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await qn(r,n.er)}}function TO(t,e){const r=B(t),n=r.yc.get(e);if(n&&n.fc)return ie().add(n.key);{let i=ie();const s=r._c.get(e);if(!s)return i;for(const a of s){const o=r.wc.get(a);i=i.unionWith(o.view.nc)}return i}}async function CO(t,e){const r=B(t),n=await rh(r.localStore,e.query,!0),i=e.view.hc(n);return r.isPrimaryClient&&Tm(r,e.targetId,i.cc),i}async function jO(t,e){const r=B(t);return qI(r.localStore,e).then(n=>qn(r,n))}async function DO(t,e,r,n){const i=B(t),s=await function(a,o){const c=B(a),u=B(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Sn(d,o).next(h=>h?c.localDocuments.getDocuments(d,h):k.resolve(null)))}(i.localStore,e);s!==null?(r==="pending"?await xo(i.remoteStore):r==="acknowledged"||r==="rejected"?(l1(i,e,n||null),o1(i,e),function(a,o){B(B(a).mutationQueue).Cn(o)}(i.localStore,e)):Y(),await qn(i,s)):P("SyncEngine","Cannot apply mutation batch with id: "+e)}async function AO(t,e){const r=B(t);if(u1(r),d1(r),e===!0&&r.vc!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),i=await Px(r,n.toArray());r.vc=!0,await Em(r.remoteStore,!0);for(const s of i)ap(r.remoteStore,s)}else if(e===!1&&r.vc!==!1){const n=[];let i=Promise.resolve();r._c.forEach((s,a)=>{r.sharedClientState.isLocalQueryTarget(a)?n.push(a):i=i.then(()=>(to(r,a),Za(r.localStore,a,!0))),fc(r.remoteStore,a)}),await i,await Px(r,n),function(s){const a=B(s);a.yc.forEach((o,c)=>{fc(a.remoteStore,c)}),a.Ic.Ts(),a.yc=new Map,a.gc=new je(U.comparator)}(r),r.vc=!1,await Em(r.remoteStore,!1)}}async function Px(t,e,r){const n=B(t),i=[],s=[];for(const a of e){let o;const c=n._c.get(a);if(c&&c.length!==0){o=await Ja(n.localStore,ur(c[0]));for(const u of c){const d=n.wc.get(u),h=await CO(n,d);h.snapshot&&s.push(h.snapshot)}}else{const u=await XI(n.localStore,a);o=await Ja(n.localStore,u),await a1(n,lN(u),a,!1,o.resumeToken)}i.push(o)}return n.dc.nu(s),i}function lN(t){return Qk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function RO(t){const e=B(t);return B(B(e.localStore).persistence).$i()}async function PO(t,e,r,n){const i=B(t);if(i.vc)return void P("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(r){case"current":case"not-current":{const a=await qI(i.localStore,Zk(s[0])),o=Bc.createSynthesizedRemoteEventForCurrentChange(e,r==="current",ht.EMPTY_BYTE_STRING);await qn(i,a,o);break}case"rejected":await Za(i.localStore,e,!0),to(i,e,n);break;default:Y()}}async function OO(t,e,r){const n=u1(t);if(n.vc){for(const i of e){if(n._c.has(i)){P("SyncEngine","Adding an already active target "+i);continue}const s=await XI(n.localStore,i),a=await Ja(n.localStore,s);await a1(n,lN(s),a.targetId,!1,a.resumeToken),ap(n.remoteStore,a)}for(const i of r)n._c.has(i)&&await Za(n.localStore,i,!1).then(()=>{fc(n.remoteStore,i),to(n,i)}).catch(Yi)}}function u1(t){const e=B(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_O.bind(null,e),e.dc.nu=hO.bind(null,e.eventManager),e.dc.Pc=pO.bind(null,e.eventManager),e}function d1(t){const e=B(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kO.bind(null,e),e}function LO(t,e,r){const n=B(t);(async function(i,s,a){try{const o=await s.getMetadata();if(await function(h,p){const g=B(h),y=tt(p.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",v=>g.qs.getBundleMetadata(v,p.id)).then(v=>!!v&&v.createTime.compareTo(y)>=0)}(i.localStore,o))return await s.close(),a._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(o)),Promise.resolve(new Set);a._updateProgress(rN(o));const c=new gO(o,i.localStore,s.serializer);let u=await s.bc();for(;u;){const h=await c.zu(u);h&&a._updateProgress(h),u=await s.bc()}const d=await c.complete();return await qn(i,d.Ju,void 0),await function(h,p){const g=B(h);return g.persistence.runTransaction("Save bundle","readwrite",y=>g.qs.saveBundleMetadata(y,p))}(i.localStore,o),a._completeWith(d.progress),Promise.resolve(d.Hu)}catch(o){return Yr("SyncEngine",`Loading bundle failed with ${o}`),a._failWith(o),Promise.resolve(new Set)}})(n,e,r).then(i=>{n.sharedClientState.notifyBundleLoaded(i)})}class Cm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Yc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return UI(this.persistence,new VI,e.initialUser,this.serializer)}createPersistence(e){return new FI(sp.zs,this.serializer)}createSharedClientState(e){return new HI}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cN extends Cm{constructor(e,r,n){super(),this.Vc=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await d1(this.Vc.syncEngine),await xo(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return UI(this.persistence,new VI,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new IP(n,e.asyncQueue,r)}createIndexBackfillerScheduler(e,r){const n=new lR(r,this.persistence);return new oR(e.asyncQueue,n)}createPersistence(e){const r=Hy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?tr.withCacheSize(this.cacheSizeBytes):tr.DEFAULT;return new Wy(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,GI(),od(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new HI}}class MO extends cN{constructor(e,r){super(e,r,!1),this.Vc=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Vc.syncEngine;this.sharedClientState instanceof Xf&&(this.sharedClientState.syncEngine={jr:DO.bind(null,r),zr:PO.bind(null,r),Wr:OO.bind(null,r),$i:RO.bind(null,r),Qr:jO.bind(null,r)},await this.sharedClientState.start()),await this.persistence.Ii(async n=>{await AO(this.Vc.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const r=GI();if(!Xf.D(r))throw new j(I.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Hy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xf(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class h1{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Rx(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=EO.bind(null,this.syncEngine),await Em(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new dO}createDatastore(e){const r=Yc(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new GP(i));var i;return function(s,a,o,c){return new JP(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return r=this.localStore,n=this.datastore,i=e.asyncQueue,s=o=>Rx(this.syncEngine,o,0),a=Cx.D()?new Cx:new qP,new eO(r,n,i,s,a);var r,n,i,s,a}createSyncEngine(e,r){return function(n,i,s,a,o,c,u){const d=new wO(n,i,s,a,o,c);return u&&(d.vc=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return async function(e){const r=B(e);P("RemoteStore","RemoteStore shutting down."),r.vu.add(5),await vo(r),r.Pu.shutdown(),r.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,r){this.Cc=e,this.serializer=r,this.metadata=new wt,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(n=>{n&&n.Qu()?this.metadata.resolve(n.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.Gu)}`))},n=>this.metadata.reject(n))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(e===null)return null;const r=this.xc.decode(e),n=Number(r);isNaN(n)&&this.Mc(`length string (${r}) is not valid number`);const i=await this.$c(n);return new fO(JSON.parse(i),e.length+n)}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(this.buffer.length===0)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const r=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Fc(){const e=await this.Cc.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new j(I.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=await async function(n,i){const s=B(n),a=hc(s.serializer)+"/documents",o={documents:i.map(h=>dc(s.serializer,h))},c=await s.vo("BatchGetDocuments",a,o,i.length),u=new Map;c.forEach(h=>{const p=sP(s.serializer,h);u.set(p.key.toString(),p)});const d=[];return i.forEach(h=>{const p=u.get(h.toString());Z(!!p),d.push(p)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new wo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const i=U.fromPath(n);this.mutations.push(new Ly(i,this.precondition(i)))}),await async function(r,n){const i=B(r),s=hc(i.serializer)+"/documents",a={writes:n.map(o=>pc(i.serializer,o))};await i.Io("Commit",s,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Y();r=J.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new j(I.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(J.min())?Fe.exists(!1):Fe.updateTime(r):Fe.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(J.min()))throw new j(I.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fe.updateTime(r)}return Fe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,r,n,i,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=s,this.Bc=n.maxAttempts,this.qo=new Qy(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No(async()=>{const e=new FO(this.datastore),r=this.qc(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(i=>{this.Uc(i)}))}).catch(n=>{this.Uc(n)})})}qc(e){try{const r=this.updateFunction(e);return!Mc(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!pI(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=mt.UNAUTHENTICATED,this.clientId=Tk.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{P("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(P("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(I.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=_o(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ld(t,e){t.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");const r=await t.getConfiguration();await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await BI(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jm(t,e){t.asyncQueue.verifyOperationInProgress();const r=await p1(t);P("FirestoreClient","Initializing OnlineComponentProvider");const n=await t.getConfiguration();await e.initialize(r,n),t.setCredentialChangeListener(i=>jx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>jx(e.remoteStore,s)),t._onlineComponents=e}function uN(t){return t.name==="FirebaseError"?t.code===I.FAILED_PRECONDITION||t.code===I.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function p1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{await ld(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!uN(r))throw r;Yr("Error using user provided cache. Falling back to memory cache: "+r),await ld(t,new Cm)}}else P("FirestoreClient","Using default OfflineComponentProvider"),await ld(t,new Cm);return t._offlineComponents}async function lp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),await jm(t,t._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),await jm(t,new h1))),t._onlineComponents}function dN(t){return p1(t).then(e=>e.persistence)}function f1(t){return p1(t).then(e=>e.localStore)}function hN(t){return lp(t).then(e=>e.remoteStore)}function g1(t){return lp(t).then(e=>e.syncEngine)}function BO(t){return lp(t).then(e=>e.datastore)}async function ro(t){const e=await lp(t),r=e.eventManager;return r.onListen=vO.bind(null,e.syncEngine),r.onUnlisten=xO.bind(null,e.syncEngine),r}function zO(t){return t.asyncQueue.enqueue(async()=>{const e=await dN(t),r=await hN(t);return e.setNetworkEnabled(!0),function(n){const i=B(n);return i.vu.delete(0),Xc(i)}(r)})}function YO(t){return t.asyncQueue.enqueue(async()=>{const e=await dN(t),r=await hN(t);return e.setNetworkEnabled(!1),async function(n){const i=B(n);i.vu.add(0),await vo(i),i.bu.set("Offline")}(r)})}function XO(t,e){const r=new wt;return t.asyncQueue.enqueueAndForget(async()=>async function(n,i,s){try{const a=await function(o,c){const u=B(o);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,c))}(n,i);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new j(I.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const o=_o(a,`Failed to get document '${i} from cache`);s.reject(o)}}(await f1(t),e,r)),r.promise}function pN(t,e,r={}){const n=new wt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,a,o,c){const u=new op({next:h=>{s.enqueueAndForget(()=>n1(i,d));const p=h.docs.has(a);!p&&h.fromCache?c.reject(new j(I.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&o&&o.source==="server"?c.reject(new j(I.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new s1(mo(a.path),u,{includeMetadataChanges:!0,Ku:!0});return r1(i,d)}(await ro(t),t.asyncQueue,e,r,n)),n.promise}function qO(t,e){const r=new wt;return t.asyncQueue.enqueueAndForget(async()=>async function(n,i,s){try{const a=await rh(n,i,!0),o=new sN(i,a.ir),c=o.sc(a.documents),u=o.applyChanges(c,!1);s.resolve(u.snapshot)}catch(a){const o=_o(a,`Failed to execute query '${i} against cache`);s.reject(o)}}(await f1(t),e,r)),r.promise}function fN(t,e,r={}){const n=new wt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,a,o,c){const u=new op({next:h=>{s.enqueueAndForget(()=>n1(i,d)),h.fromCache&&o.source==="server"?c.reject(new j(I.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new s1(a,u,{includeMetadataChanges:!0,Ku:!0});return r1(i,d)}(await ro(t),t.asyncQueue,e,r,n)),n.promise}function WO(t,e){const r=new op(e);return t.asyncQueue.enqueueAndForget(async()=>function(n,i){B(n).ku.add(i),i.next()}(await ro(t),r)),()=>{r.Dc(),t.asyncQueue.enqueueAndForget(async()=>function(n,i){B(n).ku.delete(i)}(await ro(t),r))}}function HO(t,e,r,n){const i=function(s,a){let o;return o=typeof s=="string"?gI().encode(s):s,function(c,u){return new $O(c,u)}(function(c,u){if(c instanceof Uint8Array)return Ox(c,u);if(c instanceof ArrayBuffer)return Ox(new Uint8Array(c),u);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(o),a)}(r,Yc(e));t.asyncQueue.enqueueAndForget(async()=>{LO(await g1(t),i,n)})}function GO(t,e){return t.asyncQueue.enqueue(async()=>function(r,n){const i=B(r);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,n))}(await f1(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t,e,r){if(!r)throw new j(I.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mN(t,e,r,n){if(e===!0&&n===!0)throw new j(I.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Mx(t){if(!U.isDocumentKey(t))throw new j(I.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $x(t){if(U.isDocumentKey(t))throw new j(I.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function ve(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(I.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=cp(t);throw new j(I.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function yN(t,e){if(e<=0)throw new j(I.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new j(I.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gN((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new j(I.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new j(I.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new j(I.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(r=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,r.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var r,n}}class qc{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(I.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new j(I.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GA;switch(r.type){case"firstParty":return new ZA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(I.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Lx.get(e);r&&(P("ComponentProvider","Removing Datastore"),Lx.delete(e),r.terminate())}(this),Promise.resolve()}}function KO(t,e,r,n={}){var i;const s=(t=ve(t,qc))._getSettings(),a=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let o,c;if(typeof n.mockUserToken=="string")o=n.mockUserToken,c=mt.MOCK_USER;else{o=yC(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new j(I.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new mt(u)}t._authCredentials=new KA(new Ek(o,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Le(this.firestore,e,this._key)}}class Pt{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Pt(this.firestore,e,this._query)}}class gn extends Pt{constructor(e,r,n){super(e,r,mo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new U(e))}withConverter(e){return new gn(this.firestore,e,this._path)}}function wN(t,e,...r){if(t=ee(t),m1("collection","path",e),t instanceof qc){const n=ye.fromString(e,...r);return $x(n),new gn(t,null,n)}{if(!(t instanceof Le||t instanceof gn))throw new j(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ye.fromString(e,...r));return $x(n),new gn(t.firestore,null,n)}}function QO(t,e){if(t=ve(t,qc),m1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(I.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pt(t,null,function(r){return new Yn(ye.emptyPath(),r)}(e))}function ah(t,e,...r){if(t=ee(t),arguments.length===1&&(e=Tk.A()),m1("doc","path",e),t instanceof qc){const n=ye.fromString(e,...r);return Mx(n),new Le(t,null,new U(n))}{if(!(t instanceof Le||t instanceof gn))throw new j(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ye.fromString(e,...r));return Mx(n),new Le(t.firestore,t instanceof gn?t.converter:null,new U(n))}}function vN(t,e){return t=ee(t),e=ee(e),(t instanceof Le||t instanceof gn)&&(e instanceof Le||e instanceof gn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function xN(t,e){return t=ee(t),e=ee(e),t instanceof Pt&&e instanceof Pt&&t.firestore===e.firestore&&Fc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Qy(this,"async_queue_retry"),this.Xc=()=>{const r=od();r&&P("AsyncQueue","Visibility state changed to "+r.visibilityState),this.qo.Mo()};const e=od();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const r=od();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const r=new wt;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Xi(e))throw e;P("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const r=this.Gc.then(()=>(this.Hc=!0,e().catch(n=>{this.Wc=n,this.Hc=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(n);throw Ze("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.Hc=!1,n))));return this.Gc=r,r}enqueueAfterDelay(e,r,n){this.Zc(),this.Yc.indexOf(e)>-1&&(r=0);const i=t1.createAndSchedule(this,e,r,n,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&Y()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const r of this.zc)if(r.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.zc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const r=this.zc.indexOf(e);this.zc.splice(r,1)}}function Dm(t){return function(e,r){if(typeof e!="object"||e===null)return!1;const n=e;for(const i of r)if(i in n&&typeof n[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ZO{constructor(){this._progressObserver={},this._taskCompletionResolver=new wt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=-1;class Qe extends qc{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new JO,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||bN(this),this._firestoreClient.terminate()}}function _t(t){return t._firestoreClient||bN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function bN(t){var e,r,n;const i=t._freezeSettings(),s=function(a,o,c,u){return new CR(a,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,gN(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new UO(t._authCredentials,t._appCheckCredentials,t._queue,s),!((r=i.cache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.cache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function tL(t,e){SN(t=ve(t,Qe));const r=_t(t);if(r._uninitializedComponentsProvider)throw new j(I.FAILED_PRECONDITION,"SDK cache is already specified.");Yr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new h1;return _N(r,i,new cN(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function rL(t){SN(t=ve(t,Qe));const e=_t(t);if(e._uninitializedComponentsProvider)throw new j(I.FAILED_PRECONDITION,"SDK cache is already specified.");Yr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),n=new h1;return _N(e,n,new MO(n,r.cacheSizeBytes))}function _N(t,e,r){const n=new wt;return t.asyncQueue.enqueue(async()=>{try{await ld(t,r),await jm(t,e),n.resolve()}catch(i){const s=i;if(!uN(s))throw s;Yr("Error enabling indexeddb cache. Falling back to memory cache: "+s),n.reject(s)}}).then(()=>n.promise)}function nL(t){if(t._initialized&&!t._terminated)throw new j(I.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!$r.D())return Promise.resolve();const n=r+"main";await $r.delete(n)}(Hy(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function iL(t){return function(e){const r=new wt;return e.asyncQueue.enqueueAndForget(async()=>IO(await g1(e),r)),r.promise}(_t(t=ve(t,Qe)))}function sL(t){return zO(_t(t=ve(t,Qe)))}function aL(t){return YO(_t(t=ve(t,Qe)))}function oL(t,e){const r=_t(t=ve(t,Qe)),n=new ZO;return HO(r,t._databaseId,e,n),n}function lL(t,e){return GO(_t(t=ve(t,Qe)),e).then(r=>r?new Pt(t,null,r.query):null)}function SN(t){if(t._initialized||t._terminated)throw new j(I.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vn(ht.fromBase64String(e))}catch(r){throw new j(I.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new vn(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new j(I.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new j(I.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new j(I.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=/^__.*__$/;class uL{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Xn(e,this.data,this.fieldMask,r,this.fieldTransforms):new yo(e,this.data,r,this.fieldTransforms)}}class kN{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Xn(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function IN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class dp{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new dp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.aa({path:n,la:!1});return i.fa(e),i}da(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.aa({path:n,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return oh(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(IN(this.ca)&&cL.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class dL{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Yc(e)}ya(e,r,n,i=!1){return new dp({ca:e,methodName:r,ga:n,path:et.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ws(t){const e=t._freezeSettings(),r=Yc(t._databaseId);return new dL(t._databaseId,!!e.ignoreUndefinedProperties,r)}function hp(t,e,r,n,i,s={}){const a=t.ya(s.merge||s.mergeFields?2:0,e,r,i);x1("Data must be an object, but it was:",a,n);const o=TN(n,a);let c,u;if(s.merge)c=new sr(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=Am(e,h,r);if(!a.contains(p))throw new j(I.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);jN(d,p)||d.push(p)}c=new sr(d),u=a.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=a.fieldTransforms;return new uL(new Tt(o),c,u)}class Wc extends qs{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wc}}function NN(t,e,r){return new dp({ca:3,ga:e.settings.ga,methodName:t._methodName,la:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class y1 extends qs{_toFieldTransform(e){return new Uc(e.path,new Ga)}isEqual(e){return e instanceof y1}}class hL extends qs{constructor(e,r){super(e),this.pa=r}_toFieldTransform(e){const r=NN(this,e,!0),n=this.pa.map(s=>Hs(s,r)),i=new Ps(n);return new Uc(e.path,i)}isEqual(e){return this===e}}class pL extends qs{constructor(e,r){super(e),this.pa=r}_toFieldTransform(e){const r=NN(this,e,!0),n=this.pa.map(s=>Hs(s,r)),i=new Os(n);return new Uc(e.path,i)}isEqual(e){return this===e}}class fL extends qs{constructor(e,r){super(e),this.Ia=r}_toFieldTransform(e){const r=new Ka(e.serializer,aI(e.serializer,this.Ia));return new Uc(e.path,r)}isEqual(e){return this===e}}function w1(t,e,r,n){const i=t.ya(1,e,r);x1("Data must be an object, but it was:",i,n);const s=[],a=Tt.empty();Xs(n,(c,u)=>{const d=b1(e,c,r);u=ee(u);const h=i.da(d);if(u instanceof Wc)s.push(d);else{const p=Hs(u,h);p!=null&&(s.push(d),a.set(d,p))}});const o=new sr(s);return new kN(a,o,i.fieldTransforms)}function v1(t,e,r,n,i,s){const a=t.ya(1,e,r),o=[Am(e,n,r)],c=[i];if(s.length%2!=0)throw new j(I.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)o.push(Am(e,s[p])),c.push(s[p+1]);const u=[],d=Tt.empty();for(let p=o.length-1;p>=0;--p)if(!jN(u,o[p])){const g=o[p];let y=c[p];y=ee(y);const v=a.da(g);if(y instanceof Wc)u.push(g);else{const x=Hs(y,v);x!=null&&(u.push(g),d.set(g,x))}}const h=new sr(u);return new kN(d,h,a.fieldTransforms)}function EN(t,e,r,n=!1){return Hs(r,t.ya(n?4:3,e))}function Hs(t,e){if(CN(t=ee(t)))return x1("Unsupported field value:",e,t),TN(t,e);if(t instanceof qs)return function(r,n){if(!IN(n.ca))throw n._a(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n._a(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(r,n){const i=[];let s=0;for(const a of r){let o=Hs(a,n.wa(s));o==null&&(o={nullValue:"NULL_VALUE"}),i.push(o),s++}return{arrayValue:{values:i}}}(t,e)}return function(r,n){if((r=ee(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aI(n.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ve.fromDate(r);return{timestampValue:Qa(n.serializer,i)}}if(r instanceof Ve){const i=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qa(n.serializer,i)}}if(r instanceof up)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vn)return{bytesValue:wI(n.serializer,r._byteString)};if(r instanceof Le){const i=n.databaseId,s=r.firestore._databaseId;if(!s.isEqual(i))throw n._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:By(r.firestore._databaseId||n.databaseId,r._key.path)}}throw n._a(`Unsupported field value: ${cp(r)}`)}(t,e)}function TN(t,e){const r={};return Vk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(t,(n,i)=>{const s=Hs(i,e.ha(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function CN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof up||t instanceof vn||t instanceof Le||t instanceof qs)}function x1(t,e,r){if(!CN(r)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(r)){const n=cp(r);throw n==="an object"?e._a(t+" a custom object"):e._a(t+" "+n)}}function Am(t,e,r){if((e=ee(e))instanceof Oi)return e._internalPath;if(typeof e=="string")return b1(t,e);throw oh("Field path arguments must be of type string or ",t,!1,void 0,r)}const gL=new RegExp("[~\\*/\\[\\]]");function b1(t,e,r){if(e.search(gL)>=0)throw oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Oi(...e.split("."))._internalPath}catch{throw oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function oh(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${n}`),a&&(c+=` in document ${i}`),c+=")"),new j(I.INVALID_ARGUMENT,o+t+c)}function jN(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(pp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class mL extends gc{data(){return super.data()}}function pp(t,e){return typeof e=="string"?b1(t,e):e instanceof Oi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(I.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _1{}class Hc extends _1{}function ei(t,e,...r){let n=[];e instanceof _1&&n.push(e),n=n.concat(r),function(i){const s=i.filter(o=>o instanceof S1).length,a=i.filter(o=>o instanceof fp).length;if(s>1||s>0&&a>0)throw new j(I.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class fp extends Hc{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new fp(e,r,n)}_apply(e){const r=this._parse(e);return RN(e._query,r),new Pt(e.firestore,e.converter,wm(e._query,r))}_parse(e){const r=Ws(e.firestore);return function(i,s,a,o,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new j(I.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Ux(d,u);const p=[];for(const g of d)p.push(Vx(o,i,g));h={arrayValue:{values:p}}}else h=Vx(o,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Ux(d,u),h=EN(a,s,d,u==="in"||u==="not-in");return de.create(c,u,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function yL(t,e,r){const n=e,i=pp("where",t);return fp._create(i,n,r)}class S1 extends _1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new S1(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:_e.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(n,i){let s=n;const a=i.getFlattenedFilters();for(const o of a)RN(s,o),s=wm(s,o)}(e._query,r),new Pt(e.firestore,e.converter,wm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class k1 extends Hc{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new k1(e,r)}_apply(e){const r=function(n,i,s){if(n.startAt!==null)throw new j(I.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new j(I.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Ra(i,s);return function(o,c){if(Ry(o)===null){const u=ep(o);u!==null&&PN(o,u,c.field)}}(n,a),a}(e._query,this._field,this._direction);return new Pt(e.firestore,e.converter,function(n,i){const s=n.explicitOrderBy.concat([i]);return new Yn(n.path,n.collectionGroup,s,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,r))}}function wL(t,e="asc"){const r=e,n=pp("orderBy",t);return k1._create(n,r)}class gp extends Hc{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new gp(e,r,n)}_apply(e){return new Pt(e.firestore,e.converter,Jd(e._query,this._limit,this._limitType))}}function vL(t){return yN("limit",t),gp._create("limit",t,"F")}function xL(t){return yN("limitToLast",t),gp._create("limitToLast",t,"L")}class mp extends Hc{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new mp(e,r,n)}_apply(e){const r=AN(e,this.type,this._docOrFields,this._inclusive);return new Pt(e.firestore,e.converter,function(n,i){return new Yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,i,n.endAt)}(e._query,r))}}function bL(...t){return mp._create("startAt",t,!0)}function _L(...t){return mp._create("startAfter",t,!1)}class yp extends Hc{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new yp(e,r,n)}_apply(e){const r=AN(e,this.type,this._docOrFields,this._inclusive);return new Pt(e.firestore,e.converter,function(n,i){return new Yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,i)}(e._query,r))}}function SL(...t){return yp._create("endBefore",t,!1)}function kL(...t){return yp._create("endAt",t,!0)}function AN(t,e,r,n){if(r[0]=ee(r[0]),r[0]instanceof gc)return function(i,s,a,o,c){if(!o)throw new j(I.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const d of bs(i))if(d.field.isKeyField())u.push(As(s,o.key));else{const h=o.data.field(d.field);if(Zh(h))throw new j(I.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=d.field.canonicalString();throw new j(I.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(h)}return new Ri(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const i=Ws(t.firestore);return function(s,a,o,c,u,d){const h=s.explicitOrderBy;if(u.length>h.length)throw new j(I.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<u.length;g++){const y=u[g];if(h[g].field.isKeyField()){if(typeof y!="string")throw new j(I.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!Py(s)&&y.indexOf("/")!==-1)throw new j(I.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const v=s.path.child(ye.fromString(y));if(!U.isDocumentKey(v))throw new j(I.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const x=new U(v);p.push(As(a,x))}else{const v=EN(o,c,y);p.push(v)}}return new Ri(p,d)}(t._query,t.firestore._databaseId,i,e,r,n)}}function Vx(t,e,r){if(typeof(r=ee(r))=="string"){if(r==="")throw new j(I.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Py(e)&&r.indexOf("/")!==-1)throw new j(I.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ye.fromString(r));if(!U.isDocumentKey(n))throw new j(I.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return As(t,new U(n))}if(r instanceof Le)return As(t,r._key);throw new j(I.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cp(r)}.`)}function Ux(t,e){if(!Array.isArray(t)||t.length===0)throw new j(I.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RN(t,e){if(e.isInequality()){const n=ep(t),i=e.field;if(n!==null&&!n.isEqual(i))throw new j(I.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const s=Ry(t);s!==null&&PN(t,i,s)}const r=function(n,i){for(const s of n)for(const a of s.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new j(I.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(I.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function PN(t,e,r){if(!r.isEqual(e))throw new j(I.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class I1{convertValue(e,r="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Y()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Xs(e,(i,s)=>{n[i]=this.convertValue(s,r)}),n}convertGeoPoint(e){return new up(Ge(e.latitude),Ge(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Dy(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){const r=Ci(e);return new Ve(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ye.fromString(e);Z(TI(n));const i=new Di(n.get(1),n.get(3)),s=new U(n.popFirst(5));return i.isEqual(r)||Ze(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class IL extends I1{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fn extends gc{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(pp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Il extends Fn{data(e={}){return super.data(e)}}class Li{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new ps(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Il(this._firestore,this._userDataWriter,n.key,n,new ps(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new j(I.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let s=0;return n._snapshot.docChanges.map(a=>{const o=new Il(n._firestore,n._userDataWriter,a.doc.key,a.doc,new ps(n._snapshot.mutatedKeys.has(a.doc.key),n._snapshot.fromCache),n.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:s++}})}{let s=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const o=new Il(n._firestore,n._userDataWriter,a.doc.key,a.doc,new ps(n._snapshot.mutatedKeys.has(a.doc.key),n._snapshot.fromCache),n.query.converter);let c=-1,u=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:NL(a.type),doc:o,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function NL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function ON(t,e){return t instanceof Fn&&e instanceof Fn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Li&&e instanceof Li&&t._firestore===e._firestore&&xN(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){t=ve(t,Le);const e=ve(t.firestore,Qe);return pN(_t(e),t._key).then(r=>N1(e,t,r))}class Gs extends I1{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,r)}}function TL(t){t=ve(t,Le);const e=ve(t.firestore,Qe),r=_t(e),n=new Gs(e);return XO(r,t._key).then(i=>new Fn(e,n,t._key,i,new ps(i!==null&&i.hasLocalMutations,!0),t.converter))}function CL(t){t=ve(t,Le);const e=ve(t.firestore,Qe);return pN(_t(e),t._key,{source:"server"}).then(r=>N1(e,t,r))}function jL(t){t=ve(t,Pt);const e=ve(t.firestore,Qe),r=_t(e),n=new Gs(e);return DN(t._query),fN(r,t._query).then(i=>new Li(e,n,t,i))}function DL(t){t=ve(t,Pt);const e=ve(t.firestore,Qe),r=_t(e),n=new Gs(e);return qO(r,t._query).then(i=>new Li(e,n,t,i))}function AL(t){t=ve(t,Pt);const e=ve(t.firestore,Qe),r=_t(e),n=new Gs(e);return fN(r,t._query,{source:"server"}).then(i=>new Li(e,n,t,i))}function Bx(t,e,r){t=ve(t,Le);const n=ve(t.firestore,Qe),i=wp(t.converter,e,r);return Gc(n,[hp(Ws(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Fe.none())])}function zx(t,e,r,...n){t=ve(t,Le);const i=ve(t.firestore,Qe),s=Ws(i);let a;return a=typeof(e=ee(e))=="string"||e instanceof Oi?v1(s,"updateDoc",t._key,e,r,n):w1(s,"updateDoc",t._key,e),Gc(i,[a.toMutation(t._key,Fe.exists(!0))])}function RL(t){return Gc(ve(t.firestore,Qe),[new wo(t._key,Fe.none())])}function PL(t,e){const r=ve(t.firestore,Qe),n=ah(t),i=wp(t.converter,e);return Gc(r,[hp(Ws(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Fe.exists(!1))]).then(()=>n)}function LN(t,...e){var r,n,i;t=ee(t);let s={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||Dm(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges};if(Dm(e[a])){const h=e[a];e[a]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[a+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[a+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,d;if(t instanceof Le)u=ve(t.firestore,Qe),d=mo(t._key.path),c={next:h=>{e[a]&&e[a](N1(u,t,h))},error:e[a+1],complete:e[a+2]};else{const h=ve(t,Pt);u=ve(h.firestore,Qe),d=h._query;const p=new Gs(u);c={next:g=>{e[a]&&e[a](new Li(u,p,h,g))},error:e[a+1],complete:e[a+2]},DN(t._query)}return function(h,p,g,y){const v=new op(y),x=new s1(p,v,g);return h.asyncQueue.enqueueAndForget(async()=>r1(await ro(h),x)),()=>{v.Dc(),h.asyncQueue.enqueueAndForget(async()=>n1(await ro(h),x))}}(_t(u),d,o,c)}function OL(t,e){return WO(_t(t=ve(t,Qe)),Dm(e)?e:{next:e})}function Gc(t,e){return function(r,n){const i=new wt;return r.asyncQueue.enqueueAndForget(async()=>bO(await g1(r),n,i)),i.promise}(_t(t),e)}function N1(t,e,r){const n=r.docs.get(e._key),i=new Gs(t);return new Fn(t,i,e._key,n,new ps(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Ws(e)}set(e,r,n){this._verifyNotCommitted();const i=oi(e,this._firestore),s=wp(i.converter,r,n),a=hp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,Fe.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const s=oi(e,this._firestore);let a;return a=typeof(r=ee(r))=="string"||r instanceof Oi?v1(this._dataReader,"WriteBatch.update",s._key,r,n,i):w1(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(a.toMutation(s._key,Fe.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=oi(e,this._firestore);return this._mutations=this._mutations.concat(new wo(r._key,Fe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(I.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function oi(t,e){if((t=ee(t)).firestore!==e)throw new j(I.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=Ws(e)}get(e){const r=oi(e,this._firestore),n=new IL(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return Y();const s=i[0];if(s.isFoundDocument())return new gc(this._firestore,n,s.key,s,r.converter);if(s.isNoDocument())return new gc(this._firestore,n,r._key,null,r.converter);throw Y()})}set(e,r,n){const i=oi(e,this._firestore),s=wp(i.converter,r,n),a=hp(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,n);return this._transaction.set(i._key,a),this}update(e,r,n,...i){const s=oi(e,this._firestore);let a;return a=typeof(r=ee(r))=="string"||r instanceof Oi?v1(this._dataReader,"Transaction.update",s._key,r,n,i):w1(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(e){const r=oi(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=oi(e,this._firestore),n=new Gs(this._firestore);return super.get(e).then(i=>new Fn(this._firestore,n,r._key,i._document,new ps(!1,!1),r.converter))}}function FL(t,e,r){t=ve(t,Qe);const n=Object.assign(Object.assign({},LL),r);return function(i){if(i.maxAttempts<1)throw new j(I.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,s,a){const o=new wt;return i.asyncQueue.enqueueAndForget(async()=>{const c=await BO(i);new VO(i.asyncQueue,c,a,s,o).run()}),o.promise}(_t(t),i=>e(new $L(t,i)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(){return new Wc("deleteField")}function UL(){return new y1("serverTimestamp")}function BL(...t){return new hL("arrayUnion",t)}function zL(...t){return new pL("arrayRemove",t)}function YL(t){return new fL("increment",t)}(function(t,e=!0){(function(r){go=r})(Vi),Ni(new mn("firestore",(r,{instanceIdentifier:n,options:i})=>{const s=r.getProvider("app").getImmediate(),a=new Qe(new QA(r.getProvider("auth-internal")),new tR(r.getProvider("app-check-internal")),function(o,c){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new j(I.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Di(o.options.projectId,c)}(s,n),s);return i=Object.assign({useFetchStreams:e},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),pn($v,"3.13.0",t),pn($v,"3.13.0","esm2017")})();const XL="@firebase/firestore-compat",qL="0.3.12";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function Xx(){if(!ER())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}let MN=class Rm{constructor(e){this._delegate=e}static fromBase64String(e){return Xx(),new Rm(vn.fromBase64String(e))}static fromUint8Array(e){return Yx(),new Rm(vn.fromUint8Array(e))}toBase64(){return Xx(),this._delegate.toBase64()}toUint8Array(){return Yx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){return WL(t,["next","error","complete"])}function WL(t,e){if(typeof t!="object"||t===null)return!1;const r=t;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{enableIndexedDbPersistence(e,r){return tL(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return rL(e._delegate)}clearIndexedDbPersistence(e){return nL(e._delegate)}}class $N{constructor(e,r,n){this._delegate=r,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Di||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&Yr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},r),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,r,n={}){KO(this._delegate,e,r,n)}enableNetwork(){return sL(this._delegate)}disableNetwork(){return aL(this._delegate)}enablePersistence(e){let r=!1,n=!1;return e&&(r=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,mN("synchronizeTabs",r,"experimentalForceOwningTab",n)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return iL(this._delegate)}onSnapshotsInSync(e){return OL(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new no(this,wN(this._delegate,e))}catch(r){throw Yt(r,"collection()","Firestore.collection()")}}doc(e){try{return new Er(this,ah(this._delegate,e))}catch(r){throw Yt(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zt(this,QO(this._delegate,e))}catch(r){throw Yt(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return FL(this._delegate,r=>e(new FN(this,r)))}batch(){return _t(this._delegate),new VN(new ML(this._delegate,e=>Gc(this._delegate,e)))}loadBundle(e){return oL(this._delegate,e)}namedQuery(e){return lL(this._delegate,e).then(r=>r?new zt(this,r):null)}}class vp extends I1{constructor(e){super(),this.firestore=e}convertBytes(e){return new MN(new vn(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return Er.forKey(r,this.firestore,null)}}function GL(t){WA(t)}class FN{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new vp(e)}get(e){const r=fs(e);return this._delegate.get(r).then(n=>new mc(this._firestore,new Fn(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,r.converter)))}set(e,r,n){const i=fs(e);return n?(E1("Transaction.set",n),this._delegate.set(i,r,n)):this._delegate.set(i,r),this}update(e,r,n,...i){const s=fs(e);return arguments.length===2?this._delegate.update(s,r):this._delegate.update(s,r,n,...i),this}delete(e){const r=fs(e);return this._delegate.delete(r),this}}class VN{constructor(e){this._delegate=e}set(e,r,n){const i=fs(e);return n?(E1("WriteBatch.set",n),this._delegate.set(i,r,n)):this._delegate.set(i,r),this}update(e,r,n,...i){const s=fs(e);return arguments.length===2?this._delegate.update(s,r):this._delegate.update(s,r,n,...i),this}delete(e){const r=fs(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Fs{constructor(e,r,n){this._firestore=e,this._userDataWriter=r,this._delegate=n}fromFirestore(e,r){const n=new Il(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yc(this._firestore,n),r??{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const n=Fs.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let s=i.get(r);return s||(s=new Fs(e,new vp(e),r),i.set(r,s)),s}}Fs.INSTANCES=new WeakMap;class Er{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new vp(e)}static forPath(e,r,n){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Er(r,new Le(r._delegate,n,new U(e)))}static forKey(e,r,n){return new Er(r,new Le(r._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new no(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new no(this.firestore,wN(this._delegate,e))}catch(r){throw Yt(r,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ee(e),e instanceof Le?vN(this._delegate,e):!1}set(e,r){r=E1("DocumentReference.set",r);try{return r?Bx(this._delegate,e,r):Bx(this._delegate,e)}catch(n){throw Yt(n,"setDoc()","DocumentReference.set()")}}update(e,r,...n){try{return arguments.length===1?zx(this._delegate,e):zx(this._delegate,e,r,...n)}catch(i){throw Yt(i,"updateDoc()","DocumentReference.update()")}}delete(){return RL(this._delegate)}onSnapshot(...e){const r=UN(e),n=BN(e,i=>new mc(this.firestore,new Fn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return LN(this._delegate,r,n)}get(e){let r;return(e==null?void 0:e.source)==="cache"?r=TL(this._delegate):(e==null?void 0:e.source)==="server"?r=CL(this._delegate):r=EL(this._delegate),r.then(n=>new mc(this.firestore,new Fn(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new Er(this.firestore,e?this._delegate.withConverter(Fs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Yt(t,e,r){return t.message=t.message.replace(e,r),t}function UN(t){for(const e of t)if(typeof e=="object"&&!Pm(e))return e;return{}}function BN(t,e){var r,n;let i;return Pm(t[0])?i=t[0]:Pm(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(r=i.error)===null||r===void 0?void 0:r.bind(i),complete:(n=i.complete)===null||n===void 0?void 0:n.bind(i)}}class mc{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new Er(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return ON(this._delegate,e._delegate)}}class yc extends mc{data(e){const r=this._delegate.data(e);return HA(r!==void 0),r}}class zt{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new vp(e)}where(e,r,n){try{return new zt(this.firestore,ei(this._delegate,yL(e,r,n)))}catch(i){throw Yt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new zt(this.firestore,ei(this._delegate,wL(e,r)))}catch(n){throw Yt(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zt(this.firestore,ei(this._delegate,vL(e)))}catch(r){throw Yt(r,"limit()","Query.limit()")}}limitToLast(e){try{return new zt(this.firestore,ei(this._delegate,xL(e)))}catch(r){throw Yt(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zt(this.firestore,ei(this._delegate,bL(...e)))}catch(r){throw Yt(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zt(this.firestore,ei(this._delegate,_L(...e)))}catch(r){throw Yt(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zt(this.firestore,ei(this._delegate,SL(...e)))}catch(r){throw Yt(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zt(this.firestore,ei(this._delegate,kL(...e)))}catch(r){throw Yt(r,"endAt()","Query.endAt()")}}isEqual(e){return xN(this._delegate,e._delegate)}get(e){let r;return(e==null?void 0:e.source)==="cache"?r=DL(this._delegate):(e==null?void 0:e.source)==="server"?r=AL(this._delegate):r=jL(this._delegate),r.then(n=>new Om(this.firestore,new Li(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const r=UN(e),n=BN(e,i=>new Om(this.firestore,new Li(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return LN(this._delegate,r,n)}withConverter(e){return new zt(this.firestore,e?this._delegate.withConverter(Fs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class KL{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new yc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Om{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new zt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new KL(this._firestore,r))}forEach(e,r){this._delegate.forEach(n=>{e.call(r,new yc(this._firestore,n))})}isEqual(e){return ON(this._delegate,e._delegate)}}class no extends zt{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Er(this.firestore,e):null}doc(e){try{return e===void 0?new Er(this.firestore,ah(this._delegate)):new Er(this.firestore,ah(this._delegate,e))}catch(r){throw Yt(r,"doc()","CollectionReference.doc()")}}add(e){return PL(this._delegate,e).then(r=>new Er(this.firestore,r))}isEqual(e){return vN(this._delegate,e._delegate)}withConverter(e){return new no(this.firestore,e?this._delegate.withConverter(Fs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function fs(t){return ve(t,Le)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(...e){this._delegate=new Oi(...e)}static documentId(){return new T1(et.keyField().canonicalString())}isEqual(e){return e=ee(e),e instanceof Oi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._delegate=e}static serverTimestamp(){const e=UL();return e._methodName="FieldValue.serverTimestamp",new as(e)}static delete(){const e=VL();return e._methodName="FieldValue.delete",new as(e)}static arrayUnion(...e){const r=BL(...e);return r._methodName="FieldValue.arrayUnion",new as(r)}static arrayRemove(...e){const r=zL(...e);return r._methodName="FieldValue.arrayRemove",new as(r)}static increment(e){const r=YL(e);return r._methodName="FieldValue.increment",new as(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL={Firestore:$N,GeoPoint:up,Timestamp:Ve,Blob:MN,Transaction:FN,WriteBatch:VN,DocumentReference:Er,DocumentSnapshot:mc,Query:zt,QueryDocumentSnapshot:yc,QuerySnapshot:Om,CollectionReference:no,FieldPath:T1,FieldValue:as,setLogLevel:GL,CACHE_SIZE_UNLIMITED:eL};function JL(t,e){t.INTERNAL.registerComponent(new mn("firestore-compat",r=>{const n=r.getProvider("app-compat").getImmediate(),i=r.getProvider("firestore").getImmediate();return e(n,i)},"PUBLIC").setServiceProps(Object.assign({},QL)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t){JL(t,(e,r)=>new $N(e,r,new HL)),t.registerVersion(XL,qL)}ZL(Ne);const e8={apiKey:"AIzaSyAOMubppe1JZbBh0VBv7UIbZyY2S1RI9fw",authDomain:"bible-sungseo.firebaseapp.com",projectId:"bible-sungseo",storageBucket:"bible-sungseo.firebasestorage.app",messagingSenderId:"1061949588108",appId:"1:1061949588108:web:e8e3bbd6c3f73afa5131a9"};let oe,Zt;try{Ne.apps.length?Ne.app():Ne.initializeApp(e8),Zt=Ne.auth(),oe=Ne.firestore()}catch(t){console.error("Firebase init failed:",t)}let lh=[];for(let t=1;t<=14;t++)lh.push(t+"");lh=lh.concat(["1","2","","","1","2","3","4","5",""]);const t8=[" "," "," "," "," "],r8=["",""],n8=["1","2","3","4","5","6"],i8=["","",""],Vn=[{id:"senior",name:"",color:"bg-orange-500",icon:"",subgroups:lh},{id:"youth",name:"",color:"bg-blue-500",icon:"",subgroups:t8},{id:"middlehigh",name:"",color:"bg-purple-500",icon:"",subgroups:r8},{id:"elementary",name:"",color:"bg-yellow-500",icon:"",subgroups:n8},{id:"kinder",name:"",color:"bg-pink-500",icon:"",subgroups:i8}],s8=[{date:"1-1",range:" 1-2"},{date:"1-2",range:" 3-5"},{date:"1-3",range:" 6-8"},{date:"1-4",range:" 9-11"},{date:"1-5",range:" 1-3"},{date:"1-6",range:" 4-6"},{date:"1-7",range:" 7-9"},{date:"1-8",range:" 10-12"},{date:"1-9",range:" 13-14"},{date:"1-10",range:" 15-16"},{date:"1-11",range:" 17-19"},{date:"1-12",range:" 20-21"},{date:"1-13",range:" 22-24"},{date:"1-14",range:" 25-26"},{date:"1-15",range:" 27-28"},{date:"1-16",range:" 29-30"},{date:"1-17",range:" 31-33"},{date:"1-18",range:" 34-35"},{date:"1-19",range:" 36-38"},{date:"1-20",range:" 39-40"},{date:"1-21",range:" 1-4"},{date:"1-22",range:" 5-7"},{date:"1-23",range:" 8-10"},{date:"1-24",range:" 11-14"},{date:"1-25",range:" 15-18"},{date:"1-26",range:" 19-21"},{date:"1-27",range:" 22-24"},{date:"1-28",range:" 1-3"},{date:"1-29",range:" 4-6"},{date:"1-30",range:" 7-8"},{date:"1-31",range:" 9-11"},{date:"2-1",range:" 12-15"},{date:"2-2",range:" 16-18"},{date:"2-3",range:" 19-21"},{date:"2-4",range:" 1-4"},{date:"2-5",range:" 1-3"},{date:"2-6",range:" 4-6"},{date:"2-7",range:" 7-9"},{date:"2-8",range:" 10-13"},{date:"2-9",range:" 14-17"},{date:"2-10",range:" 18-21"},{date:"2-11",range:" 22-24"},{date:"2-12",range:" 25-29"},{date:"2-13",range:" 30-32"},{date:"2-14",range:" 33-34"},{date:"2-15",range:" 35-38"},{date:"2-16",range:" 39-42"},{date:"2-17",range:" 1-2"},{date:"2-18",range:" 3-4"},{date:"2-19",range:" 5-6"},{date:"2-20",range:" 7-9"},{date:"2-21",range:" 10-12"},{date:"2-22",range:" 1-6"},{date:"2-23",range:" 1-2,  1-3"},{date:"2-24",range:" 4-8"},{date:"2-25",range:" 9-14"},{date:"2-26",range:" 7-10"},{date:"2-27",range:" 1-3"},{date:"2-28",range:" 4-7"},{date:"3-1",range:" 8-10"},{date:"3-2",range:" 11-13"},{date:"3-3",range:" 1-3"},{date:"3-4",range:" 4-6"},{date:"3-5",range:" 7-10"},{date:"3-6",range:" 1-4"},{date:"3-7",range:" 5-6"},{date:"3-8",range:" 7-9"},{date:"3-9",range:" 10-11"},{date:"3-10",range:" 12-13"},{date:"3-11",range:" 14-15"},{date:"3-12",range:" 16-18"},{date:"3-13",range:" 19-21"},{date:"3-14",range:" 22-23"},{date:"3-15",range:" 24-25"},{date:"3-16",range:" 26"},{date:"3-17",range:" 27-28"},{date:"3-18",range:" 1-3"},{date:"3-19",range:" 4-5"},{date:"3-20",range:" 1-3"},{date:"3-21",range:" 4-6"},{date:"3-22",range:" 7-9"},{date:"3-23",range:" 10-12"},{date:"3-24",range:" 13-16"},{date:"3-25",range:" 1-3"},{date:"3-26",range:" 4-6"},{date:"3-27",range:" 1-5"},{date:"3-28",range:" 6-9"},{date:"3-29",range:" 10-11"},{date:"3-30",range:" 12-13,  1"},{date:"3-31",range:" 2-3"},{date:"4-1",range:" 12-15"},{date:"4-2",range:" 16-19"},{date:"4-3",range:" 20-23"},{date:"4-4",range:" 24-26"},{date:"4-5",range:" 1-4"},{date:"4-6",range:" 5-7"},{date:"4-7",range:" 8-9"},{date:"4-8",range:" 10-12"},{date:"4-9",range:" 13-14"},{date:"4-10",range:" 15-16"},{date:"4-11",range:" 17-19"},{date:"4-12",range:" 20-21"},{date:"4-13",range:" 22-23"},{date:"4-14",range:" 24-25"},{date:"4-15",range:" 26-27"},{date:"4-16",range:" 1-2"},{date:"4-17",range:" 3-6"},{date:"4-18",range:" 7-9"},{date:"4-19",range:" 10-13"},{date:"4-20",range:" 14-15"},{date:"4-21",range:" 16-17"},{date:"4-22",range:" 18-20"},{date:"4-23",range:" 21-24"},{date:"4-24",range:" 25-26"},{date:"4-25",range:" 27-31"},{date:"4-26",range:" 1-3"},{date:"4-27",range:" 4-7"},{date:"4-28",range:" 8-12"},{date:"4-29",range:" 13-14"},{date:"4-30",range:" 15-17"},{date:"5-1",range:" 18-19"},{date:"5-2",range:" 20-22"},{date:"5-3",range:" 23-24"},{date:"5-4",range:" 1-7"},{date:"5-5",range:" 8-12"},{date:"5-6",range:" 13-17"},{date:"5-7",range:" 18-19"},{date:"5-8",range:" 20-24"},{date:"5-9",range:" 25-29"},{date:"5-10",range:" 30-33"},{date:"5-11",range:" 34-37"},{date:"5-12",range:" 38-41"},{date:"5-13",range:" 42-44"},{date:"5-14",range:" 45-49"},{date:"5-15",range:" 50-53"},{date:"5-16",range:" 54-58"},{date:"5-17",range:" 59-65"},{date:"5-18",range:" 66-68"},{date:"5-19",range:" 69-72"},{date:"5-20",range:" 1-3"},{date:"5-21",range:" 4-7"},{date:"5-22",range:" 8-10"},{date:"5-23",range:" 11-14"},{date:"5-24",range:" 15-20"},{date:"5-25",range:" 21-23"},{date:"5-26",range:" 24-27"},{date:"5-27",range:" 28-30"},{date:"5-28",range:" 31-35"},{date:"5-29",range:" 36-39"},{date:"5-30",range:" 40-42"},{date:"5-31",range:" 43-45"},{date:"6-1",range:" 46-49"},{date:"6-2",range:" 50-54"},{date:"6-3",range:" 55-58"},{date:"6-4",range:" 59-63"},{date:"6-5",range:" 64-66"},{date:"6-6",range:" 1-3"},{date:"6-7",range:" 1,  1-3"},{date:"6-8",range:" 1-3"},{date:"6-9",range:" 1-3"},{date:"6-10",range:" 4-6"},{date:"6-11",range:" 7-8"},{date:"6-12",range:" 9-10"},{date:"6-13",range:" 11-12"},{date:"6-14",range:" 13-14"},{date:"6-15",range:" 15-16"},{date:"6-16",range:" 6-7"},{date:"6-17",range:" 8-9"},{date:"6-18",range:" 10-12"},{date:"6-19",range:" 1-5"},{date:"6-20",range:" 6-8"},{date:"6-21",range:" 9-11"},{date:"6-22",range:" 12-14"},{date:"6-23",range:" 15-16"},{date:"6-24",range:" 1-5"},{date:"6-25",range:" 6-9"},{date:"6-26",range:" 10-13"},{date:"6-27",range:" 1-5"},{date:"6-28",range:" 1-3,  1-2"},{date:"6-29",range:" 3-5,  1"},{date:"6-30",range:" 4-7"},{date:"7-1",range:" 27-29"},{date:"7-2",range:" 30-31"},{date:"7-3",range:" 32-34"},{date:"7-4",range:" 35-36"},{date:"7-5",range:" 1-4"},{date:"7-6",range:" 5-7"},{date:"7-7",range:" 8-10"},{date:"7-8",range:" 11-13"},{date:"7-9",range:" 14-16"},{date:"7-10",range:" 17-21"},{date:"7-11",range:" 22-24"},{date:"7-12",range:" 25-27"},{date:"7-13",range:" 28-30"},{date:"7-14",range:" 31-32"},{date:"7-15",range:" 33-36"},{date:"7-16",range:" 1-2"},{date:"7-17",range:" 3-5"},{date:"7-18",range:" 6-7"},{date:"7-19",range:" 8-9"},{date:"7-20",range:" 10-11,  1"},{date:"7-21",range:" 2-4"},{date:"7-22",range:" 5-7"},{date:"7-23",range:" 8-11"},{date:"7-24",range:" 12-15"},{date:"7-25",range:" 16-18"},{date:"7-26",range:" 19-21"},{date:"7-27",range:" 22-24"},{date:"7-28",range:" 25-27"},{date:"7-29",range:" 28-31"},{date:"7-30",range:" 1-3"},{date:"7-31",range:" 4-7"},{date:"8-1",range:" 8-12"},{date:"8-2",range:" 1-4"},{date:"8-3",range:" 5-8,  12"},{date:"8-4",range:" 13-15"},{date:"8-5",range:" 16-17"},{date:"8-6",range:" 18-19"},{date:"8-7",range:" 20-22"},{date:"8-8",range:" 1-3"},{date:"8-9",range:" 4-5"},{date:"8-10",range:" 6-8"},{date:"8-11",range:" 9-10"},{date:"8-12",range:" 11-14"},{date:"8-13",range:" 1-4,  15"},{date:"8-14",range:" 1-4"},{date:"8-15",range:" 5-9"},{date:"8-16",range:" 1-4"},{date:"8-17",range:" 5-9"},{date:"8-18",range:" 10-14"},{date:"8-19",range:" 16-17"},{date:"8-20",range:" 18-19"},{date:"8-21",range:" 20-23"},{date:"8-22",range:" 1-3"},{date:"8-23",range:" 24-25"},{date:"8-24",range:" 1-5"},{date:"8-25",range:" 6-10"},{date:"8-26",range:" 11-14"},{date:"8-27",range:" 15-18"},{date:"8-28",range:" 19-21"},{date:"8-29",range:" 22-23"},{date:"8-30",range:" 24-27"},{date:"8-31",range:" 28-30"},{date:"9-1",range:" 31-33"},{date:"9-2",range:" 34-36"},{date:"9-3",range:" 37-39"},{date:"9-4",range:" 40-41"},{date:"9-5",range:" 42-44"},{date:"9-6",range:" 45-46"},{date:"9-7",range:" 47-48"},{date:"9-8",range:" 1-2"},{date:"9-9",range:" 3-4"},{date:"9-10",range:" 5-6"},{date:"9-11",range:" 7-8"},{date:"9-12",range:" 9-10"},{date:"9-13",range:" 11-12"},{date:"9-14",range:" 13-14"},{date:"9-15",range:" 15-16"},{date:"9-16",range:" 17-18"},{date:"9-17",range:" 19-20"},{date:"9-18",range:" 21-22"},{date:"9-19",range:" 23-24"},{date:"9-20",range:" 13-14"},{date:"9-21",range:" 15-17"},{date:"9-22",range:" 18-20"},{date:"9-23",range:" 1-3"},{date:"9-24",range:" 4-6"},{date:"9-25",range:" 1-4"},{date:"9-26",range:" 1-4,  1"},{date:"9-27",range:" 1-4"},{date:"9-28",range:" 5,  1-3"},{date:"9-29",range:" 8-12"},{date:"9-30",range:" 13-14"},{date:"10-1",range:" 37-39"},{date:"10-2",range:" 40-42"},{date:"10-3",range:" 43-44"},{date:"10-4",range:" 45-47"},{date:"10-5",range:" 48-50"},{date:"10-6",range:" 1-3"},{date:"10-7",range:" 4-5"},{date:"10-8",range:" 6-9"},{date:"10-9",range:" 10-12"},{date:"10-10",range:" 13-15"},{date:"10-11",range:" 16-18"},{date:"10-12",range:" 19-20"},{date:"10-13",range:" 21-23"},{date:"10-14",range:" 24-26"},{date:"10-15",range:" 27-28"},{date:"10-16",range:" 29-31"},{date:"10-17",range:" 32-34,  90"},{date:"10-18",range:" 1-3"},{date:"10-19",range:" 4-6"},{date:"10-20",range:" 7-9"},{date:"10-21",range:" 10-12"},{date:"10-22",range:" 13-16"},{date:"10-23",range:" 17-20"},{date:"10-24",range:" 21-23"},{date:"10-25",range:" 24-26"},{date:"10-26",range:" 27-29"},{date:"10-27",range:" 73-77"},{date:"10-28",range:" 78-80"},{date:"10-29",range:" 81-86"},{date:"10-30",range:" 87-91"},{date:"10-31",range:" 92-97"},{date:"11-1",range:" 98-103"},{date:"11-2",range:" 104-106"},{date:"11-3",range:" 107-111"},{date:"11-4",range:" 112-117"},{date:"11-5",range:" 118:1-119:80"},{date:"11-6",range:" 119:81-120:7"},{date:"11-7",range:" 121-127"},{date:"11-8",range:" 128-134"},{date:"11-9",range:" 135-138"},{date:"11-10",range:" 139-144"},{date:"11-11",range:" 145-150"},{date:"11-12",range:" 1-5"},{date:"11-13",range:" 6-9"},{date:"11-14",range:" 10-12"},{date:"11-15",range:" 13-16"},{date:"11-16",range:" 17-20"},{date:"11-17",range:" 21-24"},{date:"11-18",range:" 25-28"},{date:"11-19",range:" 1-3"},{date:"11-20",range:" 4-7"},{date:"11-21",range:" 29-31"},{date:"11-22",range:" 32-33"},{date:"11-23",range:" 34-36"},{date:"11-24",range:" 1-3"},{date:"11-25",range:" 4-6"},{date:"11-26",range:" 7-9"},{date:"11-27",range:" 10-12"},{date:"11-28",range:" 13-15"},{date:"11-29",range:" 16-18"},{date:"11-30",range:" 19-22"},{date:"12-1",range:" 23-25"},{date:"12-2",range:" 26:1-29:23"},{date:"12-3",range:" 29:24-32"},{date:"12-4",range:" 33-36"},{date:"12-5",range:" 37-39"},{date:"12-6",range:" 40-42"},{date:"12-7",range:" 43-45"},{date:"12-8",range:" 46-48"},{date:"12-9",range:" 49-50"},{date:"12-10",range:" 51-52"},{date:"12-11",range:" 1-2"},{date:"12-12",range:" 3-5"},{date:"12-13",range:" 1-4"},{date:"12-14",range:" 1-3"},{date:"12-15",range:" 4-5"},{date:"12-16",range:" 6-7"},{date:"12-17",range:" 8-9"},{date:"12-18",range:" 10-11"},{date:"12-19",range:" 12-13"},{date:"12-20",range:" 14-16"},{date:"12-21",range:" 17-18"},{date:"12-22",range:" 19-21"},{date:"12-23",range:" 21-23"},{date:"12-24",range:" 24-26"},{date:"12-25",range:" 27-28"},{date:"12-26",range:" 1-5"},{date:"12-27",range:" 6,  1-4"},{date:"12-28",range:" 1-3,  1-2"},{date:"12-29",range:" 3-5, , "},{date:"12-30",range:" 15-18"},{date:"12-31",range:" 19-22"}],a8=[{date:"1-1",range:" 1"},{date:"1-2",range:" 2"},{date:"1-3",range:" 3"},{date:"1-4",range:" 4"},{date:"1-5",range:" 5:1-26"},{date:"1-6",range:" 5:27-48"},{date:"1-7",range:" 6:1-18"},{date:"1-8",range:" 6:19-34"},{date:"1-9",range:" 7"},{date:"1-10",range:" 8:1-17"},{date:"1-11",range:" 8:18-34"},{date:"1-12",range:" 9:1-13"},{date:"1-13",range:" 9:14-38"},{date:"1-14",range:" 10:1-25"},{date:"1-15",range:" 10:26-11:1"},{date:"1-16",range:" 11:2-30"},{date:"1-17",range:" 12:1-21"},{date:"1-18",range:" 12:22-50"},{date:"1-19",range:" 13:1-30"},{date:"1-20",range:" 13:31-58"},{date:"1-21",range:" 14:1-21"},{date:"1-22",range:" 14:22-36"},{date:"1-23",range:" 15:1-20"},{date:"1-24",range:" 15:21-39"},{date:"1-25",range:" 16"},{date:"1-26",range:" 17"},{date:"1-27",range:" 18"},{date:"1-28",range:" 19"},{date:"1-29",range:" 20"},{date:"1-30",range:" 21:1-22"},{date:"1-31",range:" 21:23-46"},{date:"2-1",range:" 22:1-22"},{date:"2-2",range:" 22:23-46"},{date:"2-3",range:" 23:1-24"},{date:"2-4",range:" 23:25-39"},{date:"2-5",range:" 24:1-28"},{date:"2-6",range:" 24:29-51"},{date:"2-7",range:" 25:1-30"},{date:"2-8",range:" 25:31-46"},{date:"2-9",range:" 26:1-30"},{date:"2-10",range:" 26:31-56"},{date:"2-11",range:" 26:57-75"},{date:"2-12",range:" 27:1-31"},{date:"2-13",range:" 27:32-66"},{date:"2-14",range:" 28"},{date:"2-15",range:" 1"},{date:"2-16",range:" 2:1-24"},{date:"2-17",range:" 2:25-47"},{date:"2-18",range:" 3"},{date:"2-19",range:" 4:1-22"},{date:"2-20",range:" 4:23-37"},{date:"2-21",range:" 5:1-26"},{date:"2-22",range:" 5:27-42"},{date:"2-23",range:" 1"},{date:"2-24",range:" 2"},{date:"2-25",range:" 3"},{date:"2-26",range:" 4"},{date:"2-27",range:" 5"},{date:"2-28",range:" 6"},{date:"3-1",range:" 7"},{date:"3-2",range:" 8"},{date:"3-3",range:" 9:1-18"},{date:"3-4",range:" 9:19-33"},{date:"3-5",range:" 10"},{date:"3-6",range:" 11:1-16"},{date:"3-7",range:" 11:17-36"},{date:"3-8",range:" 12"},{date:"3-9",range:" 13"},{date:"3-10",range:" 14"},{date:"3-11",range:" 15:1-13"},{date:"3-12",range:" 15:14-33"},{date:"3-13",range:" 16"},{date:"3-14",range:" 1"},{date:"3-15",range:" 2"},{date:"3-16",range:" 3"},{date:"3-17",range:" 4:1-5:1"},{date:"3-18",range:" 5:2-26"},{date:"3-19",range:" 6"},{date:"3-20",range:" 1"},{date:"3-21",range:" 2"},{date:"3-22",range:" 3"},{date:"3-23",range:" 4"},{date:"3-24",range:" 5"},{date:"3-25",range:" 6"},{date:"3-26",range:" 7"},{date:"3-27",range:" 8"},{date:"3-28",range:" 9"},{date:"3-29",range:" 10:1-18"},{date:"3-30",range:" 10:19-39"},{date:"3-31",range:" 11:1-16"},{date:"4-1",range:" 11:17-40"},{date:"4-2",range:" 12:1-11"},{date:"4-3",range:" 12:12-29"},{date:"4-4",range:" 13"},{date:"4-5",range:" 1"},{date:"4-6",range:" 2"},{date:"4-7",range:" 3"},{date:"4-8",range:" 1:1-28"},{date:"4-9",range:" 1:29-45"},{date:"4-10",range:" 2"},{date:"4-11",range:" 3"},{date:"4-12",range:" 4:1-25"},{date:"4-13",range:" 4:26-41"},{date:"4-14",range:" 5"},{date:"4-15",range:" 6:1-29"},{date:"4-16",range:" 6:30-56"},{date:"4-17",range:" 7"},{date:"4-18",range:" 8:1-21"},{date:"4-19",range:" 8:22-38"},{date:"4-20",range:" 9:1-29"},{date:"4-21",range:" 9:30-50"},{date:"4-22",range:" 10:1-31"},{date:"4-23",range:" 10:32-52"},{date:"4-24",range:" 11:1-19"},{date:"4-25",range:" 11:20-33"},{date:"4-26",range:" 12:1-27"},{date:"4-27",range:" 12:28-44"},{date:"4-28",range:" 13:1-13"},{date:"4-29",range:" 13:14-37"},{date:"4-30",range:" 14:1-26"},{date:"5-1",range:" 14:27-52"},{date:"5-2",range:" 14:53-72"},{date:"5-3",range:" 15:1-20"},{date:"5-4",range:" 15:21-47"},{date:"5-5",range:" 16"},{date:"5-6",range:" 6"},{date:"5-7",range:" 7:1-16"},{date:"5-8",range:" 7:17-36"},{date:"5-9",range:" 7:37-60"},{date:"5-10",range:" 8:1-17"},{date:"5-11",range:" 8:18-40"},{date:"5-12",range:" 9:1-22"},{date:"5-13",range:" 9:23-43"},{date:"5-14",range:" 10:1-23"},{date:"5-15",range:" 10:24-48"},{date:"5-16",range:" 12"},{date:"5-17",range:" 13"},{date:"5-18",range:" 1"},{date:"5-19",range:" 2"},{date:"5-20",range:" 3"},{date:"5-21",range:" 4"},{date:"5-22",range:" 5"},{date:"5-23",range:" 6"},{date:"5-24",range:" 7:1-24"},{date:"5-25",range:" 7:25-40"},{date:"5-26",range:" 8"},{date:"5-27",range:" 9"},{date:"5-28",range:" 10:1-11:1"},{date:"5-29",range:" 11:2-34"},{date:"5-30",range:" 12"},{date:"5-31",range:" 13"},{date:"6-1",range:" 14:1-19"},{date:"6-2",range:" 14:20-40"},{date:"6-3",range:" 15:1-34"},{date:"6-4",range:" 15:35-58"},{date:"6-5",range:" 16"},{date:"6-6",range:" 1"},{date:"6-7",range:" 2"},{date:"6-8",range:" 3"},{date:"6-9",range:" 4"},{date:"6-10",range:" 5"},{date:"6-11",range:" 6"},{date:"6-12",range:" 7"},{date:"6-13",range:" 8"},{date:"6-14",range:" 9"},{date:"6-15",range:" 10"},{date:"6-16",range:" 11:1-15"},{date:"6-17",range:" 11:16-33"},{date:"6-18",range:" 12"},{date:"6-19",range:" 13"},{date:"6-20",range:" 1"},{date:"6-21",range:" 2"},{date:"6-22",range:" 3"},{date:"6-23",range:" 4"},{date:"6-24",range:" 5"},{date:"6-25",range:" 1"},{date:"6-26",range:" 2"},{date:"6-27",range:" 3"},{date:"6-28",range:" 1"},{date:"6-29",range:" 2"},{date:"6-30",range:" 3"},{date:"7-1",range:" 4"},{date:"7-2",range:" 5"},{date:"7-3",range:" 1"},{date:"7-4",range:" 4"},{date:"7-5",range:" 5"},{date:"7-6",range:" 6"},{date:"7-7",range:" 7"},{date:"7-8",range:" 1:1-25"},{date:"7-9",range:" 1:26-45"},{date:"7-10",range:" 1:46-80"},{date:"7-11",range:" 2:1-20"},{date:"7-12",range:" 2:21-52"},{date:"7-13",range:" 3:1-20"},{date:"7-14",range:" 3:21-4:13"},{date:"7-15",range:" 4:14-30"},{date:"7-16",range:" 4:31-44"},{date:"7-17",range:" 5:1-16"},{date:"7-18",range:" 5:17-39"},{date:"7-19",range:" 6:1-26"},{date:"7-20",range:" 6:27-49"},{date:"7-21",range:" 7:1-17"},{date:"7-22",range:" 7:18-50"},{date:"7-23",range:" 8:1-25"},{date:"7-24",range:" 8:26-56"},{date:"7-25",range:" 9:1-27"},{date:"7-26",range:" 9:28-50"},{date:"7-27",range:" 9:51-10:20"},{date:"7-28",range:" 10:21-42"},{date:"7-29",range:" 11:1-28"},{date:"7-30",range:" 11:29-54"},{date:"7-31",range:" 12:1-34"},{date:"8-1",range:" 12:35-59"},{date:"8-2",range:" 13:1-17"},{date:"8-3",range:" 13:18-35"},{date:"8-4",range:" 14:1-14"},{date:"8-5",range:" 14:15-35"},{date:"8-6",range:" 15:1-10"},{date:"8-7",range:" 15:11-32"},{date:"8-8",range:" 16:1-18"},{date:"8-9",range:" 16:19-31"},{date:"8-10",range:" 17:1-19"},{date:"8-11",range:" 17:20-37"},{date:"8-12",range:" 18:1-17"},{date:"8-13",range:" 18:18-43"},{date:"8-14",range:" 19:1-27"},{date:"8-15",range:" 19:28-48"},{date:"8-16",range:" 20:1-26"},{date:"8-17",range:" 20:27-47"},{date:"8-18",range:" 21:1-19"},{date:"8-19",range:" 21:20-38"},{date:"8-20",range:" 22:1-23"},{date:"8-21",range:" 22:24-46"},{date:"8-22",range:" 22:47-71"},{date:"8-23",range:" 23:1-25"},{date:"8-24",range:" 23:26-56"},{date:"8-25",range:" 24:1-35"},{date:"8-26",range:" 24:36-53"},{date:"8-27",range:" 14"},{date:"8-28",range:" 15:1-21"},{date:"8-29",range:" 15:22-41"},{date:"8-30",range:" 16:1-15"},{date:"8-31",range:" 16:16-40"},{date:"9-1",range:" 17:1-15"},{date:"9-2",range:" 17:16-34"},{date:"9-3",range:" 18"},{date:"9-4",range:" 19:1-20"},{date:"9-5",range:" 19:21-41"},{date:"9-6",range:" 20:1-16"},{date:"9-7",range:" 20:17-38"},{date:"9-8",range:" 1"},{date:"9-9",range:" 2"},{date:"9-10",range:" 3"},{date:"9-11",range:" 4"},{date:"9-12",range:" 5"},{date:"9-13",range:" 6"},{date:"9-14",range:" 1"},{date:"9-15",range:" 2"},{date:"9-16",range:" 3:1-4:1"},{date:"9-17",range:" 4:2-23"},{date:"9-18",range:" 1"},{date:"9-19",range:" 2"},{date:"9-20",range:" 3:1-4:1"},{date:"9-21",range:" 4:2-18"},{date:"9-22",range:" 1"},{date:"9-23",range:" 1"},{date:"9-24",range:" 2"},{date:"9-25",range:" 3"},{date:"9-26",range:" 4"},{date:"9-27",range:" 5"},{date:"9-28",range:" 1"},{date:"9-29",range:" 2"},{date:"9-30",range:" 3"},{date:"10-1",range:" 8"},{date:"10-2",range:" 9"},{date:"10-3",range:" 10"},{date:"10-4",range:" 11"},{date:"10-5",range:" 12"},{date:"10-6",range:" 13"},{date:"10-7",range:" 14"},{date:"10-8",range:" 1:1-28"},{date:"10-9",range:" 1:29-51"},{date:"10-10",range:" 2:1-12"},{date:"10-11",range:" 2:13-25"},{date:"10-12",range:" 3:1-21"},{date:"10-13",range:" 3:22-36"},{date:"10-14",range:" 4:1-26"},{date:"10-15",range:" 4:27-54"},{date:"10-16",range:" 5:1-30"},{date:"10-17",range:" 5:31-47"},{date:"10-18",range:" 6:1-21"},{date:"10-19",range:" 6:22-40"},{date:"10-20",range:" 6:41-71"},{date:"10-21",range:" 7:1-24"},{date:"10-22",range:" 7:25-52"},{date:"10-23",range:" 7:53-8:20"},{date:"10-24",range:" 8:21-38"},{date:"10-25",range:" 8:39-59"},{date:"10-26",range:" 9:1-23"},{date:"10-27",range:" 9:24-41"},{date:"10-28",range:" 10:1-21"},{date:"10-29",range:" 10:22-42"},{date:"10-30",range:" 11:1-27"},{date:"10-31",range:" 11:28-57"},{date:"11-1",range:" 12:1-26"},{date:"11-2",range:" 12:27-36"},{date:"11-3",range:" 12:37-50"},{date:"11-4",range:" 13:1-20"},{date:"11-5",range:" 13:21-38"},{date:"11-6",range:" 14:1-14"},{date:"11-7",range:" 14:15-31"},{date:"11-8",range:" 15:1-16:4"},{date:"11-9",range:" 16:5-33"},{date:"11-10",range:" 17:1-13"},{date:"11-11",range:" 17:14-26"},{date:"11-12",range:" 18:1-18"},{date:"11-13",range:" 18:19-40"},{date:"11-14",range:" 19:1-16"},{date:"11-15",range:" 19:17-42"},{date:"11-16",range:" 20:1-18"},{date:"11-17",range:" 20:19-31"},{date:"11-18",range:" 21:1-14"},{date:"11-19",range:" 21:15-25"},{date:"11-20",range:" 21:1-16"},{date:"11-21",range:" 21:17-40"},{date:"11-22",range:" 22:1-16"},{date:"11-23",range:" 22:17-30"},{date:"11-24",range:" 23:1-11"},{date:"11-25",range:" 23:12-35"},{date:"11-26",range:" 24"},{date:"11-27",range:" 25"},{date:"11-28",range:" 26:1-18"},{date:"11-29",range:" 26:19-32"},{date:"11-30",range:" 27:1-20"},{date:"12-1",range:" 27:21-44"},{date:"12-2",range:" 28:1-16"},{date:"12-3",range:" 28:17-31"},{date:"12-4",range:" 1"},{date:"12-5",range:" 2"},{date:"12-6",range:" 3"},{date:"12-7",range:" 4"},{date:"12-8",range:" 5"},{date:"12-9",range:" 6"},{date:"12-10",range:" 1"},{date:"12-11",range:" 2"},{date:"12-12",range:" 3"},{date:"12-13",range:" 4"},{date:"12-14",range:" 1"},{date:"12-15",range:" 2"},{date:"12-16",range:" 3"},{date:"12-17",range:" 1"},{date:"12-18",range:" 2"},{date:"12-19",range:" 3"},{date:"12-20",range:" 4"},{date:"12-21",range:" 5"},{date:"12-22",range:" 1"},{date:"12-23",range:" 1"},{date:"12-24",range:" 15"},{date:"12-25",range:" 16"},{date:"12-26",range:" 17"},{date:"12-27",range:" 18:1-19:4"},{date:"12-28",range:" 19:5-21"},{date:"12-29",range:" 20"},{date:"12-30",range:" 21"},{date:"12-31",range:" 22"}],Qr={whole_bible:s8,new_testament:a8},o8={...Qr,"1year_revised":Qr.whole_bible,"1year_new":Qr.whole_bible,"1year_easy":Qr.whole_bible,"1year_saehangul":Qr.whole_bible,"1year_sequential":Qr.whole_bible,nt_new:Qr.whole_bible,nt_easy:Qr.whole_bible,nt_saehangul:Qr.whole_bible,nt_message:Qr.whole_bible},qx=o8,Lm=[{min:0,title:" ",emoji:""},{min:50,title:" ",emoji:""},{min:150,title:" ",emoji:""},{min:350,title:" ",emoji:""},{min:600,title:" ",emoji:""},{min:1e3,title:" ",emoji:""},{min:1500,title:" ",emoji:""},{min:2200,title:" ",emoji:""},{min:3200,title:"  ",emoji:""},{min:4300,title:"",emoji:""}],l8=t=>[...Lm].reverse().find(e=>t>=e.min)||Lm[0],Mm=[{id:"first_read",title:" ",desc:"  ",emoji:"",condition:t=>t.currentDay>1},{id:"streak_7",title:" ",desc:"7  ",emoji:"",condition:t=>t.streak>=7},{id:"streak_30",title:"  ",desc:"30  ",emoji:"",condition:t=>t.streak>=30},{id:"streak_100",title:" ",desc:"100  ",emoji:"",condition:t=>t.streak>=100},{id:"day_30",title:"30 ",desc:"30 ",emoji:"",condition:t=>t.currentDay>=30},{id:"day_100",title:"100 ",desc:"100 ",emoji:"",condition:t=>t.currentDay>=100},{id:"day_200",title:"200 ",desc:"200 ",emoji:"",condition:t=>t.currentDay>=200},{id:"day_365",title:" ",desc:"365  !",emoji:"",condition:t=>t.currentDay>=365},{id:"first_memo",title:" ",desc:"  ",emoji:"",condition:(t,e)=>Object.keys(e||{}).length>=1},{id:"memo_10",title:" 10",desc:" 10 ",emoji:"",condition:(t,e)=>Object.keys(e||{}).length>=10},{id:"memo_50",title:" 50",desc:" 50 ",emoji:"",condition:(t,e)=>Object.keys(e||{}).length>=50},{id:"score_100",title:"100 ",desc:" 100 ",emoji:"",condition:t=>t.score>=100},{id:"score_500",title:"500 ",desc:" 500 ",emoji:"",condition:t=>t.score>=500},{id:"score_1000",title:"1000 ",desc:" 1000 ",emoji:"",condition:t=>t.score>=1e3}],ch=[{id:"1year",title:" ",desc:"1  1 ."},{id:"nt",title:" ",desc:"1   1 ."}],bi={"1year":[{id:"revised",name:"",desc:"   ",tagName:" "},{id:"new",name:"",desc:"     ",tagName:" "},{id:"easy",name:"",desc:"     ",tagName:" "},{id:"saehangul",name:"",desc:"    ",tagName:" "},{id:"sequential",name:"()",desc:"   ",tagName:" "}],nt:[{id:"new",name:"",desc:"     ",tagName:" "},{id:"easy",name:"",desc:"     ",tagName:" "},{id:"saehangul",name:"",desc:"    ",tagName:" "},{id:"message",name:" ",desc:"       ",tagName:" "}]},c8=t=>`${encodeURIComponent(String(t||"").trim())}@bible.local`,$m=t=>{const e=t.data();return{uid:t.id,name:e.name,password:e.password,startDate:e.startDate,currentDay:e.currentDay!==void 0&&e.currentDay!==null?e.currentDay:1,streak:e.streak!==void 0&&e.streak!==null?e.streak:0,score:e.score!==void 0&&e.score!==null?e.score:0,lastReadDate:e.lastReadDate!==void 0&&e.lastReadDate!==null?e.lastReadDate:null,gender:e.gender!==void 0&&e.gender!==null?e.gender:"male",communityId:e.communityId!==void 0&&e.communityId!==null?e.communityId:null,communityName:e.communityName!==void 0&&e.communityName!==null?e.communityName:null,subgroupId:e.subgroupId!==void 0&&e.subgroupId!==null?e.subgroupId:null,planId:e.planId!==void 0&&e.planId!==null?e.planId:"1year_revised",achievements:e.achievements!==void 0&&e.achievements!==null?e.achievements:[],memos:e.memos!==void 0&&e.memos!==null?e.memos:{},dayOffset:e.dayOffset!==void 0&&e.dayOffset!==null?e.dayOffset:0,readCount:e.readCount!==void 0&&e.readCount!==null?e.readCount:1,readHistory:e.readHistory!==void 0&&e.readHistory!==null?e.readHistory:[]}},u8=t=>{const e=["","","","","","","","","",""],r=parseInt(t,10);if(isNaN(r))return t;if(r===0)return e[0];let n="";const i=["","","",""],s=r.toString();for(let a=0;a<s.length;a++){const o=parseInt(s[a],10),c=s.length-1-a;o!==0&&(o===1&&c>0||(n+=e[o]),n+=i[c])}return n},d8=(t,e)=>{const r=[31,28,31,30,31,30,31,31,30,31,30,31];let n=0;for(let i=0;i<t-1;i++)n+=r[i];return n+=e-1,n},h8=(t,e)=>{let r=t+e;for(;r>365;)r-=365;for(;r<1;)r+=365;return r},p8=`### 1.    
2.            
3.       
4.        
()`,zN=365,Wf="https://bible114.net/html/audio",cd="https://mvwhepqqzdtqtorgkrtf.supabase.co/functions/v1/notion-proxy",f8="http://pf.kakao.com/_xdJrRX/chat",C1=t=>{const e=new Date().toDateString(),r={};return Vn.forEach(n=>{n.subgroups.forEach(i=>{const s=t.filter(p=>p.communityId===n.id&&p.subgroupId===i),a=s.length,o=s.filter(p=>p.lastReadDate===e).length,c=a>0?Math.round(o/a*100):0,u=a>0?s.reduce((p,g)=>{const v=((g.readCount||1)-1)*365+(g.currentDay||1);return p+v},0)/a:0,d=Math.round(u/zN*100),h=s.reduce((p,g)=>p+(g.score||0),0);r[`${n.id}_${i}`]={rate:c,readCount:o,totalCount:a,progressRate:d,avgDay:Math.round(u),totalScore:h,communityId:n.id,communityName:n.name,subgroupName:i}})}),r},g8=t=>{if(!t||t.length===0)return null;const e=new Date,r=new Date(e);r.setDate(e.getDate()-e.getDay()),r.setHours(0,0,0,0);const n=h=>!h.readHistory||!Array.isArray(h.readHistory)?0:h.readHistory.reduce((p,g)=>{try{const y=typeof g=="string"?g:g.date,v=typeof g=="string"?1:g.daysRead||1;return new Date(y)>=r?p+v:p}catch{return p}},0),i=t.map(h=>({...h,weeklyCount:n(h),totalCount:h.readHistory?h.readHistory.length:0})).filter(h=>h.weeklyCount>0).sort((h,p)=>p.weeklyCount!==h.weeklyCount?p.weeklyCount-h.weeklyCount:p.totalCount-h.totalCount),s=i.length>0?i[0]:null,a=i.slice(0,10),c=t.map(h=>({...h,totalCount:((h.readCount||1)-1)*365+(h.currentDay||0)})).filter(h=>h.totalCount>0).sort((h,p)=>p.totalCount-h.totalCount),u=c.length>0?c[0]:null,d=c.slice(0,10);return{streakMVP:s,progressMVP:u,weeklyTop10:a,totalTop10:d}},m8=t=>!t||Object.keys(t).length===0?[]:Object.keys(t).map(function(e){var r=t[e];return{name:r.subgroupName,rate:r.rate||0,readCount:r.readCount||0,totalCount:r.totalCount||0,progressRate:r.progressRate||0,avgDay:r.avgDay||0,totalScore:r.totalScore||0,communityId:r.communityId,communityName:r.communityName}}).sort(function(e,r){return r.progressRate!==e.progressRate?r.progressRate-e.progressRate:r.totalScore-e.totalScore}),y8=t=>!t||Object.keys(t).length===0?[]:Object.keys(t).map(function(e){var r=t[e];return{name:r.subgroupName,progressRate:r.progressRate||0,avgDay:r.avgDay||0,totalScore:r.totalScore||0,totalCount:r.totalCount||0,communityId:r.communityId,communityName:r.communityName}}).filter(function(e){return e.totalCount>0}).sort(function(e,r){return r.progressRate-e.progressRate}),w8=t=>{const e=new Date().toDateString(),r=t.length,n=t.filter(a=>a.lastReadDate===e).length,i=r>0?Math.round(n/r*100):0,s={};return Vn.forEach(a=>{const o=t.filter(d=>d.communityId===a.id),c=o.length,u=o.filter(d=>d.lastReadDate===e).length;s[a.id]={name:a.name,total:c,readToday:u,rate:c>0?Math.round(u/c*100):0}}),{totalUsers:r,readToday:n,readRate:i,communityStats:s}},v8=t=>{if(!t)return{lines:[""],bgColor:"bg-gradient-to-br from-slate-400 to-slate-500"};const e={"1":"bg-[#FF5252] text-white border-red-600","2":"bg-[#FF7043] text-white border-orange-600","3":"bg-[#FFA726] text-white border-amber-600","4":"bg-[#FBC02D] text-white border-yellow-700","5":"bg-[#8BC34A] text-white border-lime-700","6":"bg-[#4CAF50] text-white border-green-700","7":"bg-[#009688] text-white border-emerald-700","8":"bg-[#00BCD4] text-white border-teal-700","9":"bg-[#03A9F4] text-white border-sky-700","10":"bg-[#42A5F5] text-white border-blue-600","11":"bg-[#2196F3] text-white border-blue-700","12":"bg-[#3F51B5] text-white border-indigo-700","13":"bg-[#673AB7] text-white border-violet-700","14":"bg-[#9C27B0] text-white border-purple-700","15":"bg-[#F06292] text-white border-fuchsia-700","16":"bg-[#FF4081] text-white border-pink-700","17":"bg-[#E91E63] text-white border-rose-700",:"bg-[#FFB300] text-white border-amber-700",:"bg-[#1E88E5] text-white border-blue-800",:"bg-[#5C6BC0] text-white border-indigo-800",:"bg-[#43A047] text-white border-green-800",:"bg-[#78909C] text-white border-slate-600"},r={1:["","1"],2:["","2"],:["",""],:["",""],"1":["1",""],"2":["2",""],"3":["3",""],"4":["4",""],"5":["5",""]," ":["",""]," ":["",""]," ":["",""]," ":["",""]," ":["",""],:["",""]};return t.match(/^\d+$/)?{lines:[t],bgColor:e[t]||"bg-slate-400"}:t.match(/^\d+$/)?{lines:[t],bgColor:e[t]||"bg-slate-400"}:r[t]?{lines:r[t],bgColor:e[t]||"bg-slate-400"}:{lines:[t],bgColor:e[t]||"bg-slate-400"}},Wx=(t,e,r={})=>{const n=Object.keys(e).length,i=Object.keys(e).map(function(d){return[d,e[d]]}).sort(function(d,h){return Number(d[0])-Number(h[0])});let s="";i.forEach(([d,h])=>{const p=h.date?new Date(h.date).toLocaleDateString("ko-KR"):"",g=Array.isArray(h.texts)?h.texts:[h.text||""];s+=`
                    <div style="background: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid #e2e8f0;">
                            <span style="background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; padding: 8px 20px; border-radius: 25px; font-weight: bold; font-size: 18px;">DAY ${d}</span>
                            <span style="color: #64748b; font-size: 16px;">${p}</span>
                        </div>
                        <div style="color: #475569; font-size: 17px; font-weight: 600; margin-bottom: 16px;">${h.title||""}</div>
                        ${g.map((y,v)=>`
                            <div style="color: #1e293b; font-size: 18px; line-height: 1.9; white-space: pre-wrap; ${g.length>1?"background: #f8fafc; padding: 16px; border-radius: 12px; margin-bottom: 12px;":""}">${y}</div>
                        `).join("")}
                    </div>
                `});const a=`<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${t}  </title>
<style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
        font-family: -apple-system, BlinkMacSystemFont, "Malgun Gothic", " ", sans-serif;
        background: linear-gradient(180deg, #f0f4ff 0%, #fdf4ff 100%);
        min-height: 100vh;
        padding: 20px;
        -webkit-text-size-adjust: 100%;
    }
    .container { max-width: 600px; margin: 0 auto; }
    @media print {
        body { background: white; padding: 0; }
        .no-print { display: none; }
    }
</style>
</head>
<body>
<div class="container">
    <!--  -->
    <div style="background: linear-gradient(135deg, #4f46e5, #7c3aed); border-radius: 24px; padding: 50px 30px; text-align: center; color: white; margin-bottom: 30px;">
        <div style="font-size: 60px; margin-bottom: 20px;"></div>
        <div style="font-size: 32px; font-weight: bold; margin-bottom: 10px;">${t}</div>
        <div style="font-size: 22px; opacity: 0.9;">2025  </div>
        <div style="font-size: 16px; opacity: 0.7; margin-top: 10px;"> 365</div>
    </div>
    
    <!--  -->
    <div style="background: white; border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
        <h2 style="text-align: center; font-size: 24px; color: #1e293b; margin-bottom: 25px;">  </h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div style="background: #f0f4ff; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #4f46e5;">${n}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> </div>
            </div>
            <div style="background: #f0fdf4; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #059669;">${r.currentDay||1}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> Day</div>
            </div>
            <div style="background: #fef2f2; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #dc2626;">${r.score||0}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> </div>
            </div>
            <div style="background: #fffbeb; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #f59e0b;">${r.streak||0}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> </div>
            </div>
        </div>
        <div style="text-align: center; color: #94a3b8; font-size: 14px; margin-top: 20px;">
            : ${new Date().toLocaleDateString("ko-KR")}
        </div>
    </div>
    
    <!--   -->
    ${i.length>0?`
        <h2 style="font-size: 24px; color: #1e293b; margin-bottom: 20px; padding-left: 10px;">  </h2>
        ${s}
    `:`
        <div style="text-align: center; padding: 50px; color: #94a3b8;">
            <div style="font-size: 50px; margin-bottom: 15px;"></div>
            <div style="font-size: 18px;">   .</div>
        </div>
    `}
    
    <!--  -->
    <div style="background: linear-gradient(135deg, #4f46e5, #7c3aed); border-radius: 24px; padding: 40px 30px; text-align: center; color: white; margin-top: 30px;">
        <div style="font-size: 50px; margin-bottom: 20px;"></div>
        <div style="font-size: 26px; font-weight: bold; margin-bottom: 15px;">!</div>
        <div style="font-size: 16px; opacity: 0.9; line-height: 1.8; margin-bottom: 20px;">
            "    <br>
                 <br>
               <br>
                 "
        </div>
        <div style="font-size: 18px; opacity: 0.8;">-  12:1 -</div>
    </div>
    
    <div style="text-align: center; padding: 30px; color: #94a3b8; font-size: 14px;">
           
    </div>
</div>
</body>
</html>`,o=new Blob([a],{type:"text/html;charset=utf-8"}),c=URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download=`${t}__2025.html`,u.click(),URL.revokeObjectURL(c)},x8=async t=>{if(t)try{const e=await t.collection("users").get();let r=`Name,Subgroup,Day,Date,Title,Memo
`;e.docs.forEach(a=>{const o=a.data(),c=o.name||"Unknown",u=o.subgroupId||"-",d=o.memos||{};Object.keys(d).forEach(function(h){var p=d[h];const g=p.date?new Date(p.date).toLocaleDateString("ko-KR"):"",y=(p.title||"").replace(/,/g,";").replace(/\n/g," "),v=(p.text||"").replace(/,/g,";").replace(/\n/g," ");r+=`"${c}","${u}","${h}","${g}","${y}","${v}"
`})});const n=new Blob(["\uFEFF"+r],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(n),s=document.createElement("a");s.href=i,s.download=`all_memos_${new Date().toISOString().split("T")[0]}.csv`,s.click(),URL.revokeObjectURL(i)}catch(e){console.error("CSV  :",e),alert("CSV    .")}},b8=t=>{if(t.length===0){alert(" .");return}let e=`data:text/csv;charset=utf-8,\uFEFF,,,Day,,,,ID
`;t.forEach(n=>{e+=`${n.name},${n.communityName},${n.subgroupId},${n.currentDay},${n.score},${n.streak},${n.lastReadDate||""},${n.planId||"1year_revised"}\r
`});const r=document.createElement("a");r.setAttribute("href",encodeURI(e)),r.setAttribute("download",`__${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(r),r.click(),document.body.removeChild(r)},_8=()=>{const[t,e]=C.useState(null),[r,n]=C.useState(!0);return C.useEffect(()=>{if(!Zt){n(!1);return}const i=Zt.onAuthStateChanged(async s=>{if(console.log(" Auth state changed:",s?s.uid:null),s)try{const a=await oe.collection("users").doc(s.uid).get();if(a.exists){const o=$m(a);console.log("   :",o.name),e(o)}else console.log(" Firestore  "),e(null)}catch(a){console.error("   :",a),e(null)}else e(null);n(!1)});return()=>i()},[]),{currentUser:t,setCurrentUser:e,authLoading:r}},Hx=t=>{if(!t)return t;const e=/(^|[.!?""\(\)\[\]]\s*)(\d+)(?!\s*(||||||||||||||||||)(?![-]))(?=\s*[^0-9])/gm;let r=!0;return t.replace(e,(i,s,a)=>{const o=`[[VERSE:${a}]]`;return r&&s.trim()===""?(r=!1,o):(r=!1,`${s}
${o}`)})},S8=t=>{const[e,r]=C.useState({title:"",subtitle:"",text:"",audioUrl:null,loading:!1}),[n,i]=C.useState(null),s=async(u,d)=>{if(!oe)return null;try{const[h,p]=(u||"1year_revised").split("_"),g=`${h}_${p}_${d}`,y=await oe.collection("verses").doc(g).get();if(y.exists)return y.data()}catch(h){console.error("  :",h)}return null},a=async(u,d)=>{const[h,p]=(u||"1year_revised").split("_"),g=bi[h],y=g?g.find(w=>w.id===p):null,v=y?y.tagName:" ",x=new Date(2025,0,d),m=String(x.getMonth()+1).padStart(2,"0"),f=String(x.getDate()).padStart(2,"0");try{const w=await fetch(cd,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:v,date:`${m}-${f}`})});if(!w.ok)throw new Error(`Server Error: ${w.status}`);const b=await w.json();return b.error?{title:null,text:`[] ${b.error}`}:{title:b.title,text:b.text,audioUrl:b.audioUrl}}catch(w){return console.error(w),{title:null,text:"    ."}}},o=async(u,d)=>{const h=await s(u,d);return h&&h.text?h:await a(u,d)},c=C.useCallback(async u=>{if(!t)return;r(b=>({...b,loading:!0}));const{planId:d,dayOffset:h=0,readCount:p=1}=t,[g,y]=(d||"1year_revised").split("_"),v=ch.find(b=>b.id===g),x=v?v.title:" ",m=h8(u,h),f=await o(d,m),w=p>1?` (${p})`:"";if(f&&f.text&&!f.text.startsWith("[]")){let b=f.text;y&&y.startsWith("saehangul")&&(b=Hx(b));let _=f.audioUrl||null;!_&&Wf&&Wf.startsWith("http")&&(_=`${Wf.replace(/\/$/,"")}/${d}/${m}.mp3`),r({title:`${x} DAY ${u}${w}`,subtitle:f.title||"( )",text:b,audioUrl:_,loading:!1})}else{const b=bi[g],_=b?b.find(T=>T.id===y):null,S=_&&_.name||"";let N=m===1?p8:f&&f.text||"   .";y&&y.startsWith("saehangul")&&(N=Hx(N)),r({title:`${x} DAY ${u}${w}`,subtitle:`${S} `,text:N,audioUrl:null,loading:!1})}},[t]);return{verseData:e,setVerseData:r,viewingDay:n,setViewingDay:i,loadContent:c}},k8=t=>{const[e,r]=C.useState({}),n=C.useCallback(async s=>{if(!oe||!s)return{};try{const a=await oe.collection("users").doc(s).get();if(a.exists&&a.data().memos)return r(a.data().memos),a.data().memos}catch(a){console.error("  :",a)}return{}},[]),i=C.useCallback(async(s,a,o,c,u)=>{const d=t?t.uid:null;if(!d||!a.trim())return;const h=e[s];let p=[];h&&(h.texts?p=[...h.texts]:h.text&&(p=[h.text])),p.push(a);const g={...e,[s]:{texts:p,text:p.join(`

---

`),date:new Date().toISOString(),title:o}};r(g),typeof u=="function"&&u();try{await oe.collection("users").doc(d).set({memos:g,updatedAt:Ne.firestore.FieldValue.serverTimestamp()},{merge:!0}),c&&c(t,g)}catch(y){console.error("  :",y)}},[t,e]);return{memos:e,setMemos:r,loadMemos:n,saveMemo:i}},I8=(t,e)=>{const[r,n]=C.useState({}),[i,s]=C.useState([]),[a,o]=C.useState([]),[c,u]=C.useState(null),[d,h]=C.useState(null),p=C.useCallback(async()=>{try{return(await oe.collection("users").get()).docs.map(f=>({uid:f.id,...f.data()}))}catch(x){return console.error("  :",x),[]}},[]),g=C.useCallback(async()=>{try{const x=await oe.collection("settings").doc("announcement").get();x.exists&&x.data().enabled?u(x.data()):u(null)}catch(x){console.error("  :",x)}},[]),y=C.useCallback(async()=>{try{const x=await oe.collection("settings").doc("kakao").get();x.exists&&h(x.data().url)}catch(x){console.error("   :",x)}},[]),v=C.useCallback(async x=>{const m=t?t.uid:null;if(m)try{await oe.collection("users").doc(m).set({subgroupId:x,updatedAt:Ne.firestore.FieldValue.serverTimestamp()},{merge:!0}),e(w=>({...w,subgroupId:x})),alert(` "${x}"() !`);const f=await p();if(o(f),n(C1(f)),t.communityId){const w=f.filter(b=>b.communityId===t.communityId);s(w)}}catch(f){console.error("  :",f),alert(" ")}},[t,e,p]);return{subgroupStats:r,setSubgroupStats:n,communityMembers:i,setCommunityMembers:s,allMembersForRace:a,setAllMembersForRace:o,announcement:c,setAnnouncement:u,kakaoLink:d,setKakaoLink:h,loadAllMembers:p,loadAnnouncement:g,loadKakaoLink:y,changeSubgroup:v}},N8=(t,e,r,n,i,s,a,o)=>{const[c,u]=C.useState([]),[d,h]=C.useState(!1),[p,g]=C.useState(!1),[y,v]=C.useState(null),[x,m]=C.useState(null),[f,w]=C.useState(null),b=C.useCallback((T,F)=>{if(!T)return;const O=[],G=new Set(T.achievements||[]);if(Mm.forEach(K=>{G.has(K.id)||K.condition(T,F)&&(O.push(K.id),w(te=>K),setTimeout(()=>w(null),5e3))}),O.length>0){const K=[...T.achievements||[],...O];oe.collection("users").doc(T.uid).update({achievements:K})}},[]),_=C.useCallback(async()=>{if(!t)return;const T=t.uid,F=new Date().toDateString(),O=t.currentDay||1,G=o||O,K=t.score||0,te=Math.floor(K/100),H=Math.min(5,t.streak||0),ce=10+H,Me=K+ce,he=Math.floor(Me/100),$=G>=365?1:G+1;let q=O,Q=t.readCount||1,ae=!1;G===O&&(q=O>=365?1:O+1,Q=O>=365?(t.readCount||1)+1:t.readCount||1,ae=O>=365);let D=1;if(t.lastReadDate){const V=new Date(t.lastReadDate),R=new Date(F),W=Math.floor((R-V)/(1e3*60*60*24));W===1?D=(t.streak||0)+1:W===0&&(D=t.streak||0)}const E={date:F,day:G,score:ce},A={currentDay:q,readCount:Q,score:Me,streak:D,lastReadDate:F,readHistory:Ne.firestore.FieldValue.arrayUnion(E),updatedAt:Ne.firestore.FieldValue.serverTimestamp()};try{await oe.collection("users").doc(T).set(A,{merge:!0}),await oe.collection("users").doc(T).collection("history").add(E);const V={...t,...A};e(V),a($),h(!0),u(W=>[E,...W]),he>te&&(v(!0),setTimeout(()=>v(!1),5e3)),H>0&&(m(`${H}   +${H}pt!`),setTimeout(()=>m(null),3e3));const R=await s();if(r(R),i(C1(R)),t.communityId){const W=R.filter(xe=>xe.communityId===t.communityId);n(W)}ae&&alert(` ! ${Q-1} !

 ${Q} ! `),g(!0),setTimeout(()=>g(!1),3e3),b(V,{}),window.scrollTo({top:0,behavior:"smooth"})}catch(V){console.error("  :",V)}},[t,o,e,a,s,r,n,i,b]),S=C.useCallback(async(T,F)=>{if(!t)return;const O=t.uid;try{const G=new Date().toDateString();await oe.collection("users").doc(O).set({currentDay:1,score:0,streak:0,startDate:G,lastReadDate:null,memos:{},achievements:[],updatedAt:Ne.firestore.FieldValue.serverTimestamp()},{merge:!0}),e(K=>({...K,currentDay:1,score:0,streak:0,startDate:G,lastReadDate:null,achievements:[],readCount:1})),T&&T({}),F&&F([]),alert("!  Day 1. ! ")}catch(G){console.error(" :",G),alert(" ")}},[t,e]),N=C.useCallback(async T=>{if(!t)return;const F=t.uid;try{await oe.collection("users").doc(F).set({dayOffset:T,updatedAt:Ne.firestore.FieldValue.serverTimestamp()},{merge:!0}),e(O=>({...O,dayOffset:T}))}catch(O){console.error("  :",O)}},[t,e]);return{readHistory:c,setReadHistory:u,hasReadToday:d,setHasReadToday:h,showConfetti:p,setShowConfetti:g,levelUpToast:y,setLevelUpToast:v,bonusToast:x,setBonusToast:m,newAchievement:f,setNewAchievement:w,handleRead:_,handleRestart:S,changeStartDate:N,checkAchievements:b}},E8=(t,e,r)=>{const{verseData:n,setVerseData:i,viewingDay:s,setViewingDay:a,loadContent:o}=S8(t),{subgroupStats:c,setSubgroupStats:u,communityMembers:d,setCommunityMembers:h,allMembersForRace:p,setAllMembersForRace:g,announcement:y,loadAnnouncement:v,kakaoLink:x,loadKakaoLink:m,setKakaoLink:f,loadAllMembers:w,changeSubgroup:b}=I8(t,e),{readHistory:_,setReadHistory:S,hasReadToday:N,setHasReadToday:T,showConfetti:F,setShowConfetti:O,levelUpToast:G,setLevelUpToast:K,bonusToast:te,setBonusToast:H,newAchievement:ce,setNewAchievement:Me,handleRead:he,handleRestart:$,changeStartDate:q,checkAchievements:Q}=N8(t,e,g,h,u,w,a,s),{memos:ae,setMemos:D,loadMemos:E,saveMemo:A}=k8(t);return C.useEffect(()=>{r!=="dashboard"||!t||s===null||o(s)},[r,t==null?void 0:t.uid,s,t==null?void 0:t.planId,t==null?void 0:t.dayOffset,o]),C.useEffect(()=>{if(r!=="dashboard"||!t)return;s===null&&a(t.currentDay||1),(async()=>{const R=t.uid,W=await w();if(g(W),W&&W.length>0&&(u(C1(W)),t.communityId)){const lt=W.filter(Jt=>Jt.communityId===t.communityId);h(lt)}await E(R);const se=(await oe.collection("users").doc(R).collection("history").get()).docs.map(lt=>lt.data()),pe=await oe.collection("users").doc(R).get(),Ue=pe.exists&&pe.data().readHistory||[],Qt=new Map;[...Ue,...se].forEach(lt=>{const Jt=typeof lt=="string"?lt:lt.date;Jt&&Qt.set(Jt,lt)}),S(Array.from(Qt.values())),await v(),await m()})()},[r,t==null?void 0:t.uid,w,E,v,m,g,u,h,S]),C.useEffect(()=>{t&&t.lastReadDate===new Date().toDateString()?T(!0):T(!1)},[t,T]),{verseData:n,setVerseData:i,subgroupStats:c,setSubgroupStats:u,communityMembers:d,setCommunityMembers:h,allMembersForRace:p,setAllMembersForRace:g,memos:ae,setMemos:D,readHistory:_,setReadHistory:S,announcement:y,kakaoLink:x,viewingDay:s,setViewingDay:a,hasReadToday:N,setHasReadToday:T,showConfetti:F,setShowConfetti:O,levelUpToast:G,setLevelUpToast:K,bonusToast:te,setBonusToast:H,newAchievement:ce,setNewAchievement:Me,handleRead:he,saveMemo:(V,R,W)=>A(V,R,n.subtitle,Q,W),changeSubgroup:b,handleRestart:()=>$(D,S),changeStartDate:q,loadAllMembers:w,loadMemos:E,loadAnnouncement:v,loadKakaoLink:m,setKakaoLink:f}},be=({name:t,size:e=20,className:r=""})=>({crown:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:l.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-3-4 3-6-7zm5 16h10"})}),trophy:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),l.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),l.jsx("path",{d:"M4 22h16"}),l.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),l.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),l.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),users:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),book:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:l.jsx("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"})}),arrowRight:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("path",{d:"M5 12h14"}),l.jsx("path",{d:"m12 5 7 7-7 7"})]}),back:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:l.jsx("path",{d:"m15 18-6-6 6-6"})}),flame:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:l.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"})}),close:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),trash:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),download:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),refresh:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),l.jsx("path",{d:"M21 3v5h-5"}),l.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),l.jsx("path",{d:"M8 16H3v5"})]}),edit:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),helpbook:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),chart:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),medal:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15"}),l.jsx("path",{d:"M11 12 5.12 2.2"}),l.jsx("path",{d:"m13 12 5.88-9.8"}),l.jsx("path",{d:"M8 7h8"}),l.jsx("circle",{cx:"12",cy:"17",r:"5"}),l.jsx("path",{d:"M12 18v-2h-.5"})]}),calendar:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),l.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),l.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]})})[t]||null,YN=({content:t,fontSize:e=16,activeChunkIndex:r=-1,onSegmentClick:n=null})=>{if(!t)return null;const i=e+6,s=e+4,a=e+2,o=g=>{const y=/<details>([\s\S]*?)<\/details>/g,v=[];let x=0,m;for(;(m=y.exec(g))!==null;){m.index>x&&v.push({type:"text",content:g.slice(x,m.index)});const f=m[1],w=f.match(/<summary>(.*?)<\/summary>/s);if(w){const b=w[1].trim(),_=f.slice(w[0].length).trim();v.push({type:"details",summary:b,body:_})}x=m.index+m[0].length}return x<g.length&&v.push({type:"text",content:g.slice(x)}),v.length>0?v:[{type:"text",content:g}]};C.useEffect(()=>{if(r>=0){const g=document.getElementById(`tts-segment-${r}`);if(g){const y=g.getBoundingClientRect(),v=window.innerHeight;y.top>v*.3&&y.bottom<v*.7||g.scrollIntoView({behavior:"smooth",block:"center"})}}},[r]);let c=0;const u=g=>{if(typeof g!="string")return g;const y=/\[\[VERSE:(\d+)\]\]/g,v=[];let x=0,m;for(;(m=y.exec(g))!==null;){m.index>x&&v.push(g.slice(x,m.index));const f=m[1];v.push(l.jsx("span",{className:"inline-flex items-center justify-center bg-slate-100 text-slate-500 font-bold rounded-sm px-1 mr-1 text-[0.7em] align-middle select-none border border-slate-200 shadow-sm",style:{lineHeight:"1",verticalAlign:"text-top",marginTop:"2px"},children:f},`verse-${f}-${m.index}`)),x=m.index+m[0].length}return x<g.length&&v.push(g.slice(x)),v.length>0?v:g},d=(g,y=!1)=>{if(!n)return u(g);let v=g;return v=v.replace(/^#+\s*/,""),v.split(/([.?!])/g).reduce((m,f)=>{if([".","?","!"].indexOf(f)!==-1)return m.length>0&&(m[m.length-1].content+=f),m;const w=f.replace(/['"\s]/g,"").length>0;return f.length>0&&m.push({content:f,isSpeakable:w}),m},[]).map((m,f)=>{if(!m.isSpeakable)return l.jsx("span",{className:"font-normal opacity-90",children:u(m.content)},`noise-${c}-${f}`);const w=c++,b=r===w;return l.jsx("span",{id:`tts-segment-${w}`,onClick:()=>n(w),className:`transition-all duration-300 cursor-pointer rounded px-0.5 font-normal ${b?"bg-yellow-300 text-slate-900 font-bold shadow-sm":"hover:bg-slate-100"}`,title:"  ",children:u(m.content)},w)})},h=(g,y,v)=>{const x=g.trim();if(x.startsWith("# ")){const f=c++;return l.jsx("h1",{id:`tts-segment-${f}`,onClick:()=>n&&n(f),className:`font-bold text-slate-800 ${y?"mt-0":"mt-8"} mb-3 cursor-pointer ${r===f?"bg-yellow-200":""}`,style:{fontSize:`${i}px`},children:x.slice(2)},v)}if(x.startsWith("## ")){const f=c++;return l.jsx("h2",{id:`tts-segment-${f}`,onClick:()=>n&&n(f),className:`font-bold text-slate-800 ${y?"mt-0":"mt-6"} mb-2 cursor-pointer ${r===f?"bg-yellow-200":""}`,style:{fontSize:`${s}px`},children:x.slice(3)},v)}if(x.startsWith("### ")){const f=c++;return l.jsx("h3",{id:`tts-segment-${f}`,onClick:()=>n&&n(f),className:`font-bold text-slate-800 ${y?"mt-0":"mt-4"} mb-1 border-b border-slate-200 pb-1 cursor-pointer ${r===f?"bg-yellow-200":""}`,style:{fontSize:`${a}px`},children:x.slice(4)},v)}if(x.startsWith(" ")||x.startsWith("- "))return l.jsx("li",{className:"list-disc list-outside ml-6 text-slate-700 leading-relaxed mb-1 font-normal",style:{fontSize:`${e}px`},children:d(x.slice(2),!0)},v);if(x.startsWith("> "))return l.jsx("blockquote",{className:"border-l-4 border-blue-300 pl-3 italic text-slate-600 my-2 bg-slate-50 p-2 rounded",style:{fontSize:`${e}px`},children:d(x.slice(2))},v);const m=x.match(/^(\d+)([\s.]\s?)(?!||||)(.*)/);if(m){const f=m[1];m[2];const w=m[3];return l.jsxs("p",{className:"text-slate-700 leading-relaxed mb-3 flex items-start gap-2",style:{fontSize:`${e}px`,textAlign:"justify"},children:[l.jsx("span",{className:"font-bold text-blue-500 shrink-0 mt-1",style:{fontSize:`${Math.max(10,e-4)}px`},children:f}),l.jsx("span",{className:"font-normal",children:d(w,!1)})]},v)}return x===""?l.jsx("div",{className:"h-1"},v):l.jsx("p",{className:"text-slate-700 leading-relaxed mb-3 font-normal",style:{fontSize:`${e}px`,textAlign:"justify"},children:d(g,!1)},v)},p=o(t);return l.jsx("div",{className:"markdown-body",children:p.map((g,y)=>g.type==="details"?l.jsxs("details",{className:"my-2 border border-slate-200 rounded-xl bg-slate-50 overflow-hidden shadow-sm",children:[l.jsx("summary",{className:"cursor-pointer px-4 py-3 font-bold text-slate-700 hover:bg-slate-100 transition-colors",style:{fontSize:`${e}px`},children:g.summary}),l.jsx("div",{className:"px-4 py-3 space-y-1 border-t border-slate-100 bg-white",children:g.body.split(`
`).map((v,x)=>h(v,!1,`details-${y}-line-${x}`))})]},`details-${y}`):g.content.split(`
`).map((v,x)=>h(v,y===0&&x===0,`text-${y}-line-${x}`)))})},T8=({loginTab:t,setLoginTab:e,loginName:r,setLoginName:n,loginPw:i,setLoginPw:s,signupName:a,setSignupName:o,signupBirthdate:c,setSignupBirthdate:u,signupPw:d,setSignupPw:h,signupPwConfirm:p,setSignupPwConfirm:g,errorMsg:y,handleLogin:v})=>l.jsxs("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6 relative",children:[l.jsx("div",{className:"absolute top-4 right-4",children:l.jsx("button",{onClick:()=>{n("admin"),s("")},className:"text-xs text-slate-300 hover:text-slate-500",children:""})}),l.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl w-full max-w-lg border border-slate-100",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("h1",{className:"text-2xl font-extrabold text-slate-800",children:"  "}),l.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"  !"})]}),l.jsxs("div",{className:"flex gap-2 mb-6",children:[l.jsx("button",{type:"button",onClick:()=>e("login"),className:`flex-1 py-3 rounded-xl font-bold transition-all ${t==="login"?"bg-blue-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:""}),l.jsx("button",{type:"button",onClick:()=>e("signup"),className:`flex-1 py-3 rounded-xl font-bold transition-all ${t==="signup"?"bg-blue-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:""})]}),t==="login"?l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),l.jsx("input",{type:"text",value:r,onChange:x=>n(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),l.jsx("input",{type:"password",value:i,onChange:x=>s(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6  "})]}),l.jsx("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100",children:l.jsxs("p",{className:"text-xs text-red-600 font-bold break-keep text-center",children:["  ? ",l.jsx("br",{})," ",l.jsx("span",{className:"underline",children:""})," .",l.jsx("br",{}),"(: )"]})}),y&&l.jsx("p",{className:"text-red-500 text-xs text-center",children:y}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-200 transition-all active:scale-95 mt-4",children:""}),l.jsx("p",{className:"text-xs text-slate-400 text-center mt-3",children:"    ."})]}):l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),l.jsx("input",{type:"text",value:a,onChange:x=>o(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),l.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"8",value:c,onChange:x=>{const m=x.target.value.replace(/[^0-9]/g,"");u(m)},className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg tracking-wider",placeholder:"19500101",required:!0}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1 ml-1",children:"8   (: 19500101)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),l.jsx("input",{type:"password",value:d,onChange:x=>h(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6 ",required:!0,minLength:6})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:" "}),l.jsx("input",{type:"password",value:p,onChange:x=>g(x.target.value),className:`w-full bg-slate-50 border rounded-xl p-3 focus:outline-none focus:ring-2 ${p&&d!==p?"border-red-300 focus:ring-red-500":"border-slate-200 focus:ring-blue-500"}`,placeholder:"  ",required:!0}),p&&d!==p&&l.jsx("p",{className:"text-xs text-red-500 mt-1 ml-1",children:"   "})]}),l.jsx("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:l.jsx("p",{className:"text-xs text-blue-600 font-bold break-keep text-center",children:"    "})}),y&&l.jsx("p",{className:"text-red-500 text-xs text-center",children:y}),l.jsx("button",{type:"submit",disabled:d!==p||!a||!c||!d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-200 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})]}),C8=({handleLogout:t,downloadCSV:e,adminViewMode:r,setAdminViewMode:n,adminFilter:i,setAdminFilter:s,adminSortBy:a,setAdminSortBy:o,allUsers:c,MOCK_COMMUNITIES:u,BIBLE_VERSIONS:d,announcementInput:h,setAnnouncementInput:p,saveAnnouncement:g,generateMemosCSV:y,generateMemosHTML:v,editingUser:x,setEditingUser:m,startEditUser:f,saveEditUser:w,changingPassword:b,setChangingPassword:_,newPassword:S,setNewPassword:N,changePassword:T,deleteUser:F,lastSyncInfo:O,setLastSyncInfo:G,syncProgress:K,setSyncProgress:te,selectedSyncVersions:H,setSelectedSyncVersions:ce,syncNotionToFirestore:Me,adminStats:he,kakaoLinkInput:$,setKakaoLinkInput:q,saveKakaoLink:Q,db:ae})=>l.jsx("div",{className:"min-h-screen bg-slate-100 p-4",children:l.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"  "}),l.jsx("button",{onClick:t,className:"text-sm bg-slate-200 px-3 py-2 rounded hover:bg-slate-300",children:""})]}),l.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 font-bold",children:[l.jsx(be,{name:"download",size:18})," CSV "]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(be,{name:"chart",size:20,className:"text-blue-500"}),"    (",new Date().toLocaleDateString("ko-KR"),")"]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600",children:he.totalUsers}),l.jsx("div",{className:"text-xs text-slate-500",children:" "})]}),l.jsxs("div",{className:"bg-green-50 p-4 rounded-xl text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-green-600",children:he.readToday}),l.jsx("div",{className:"text-xs text-slate-500",children:"  "})]}),l.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[he.readRate,"%"]}),l.jsx("div",{className:"text-xs text-slate-500",children:" "})]})]}),l.jsx("h3",{className:"font-bold text-slate-700 mb-2",children:"   "}),l.jsx("div",{className:"space-y-2",children:Object.keys(he.communityStats).map(function(D){var E=he.communityStats[D];return l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-20 text-sm font-bold text-slate-600",children:E.name}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:E.rate+"%"}})}),l.jsxs("div",{className:"text-sm text-slate-500 w-28 text-right",children:[E.readToday,"/",E.total," (",E.rate,"%)"]})]},D)})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:"  "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n("today"),className:`text-xs px-3 py-1 rounded-full font-bold ${r==="today"?"bg-red-500 text-white":"bg-slate-100 text-slate-500"}`,children:" "}),l.jsx("button",{onClick:()=>n("inactive"),className:`text-xs px-3 py-1 rounded-full font-bold ${r==="inactive"?"bg-orange-500 text-white":"bg-slate-100 text-slate-500"}`,children:" "})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[l.jsx("button",{onClick:()=>s("all"),className:`text-xs px-3 py-1.5 rounded-lg font-bold border ${i==="all"?"bg-blue-500 text-white border-blue-500":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:""}),u.map(D=>l.jsx("button",{onClick:()=>s(D.id),className:`text-xs px-3 py-1.5 rounded-lg font-bold border ${i===D.id?"bg-blue-500 text-white border-blue-500":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:D.name},D.id))]}),l.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:(()=>{const D=new Date().toDateString(),E=new Date;let A=i==="all"?c:c.filter(V=>V.communityId===i);if(r==="today"){const V=A.filter(se=>se.lastReadDate!==D),R={};V.forEach(se=>{const pe=se.communityId||"none";R[pe]||(R[pe]={});const Ue=se.subgroupId||"";R[pe][Ue]||(R[pe][Ue]=[]),R[pe][Ue].push(se)});const W=[];u.forEach(se=>{const pe=R[se.id];pe&&se.subgroups.forEach(Ue=>{pe[Ue]&&W.push([Ue,pe[Ue]])})}),Object.keys(R).forEach(function(se){var pe=R[se];pe.&&W.push(["",pe.])});const xe=V.length;return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-3 text-sm text-slate-500",children:[" ",l.jsxs("strong",{className:"text-red-600",children:[xe,""]}),"    ."]}),W.length>0?W.map(([se,pe])=>l.jsxs("div",{className:"mb-4 bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"text-sm font-bold text-slate-700 mb-2 flex justify-between",children:[l.jsxs("span",{children:[" ",se]}),l.jsxs("span",{className:"text-red-500",children:[pe.length,""]})]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:pe.map((Ue,Qt)=>{const lt=Ue.lastReadDate?new Date(Ue.lastReadDate):null,Jt=lt?Math.floor((E-lt)/(1e3*60*60*24)):999;return l.jsxs("span",{className:`text-xs px-2 py-1 rounded-full border ${Jt>=7?"bg-red-100 text-red-700 border-red-200":Jt>=3?"bg-orange-100 text-orange-700 border-orange-200":"bg-yellow-50 text-yellow-700 border-yellow-200"}`,children:[l.jsxs("span",{className:"font-mono text-[10px] opacity-60 mr-1",children:[Qt+1,"."]}),Ue.name," ",Jt>0&&l.jsxs("span",{className:"opacity-70",children:["(",Jt,")"]})]},Ue.uid)})})]},se)):l.jsxs("div",{className:"text-center py-8 text-green-600",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{className:"font-bold",children:" !"})]})]})}else{const V=A.map(R=>{const W=R.lastReadDate?new Date(R.lastReadDate):null,xe=W?Math.floor((E-W)/(1e3*60*60*24)):999;return{...R,daysSince:xe}}).filter(R=>R.daysSince>=1).sort((R,W)=>{if(a==="name")return R.name.localeCompare(W.name);if(a==="day"){const xe=((R.readCount||1)-1)*365+(R.currentDay||1);return((W.readCount||1)-1)*365+(W.currentDay||1)-xe}else{if(a==="score")return(W.score||0)-(R.score||0);if(a==="subgroup"){const xe=R.communityName||"",se=W.communityName||"",pe=xe.localeCompare(se,"ko-KR");if(pe!==0)return pe;const Ue=R.subgroupId||"",Qt=W.subgroupId||"";return Ue.localeCompare(Qt,"ko-KR")}else return W.daysSince-R.daysSince}});return l.jsxs("div",{children:[l.jsx("div",{className:"mb-3 flex gap-2",children:["name","day","score","subgroup"].map(R=>l.jsx("button",{onClick:()=>o(R),className:`text-xs px-3 py-1.5 rounded-lg font-bold ${a===R?"bg-blue-500 text-white":"bg-slate-100 text-slate-600"}`,children:R==="name"?"":R==="day"?"":R==="score"?"":""},R))}),V.length>0?l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-center text-xs font-bold text-slate-600 w-10",children:"#"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-bold text-slate-600",children:""}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-bold text-slate-600",children:""}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-bold text-slate-600",children:"  "}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-bold text-slate-600",children:""})]})}),l.jsx("tbody",{children:V.slice(0,50).map((R,W)=>l.jsxs("tr",{className:`border-b ${R.daysSince>=14?"bg-red-50":R.daysSince>=7?"bg-orange-50":""}`,children:[l.jsx("td",{className:"px-3 py-2 text-center text-xs text-slate-400 font-mono",children:W+1}),l.jsx("td",{className:"px-3 py-2 font-bold text-slate-800",children:R.name}),l.jsx("td",{className:"px-3 py-2 text-slate-500 text-xs",children:R.subgroupId||"-"}),l.jsx("td",{className:"px-3 py-2 text-center",children:l.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${R.daysSince>=14?"bg-red-500 text-white":R.daysSince>=7?"bg-orange-500 text-white":"bg-yellow-400 text-yellow-900"}`,children:R.daysSince===999?"":`${R.daysSince}`})}),l.jsx("td",{className:"px-3 py-2 text-center text-xs",children:(()=>{const xe=R.readCount||1,se=R.currentDay||1,pe=(xe-1)*365+se;return xe>1?l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsxs("span",{className:"font-bold text-slate-700",children:["DAY ",pe]}),l.jsxs("span",{className:"px-1.5 py-0.5 bg-gradient-to-br from-purple-500 to-purple-700 text-white text-[10px] font-bold rounded-full",children:[xe,""]})]}):l.jsxs("span",{className:"font-bold text-slate-700",children:["DAY ",se]})})()})]},R.uid))})]}):l.jsxs("div",{className:"text-center py-8 text-green-600",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{className:"font-bold",children:"  !"})]}),V.length>50&&l.jsxs("div",{className:"mt-2 text-center text-xs text-slate-400",children:[" 50  ( ",V.length,")"]})]})}})()}),l.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 flex gap-4 text-xs text-slate-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded"})," 1-2"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-3 h-3 bg-orange-500 rounded"})," 3-6"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-3 h-3 bg-red-500 rounded"})," 7+"]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:["    (",c.filter(D=>D.currentDay>=365||(D.readCount||1)>=2).length,")"]}),(()=>{const D=c.filter(E=>E.currentDay>=365||(E.readCount||1)>=2).sort((E,A)=>(A.score||0)-(E.score||0));return D.length>0?l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:D.map((E,A)=>{const V=E.readCount||1;return l.jsxs("div",{className:`p-4 rounded-xl text-center border-2 ${A===0?"bg-yellow-50 border-yellow-300":A===1?"bg-slate-50 border-slate-300":A===2?"bg-orange-50 border-orange-300":"bg-white border-slate-100"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:A===0?"":A===1?"":A===2?"":""}),l.jsxs("div",{className:"font-bold text-slate-800 flex items-center justify-center gap-1",children:[E.name,V>=2&&l.jsxs("span",{className:"text-[10px] bg-purple-500 text-white px-1.5 py-0.5 rounded-full font-bold",children:[V,""]})]}),l.jsxs("div",{className:"text-xs text-slate-500",children:[E.score||0,""]}),l.jsxs("div",{className:"text-[10px] text-slate-400",children:[E.communityName," ",E.subgroupId]})]},E.uid)})}):l.jsxs("div",{className:"text-center py-8 text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{children:"  ."}),l.jsx("p",{className:"text-xs mt-1",children:"365    !"})]})})()]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:" / "}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),l.jsx("textarea",{value:h.text,onChange:D=>p(E=>({...E,text:D.target.value})),placeholder:":     !",className:"w-full p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-blue-500 outline-none",rows:3})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("label",{className:"text-sm font-bold text-slate-600",children:"  "}),l.jsxs("button",{onClick:()=>p(D=>({...D,links:[...D.links||[],{url:"",text:""}]})),className:"text-xs bg-blue-50 text-blue-600 px-3 py-1.5 rounded-lg font-bold hover:bg-blue-100 flex items-center gap-1",children:[l.jsx(be,{name:"plus",size:12}),"  "]})]}),(h.links||[]).map((D,E)=>l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl relative group border border-slate-100",children:[l.jsx("button",{onClick:()=>p(A=>({...A,links:A.links.filter((V,R)=>R!==E)})),className:"absolute -top-2 -right-2 bg-white text-red-500 p-1.5 rounded-full shadow-md border border-red-100 hover:bg-red-50 transition-colors",children:l.jsx(be,{name:"trash",size:14})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-400 mb-1 uppercase",children:" "}),l.jsx("input",{type:"text",value:D.text,onChange:A=>{const V=[...h.links];V[E].text=A.target.value,p(R=>({...R,links:V}))},placeholder:": , ",className:"w-full p-2 border rounded-lg text-sm bg-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-400 mb-1 uppercase",children:"  (URL)"}),l.jsx("input",{type:"url",value:D.url,onChange:A=>{const V=[...h.links];V[E].url=A.target.value,p(R=>({...R,links:V}))},placeholder:"https://...",className:"w-full p-2 border rounded-lg text-sm bg-white"})]})]})]},E))]}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:h.enabled,onChange:D=>p(E=>({...E,enabled:D.target.checked})),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm font-bold text-slate-600",children:" "})]}),l.jsx("button",{onClick:g,className:"bg-blue-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all active:scale-95",children:""})]}),h.text&&l.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-xl border-2 border-dashed border-slate-300",children:[l.jsx("p",{className:"text-xs text-slate-400 mb-3 font-bold uppercase tracking-wider",children:" "}),l.jsx("div",{className:"bg-white border-2 border-slate-100 rounded-3xl p-8 shadow-sm",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[l.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-4xl shadow-inner border border-slate-100",children:""}),l.jsxs("div",{className:"flex-1 min-w-0 text-center md:text-left",children:[l.jsx("p",{className:"text-[18px] text-slate-900 font-bold whitespace-pre-wrap leading-snug",children:h.text}),l.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-3 mt-6",children:(h.links||[]).map((D,E)=>D.text&&l.jsx("div",{className:"bg-[#03C75A] text-white px-8 py-3 rounded-2xl text-[16px] font-black shadow-md",children:D.text},E))})]})]})})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:"   "}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"   URL"}),l.jsx("input",{type:"url",value:$,onChange:D=>q(D.target.value),placeholder:"https://pf.kakao.com/_xxxx/chat",className:"w-full p-2 border rounded-lg text-sm bg-white focus:ring-2 focus:ring-yellow-400 outline-none"}),l.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"       URL  ."})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:Q,className:"bg-[#FEE500] text-[#3c1e1e] px-8 py-2.5 rounded-xl font-bold hover:bg-[#FDD835] shadow-lg shadow-yellow-100 transition-all active:scale-95",children:" "})})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:"  "}),l.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 font-bold text-sm",children:[l.jsx(be,{name:"download",size:16}),"  CSV "]})]}),(()=>{const D=c.filter(A=>A.memos&&Object.keys(A.memos||{}).length>0),E=c.reduce((A,V)=>A+Object.keys(V.memos||{}).length,0);return l.jsxs("div",{children:[l.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:E}),l.jsx("div",{className:"text-xs text-slate-500",children:"  "})]}),l.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:D.length}),l.jsx("div",{className:"text-xs text-slate-500",children:" "})]}),l.jsxs("div",{className:"bg-green-50 p-4 rounded-xl text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[c.length>0?Math.round(D.length/c.length*100):0,"%"]}),l.jsx("div",{className:"text-xs text-slate-500",children:""})]})]}),l.jsx("h3",{className:"font-bold text-slate-700 mb-2",children:"  TOP 10"}),l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:c.map(A=>({...A,memoCount:Object.keys(A.memos||{}).length})).filter(A=>A.memoCount>0).sort((A,V)=>V.memoCount-A.memoCount).slice(0,10).map((A,V)=>l.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${V===0?"bg-yellow-400 text-white":V===1?"bg-slate-400 text-white":V===2?"bg-orange-400 text-white":"bg-slate-200 text-slate-600"}`,children:V+1}),l.jsxs("div",{children:[l.jsx("span",{className:"font-bold text-slate-800",children:A.name}),l.jsx("span",{className:"text-xs text-slate-400 ml-2",children:A.subgroupId})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-sm font-bold text-purple-600",children:[A.memoCount,""]}),l.jsx("button",{onClick:()=>v(A.name,A.memos||{},{currentDay:A.currentDay,score:A.score,streak:A.streak}),className:"text-xs bg-indigo-100 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-200",children:"HTML"})]})]},A.uid))})]})})()]}),x&&l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl space-y-4",children:[l.jsxs("h3",{className:"font-bold text-lg border-b pb-2",children:["   (",x.name,")"]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" "}),l.jsx("select",{value:x.communityId,onChange:D=>{const E=u.find(A=>A.id===D.target.value);m({...x,communityId:E.id,communityName:E.name,subgroupId:E.subgroups[0]})},className:"w-full border rounded p-2 text-sm",children:u.map(D=>l.jsx("option",{value:D.id,children:D.name},D.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:""}),l.jsx("select",{value:x.subgroupId,onChange:D=>m({...x,subgroupId:D.target.value}),className:"w-full border rounded p-2 text-sm",children:(()=>{const D=u.find(E=>E.id===x.communityId);return D?D.subgroups.map(E=>l.jsx("option",{value:E,children:E},E)):null})()})]}),l.jsxs("div",{className:"flex gap-2 pt-4",children:[l.jsx("button",{onClick:w,className:"flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:""}),l.jsx("button",{onClick:()=>m(null),className:"flex-1 bg-slate-200 text-slate-600 py-2 rounded hover:bg-slate-300",children:""})]})]})}),b&&l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:()=>_(null),children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",onClick:D=>D.stopPropagation(),children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b pb-2",children:"  "}),l.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:[l.jsxs("p",{className:"text-sm text-blue-700",children:[l.jsx("strong",{children:b.name}),"  ."]}),l.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[" : ",b.password]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:"  (6 )"}),l.jsx("input",{type:"text",value:S,onChange:D=>N(D.target.value),placeholder:"123456",className:"w-full border border-slate-300 rounded-lg p-3 text-lg font-mono focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),l.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"    "})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>T(b.uid,b.name,b.password),disabled:!S||S.length<6,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:" "}),l.jsx("button",{onClick:()=>{_(null),N("")},className:"flex-1 bg-slate-200 text-slate-600 py-3 rounded-lg hover:bg-slate-300 font-bold",children:""})]})]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"   "}),l.jsx("div",{className:"flex gap-2",children:["name","day","score","subgroup"].map(D=>l.jsx("button",{onClick:()=>o(D),className:`text-xs px-3 py-1.5 rounded-lg font-bold ${a===D?"bg-blue-500 text-white":"bg-slate-100 text-slate-600"}`,children:D==="name"?"":D==="day"?"":D==="score"?"":""},D))})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[l.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-3 text-center w-10",children:"#"}),l.jsx("th",{className:"px-3 py-3",children:""}),l.jsx("th",{className:"px-3 py-3",children:"/"}),l.jsx("th",{className:"px-3 py-3 text-center",children:"Day"}),l.jsx("th",{className:"px-3 py-3 text-center",children:""}),l.jsx("th",{className:"px-3 py-3 text-center",children:""}),l.jsx("th",{className:"px-3 py-3 text-center",children:""})]})}),l.jsx("tbody",{children:(()=>[...c].sort((E,A)=>{if(a==="name")return E.name.localeCompare(A.name);if(a==="day"){const V=((E.readCount||1)-1)*365+(E.currentDay||1);return((A.readCount||1)-1)*365+(A.currentDay||1)-V}if(a==="score")return(A.score||0)-(E.score||0);if(a==="subgroup"){const V=(E.communityName||"").localeCompare(A.communityName||"","ko-KR");return V!==0?V:(E.subgroupId||"").localeCompare(A.subgroupId||"","ko-KR")}return 0}).map((E,A)=>{const V=E.lastReadDate===new Date().toDateString(),R=E.readCount||1,W=E.currentDay||1,xe=(R-1)*365+W;return l.jsxs("tr",{className:`border-b hover:bg-slate-50 ${V?"bg-green-50":""}`,children:[l.jsx("td",{className:"px-3 py-3 text-center text-xs text-slate-400 font-mono italic",children:A+1}),l.jsxs("td",{className:"px-3 py-3 font-medium text-slate-900",children:[E.name,V&&l.jsx("span",{className:"ml-1 text-green-500",children:""})]}),l.jsxs("td",{className:"px-3 py-3",children:[l.jsx("span",{className:"font-bold",children:E.communityName}),l.jsx("span",{className:"text-xs text-slate-400 block",children:E.subgroupId})]}),l.jsx("td",{className:"px-3 py-3 text-center",children:R>1?l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsxs("span",{className:"font-bold text-blue-600",children:["DAY ",xe]}),l.jsxs("span",{className:"px-1.5 py-0.5 bg-gradient-to-br from-purple-500 to-purple-700 text-white text-[10px] font-bold rounded-full",children:[R,""]})]}):l.jsxs("span",{className:"font-bold text-blue-600",children:["DAY ",W]})}),l.jsx("td",{className:"px-3 py-3 text-center",children:E.score}),l.jsx("td",{className:"px-3 py-3 text-center text-xs text-slate-400",children:E.lastReadDate?new Date(E.lastReadDate).toLocaleDateString("ko-KR"):"-"}),l.jsx("td",{className:"px-3 py-3 text-center",children:l.jsxs("div",{className:"flex justify-center gap-1",children:[l.jsx("button",{onClick:()=>_(E),className:"text-purple-500 hover:text-purple-700 p-1 bg-purple-50 rounded",title:" ",children:l.jsx(be,{name:"refresh",size:14})}),l.jsx("button",{onClick:()=>f(E),className:"text-blue-500 hover:text-blue-700 p-1 bg-blue-50 rounded",title:" ",children:l.jsx(be,{name:"edit",size:14})}),l.jsx("button",{onClick:()=>F(E.uid,E.name),className:"text-red-500 hover:text-red-700 p-1 bg-red-50 rounded",title:"",children:l.jsx(be,{name:"trash",size:14})})]})})]},A)}))()})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:"   "}),l.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200 mb-4",children:l.jsxs("p",{className:"text-sm text-blue-700",children:["   Firestore  ",l.jsx("strong",{children:"  10 "})," .",l.jsx("br",{}),"     ."]})}),O&&l.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg mb-4 text-sm",children:[l.jsxs("p",{className:"text-slate-600",children:[" : ",O.lastSyncAt&&O.lastSyncAt.toDate?O.lastSyncAt.toDate().toLocaleString("ko-KR"):" "]}),l.jsxs("p",{className:"text-slate-500 text-xs",children:[": ",O.successCount||0," / : ",O.errorCount||0,""]}),O.syncedVersions&&l.jsxs("p",{className:"text-slate-400 text-xs mt-1",children:[" : ",O.syncedVersions.join(", ")]}),O.failedItems&&O.failedItems.length>0&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[l.jsxs("p",{className:"text-red-600 text-xs font-bold mb-2",children:["   (",O.failedItems.length,"):"]}),l.jsx("div",{className:"max-h-32 overflow-y-auto bg-white rounded p-2 text-xs",children:O.failedItems.map((D,E)=>l.jsxs("div",{className:"text-red-500 py-0.5",children:[" ",D.versionName," Day ",D.day," (",D.date,") - ",D.error]},E))})]})]}),K?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-200",children:[l.jsxs("p",{className:"text-sm font-bold text-amber-700 mb-2",children:["   ... (",K.current,"/",K.total,")"]}),K.status&&l.jsx("p",{className:"text-xs text-amber-800 mb-2 font-medium",children:K.status}),K.currentVersion&&l.jsxs("p",{className:"text-xs text-amber-600 mb-2",children:[": ",K.currentVersion," ",K.currentDay>0&&`- Day ${K.currentDay}`]}),l.jsx("div",{className:"w-full bg-amber-200 rounded-full h-3",children:l.jsx("div",{className:"bg-amber-500 h-3 rounded-full transition-all",style:{width:`${K.current/K.total*100}%`}})}),l.jsxs("p",{className:"text-xs text-amber-600 mt-2",children:[" : ",K.success," /  : ",K.error,""]})]}),l.jsx("p",{className:"text-xs text-slate-500 text-center",children:"   .  2 ."})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-bold text-slate-700 mb-2",children:"  :"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[l.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:" "}),d["1year"].map(D=>{const E=`1year_${D.id}`,A=H.indexOf(E)!==-1;return l.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:A,onChange:V=>{V.target.checked?ce([...H,E]):ce(H.filter(R=>R!==E))},className:"w-4 h-4 rounded"}),l.jsx("span",{className:"text-sm text-slate-700",children:D.name})]},E)})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[l.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:" "}),d.nt.map(D=>{const E=`nt_${D.id}`,A=H.indexOf(E)!==-1;return l.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:A,onChange:V=>{V.target.checked?ce([...H,E]):ce(H.filter(R=>R!==E))},className:"w-4 h-4 rounded"}),l.jsx("span",{className:"text-sm text-slate-700",children:D.name})]},E)})]})]})]}),l.jsx("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:l.jsxs("p",{className:"text-sm text-green-700",children:[": ",l.jsxs("strong",{children:[H.length,""]})," "]})}),l.jsxs("button",{onClick:async()=>{if(H.length===0){alert("  .");return}if(!confirm(`${H.length}  . ?`))return;const D=H.length*365;te({current:0,total:D,success:0,error:0,currentVersion:"",currentDay:0});const E=await Me(H);alert(` !
: ${E.success}
: ${E.error}`);const A=await ae.collection("settings").doc("sync").get();A.exists&&G(A.data())},disabled:H.length===0,className:"w-full bg-blue-600 text-white font-bold py-4 rounded-xl hover:bg-blue-700 text-lg disabled:opacity-50",children:["    (",H.length*365,")"]})]})]})]})}),j8=({view:t,currentUser:e,tempUser:r,setView:n,selectedPlanType:i,handlePlanTypeSelect:s,handleVersionSelect:a,handleCommunitySelect:o,handleSubgroupSelect:c})=>{if(t==="plan_type_select")return l.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[l.jsxs("div",{className:"w-full max-w-2xl mb-6",children:[e&&!r&&l.jsxs("button",{onClick:()=>n("dashboard"),className:"text-sm text-slate-400 flex items-center hover:text-slate-600 mb-4",children:[l.jsx(be,{name:"back",size:16,className:"mr-1"}),"  "]}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 text-center",children:e&&!r?"  ":`, ${r&&r.name||""}!`}),l.jsx("p",{className:"text-slate-500 text-sm text-center mt-1",children:"  ?"})]}),l.jsx("div",{className:"w-full max-w-2xl space-y-3",children:ch.map(u=>l.jsxs("button",{onClick:()=>s(u.id),className:"w-full bg-white p-5 rounded-2xl border border-slate-200 shadow-sm hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[l.jsx("div",{className:"font-bold text-slate-800 text-lg mb-1",children:u.title}),l.jsx("div",{className:"text-xs text-slate-400",children:u.desc})]},u.id))})]});if(t==="bible_version_select"){const u=bi[i],d=ch.find(p=>p.id===i),h=d?d.title:null;return l.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[l.jsxs("div",{className:"w-full max-w-2xl",children:[l.jsxs("button",{onClick:()=>n("plan_type_select"),className:"text-sm text-slate-400 flex items-center hover:text-slate-600 mb-4",children:[l.jsx(be,{name:"back",size:16,className:"mr-1"})," "]}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:[h,"  "]}),l.jsx("div",{className:"bg-yellow-50 text-yellow-800 text-xs font-bold p-2 rounded-lg mt-2 break-keep",children:"    1    ."})]})]}),l.jsx("div",{className:"w-full max-w-2xl space-y-3",children:u.map(p=>l.jsxs("button",{onClick:()=>a(p.id),className:"w-full bg-white p-5 rounded-2xl border border-slate-200 shadow-sm hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[l.jsx("div",{className:"font-bold text-slate-800 text-lg mb-1",children:p.name}),l.jsx("div",{className:"text-xs text-slate-400",children:p.desc})]},p.id))})]})}if(t==="community_select")return l.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"  "}),l.jsx("p",{className:"text-slate-500 text-sm",children:"   ?"})]}),l.jsx("div",{className:"w-full max-w-2xl space-y-3",children:Vn.map(u=>l.jsxs("button",{onClick:()=>o(u.id,u.name),className:"w-full bg-white p-4 rounded-2xl shadow-sm border border-slate-200 hover:border-blue-500 hover:bg-blue-50 transition-all flex items-center gap-4 text-left",children:[l.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-2xl",children:u.icon}),l.jsx("div",{className:"flex-1",children:l.jsx("div",{className:"font-bold text-slate-800 text-lg",children:u.name})}),l.jsx(be,{name:"arrowRight",className:"text-slate-300"})]},u.id))})]});if(t==="subgroup_select"){const u=Vn.find(d=>d.id===(r?r.communityId:null));return l.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[l.jsx("div",{className:"w-full max-w-2xl mb-4",children:l.jsxs("button",{onClick:()=>n("community_select"),className:"text-sm text-slate-400 flex items-center hover:text-slate-600",children:[l.jsx(be,{name:"back",size:16,className:"mr-1"})," "]})}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:" "}),l.jsxs("p",{className:"text-slate-500 text-sm",children:[r?r.communityName:"","   ."]})]}),l.jsx("div",{className:"w-full max-w-2xl grid grid-cols-2 gap-3 h-[50vh] overflow-y-auto content-start",children:u&&u.subgroups.map((d,h)=>l.jsxs("button",{onClick:()=>c(d),className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 hover:border-blue-500 hover:bg-blue-50 transition-all text-center flex flex-col items-center justify-center aspect-video",children:[l.jsx("span",{className:"text-2xl mb-2 opacity-80",children:""}),l.jsx("span",{className:"font-bold text-slate-700 text-sm",children:d})]},h))})]})}return null},D8=({show:t,onClose:e,myLevel:r,score:n})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:i=>{i.target===i.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:i=>i.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold",children:"  &  "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(be,{name:"close"})})]}),l.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[60vh]",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-blue-600 mb-1",children:" "}),l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 p-3 rounded-xl border border-blue-100",children:[l.jsx("div",{className:"text-3xl",children:r.emoji}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-lg",children:r.title}),l.jsxs("div",{className:"text-xs text-slate-500",children:[" ",n,""]})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  "}),l.jsxs("ul",{className:"text-sm text-slate-600 space-y-1 list-disc pl-4",children:[l.jsxs("li",{children:["  : ",l.jsx("strong",{children:"+10"})]}),l.jsxs("li",{children:["  : ",l.jsx("strong",{children:" +1  ( +5)"})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:" "}),l.jsx("div",{className:"grid gap-2 text-sm",children:Lm.map((i,s)=>l.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${i.title===r.title?"bg-yellow-50 border border-yellow-200":""}`,children:[l.jsx("span",{className:"text-xl",children:i.emoji}),l.jsx("span",{className:"flex-1",children:i.title}),l.jsxs("span",{className:"text-slate-400 text-xs",children:[i.min,"pt~"]})]},s))})]})]}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,A8=({show:t,onClose:e})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:r=>{r.target===r.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:r=>r.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  114 "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(be,{name:"close"})})]}),l.jsx("a",{href:"https://www.bible114.net/8e616cd9-5ca0-4dd3-9e63-64280fc66f38",target:"_blank",rel:"noopener noreferrer",className:"block w-full mb-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-center py-3 rounded-xl font-bold shadow-md hover:from-blue-600 hover:to-blue-700 transition-all",children:"  114   "}),l.jsxs("div",{className:"space-y-3 overflow-y-auto max-h-[60vh] text-xs",children:[l.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:[l.jsx("h4",{className:"font-bold text-blue-700 mb-2",children:"  114?"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[l.jsx("strong",{children:"1 1 4 !"}),"   1 1 , 3( )        ,         ."]})]}),l.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100",children:[l.jsx("h4",{className:"font-bold text-green-700 mb-2",children:" 1 (1-3)"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[l.jsx("strong",{className:"text-green-800",children:":"}),"  1-11, , , , , , ,  1-6, , ,  7-10, , "]}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[l.jsx("strong",{className:"text-green-800",children:":"})," ,  1-5, , , ,  1-3"]})]}),l.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-100",children:[l.jsx("h4",{className:"font-bold text-yellow-700 mb-2",children:" 2 (4-6)"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[l.jsx("strong",{className:"text-yellow-800",children:":"}),"  12-26, , , ,  1-72, , , , , "]}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[l.jsx("strong",{className:"text-yellow-800",children:":"})," ,  6-12, , , , , , ,  4-7"]})]}),l.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-100",children:[l.jsx("h4",{className:"font-bold text-orange-700 mb-2",children:" 3 (7-9)"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[l.jsx("strong",{className:"text-orange-800",children:":"}),"  27-36, ,  1-11, , , ,  12-22,  1-14, ,  15, , ,  16-23, ,  24-25, "]}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[l.jsx("strong",{className:"text-orange-800",children:":"})," ,  13-20, , , , , , ,  8-14"]})]}),l.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100",children:[l.jsx("h4",{className:"font-bold text-red-700 mb-2",children:" 4 (10-12)"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[l.jsx("strong",{className:"text-red-800",children:":"}),"  37-50, ,  90, ,  73-150,  1-28, ,  29-36, , , "]}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[l.jsx("strong",{className:"text-red-800",children:":"})," ,  21-28, , , , , , ,  15-22"]})]}),l.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-100",children:[l.jsx("h4",{className:"font-bold text-purple-700 mb-1",children:"  !"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["  !    . ",l.jsx("strong",{children:" "}),".  ! "]})]})]}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,R8=({show:t,onClose:e,currentUser:r})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:n=>{n.target===n.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:n=>n.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(be,{name:"close"})})]}),l.jsx("div",{className:"grid grid-cols-3 gap-3 overflow-y-auto max-h-[60vh]",children:Mm.map(n=>{const i=r&&r.achievements?r.achievements.indexOf(n.id)!==-1:!1;return l.jsxs("div",{className:`p-3 rounded-xl text-center border ${i?"bg-yellow-50 border-yellow-200":"bg-slate-50 border-slate-100 opacity-40"}`,children:[l.jsx("div",{className:`text-2xl mb-1 ${i?"":"grayscale"}`,children:n.emoji}),l.jsx("p",{className:"text-[10px] font-bold text-slate-700 leading-tight",children:n.title})]},n.id)})}),l.jsx("div",{className:"mt-4 bg-blue-50 p-3 rounded-xl border border-blue-100",children:l.jsxs("p",{className:"text-xs text-blue-700 text-center",children:[" : ",l.jsx("strong",{children:r&&r.achievements?r.achievements.length:0})," / ",Mm.length]})}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,P8=({show:t,onClose:e,calendarDate:r,setCalendarDate:n,readHistory:i})=>{if(!t)return null;const s=new Date,a=r.getFullYear(),o=r.getMonth(),c=new Date(a,o,1).getDay(),u=new Date(a,o+1,0).getDate(),d=["1","2","3","4","5","6","7","8","9","10","11","12"],h=["","","","","","",""],p=[];for(let b=0;b<c;b++)p.push(null);for(let b=1;b<=u;b++)p.push(b);const g=b=>typeof b=="string"?b:b.date,y=i.filter(b=>{const _=g(b),S=new Date(_);return S.getFullYear()===a&&S.getMonth()===o}).map(b=>new Date(g(b)).getDate()),v=()=>n(new Date(a,o-1,1)),x=()=>n(new Date(a,o+1,1)),m=()=>n(new Date),f=s.getFullYear()===a&&s.getMonth()===o,w=i.filter(b=>{const _=g(b);return new Date(_).getFullYear()===a}).length;return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:b=>{b.target===b.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(be,{name:"close"})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:v,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold",children:""}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"font-bold text-lg text-slate-700",children:[a," ",d[o]]}),!f&&l.jsx("button",{onClick:m,className:"ml-2 text-xs text-blue-500 underline",children:""})]}),l.jsx("button",{onClick:x,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold",children:""})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:h.map(b=>l.jsx("div",{className:`text-center text-[10px] font-bold py-1 ${b===""?"text-red-400":b===""?"text-blue-400":"text-slate-400"}`,children:b},b))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:p.map((b,_)=>{if(!b)return l.jsx("div",{},_);const S=f&&b===s.getDate(),N=y.indexOf(b)!==-1,T=new Date(a,o,b).getDay();return l.jsxs("button",{className:`aspect-square flex flex-col items-center justify-center rounded-lg border transition-all cursor-default relative
                                            ${S?"ring-2 ring-blue-400":""}
                                            ${N?"bg-green-100 border-green-200 text-green-700":T===0?"bg-red-50 border-red-100 text-red-300":T===6?"bg-blue-50 border-blue-100 text-blue-300":"bg-slate-50 border-slate-100 text-slate-400 hover:bg-blue-50"}`,children:[l.jsx("span",{className:"text-sm font-bold",children:b}),N&&l.jsx("span",{className:"absolute top-0.5 right-0.5 text-[8px]",children:""})]},_)})}),l.jsxs("div",{className:"mt-4 flex justify-center gap-4 text-xs",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-4 h-4 bg-green-100 rounded"}),l.jsx("span",{className:"text-slate-500",children:" "})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-4 h-4 bg-slate-50 rounded border"}),l.jsx("span",{className:"text-slate-500",children:"  "})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"bg-green-50 p-3 rounded-xl border border-green-100 text-center",children:[l.jsx("p",{className:"text-xs text-slate-500",children:" "}),l.jsxs("p",{className:"text-lg font-bold text-green-700",children:[y.length,""]})]}),l.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100 text-center",children:[l.jsxs("p",{className:"text-xs text-slate-500",children:[a," "]}),l.jsxs("p",{className:"text-lg font-bold text-blue-700",children:[w,""]})]})]})]}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})})},O8=({show:t,onClose:e})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:r=>{r.target===r.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:r=>r.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-red-700",children:"   "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(be,{name:"close"})})]}),l.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[60vh]",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-red-600 mb-2",children:"  "}),l.jsxs("div",{className:"bg-red-50 p-3 rounded-xl border border-red-100 text-sm text-slate-700 leading-relaxed",children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"  "})," = (    )  (  )  100"]}),l.jsx("p",{className:"text-xs text-slate-500",children:"   1       "})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-700 mb-2",children:" "}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-200 text-xs space-y-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-700 mb-1",children:"1 (10, 1 12 )"}),l.jsxs("ul",{className:"text-slate-600 space-y-0.5 pl-3",children:[l.jsxs("li",{children:["     : ",l.jsx("strong",{children:"100"})]}),l.jsxs("li",{children:["   : 10  12 = ",l.jsx("strong",{children:"120"})]}),l.jsxs("li",{children:["  : 100  120  100 = ",l.jsx("strong",{className:"text-red-600",children:"83%"})]})]})]}),l.jsx("div",{className:"pt-2 border-t border-slate-200",children:l.jsx("p",{className:"text-slate-500",children:"   83%     "})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-blue-600 mb-2",children:"  ?"}),l.jsxs("ul",{className:"text-xs text-slate-600 space-y-2 pl-3",children:[l.jsxs("li",{children:[" ",l.jsx("strong",{children:"   "})," "]}),l.jsx("li",{children:"       "}),l.jsx("li",{children:"      "}),l.jsxs("li",{children:["   1   ",l.jsx("strong",{children:"   "})," "]})]})]})]}),l.jsx("button",{onClick:e,className:"w-full bg-red-100 font-bold py-3 rounded-xl mt-4 text-red-700 hover:bg-red-200 transition-colors",children:""})]})}):null,L8=({show:t,onClose:e,onRestart:r})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:n=>{n.target===n.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:n=>n.stopPropagation(),children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"  ?"}),l.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:[" (, , )",l.jsx("br",{}),l.jsx("strong",{className:"text-red-500",children:" "}),".",l.jsx("br",{})," Day 1  !"]})]}),l.jsx("div",{className:"bg-amber-50 p-3 rounded-xl border border-amber-200 mb-4",children:l.jsx("p",{className:"text-xs text-amber-700 text-center",children:"     !"})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:r,className:"w-full bg-red-500 text-white font-bold py-3 rounded-xl hover:bg-red-600 transition-colors",children:",   "}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 text-slate-600 font-bold py-3 rounded-xl hover:bg-slate-200",children:""})]})]})}):null,M8=({show:t,onClose:e,currentUser:r,currentDay:n,dateSettingsDate:i,setDateSettingsDate:s,dateToOffset:a,changeStartDate:o})=>{const[c,u]=Nl.useState(!1);if(Nl.useEffect(()=>{if(t){const x=setTimeout(()=>u(!0),300);return()=>clearTimeout(x)}else u(!1)},[t]),!t)return null;const d=i.getFullYear(),h=i.getMonth(),p=new Date(d,h,1).getDay(),g=new Date(d,h+1,0).getDate(),y=[];for(let x=0;x<p;x++)y.push(null);for(let x=1;x<=g;x++)y.push(x);const v=qx?qx[r?r.planId:null]:null;return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:x=>{x.target===x.currentTarget&&c&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 duration-200",onClick:x=>x.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),l.jsx("button",{onClick:e,className:"text-slate-400 p-1 hover:bg-slate-100 rounded-full transition-colors",children:l.jsx(be,{name:"close"})})]}),l.jsxs("div",{className:"mb-4 bg-purple-50 p-4 rounded-xl border border-purple-100 text-center",children:[l.jsx("p",{className:"text-lg font-bold text-purple-700 leading-relaxed",children:'"    ."'}),l.jsx("p",{className:"text-[11px] text-purple-500 mt-1 opacity-80",children:"       ."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-2 rounded-xl",children:[l.jsx("button",{onClick:x=>{x.stopPropagation(),s(new Date(d,h-1))},className:"p-2 hover:bg-white rounded-lg transition-colors",children:l.jsx(be,{name:"back",size:16})}),l.jsxs("span",{className:"font-bold text-slate-700",children:[d," ",h+1,""]}),l.jsx("button",{onClick:x=>{x.stopPropagation(),s(new Date(d,h+1))},className:"p-2 hover:bg-white rounded-lg transition-colors rotate-180",children:l.jsx(be,{name:"back",size:16})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-1",children:["","","","","","",""].map((x,m)=>l.jsx("div",{className:`text-[10px] font-bold py-1 ${m===0?"text-red-400":m===6?"text-blue-400":"text-slate-400"}`,children:x},m))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:y.map((x,m)=>{if(!x)return l.jsx("div",{},m);const f=a(h+1,x),w=v&&v[f]?v[f]:null,b=new Date().getDate()===x&&new Date().getMonth()===h,_=new Date(d,h,x).getDay();return l.jsxs("button",{onClick:S=>{S.stopPropagation();const N=f-n+1;o(N),e()},className:`group aspect-square flex flex-col items-center justify-center rounded-lg border transition-all hover:border-purple-400 hover:shadow-sm active:scale-95
                                        ${b?"bg-purple-50 border-purple-200 ring-1 ring-purple-300":"bg-white border-slate-100"}
                                    `,children:[l.jsx("span",{className:`text-xs font-bold ${_===0?"text-red-500":_===6?"text-blue-500":"text-slate-700"}`,children:x}),w&&l.jsx("span",{className:"text-[7px] text-slate-400 break-keep leading-[1.1] w-full px-0.5 whitespace-pre-wrap",title:w.range,children:w.range})]},m)})}),l.jsx("div",{className:"bg-amber-50 p-3 rounded-xl border border-amber-200",children:l.jsx("p",{className:"text-[11px] text-amber-700 leading-relaxed font-medium",children:"        ."})})]}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})})},$8=({show:t,onClose:e,progressRanking:r,allMembersForRace:n,subgroupId:i,currentUser:s,selectedSubgroupDetail:a,setSelectedSubgroupDetail:o,rankingCommunityFilter:c,setRankingCommunityFilter:u})=>{if(!t)return null;if(a){const d=n.filter(y=>y.subgroupId===a).sort((y,v)=>{const x=((y.readCount||1)-1)*365+(y.currentDay||1);return((v.readCount||1)-1)*365+(v.currentDay||1)-x}),h=new Date().toDateString(),p=d.length>0?Math.round(d.reduce((y,v)=>y+(v.currentDay||0),0)/d.length):0,g=d.filter(y=>y.lastReadDate===h).length;return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:y=>{y.target===y.currentTarget&&o(null)},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl max-h-[80vh] flex flex-col",onClick:y=>y.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b pb-3",children:[l.jsx("button",{onClick:()=>o(null),className:"text-slate-400 hover:text-slate-600",children:l.jsx(be,{name:"back",size:20})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:a}),l.jsx("p",{className:"text-xs text-slate-500",children:"  "})]}),l.jsx("button",{onClick:()=>{o(null),e()},className:"text-slate-400",children:l.jsx(be,{name:"close"})})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[l.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl text-center border border-blue-100",children:[l.jsx("p",{className:"text-xl font-bold text-blue-600",children:d.length}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]}),l.jsxs("div",{className:"bg-green-50 p-3 rounded-xl text-center border border-green-100",children:[l.jsx("p",{className:"text-xl font-bold text-green-600",children:p}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" Day"})]}),l.jsxs("div",{className:"bg-orange-50 p-3 rounded-xl text-center border border-orange-100",children:[l.jsx("p",{className:"text-xl font-bold text-orange-600",children:g}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:d.length>0?d.map((y,v)=>{const x=y.uid===s.uid,m=y.lastReadDate===h,f=Math.round(y.currentDay/365*100);return l.jsxs("div",{className:`p-3 rounded-xl border ${x?"bg-blue-50 border-blue-200":"bg-slate-50 border-slate-100"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${v===0?"bg-yellow-100 text-yellow-600":v===1?"bg-slate-200 text-slate-600":v===2?"bg-orange-100 text-orange-600":"bg-slate-100 text-slate-400"}`,children:v+1}),l.jsxs("span",{className:`font-bold text-sm ${x?"text-blue-600":"text-slate-700"}`,children:[y.name," ",x&&"()"]}),(y.readCount||1)>1&&l.jsxs("span",{className:"text-[10px] bg-purple-500 text-white px-1.5 py-0.5 rounded-full font-bold",children:[y.readCount,""]}),m&&l.jsx("span",{className:"text-green-500 text-xs",children:""})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Day ",((y.readCount||1)-1)*365+y.currentDay]}),l.jsxs("p",{className:"text-[10px] text-slate-400",children:[y.score||0,""]})]})]}),l.jsx("div",{className:"h-2 w-full bg-slate-200 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${x?"bg-blue-500":"bg-slate-400"}`,style:{width:`${f}%`}})}),l.jsxs("div",{className:"flex justify-between mt-1",children:[l.jsxs("span",{className:"text-[10px] text-slate-400",children:[f,"% "]}),y.streak>0&&l.jsxs("span",{className:"text-[10px] text-orange-500 font-bold",children:[" ",y.streak," "]})]})]},y.uid)}):l.jsx("div",{className:"text-center py-8 text-slate-400",children:l.jsx("p",{className:"text-sm",children:"  "})})}),l.jsx("button",{onClick:()=>o(null),className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})})}else return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:d=>{d.target===d.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl max-h-[80vh] flex flex-col",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"   "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(be,{name:"close"})})]}),l.jsxs("div",{className:"mb-3 flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>u("all"),className:`px-2.5 py-1.5 rounded-full text-[11px] font-bold whitespace-nowrap transition-colors ${c==="all"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:""}),Vn.map(d=>l.jsx("button",{onClick:()=>u(d.id),className:`px-2.5 py-1.5 rounded-full text-[11px] font-bold whitespace-nowrap transition-colors ${c===d.id?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:d.name},d.id))]}),l.jsxs("div",{className:"mb-3 bg-blue-50 p-3 rounded-xl border border-blue-100",children:[l.jsxs("p",{className:"text-xs text-blue-700",children:[l.jsx("strong",{children:" "})," =   Day  365  100"]}),l.jsx("p",{className:"text-[10px] text-blue-600 mt-1",children:"        "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:(()=>{let d=r;if(c!=="all"){const h=Vn.find(p=>p.id===c);h&&(d=r.filter(p=>h.subgroups.indexOf(p.name)!==-1))}return d.length===0?l.jsx("div",{className:"text-center py-8 text-slate-500",children:l.jsx("p",{className:"text-sm",children:"    ."})}):d.map((h,p)=>{const g=h.name===i,y=p===0?"bg-yellow-100 text-yellow-700 border-yellow-200":p===1?"bg-slate-200 text-slate-700 border-slate-300":p===2?"bg-orange-100 text-orange-700 border-orange-200":"bg-slate-100 text-slate-600 border-slate-200";return l.jsxs("button",{onClick:()=>o(h.name),className:`w-full p-3 rounded-xl border-2 transition-all hover:shadow-md ${g?"bg-blue-50 border-blue-300 hover:bg-blue-100":"bg-white border-slate-100 hover:border-slate-300"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 shrink-0 ${y}`,children:p+1}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("span",{className:`font-bold text-sm truncate pr-2 ${g?"text-blue-600":"text-slate-700"}`,children:[h.name," ",g&&"()"]}),l.jsxs("span",{className:"text-xs font-bold text-slate-500 shrink-0",children:[h.progressRate,"%"]})]})}),l.jsx(be,{name:"arrowRight",size:16,className:"text-slate-400"})]}),l.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${p===0?"bg-yellow-400":p===1?"bg-slate-400":p===2?"bg-orange-400":"bg-slate-300"}`,style:{width:`${h.progressRate}%`}})})]},p)})})()})]})})},F8=({show:t,onClose:e,memos:r,currentDay:n,score:i,streak:s,currentUser:a,generateMemosHTML:o})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:c=>{c.target===c.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"   "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(be,{name:"close"})})]}),l.jsx("div",{className:"bg-indigo-50 p-3 rounded-xl border border-indigo-100 mb-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-center flex-1",children:[l.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:Object.keys(r).length}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]}),l.jsxs("div",{className:"text-center flex-1 border-l border-indigo-200",children:[l.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:n||1}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" Day"})]}),l.jsxs("div",{className:"text-center flex-1 border-l border-indigo-200",children:[l.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:i||0}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]})]})}),l.jsx("div",{className:"space-y-3 overflow-y-auto max-h-[45vh]",children:Object.keys(r).length>0?Object.keys(r).map(c=>[c,r[c]]).sort((c,u)=>Number(u[0])-Number(c[0])).map(c=>{const[u,d]=c;return l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("span",{className:"text-xs font-bold text-blue-600",children:["DAY ",u," ",(d.texts&&d.texts.length||0)>1&&l.jsxs("span",{className:"ml-1 text-purple-500",children:["(",d.texts.length,")"]})]}),l.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(d.date).toLocaleDateString("ko-KR")})]}),l.jsx("p",{className:"text-xs text-slate-500 mb-1",children:d.title}),(d.texts||[d.text]).map((h,p)=>l.jsx("div",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-wrap "+(p>0?"mt-2 pt-2 border-t border-slate-200":""),children:h},p))]},u)}):l.jsxs("div",{className:"text-center py-8 text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{className:"text-sm",children:"   ."})]})}),Object.keys(r).length>0&&l.jsx("button",{onClick:()=>o(a.name,r,{currentDay:n,score:i,streak:s}),className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-xl mt-4 flex items-center justify-center gap-2 hover:bg-indigo-700 transition-colors",children:"   "}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-2 text-slate-600",children:""})]})}):null,V8=({show:t,onClose:e,currentUser:r,changeSubgroup:n})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:i=>{i.target===i.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:i=>i.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(be,{name:"close"})})]}),l.jsx("div",{className:"mb-4 bg-blue-50 p-3 rounded-xl border border-blue-200",children:l.jsxs("p",{className:"text-sm text-blue-700",children:[" : ",l.jsx("strong",{children:r.subgroupId||""})]})}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-[300px] overflow-y-auto",children:(()=>{const i=Vn.find(s=>s.id===r.communityId);return i?i.subgroups.map((s,a)=>l.jsx("button",{onClick:()=>n(s),disabled:s===r.subgroupId,className:`p-3 rounded-xl text-sm font-bold transition-all ${s===r.subgroupId?"bg-blue-100 text-blue-600 border-2 border-blue-300":"bg-slate-50 text-slate-700 border-2 border-slate-200 hover:border-blue-300"}`,children:s},a)):null})()}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,U8=({handleLogout:t,streak:e,score:r,myLevel:n,setShowScoreInfo:i,setShowAchievements:s,setShowDateSettings:a,setShowCalendar:o,setShowReadingGuide:c,getEncouragementMessage:u,communityName:d,setShowFullRanking:h,topProgressGroups:p,subgroupId:g,planTypeName:y,versionName:v,handleChangeVersionStart:x,setView:m})=>l.jsxs("header",{className:"sticky top-0 z-30 space-y-4 mb-4",children:[l.jsx("div",{className:"bg-white/95 backdrop-blur-md border-b border-slate-200/60 shadow-sm",children:l.jsxs("div",{className:"px-4 py-2 flex flex-col md:flex-row justify-between items-center max-w-5xl mx-auto w-full gap-2.5 md:gap-4",children:[l.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto scrollbar-hide w-full md:w-auto md:order-2 justify-between md:justify-end py-1",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsxs("div",{className:`text-xs font-bold px-2.5 py-1.5 rounded-xl flex items-center gap-1 shrink-0 ${e>0?"bg-orange-50 text-orange-600 border border-orange-100":"bg-slate-100 text-slate-400"}`,children:[l.jsx(be,{name:"flame",size:12}),e,""]}),l.jsxs("button",{type:"button",onClick:f=>{f.stopPropagation(),i(!0)},className:"text-xs font-bold text-blue-600 bg-blue-50 border border-blue-100 px-2.5 py-1.5 rounded-xl hover:bg-blue-100 transition-colors shrink-0",children:[n.emoji," ",r||0,"pt"]}),l.jsxs("button",{type:"button",onClick:f=>{f.stopPropagation(),m("mini_room")},className:"p-1.5 text-xs font-bold text-indigo-600 bg-indigo-50 border border-indigo-100 rounded-xl hover:bg-indigo-100 shrink-0 flex items-center gap-1",title:" ",children:[" ",l.jsx("span",{className:"hidden sm:inline",children:""})]}),l.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),s(!0)},className:"p-1.5 text-xs font-bold text-yellow-600 bg-yellow-50 border border-yellow-100 rounded-xl hover:bg-yellow-100 shrink-0",children:""}),l.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),a(!0)},className:"p-1.5 text-xs font-bold text-purple-600 bg-purple-50 border border-purple-100 rounded-xl hover:bg-purple-100 shrink-0",children:""}),l.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),o(!0)},className:"p-1.5 text-xs font-bold text-green-600 bg-green-50 border border-green-100 rounded-xl hover:bg-green-100 shrink-0",children:""}),l.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),c(!0)},className:"p-1.5 text-xs font-bold text-slate-600 bg-slate-100 border border-slate-200 rounded-xl hover:bg-slate-200 shrink-0",children:l.jsx(be,{name:"helpbook",size:14})})]}),l.jsxs("div",{className:"flex items-center shrink-0",children:[l.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),l.jsx("button",{onClick:t,className:"text-xs font-bold text-slate-400 hover:text-red-500 transition-colors shrink-0 px-1",children:""})]})]}),l.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-100/80 hover:bg-slate-200 rounded-full transition-colors group shrink-0 md:order-1 self-start md:self-center",children:[l.jsx("span",{className:"text-[11px] font-bold text-slate-500 tracking-tight",children:"  "}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-xs font-bold text-slate-700",children:y}),l.jsx("span",{className:"w-px h-2.5 bg-slate-300"}),l.jsx("span",{className:"text-xs font-bold text-blue-600",children:v}),l.jsx(be,{name:"refresh",size:10,className:"text-slate-400 group-hover:rotate-180 transition-transform duration-500"})]})]})]})}),l.jsx("div",{className:"px-4 w-full max-w-5xl mx-auto",children:l.jsxs("div",{className:"bg-white rounded-3xl shadow-md border border-slate-100/80 p-6 md:p-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("span",{className:"text-xs font-bold text-blue-600 tracking-tight",children:u()}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-xl font-black text-slate-900",children:[" ",d]}),l.jsx("span",{className:"text-sm font-bold text-slate-400",children:" "})]})]}),l.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1 px-4 py-2 bg-slate-50 hover:bg-blue-50 text-blue-600 text-xs font-bold rounded-2xl transition-all border border-transparent hover:border-blue-100",children:[" ",l.jsx(be,{name:"right",size:10})]})]}),l.jsx("div",{className:"space-y-4",children:p.map((f,w)=>l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 shrink-0 ${w===0?"bg-yellow-100 border-yellow-200 text-yellow-700":w===1?"bg-slate-100 border-slate-200 text-slate-700":"bg-orange-50 border-orange-100 text-orange-700"}`,children:w+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[l.jsx("span",{className:`font-bold truncate ${f.name===g?"text-blue-600":"text-slate-700"}`,children:f.name}),l.jsxs("span",{className:"font-bold text-slate-500 shrink-0",children:[" ",f.avgDay," (",f.progressRate,"%)"]})]}),l.jsx("div",{className:"h-4 w-full bg-slate-50 rounded-full border border-slate-100 overflow-hidden shadow-inner",children:l.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${w===0?"bg-gradient-to-r from-yellow-300 to-yellow-500":w===1?"bg-gradient-to-r from-slate-300 to-slate-500":"bg-gradient-to-r from-orange-300 to-orange-500"}`,style:{width:`${f.progressRate}%`}})})]})]},w))})]})})]}),B8=({racers:t,departmentChampions:e,getSubgroupDisplay:r})=>{const n=i=>{const s=Math.min(i,365);return s<=100?s/100*50:s<=200?50+(s-100)/100*30:80+(s-200)/165*20};return l.jsxs("div",{className:"mx-4 mb-6 relative h-64 bg-sky-texture overflow-hidden rounded-3xl shadow-xl border border-slate-100",children:[l.jsx("div",{className:"absolute inset-x-0 top-0 h-12 bg-gradient-to-b from-white/20 to-transparent z-10"}),l.jsx("div",{className:"mountain-back"}),l.jsx("div",{className:"mountain-front"}),l.jsx("div",{className:"absolute top-2 left-10 text-2xl opacity-80 animate-float",children:""}),l.jsx("div",{className:"absolute top-5 right-20 text-xl opacity-60 animate-float-slow",children:""}),l.jsx("div",{className:"absolute top-8 left-1/2 text-lg opacity-50 animate-float",style:{animationDelay:"2s"},children:""}),l.jsx("div",{className:"absolute bottom-2 left-5 text-sm z-10 opacity-90",children:""}),l.jsx("div",{className:"absolute bottom-3 right-10 text-sm z-10 opacity-90",children:""}),l.jsx("div",{className:"absolute bottom-4 left-1/3 text-xs z-10 opacity-80",children:""}),[100,200,300].map(i=>{const s=n(i);return l.jsxs("div",{className:"absolute top-2 z-20 flex flex-col items-center",style:{left:`${s}%`,transform:"translateX(-50%)"},children:[l.jsx("div",{className:"bg-white/95 px-2 py-1 rounded-full shadow-md border-2 border-slate-400 flex items-center justify-center",children:l.jsx("span",{className:"text-[10px] font-bold text-slate-700 leading-none",children:i})}),l.jsx("div",{className:"w-0.5 h-screen bg-gradient-to-b from-slate-400 via-slate-300 to-transparent opacity-40"})]},i)}),l.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex flex-col justify-center items-center z-20 group",style:{top:"60%"},children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 bg-yellow-400 rounded-full blur-xl opacity-70 animate-pulse"}),l.jsx("span",{className:"text-5xl relative z-10 drop-shadow-2xl",children:""})]}),l.jsx("span",{className:"text-[9px] font-bold text-slate-600 bg-white/90 px-2 py-0.5 rounded-full mt-2 shadow-sm border border-slate-200 relative z-20",children:""})]}),t.map((i,s)=>{const a=i.readCount||1,o=a>=2,c=o?i.currentDay:i.day,u=Math.min(n(c),100),d=i.isMe,h=r(i.subgroupId),p=e[i.uid],g=d?29:o?28:25,y=d?"50%":o?"8%":`${15+s%10*8}%`;return l.jsx("div",{className:"absolute transition-all duration-1000 ease-out",style:{left:`calc(${u}% - 16px)`,top:y,zIndex:g},children:l.jsxs("div",{className:"relative flex items-center",children:[a>1&&l.jsx("div",{className:"absolute -left-2 -top-1 w-4 h-4 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center border-2 border-white shadow-md z-10",children:l.jsx("span",{className:"text-[7px] font-bold text-white",children:a})}),l.jsxs("div",{className:`flex items-stretch rounded-full shadow-md overflow-hidden ${d?"ring-2 ring-yellow-400 ring-offset-1":""}`,children:[l.jsxs("div",{className:`text-[9px] pl-2 pr-1 py-0.5 font-bold whitespace-nowrap flex items-center gap-0.5 ${d?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-white/95 text-slate-700"}`,children:[p&&l.jsx("span",{className:"text-[11px]",title:`${p} 1`,children:""}),i.name]}),l.jsx("div",{className:`text-[9px] pl-1 pr-1.5 py-0.5 font-bold whitespace-nowrap text-white flex items-center ${h.bgColor} border-l border-white/30`,children:i.subgroupId})]})]})},i.uid||s)})]})},z8=({announcement:t})=>!t||!t.enabled||!t.text?null:l.jsx("div",{className:"bg-white border-2 border-slate-100 rounded-3xl p-7 shadow-sm mb-10",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[l.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-4xl shadow-inner border border-slate-100",children:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-slate-900 font-bold leading-snug",children:l.jsx(YN,{content:t.text,fontSize:19})}),l.jsx("div",{className:"flex flex-wrap items-center gap-3 mt-6",children:t.links&&t.links.length>0?t.links.map((e,r)=>e.url&&e.text&&l.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center bg-[#03C75A] text-white px-8 py-3.5 rounded-2xl text-[17px] font-black hover:bg-[#02b351] transition-colors shadow-md active:scale-95 min-w-[140px]",children:e.text},r)):t.linkUrl&&t.linkText&&l.jsx("a",{href:t.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center bg-[#03C75A] text-white px-8 py-3.5 rounded-2xl text-[17px] font-black hover:bg-[#02b351] transition-colors shadow-md active:scale-95 min-w-[140px]",children:t.linkText})})]})]})}),Y8=({verseData:t,viewingDay:e,setViewingDay:r,currentUser:n,daysRemaining:i,handleChangeVersionStart:s,getEncouragementMessage:a,fontSize:o,setFontSize:c,isSpeaking:u,isPaused:d,ttsSpeed:h,handleSpeedChange:p,handleSpeak:g,handleStop:y,availableVoices:v,selectedVoiceURI:x,setSelectedVoiceURI:m,activeChunkIndex:f,jumpToChunk:w,hasReadToday:b,handleRead:_})=>l.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-100",children:[l.jsxs("div",{className:"p-6 text-white relative bg-gradient-to-br from-indigo-600 to-blue-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 px-2",children:[l.jsx("button",{onClick:()=>r(S=>Math.max(1,S-1)),className:"p-2 rounded-full bg-white/20 hover:bg-white/30 text-white transition-colors disabled:opacity-30",disabled:e<=1,children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-1",children:t.loading?"...":t.title}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(n.readCount||1)>1&&l.jsxs("span",{className:"text-xs bg-purple-500/90 px-2 py-0.5 rounded-full",children:[" ",n.readCount,""]}),l.jsxs("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:[" D-",i]})]})]}),l.jsx("button",{onClick:()=>r(S=>Math.min(365,S+1)),className:"p-2 rounded-full bg-white/20 hover:bg-white/30 text-white transition-colors disabled:opacity-30",disabled:e>=365,children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),l.jsxs("div",{className:"flex justify-between items-end mb-2",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"opacity-90 text-sm font-bold text-white/90 mb-1 flex items-center gap-2",children:t.subtitle}),l.jsx("p",{className:"opacity-80 text-xs",children:a()})]}),l.jsxs("div",{className:"flex items-center gap-1 bg-white/20 backdrop-blur-md rounded-full px-2 py-1 shadow-sm shrink-0 ml-4",children:[l.jsx("button",{onClick:()=>{const S=Math.max(12,o-2);c(S),localStorage.setItem("bible_fontSize",S)},className:"w-7 h-7 rounded-full bg-white/30 hover:bg-white/50 flex items-center justify-center text-white font-bold",children:""}),l.jsxs("div",{className:"flex flex-col items-center px-1",children:[l.jsx("span",{className:"text-white/60 text-[7px] font-bold leading-none",children:"SIZE"}),l.jsx("span",{className:"text-white text-xs font-bold leading-none",children:o})]}),l.jsx("button",{onClick:()=>{const S=Math.min(28,o+2);c(S),localStorage.setItem("bible_fontSize",S)},className:"w-7 h-7 rounded-full bg-white/30 hover:bg-white/50 flex items-center justify-center text-white font-bold",children:"+"})]})]}),t.text&&t.text.length>20&&!t.loading&&l.jsx("div",{className:"mt-3 bg-white/10 backdrop-blur-md p-3 rounded-2xl border border-white/20",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-base",children:u?"":""}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[10px] font-bold text-white/70 leading-tight",children:" "}),l.jsx("span",{className:"text-[9px] text-white/50 leading-tight",children:u?d?" ":" ...":" "})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center bg-black/20 rounded-lg px-1 py-0.5",children:[l.jsx("button",{onClick:()=>p(-.1),disabled:h<=.6,className:"w-5 h-5 flex items-center justify-center text-white/80 hover:text-white disabled:opacity-30",children:"-"}),l.jsxs("span",{className:"text-[10px] font-bold text-white min-w-[24px] text-center",children:[h.toFixed(1),"x"]}),l.jsx("button",{onClick:()=>p(.1),disabled:h>=2,className:"w-5 h-5 flex items-center justify-center text-white/80 hover:text-white disabled:opacity-30",children:"+"})]}),l.jsx("button",{onClick:()=>u?y():g(t.text),className:`px-4 py-1.5 rounded-xl text-xs font-bold transition-all shadow-sm ${u?"bg-red-500 text-white hover:bg-red-600 ring-2 ring-red-400/50":"bg-white text-indigo-600 hover:bg-indigo-50"}`,children:u?" ":" "})]})]}),v.length>0&&l.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-white/10",children:[l.jsx("span",{className:"text-[9px] text-white/50 shrink-0",children:":"}),l.jsx("select",{value:x,onChange:S=>{const N=S.target.value;if(m(N),localStorage.setItem("bible_selectedVoiceURI",N),u){const T=f;y(),setTimeout(()=>{g(t.text,T)},100)}},className:"flex-1 bg-black/30 text-white text-[9px] py-1 px-2 rounded border border-white/10 focus:outline-none focus:ring-1 focus:ring-white/30 truncate",children:v.map(S=>l.jsx("option",{value:S.voiceURI,children:S.name},S.voiceURI))})]})]})})]}),l.jsxs("div",{className:"p-6 bg-white",children:[l.jsx("div",{className:"prose prose-slate max-w-none mb-10 min-h-[300px]",children:t.loading?l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 space-y-4",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-blue-100 border-t-blue-500 rounded-full animate-spin"}),l.jsx("p",{className:"text-slate-400 font-bold animate-pulse",children:"  ..."})]}):l.jsx(YN,{content:t.text,fontSize:o,activeChunkIndex:f,onSegmentClick:w})}),!t.loading&&l.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100",children:[l.jsxs("button",{onClick:_,className:`w-full py-5 rounded-3xl font-bold text-xl transition-all shadow-xl hover:shadow-2xl active:scale-95 flex items-center justify-center gap-3
                                ${b&&e===n.currentDay?"bg-slate-800 text-white":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700"}`,children:[l.jsx("span",{className:"text-2xl",children:""}),"    ( )"]}),l.jsx("p",{className:"text-center text-xs text-slate-400 mt-4 font-medium",children:b&&e===n.currentDay?"!       ":"    !"})]})]})]}),X8=({currentMemo:t,setCurrentMemo:e,setShowMemoList:r,saveMemo:n,viewingDay:i,currentDay:s,memos:a})=>l.jsxs("div",{className:"mt-4 bg-[#fdf4ff] p-5 rounded-3xl border border-purple-100 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h3",{className:"font-bold text-purple-700 flex items-center gap-2",children:"  "}),l.jsx("button",{onClick:o=>{o.preventDefault(),o.stopPropagation(),r(!0)},className:"text-xs text-purple-500 underline hover:text-purple-700",children:"  "})]}),l.jsx("textarea",{value:t,onChange:o=>e(o.target.value),placeholder:`    ...

   
   
  `,className:"w-full p-4 text-sm border border-purple-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-400 resize-none bg-white shadow-inner",rows:8}),l.jsx("button",{onClick:()=>n(i?i-1:s-1,t,()=>e("")),disabled:!t.trim(),className:"w-full mt-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold py-3 rounded-2xl text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:from-purple-600 hover:to-indigo-600 transition-all shadow-md active:scale-[0.98]",children:"  "}),a[i?i-1:s-1]&&l.jsxs("div",{className:"mt-4 p-4 bg-white rounded-2xl border border-purple-100 max-h-40 overflow-y-auto shadow-sm",children:[l.jsx("p",{className:"text-[10px] text-purple-500 mb-2 font-bold flex items-center gap-1",children:"   :"}),(()=>{const o=a[i?i-1:s-1],c=o.texts||[o.text];return c.map((u,d)=>l.jsxs("div",{className:`text-sm text-slate-600 whitespace-pre-wrap leading-relaxed ${d>0?"mt-3 pt-3 border-t border-purple-50":""}`,children:[c.length>1&&l.jsxs("span",{className:"text-[10px] text-purple-400 font-bold",children:["#",d+1," "]}),u]},d))})()]})]}),q8=({communityName:t,getSubgroupRanking:e,subgroupId:r,communityId:n})=>{const i=e();return l.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 shadow-xl scroll-mt-20",children:[l.jsx("div",{className:"flex justify-between items-center mb-5",children:l.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(be,{name:"users",size:20,className:"text-indigo-500"})," "]})}),l.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:!i||i.length===0?l.jsx("div",{className:"text-center text-slate-400 py-8 text-sm",children:"  ..."}):i.map((s,a)=>{const o=s.communityId===n&&s.name===r,c=s.communityId==="senior"?s.name:`${s.communityName} ${s.name}`;return l.jsxs("div",{className:`relative transition-all ${o?"bg-blue-50/50 p-3 rounded-2xl ring-1 ring-blue-100":""}`,children:[l.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[l.jsxs("span",{className:`font-bold flex items-center gap-1.5 ${o?"text-blue-600":"text-slate-600"}`,children:[l.jsx("span",{className:`w-5 h-5 flex items-center justify-center rounded-full text-[10px] ${a===0?"bg-yellow-100 text-yellow-700":a===1?"bg-slate-100 text-slate-600":a===2?"bg-orange-50 text-orange-700":"bg-slate-100 text-slate-400"}`,children:a+1}),c," ",o&&l.jsx("span",{className:"text-[10px] opacity-70",children:"()"})]}),l.jsxs("span",{className:`font-bold ${o?"text-blue-600":"text-slate-400"}`,children:[" ",s.progressRate,"%"]})]}),l.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${o?"bg-blue-500":"bg-slate-300"}`,style:{width:`${s.progressRate}%`}})})]},a)})})]})},W8=({getWeeklyMVP:t})=>{if(typeof t!="function")return null;const e=t();if(!e)return null;const{streakMVP:r,progressMVP:n,weeklyTop10:i=[],totalTop10:s=[]}=e;if(!r&&!n)return null;const a=new Date,o=new Date(a);return o.setDate(a.getDate()-a.getDay()),o.setHours(0,0,0,0),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-blue-200 p-5 shadow-sm",children:[l.jsx("div",{className:"flex justify-between items-center mb-4",children:l.jsx("h3",{className:"font-bold text-blue-700 flex items-center gap-2",children:" "})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100 text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("p",{className:"text-[10px] text-slate-500 mb-1",children:" "}),l.jsx("p",{className:"font-bold text-slate-800",children:r?r.name:"-"}),l.jsx("p",{className:"text-xs text-orange-500 mb-2 font-bold",children:(()=>r?`  ${(r.readHistory||[]).reduce((u,d)=>{const h=typeof d=="string"?d:d.date,p=typeof d=="string"?1:d.daysRead||1;return new Date(h)>=o?u+p:u},0)}`:"-")()}),l.jsx("p",{className:"text-[9px] text-slate-400 mt-2 pt-2 border-t border-slate-100",children:"     "})]}),l.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100 text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("p",{className:"text-[10px] text-slate-500 mb-1",children:" "}),l.jsx("p",{className:"font-bold text-slate-800",children:n?n.name:"-"}),l.jsx("p",{className:"text-xs text-blue-500 mb-2 font-bold",children:(()=>{if(!n)return"-";const c=n.readCount||1,u=n.currentDay||0,d=(c-1)*365+u;return c>1?` ${d} (${c} ${u})`:` ${d}`})()}),l.jsx("p",{className:"text-[9px] text-slate-400 mt-2 pt-2 border-t border-slate-100",children:"   1"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100",children:[l.jsx("p",{className:"text-[10px] text-slate-500 font-bold mb-2 text-center",children:" 2-10"}),l.jsx("div",{className:"space-y-1",children:i.length>1?i.slice(1,10).map((c,u)=>{const d=(c.readHistory||[]).reduce((h,p)=>{const g=typeof p=="string"?p:p.date,y=typeof p=="string"?1:p.daysRead||1;return new Date(g)>=o?h+y:h},0);return l.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[l.jsxs("span",{className:"text-slate-600 truncate mr-1",children:[u+2,". ",c.name]}),l.jsxs("span",{className:"text-orange-500 font-bold shrink-0",children:[d,""]})]},c.uid)}):l.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:"-"})})]}),l.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100",children:[l.jsx("p",{className:"text-[10px] text-slate-500 font-bold mb-2 text-center",children:" 2-10"}),l.jsx("div",{className:"space-y-1",children:s.length>1?s.slice(1,10).map((c,u)=>{const d=((c.readCount||1)-1)*365+(c.currentDay||0);return l.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[l.jsxs("span",{className:"text-slate-600 truncate mr-1",children:[u+2,". ",c.name]}),l.jsxs("span",{className:"text-blue-600 font-bold shrink-0",children:[d,""]})]},c.uid)}):l.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:"-"})})]})]})]})},H8=({kakaoLink:t})=>{const e=t||f8,r=()=>{e&&window.open(e,"_blank","noopener,noreferrer")};return!e||e.includes("_xxxx")?null:l.jsxs("button",{onClick:r,className:"fixed bottom-6 right-6 z-[100] w-14 h-14 bg-[#FEE500] rounded-full shadow-lg hover:shadow-xl hover:scale-110 active:scale-95 transition-all duration-300 flex items-center justify-center group overflow-hidden","aria-label":" ",children:[l.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-[#3c1e1e]",fill:"currentColor",children:l.jsx("path",{d:"M12 3c-5.523 0-10 3.582-10 8c0 2.864 1.8 5.374 4.545 6.822l-.545 2.178c-.05.2.15.35.3.25l2.75-1.833c.915.253 1.895.383 2.95.383 5.523 0 10-3.582 10-8s-4.477-8-10-8z"})}),l.jsx("span",{className:"absolute inset-0 rounded-full border-4 border-[#FEE500] animate-ping opacity-20 pointer-events-none group-hover:hidden"})]})},G8=({currentUser:t,communityMembers:e,allMembersForRace:r,memos:n,currentMemo:i,setCurrentMemo:s,readHistory:a,announcement:o,kakaoLink:c,verseData:u,hasReadToday:d,viewingDay:h,setViewingDay:p,fontSize:g,setFontSize:y,isSpeaking:v,isPaused:x,handleTogglePause:m,ttsSpeed:f,handleSpeedChange:w,handleStop:b,handleSpeak:_,availableVoices:S,selectedVoiceURI:N,setSelectedVoiceURI:T,activeChunkIndex:F,jumpToChunk:O,handleRead:G,saveMemo:K,handleLogout:te,handleChangeVersionStart:H,handleRestart:ce,changeSubgroup:Me,changeStartDate:he,dateToOffset:$,showConfetti:q,levelUpToast:Q,bonusToast:ae,newAchievement:D,showScoreInfo:E,setShowScoreInfo:A,showReadingGuide:V,setShowReadingGuide:R,showMemoList:W,setShowMemoList:xe,showAchievements:se,setShowAchievements:pe,showCalendar:Ue,setShowCalendar:Qt,showFullRanking:lt,setShowFullRanking:Jt,showDateSettings:xp,setShowDateSettings:Kc,showSubgroupChange:bp,setShowSubgroupChange:j1,showRestartConfirm:D1,setShowRestartConfirm:_p,showMonthlyContestInfo:A1,setShowMonthlyContestInfo:Sp,calendarDate:kp,setCalendarDate:Ip,dateSettingsDate:Np,setDateSettingsDate:Ep,rankingCommunityFilter:Tp,setRankingCommunityFilter:Cp,selectedSubgroupDetail:jp,setSelectedSubgroupDetail:Dp,getSubgroupRanking:Ap,getProgressRanking:Rp,getSubgroupDisplay:Pp,generateMemosHTML:Op,getWeeklyMVP:Lp,setView:Mp})=>{if(!t)return null;const{currentDay:Ar,score:Ks,subgroupId:So,communityName:Qc,planId:$p,streak:Wn}=t,[ko,Fp]=($p||"1year_revised").split("_"),Jc=ch.find(ue=>ue.id===ko),Vp=Jc?Jc.title:" ",Zc=bi[ko]?bi[ko].find(ue=>ue.id===Fp):null,Up=Zc?Zc.name:"",Io=l8(Ks||0),eu=()=>{const ue=e.filter(qr=>qr.uid!==t.uid&&Math.abs(qr.currentDay-Ar)<=1).length,nt=e.filter(qr=>qr.uid!==t.uid&&qr.currentDay>Ar).length,St=e.length>0?e.reduce((qr,Js)=>qr+Js.currentDay,0)/e.length:Ar,Rr=Ar<St-3,bn=new Date().getDay()===0;if(Rr&&bn&&nt>0)return`  ${nt}   !   !`;if(Wn>=7)return` ${Wn}   ! !`;if(Wn>=3)return` ${Wn} !    !`;if(ue>0)return` ${ue}   !`;const Hn=["   !","   , !","    !","    !"];return Hn[Ar%Hn.length]},Bp=Math.max(0,zN-Ar),Qs=r.map(ue=>{const St=((ue.readCount||1)-1)*365+(ue.currentDay||1);return{...ue,day:St,isMe:ue.uid===t.uid}}).sort((ue,nt)=>nt.day-ue.day),No=Qs.slice(0,20),Eo={},To=[];["senior","youth","middlehigh","elementary","kinder"].forEach(ue=>{const nt=Vn.find(bn=>bn.id===ue),St=nt?nt.name:null,Rr=Qs.find(bn=>bn.communityId===ue||St&&bn.communityName===St);Rr&&(Eo[Rr.uid]=St||(ue==="senior"?"":ue),To.push(Rr))});const Xr=Qs.find(ue=>ue.isMe);let tu=[];if(Xr){const ue=Xr.communityId,nt=Xr.communityName;tu=Qs.filter(St=>{const Rr=ue&&St.communityId===ue||nt&&St.communityName===nt;return(!ue&&!nt?!0:Rr)&&!St.isMe&&!No.find(Hn=>Hn.uid===St.uid)&&!To.find(Hn=>Hn.uid===St.uid)}).sort((St,Rr)=>Math.abs(St.day-Xr.day)-Math.abs(Rr.day-Xr.day)).slice(0,10)}const xn=[...No];To.forEach(ue=>{xn.find(nt=>nt.uid===ue.uid)||xn.push(ue)}),Xr&&!xn.find(ue=>ue.uid===Xr.uid)&&xn.push(Xr),tu.forEach(ue=>{xn.find(nt=>nt.uid===ue.uid)||xn.push(ue)});const Yp=xn.sort((ue,nt)=>ue.day-nt.day),ru=Rp(),Xp=ru.slice(0,3);return l.jsxs("div",{className:"min-h-screen bg-slate-50 overflow-hidden relative font-sans",children:[q&&l.jsx("div",{className:"fixed inset-0 z-50 flex justify-center pt-40 pointer-events-none",children:l.jsx("div",{className:"text-6xl animate-bounce",children:""})}),D&&l.jsx("div",{className:"fixed top-20 left-4 right-4 z-50 animate-bounce",children:l.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-4 rounded-2xl shadow-2xl flex items-center gap-3",children:[l.jsx("div",{className:"text-4xl",children:D.emoji}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-bold opacity-90",children:"   !"}),l.jsx("p",{className:"font-bold text-lg",children:D.title}),l.jsx("p",{className:"text-xs opacity-80",children:D.desc})]})]})}),Q&&l.jsx("div",{className:"fixed top-20 left-4 right-4 z-50 animate-bounce",children:l.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-4 rounded-2xl shadow-2xl flex items-center gap-3",children:[l.jsx("div",{className:"text-4xl",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-bold opacity-90",children:"LEVEL UP!"}),l.jsxs("p",{className:"font-bold text-lg",children:[Io.name,"  !"]})]})]})}),ae&&l.jsx("div",{className:"fixed top-32 left-1/2 -translate-x-1/2 z-50 animate-pulse",children:l.jsxs("div",{className:"bg-blue-600 text-white px-6 py-3 rounded-full shadow-2xl font-bold flex items-center gap-2",children:[l.jsx("span",{children:""}),ae]})}),l.jsx(D8,{show:E,onClose:()=>A(!1),myLevel:Io,score:Ks}),l.jsx(A8,{show:V,onClose:()=>R(!1)}),l.jsx(R8,{show:se,onClose:()=>pe(!1)}),l.jsx(P8,{show:Ue,onClose:()=>Qt(!1),calendarDate:kp,setCalendarDate:Ip,readHistory:a}),l.jsx(O8,{show:A1,onClose:()=>Sp(!1)}),l.jsx(L8,{show:D1,onClose:()=>_p(!1),onRestart:ce}),l.jsx(M8,{show:xp,onClose:()=>Kc(!1),currentUser:t,currentDay:Ar,dateSettingsDate:Np,setDateSettingsDate:Ep,dateToOffset:$,changeStartDate:he}),l.jsx($8,{show:lt,onClose:()=>Jt(!1),progressRanking:ru,allMembersForRace:r,subgroupId:So,currentUser:t,selectedSubgroupDetail:jp,setSelectedSubgroupDetail:Dp,rankingCommunityFilter:Tp,setRankingCommunityFilter:Cp}),l.jsx(F8,{show:W,onClose:()=>xe(!1),memos:n,currentDay:Ar,score:Ks,streak:Wn,currentUser:t,generateMemosHTML:Op}),l.jsx(V8,{show:bp,onClose:()=>j1(!1),currentUser:t,changeSubgroup:Me}),l.jsx(U8,{handleLogout:te,streak:Wn,score:Ks,myLevel:Io,setShowScoreInfo:A,setShowAchievements:pe,setShowDateSettings:Kc,setShowCalendar:Qt,setShowReadingGuide:R,getEncouragementMessage:eu,communityName:Qc,setShowFullRanking:Jt,topProgressGroups:Xp,subgroupId:So,planTypeName:Vp,versionName:Up,handleChangeVersionStart:H,setView:Mp}),l.jsxs("div",{className:"max-w-5xl mx-auto w-full pb-10 mt-8",children:[l.jsx(B8,{racers:Yp,departmentChampions:Eo,getSubgroupDisplay:Pp}),l.jsxs("main",{className:"px-4 space-y-6",children:[l.jsx(z8,{announcement:o}),l.jsx(Y8,{verseData:u,viewingDay:h,setViewingDay:p,currentUser:t,daysRemaining:Bp,handleChangeVersionStart:H,getEncouragementMessage:eu,fontSize:g,setFontSize:y,isSpeaking:v,isPaused:x,ttsSpeed:f,handleSpeedChange:w,handleSpeak:_,handleStop:b,availableVoices:S,selectedVoiceURI:N,setSelectedVoiceURI:T,activeChunkIndex:F,jumpToChunk:O,hasReadToday:d,handleRead:G}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx(X8,{currentMemo:i,setCurrentMemo:s,setShowMemoList:xe,saveMemo:K,viewingDay:h,currentDay:Ar,memos:n}),l.jsx(q8,{communityName:Qc,getSubgroupRanking:Ap,subgroupId:So,communityId:t?t.communityId:null})]}),l.jsx(W8,{getWeeklyMVP:Lp})]})]}),v&&l.jsx("div",{className:"fixed bottom-10 left-6 z-[100] flex items-center gap-2",children:l.jsxs("button",{onClick:m,className:`flex items-center justify-center gap-2 px-5 py-3 rounded-full shadow-2xl transition-all active:scale-95 ${x?"bg-indigo-600 shadow-indigo-200":"bg-orange-500 shadow-orange-200"} text-white`,children:[l.jsx("span",{className:"text-sm font-bold",children:x?" ":" "}),l.jsx("span",{className:"text-xl",children:x?"":""})]})}),l.jsx(H8,{kakaoLink:c})]})},K8=[{id:"wall_pastel_pink",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#FFD6E8",tags:["","",""]},{id:"wall_pastel_mint",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#D1F2EB",tags:["","",""]},{id:"wall_pastel_lavender",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#E8DAEF",tags:["","",""]},{id:"wall_pastel_peach",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#FFDAB3",tags:["","",""]},{id:"wall_pastel_sky",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#B3E0FF",tags:["","",""]},{id:"wall_pastel_lemon",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#FFF0B3",tags:["","",""]},{id:"wall_pastel_cream",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:35,rarity:"common",color:"#FFF8F0",tags:["","",""]},{id:"wall_pastel_coral",category:"wallpaper",subcategory:"pastel",name:" ",description:"   ",price:45,rarity:"common",color:"#FFB3B3",tags:["","",""]},{id:"wall_gradient_sunset",category:"wallpaper",subcategory:"pastel",name:" ",description:"   ",price:80,rarity:"rare",gradient:"linear-gradient(180deg, #FFE8D6 0%, #FFD6E8 50%, #E8D6FF 100%)",tags:["","",""]},{id:"wall_gradient_ocean",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:80,rarity:"rare",gradient:"linear-gradient(180deg, #E0F2FE 0%, #BAE6FD 50%, #7DD3FC 100%)",tags:["","",""]},{id:"wall_gradient_candy",category:"wallpaper",subcategory:"pastel",name:" ",description:"   ",price:100,rarity:"rare",gradient:"linear-gradient(135deg, #FCE7F3 0%, #DDD6FE 50%, #CFFAFE 100%)",tags:["","",""]},{id:"wall_gradient_aurora",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:150,rarity:"epic",gradient:"linear-gradient(135deg, #A7F3D0 0%, #C4B5FD 50%, #FBCFE8 100%)",tags:["","",""]},{id:"wall_gradient_rainbow",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:200,rarity:"epic",gradient:"linear-gradient(135deg, #FFB3B3 0%, #FFE0B3 20%, #FFFFB3 40%, #B3FFB3 60%, #B3E0FF 80%, #E0B3FF 100%)",tags:["","",""]},{id:"wall_gradient_dawn",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:90,rarity:"rare",gradient:"linear-gradient(180deg, #1E3A5F 0%, #7B68EE 30%, #FFB6C1 70%, #FFF0F5 100%)",tags:["","",""]},{id:"wall_pattern_dots_pink",category:"wallpaper",subcategory:"pastel",name:" ",description:"   ",price:60,rarity:"common",pattern:"polka_dots",baseColor:"#FFD6E8",patternColor:"#FF80BF",tags:["","",""]},{id:"wall_pattern_hearts",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:70,rarity:"rare",pattern:"hearts",baseColor:"#FFF0F5",patternColor:"#FFB3D9",tags:["","",""]},{id:"wall_pattern_stars",category:"wallpaper",subcategory:"pastel",name:" ",description:"   ",price:70,rarity:"rare",pattern:"stars",baseColor:"#E8DAEF",patternColor:"#FFE066",tags:["","",""]},{id:"wall_pattern_stripes_mint",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:55,rarity:"common",pattern:"stripes",baseColor:"#FFFFFF",patternColor:"#A3E4D7",tags:["","",""]},{id:"wall_pattern_checkered",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:60,rarity:"common",pattern:"checkered",baseColor:"#FFF8F0",patternColor:"#FFDAB3",tags:["","",""]},{id:"wall_pattern_clouds",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:80,rarity:"rare",pattern:"clouds",baseColor:"#B3E0FF",patternColor:"#FFFFFF",tags:["","",""]}],Q8=[{id:"wall_sky_blue",category:"wallpaper",subcategory:"nature",name:"  ",description:"     ",price:50,rarity:"common",spriteSheet:"wallpapers_nature",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_sky_sunset",category:"wallpaper",subcategory:"nature",name:"  ",description:"   ",price:80,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_sky_night",category:"wallpaper",subcategory:"nature",name:"  ",description:"   ",price:100,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_sky_rainbow",category:"wallpaper",subcategory:"nature",name:" ",description:"    ",price:120,rarity:"epic",spriteSheet:"wallpapers_nature",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_forest_spring",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:70,rarity:"common",spriteSheet:"wallpapers_nature",spriteX:0,spriteY:1,width:64,height:64,season:"spring",tags:["","",""]},{id:"wall_forest_summer",category:"wallpaper",subcategory:"nature",name:"  ",description:"   ",price:70,rarity:"common",spriteSheet:"wallpapers_nature",spriteX:1,spriteY:1,width:64,height:64,season:"summer",tags:["","",""]},{id:"wall_forest_autumn",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:80,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:2,spriteY:1,width:64,height:64,season:"autumn",tags:["","",""]},{id:"wall_forest_winter",category:"wallpaper",subcategory:"nature",name:"  ",description:"    ",price:80,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:3,spriteY:1,width:64,height:64,season:"winter",tags:["","",""]},{id:"wall_ocean_calm",category:"wallpaper",subcategory:"nature",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"wallpapers_nature",spriteX:0,spriteY:2,width:64,height:64,tags:["","",""]},{id:"wall_ocean_beach",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:90,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:1,spriteY:2,width:64,height:64,tags:["","",""]},{id:"wall_ocean_deep",category:"wallpaper",subcategory:"nature",name:" ",description:"  ",price:120,rarity:"epic",spriteSheet:"wallpapers_nature",spriteX:2,spriteY:2,width:64,height:64,tags:["","",""]},{id:"wall_ocean_coral",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:100,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:3,spriteY:2,width:64,height:64,tags:["","",""]},{id:"wall_garden_rose",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:90,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:0,spriteY:3,width:64,height:64,tags:["","",""]},{id:"wall_garden_cherry",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:100,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:1,spriteY:3,width:64,height:64,season:"spring",tags:["","",""]},{id:"wall_garden_sunflower",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:80,rarity:"common",spriteSheet:"wallpapers_nature",spriteX:2,spriteY:3,width:64,height:64,season:"summer",tags:["","",""]}],J8=[{id:"wall_modern_white",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:30,rarity:"common",color:"#FFFFFF",isDefault:!0,tags:["","",""]},{id:"wall_modern_gray_light",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:40,rarity:"common",color:"#F1F5F9",tags:["","",""]},{id:"wall_modern_gray_mid",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:45,rarity:"common",color:"#CBD5E1",tags:["","",""]},{id:"wall_modern_black",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:60,rarity:"rare",color:"#1E293B",tags:["","",""]},{id:"wall_modern_concrete",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"wallpapers_modern",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_modern_marble",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:150,rarity:"epic",spriteSheet:"wallpapers_modern",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_modern_plaster",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"wallpapers_modern",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_modern_geometric",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:80,rarity:"rare",spriteSheet:"wallpapers_modern",spriteX:0,spriteY:1,width:64,height:64,tags:["","",""]},{id:"wall_modern_hexagon",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:90,rarity:"rare",spriteSheet:"wallpapers_modern",spriteX:1,spriteY:1,width:64,height:64,tags:["","",""]},{id:"wall_modern_lines",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:55,rarity:"common",spriteSheet:"wallpapers_modern",spriteX:2,spriteY:1,width:64,height:64,tags:["","",""]}],Z8=[{id:"wall_vintage_brick_red",category:"wallpaper",subcategory:"vintage",name:" ",description:"   ",price:70,rarity:"common",spriteSheet:"wallpapers_vintage",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_vintage_brick_white",category:"wallpaper",subcategory:"vintage",name:" ",description:"  ",price:65,rarity:"common",spriteSheet:"wallpapers_vintage",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_vintage_wood_dark",category:"wallpaper",subcategory:"vintage",name:"  ",description:"   ",price:80,rarity:"rare",spriteSheet:"wallpapers_vintage",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_vintage_floral",category:"wallpaper",subcategory:"vintage",name:" ",description:"  ",price:90,rarity:"rare",spriteSheet:"wallpapers_vintage",spriteX:0,spriteY:1,width:64,height:64,tags:["","",""]},{id:"wall_vintage_damask",category:"wallpaper",subcategory:"vintage",name:" ",description:"  ",price:100,rarity:"rare",spriteSheet:"wallpapers_vintage",spriteX:1,spriteY:1,width:64,height:64,tags:["","",""]}],XN=[...K8,...Q8,...J8,...Z8],eM=[{id:"floor_wood_oak_light",category:"floor",subcategory:"wood",name:" ",description:"   ",price:50,rarity:"common",spriteSheet:"floors_wood",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_wood_maple",category:"floor",subcategory:"wood",name:" ",description:"  ",price:55,rarity:"common",spriteSheet:"floors_wood",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_wood_ash",category:"floor",subcategory:"wood",name:" ",description:" ",price:60,rarity:"common",spriteSheet:"floors_wood",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_wood_birch",category:"floor",subcategory:"wood",name:" ",description:"  ",price:50,rarity:"common",spriteSheet:"floors_wood",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_wood_pine",category:"floor",subcategory:"wood",name:" ",description:"  ",price:45,rarity:"common",spriteSheet:"floors_wood",spriteX:4,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_wood_oak_medium",category:"floor",subcategory:"wood",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"floors_wood",spriteX:0,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_wood_cherry",category:"floor",subcategory:"wood",name:" ",description:"  ",price:70,rarity:"rare",spriteSheet:"floors_wood",spriteX:1,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_wood_teak",category:"floor",subcategory:"wood",name:" ",description:"  ",price:80,rarity:"rare",spriteSheet:"floors_wood",spriteX:2,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_wood_herringbone",category:"floor",subcategory:"wood",name:" ",description:"  ",price:100,rarity:"rare",spriteSheet:"floors_wood",spriteX:3,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_wood_parquet",category:"floor",subcategory:"wood",name:" ",description:"  ",price:90,rarity:"rare",spriteSheet:"floors_wood",spriteX:4,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_wood_walnut",category:"floor",subcategory:"wood",name:" ",description:" ",price:80,rarity:"rare",spriteSheet:"floors_wood",spriteX:0,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_wood_mahogany",category:"floor",subcategory:"wood",name:" ",description:"  ",price:100,rarity:"epic",spriteSheet:"floors_wood",spriteX:1,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_wood_ebony",category:"floor",subcategory:"wood",name:" ",description:"  ",price:120,rarity:"epic",spriteSheet:"floors_wood",spriteX:2,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_wood_weathered",category:"floor",subcategory:"wood",name:" ",description:"   ",price:70,rarity:"common",spriteSheet:"floors_wood",spriteX:3,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_wood_rustic",category:"floor",subcategory:"wood",name:" ",description:"  ",price:75,rarity:"rare",spriteSheet:"floors_wood",spriteX:4,spriteY:2,width:64,height:64,tags:["","",""]}],tM=[{id:"floor_tile_white",category:"floor",subcategory:"tile",name:"  ",description:"  ",price:50,rarity:"common",color:"#FFFFFF",isDefault:!0,tags:["","",""]},{id:"floor_tile_gray",category:"floor",subcategory:"tile",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"floors_tile",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_tile_black",category:"floor",subcategory:"tile",name:" ",description:"  ",price:70,rarity:"rare",spriteSheet:"floors_tile",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_tile_large_format",category:"floor",subcategory:"tile",name:"  ",description:"  ",price:80,rarity:"rare",spriteSheet:"floors_tile",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_tile_concrete",category:"floor",subcategory:"tile",name:" ",description:"  ",price:65,rarity:"common",spriteSheet:"floors_tile",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_tile_checker_bw",category:"floor",subcategory:"tile",name:" B/W",description:"  ",price:70,rarity:"rare",spriteSheet:"floors_tile",spriteX:0,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_tile_checker_pink",category:"floor",subcategory:"tile",name:" ",description:" &  ",price:75,rarity:"rare",spriteSheet:"floors_tile",spriteX:1,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_tile_hexagon",category:"floor",subcategory:"tile",name:" ",description:"  ",price:90,rarity:"rare",spriteSheet:"floors_tile",spriteX:2,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_tile_moroccan",category:"floor",subcategory:"tile",name:" ",description:"  ",price:100,rarity:"epic",spriteSheet:"floors_tile",spriteX:3,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_tile_subway",category:"floor",subcategory:"tile",name:" ",description:"  ",price:55,rarity:"common",spriteSheet:"floors_tile",spriteX:4,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_tile_marble_white",category:"floor",subcategory:"tile",name:" ",description:"  ",price:150,rarity:"epic",spriteSheet:"floors_tile",spriteX:0,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_tile_marble_gray",category:"floor",subcategory:"tile",name:" ",description:"  ",price:140,rarity:"epic",spriteSheet:"floors_tile",spriteX:1,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_tile_marble_pink",category:"floor",subcategory:"tile",name:" ",description:"  ",price:180,rarity:"legendary",spriteSheet:"floors_tile",spriteX:2,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_tile_marble_black",category:"floor",subcategory:"tile",name:" ",description:"  ",price:160,rarity:"epic",spriteSheet:"floors_tile",spriteX:3,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_tile_terrazzo",category:"floor",subcategory:"tile",name:"",description:"  ",price:120,rarity:"rare",spriteSheet:"floors_tile",spriteX:4,spriteY:2,width:64,height:64,tags:["","",""]}],rM=[{id:"floor_carpet_cream",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:80,rarity:"common",color:"#FFF8F0",tags:["","",""]},{id:"floor_carpet_pink",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:90,rarity:"rare",color:"#FFD6E8",tags:["","",""]},{id:"floor_carpet_gray",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:85,rarity:"common",color:"#CBD5E1",tags:["","",""]},{id:"floor_carpet_navy",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:100,rarity:"rare",color:"#1E3A5F",tags:["","",""]},{id:"floor_rug_persian",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:150,rarity:"epic",spriteSheet:"floors_carpet",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_rug_bohemian",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"floors_carpet",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_rug_nordic",category:"floor",subcategory:"carpet",name:" ",description:"   ",price:100,rarity:"rare",spriteSheet:"floors_carpet",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_rug_kilim",category:"floor",subcategory:"carpet",name:" ",description:"   ",price:130,rarity:"epic",spriteSheet:"floors_carpet",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_rug_fur_white",category:"floor",subcategory:"carpet",name:"  ",description:"  ",price:180,rarity:"legendary",spriteSheet:"floors_carpet",spriteX:0,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_rug_round_shag",category:"floor",subcategory:"carpet",name:"  ",description:"  ",price:110,rarity:"rare",spriteSheet:"floors_carpet",spriteX:1,spriteY:1,width:64,height:64,tags:["","",""]}],nM=[{id:"floor_grass_meadow",category:"floor",subcategory:"special",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"floors_special",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_grass_flower",category:"floor",subcategory:"special",name:"",description:"  ",price:90,rarity:"rare",spriteSheet:"floors_special",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_sand_beach",category:"floor",subcategory:"special",name:" ",description:"  ",price:80,rarity:"rare",spriteSheet:"floors_special",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_stone_path",category:"floor",subcategory:"special",name:" ",description:"  ",price:75,rarity:"common",spriteSheet:"floors_special",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_water_shallow",category:"floor",subcategory:"special",name:" ",description:"  ",price:100,rarity:"epic",spriteSheet:"floors_special",spriteX:4,spriteY:0,width:64,height:64,animation:"water_ripple",tags:["","",""]},{id:"floor_cloud_fluffy",category:"floor",subcategory:"special",name:" ",description:"  ",price:150,rarity:"legendary",spriteSheet:"floors_special",spriteX:0,spriteY:1,width:64,height:64,animation:"float_slow",tags:["","",""]},{id:"floor_star_galaxy",category:"floor",subcategory:"special",name:" ",description:"  ",price:200,rarity:"legendary",spriteSheet:"floors_special",spriteX:1,spriteY:1,width:64,height:64,animation:"sparkle",tags:["","",""]},{id:"floor_rainbow_path",category:"floor",subcategory:"special",name:" ",description:"  ",price:120,rarity:"epic",spriteSheet:"floors_special",spriteX:2,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_snow_fresh",category:"floor",subcategory:"special",name:" ",description:"   ",price:80,rarity:"rare",spriteSheet:"floors_special",spriteX:3,spriteY:1,width:64,height:64,season:"winter",tags:["","",""]},{id:"floor_tatami",category:"floor",subcategory:"special",name:"",description:"   ",price:90,rarity:"rare",spriteSheet:"floors_special",spriteX:4,spriteY:1,width:64,height:64,tags:["","",""]}],qN=[...eM,...tM,...rM,...nM],iM=[{id:"bed_single_white",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"common",spriteSheet:"furniture_beds",spriteX:0,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_wood",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"common",spriteSheet:"furniture_beds",spriteX:1,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_pink",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:2,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_blue",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:30,rarity:"common",spriteSheet:"furniture_beds",spriteX:3,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_modern",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:30,rarity:"common",spriteSheet:"furniture_beds",spriteX:4,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_vintage",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:5,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_kids_car",category:"furniture",subcategory:"beds",name:" ",description:"   ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:6,spriteY:0,width:80,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_kids_castle",category:"furniture",subcategory:"beds",name:"  ",description:"    ",price:30,rarity:"epic",spriteSheet:"furniture_beds",spriteX:7,spriteY:0,width:80,height:96,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_double_white",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"common",spriteSheet:"furniture_beds",spriteX:0,spriteY:1,width:80,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_double_wood",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:1,spriteY:1,width:80,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_queen_modern",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:2,spriteY:1,width:96,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_queen_leather",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"epic",spriteSheet:"furniture_beds",spriteX:3,spriteY:1,width:96,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_king_luxury",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"legendary",spriteSheet:"furniture_beds",spriteX:4,spriteY:1,width:112,height:96,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_platform_low",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:5,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_storage",category:"furniture",subcategory:"beds",name:" ",description:"   ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:6,spriteY:1,width:80,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_adjustable",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"epic",spriteSheet:"furniture_beds",spriteX:7,spriteY:1,width:80,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_canopy_white",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"epic",spriteSheet:"furniture_beds",spriteX:0,spriteY:2,width:80,height:112,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_canopy_pink",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"epic",spriteSheet:"furniture_beds",spriteX:1,spriteY:2,width:80,height:112,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_canopy_gold",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"legendary",spriteSheet:"furniture_beds",spriteX:2,spriteY:2,width:80,height:112,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_bunk_wood",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:3,spriteY:2,width:64,height:112,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_loft_study",category:"furniture",subcategory:"beds",name:" +  ",description:" ,   ",price:30,rarity:"epic",spriteSheet:"furniture_beds",spriteX:4,spriteY:2,width:80,height:128,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_japanese_futon",category:"furniture",subcategory:"beds",name:" ",description:"  ",price:30,rarity:"common",spriteSheet:"furniture_beds",spriteX:5,spriteY:2,width:64,height:32,placeable:!0,layer:"floor",tags:["","",""]},{id:"bed_korean_yo",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"common",spriteSheet:"furniture_beds",spriteX:6,spriteY:2,width:64,height:32,placeable:!0,layer:"floor",tags:["","",""]},{id:"bed_hammock",category:"furniture",subcategory:"beds",name:"",description:"  ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:7,spriteY:2,width:80,height:48,placeable:!0,layer:"furniture",animation:"swing",tags:["","",""]},{id:"bed_crib_white",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:30,rarity:"common",spriteSheet:"furniture_beds",spriteX:0,spriteY:3,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_crib_pink",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:1,spriteY:3,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_crib_blue",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:2,spriteY:3,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_crib_canopy",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"epic",spriteSheet:"furniture_beds",spriteX:3,spriteY:3,width:48,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_toddler_train",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:30,rarity:"rare",spriteSheet:"furniture_beds",spriteX:4,spriteY:3,width:64,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_cradle",category:"furniture",subcategory:"beds",name:" ",description:"  ",price:30,rarity:"common",spriteSheet:"furniture_beds",spriteX:5,spriteY:3,width:48,height:48,placeable:!0,layer:"furniture",animation:"rock",tags:["","",""]}],sM=[{id:"sofa_single_white",category:"furniture",subcategory:"sofas",name:"  1",description:"  1 ",price:100,rarity:"common",spriteSheet:"furniture_sofas",spriteX:0,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","1",""]},{id:"sofa_single_gray",category:"furniture",subcategory:"sofas",name:"  1",description:"  1 ",price:110,rarity:"common",spriteSheet:"furniture_sofas",spriteX:1,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","1",""]},{id:"sofa_single_pink",category:"furniture",subcategory:"sofas",name:"  1",description:"  1 ",price:130,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:2,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","1",""]},{id:"sofa_single_yellow",category:"furniture",subcategory:"sofas",name:"  1",description:"  1 ",price:120,rarity:"common",spriteSheet:"furniture_sofas",spriteX:3,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","1",""]},{id:"sofa_armchair_leather",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:200,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:4,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_egg_chair",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:300,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:5,spriteY:0,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_beanbag_large",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_sofas",spriteX:6,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_rocking_chair",category:"furniture",subcategory:"sofas",name:"",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:7,spriteY:0,width:48,height:64,placeable:!0,layer:"furniture",animation:"rock",tags:["","",""]},{id:"sofa_2seat_white",category:"furniture",subcategory:"sofas",name:"  2",description:"  2 ",price:180,rarity:"common",spriteSheet:"furniture_sofas",spriteX:0,spriteY:1,width:64,height:48,placeable:!0,layer:"furniture",tags:["","2",""]},{id:"sofa_2seat_fabric",category:"furniture",subcategory:"sofas",name:" 2 ",description:"  ",price:200,rarity:"common",spriteSheet:"furniture_sofas",spriteX:1,spriteY:1,width:64,height:48,placeable:!0,layer:"furniture",tags:["","2",""]},{id:"sofa_3seat_leather_brown",category:"furniture",subcategory:"sofas",name:"  3",description:"   ",price:350,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:2,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","3",""]},{id:"sofa_3seat_leather_black",category:"furniture",subcategory:"sofas",name:"  3",description:"   ",price:380,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:3,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","3",""]},{id:"sofa_3seat_velvet",category:"furniture",subcategory:"sofas",name:" 3 ",description:"  ",price:400,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:4,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","3",""]},{id:"sofa_scandinavian",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:280,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:5,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_chesterfield",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:450,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:6,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_tufted_pink",category:"furniture",subcategory:"sofas",name:"  ",description:"   ",price:380,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:7,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_corner_gray",category:"furniture",subcategory:"sofas",name:"  ",description:"L  ",price:500,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:0,spriteY:2,width:96,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_corner_beige",category:"furniture",subcategory:"sofas",name:"  ",description:"   ",price:480,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:1,spriteY:2,width:96,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_modular",category:"furniture",subcategory:"sofas",name:" ",description:"   ",price:600,rarity:"legendary",spriteSheet:"furniture_sofas",spriteX:2,spriteY:2,width:96,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_daybed",category:"furniture",subcategory:"sofas",name:"",description:"  ",price:350,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:3,spriteY:2,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_bed_foldable",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:400,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:4,spriteY:2,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_futon",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:200,rarity:"common",spriteSheet:"furniture_sofas",spriteX:5,spriteY:2,width:64,height:32,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_kids_rainbow",category:"furniture",subcategory:"sofas",name:"  ",description:"   ",price:180,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:6,spriteY:2,width:64,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_outdoor_rattan",category:"furniture",subcategory:"sofas",name:"  ",description:"  ",price:280,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:7,spriteY:2,width:64,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_loveseat",category:"furniture",subcategory:"sofas",name:"",description:"    ",price:220,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:0,spriteY:3,width:56,height:48,placeable:!0,layer:"furniture",tags:["","",""]}],aM=[{id:"table_dining_wood_4",category:"furniture",subcategory:"tables",name:" 4 ",description:"  4 ",price:200,rarity:"common",spriteSheet:"furniture_tables",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"table_dining_wood_6",category:"furniture",subcategory:"tables",name:" 6 ",description:" 6 ",price:280,rarity:"rare",spriteSheet:"furniture_tables",spriteX:1,spriteY:0,width:80,height:64,tags:["","",""]},{id:"table_dining_glass_round",category:"furniture",subcategory:"tables",name:"  ",description:"   ",price:250,rarity:"rare",spriteSheet:"furniture_tables",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"table_dining_marble",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:400,rarity:"epic",spriteSheet:"furniture_tables",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"table_dining_folding",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:150,rarity:"common",spriteSheet:"furniture_tables",spriteX:4,spriteY:0,width:48,height:48,tags:["","",""]},{id:"table_dining_extendable",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:350,rarity:"epic",spriteSheet:"furniture_tables",spriteX:5,spriteY:0,width:80,height:64,tags:["","",""]},{id:"table_dining_industrial",category:"furniture",subcategory:"tables",name:" ",description:"+ ",price:300,rarity:"rare",spriteSheet:"furniture_tables",spriteX:6,spriteY:0,width:64,height:64,tags:["","",""]},{id:"table_dining_rustic",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:280,rarity:"rare",spriteSheet:"furniture_tables",spriteX:7,spriteY:0,width:80,height:64,tags:["","",""]},{id:"desk_study_simple",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_tables",spriteX:0,spriteY:1,width:64,height:48,tags:["","",""]},{id:"desk_study_drawer",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:150,rarity:"common",spriteSheet:"furniture_tables",spriteX:1,spriteY:1,width:64,height:48,tags:["","",""]},{id:"desk_computer_gaming",category:"furniture",subcategory:"tables",name:" ",description:"RGB  ",price:300,rarity:"epic",spriteSheet:"furniture_tables",spriteX:2,spriteY:1,width:80,height:48,animation:"glow_pulse",tags:["","","RGB"]},{id:"desk_computer_l_shape",category:"furniture",subcategory:"tables",name:"L  ",description:"  ",price:250,rarity:"rare",spriteSheet:"furniture_tables",spriteX:3,spriteY:1,width:80,height:64,tags:["","L",""]},{id:"desk_standing",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:350,rarity:"epic",spriteSheet:"furniture_tables",spriteX:4,spriteY:1,width:64,height:48,tags:["","",""]},{id:"desk_secretary",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:280,rarity:"rare",spriteSheet:"furniture_tables",spriteX:5,spriteY:1,width:48,height:64,tags:["","",""]},{id:"desk_executive",category:"furniture",subcategory:"tables",name:"  ",description:"   ",price:500,rarity:"legendary",spriteSheet:"furniture_tables",spriteX:6,spriteY:1,width:96,height:64,tags:["","",""]},{id:"desk_kids_pink",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:120,rarity:"common",spriteSheet:"furniture_tables",spriteX:7,spriteY:1,width:48,height:48,tags:["","",""]},{id:"desk_kids_blue",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:120,rarity:"common",spriteSheet:"furniture_tables",spriteX:0,spriteY:2,width:48,height:48,tags:["","",""]},{id:"desk_vanity",category:"furniture",subcategory:"tables",name:"",description:"  ",price:200,rarity:"rare",spriteSheet:"furniture_tables",spriteX:1,spriteY:2,width:64,height:64,tags:["","",""]},{id:"table_coffee_wood",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_tables",spriteX:2,spriteY:2,width:48,height:32,tags:["","",""]},{id:"table_coffee_glass",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_tables",spriteX:3,spriteY:2,width:48,height:32,tags:["","",""]},{id:"table_coffee_marble",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:250,rarity:"epic",spriteSheet:"furniture_tables",spriteX:4,spriteY:2,width:48,height:32,tags:["","",""]},{id:"table_side_round",category:"furniture",subcategory:"tables",name:" ",description:"   ",price:60,rarity:"common",spriteSheet:"furniture_tables",spriteX:5,spriteY:2,width:32,height:32,tags:["","",""]},{id:"table_side_drawer",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_tables",spriteX:6,spriteY:2,width:32,height:48,tags:["","",""]},{id:"table_nesting",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:180,rarity:"rare",spriteSheet:"furniture_tables",spriteX:7,spriteY:2,width:48,height:32,tags:["","",""]},{id:"table_console",category:"furniture",subcategory:"tables",name:" ",description:"/ ",price:150,rarity:"common",spriteSheet:"furniture_tables",spriteX:0,spriteY:3,width:64,height:32,tags:["","",""]},{id:"table_end_c_shape",category:"furniture",subcategory:"tables",name:"C ",description:"  C ",price:90,rarity:"common",spriteSheet:"furniture_tables",spriteX:1,spriteY:3,width:32,height:48,tags:["","C",""]},{id:"table_tray",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"furniture_tables",spriteX:2,spriteY:3,width:32,height:48,tags:["","",""]},{id:"table_ottoman",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"furniture_tables",spriteX:3,spriteY:3,width:48,height:32,tags:["","",""]},{id:"table_bar_high",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_tables",spriteX:4,spriteY:3,width:48,height:64,tags:["","",""]},{id:"table_picnic",category:"furniture",subcategory:"tables",name:" ",description:" ",price:120,rarity:"common",spriteSheet:"furniture_tables",spriteX:5,spriteY:3,width:64,height:48,tags:["","",""]},{id:"table_kotatsu",category:"furniture",subcategory:"tables",name:"",description:"  ",price:180,rarity:"rare",spriteSheet:"furniture_tables",spriteX:6,spriteY:3,width:48,height:32,tags:["","",""]},{id:"table_korean_low",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_tables",spriteX:7,spriteY:3,width:48,height:32,tags:["","",""]},{id:"table_pool",category:"furniture",subcategory:"tables",name:"",description:"  ",price:400,rarity:"epic",spriteSheet:"furniture_tables",spriteX:0,spriteY:4,width:80,height:48,tags:["","",""]},{id:"table_foosball",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:250,rarity:"rare",spriteSheet:"furniture_tables",spriteX:1,spriteY:4,width:64,height:48,tags:["","",""]},{id:"table_air_hockey",category:"furniture",subcategory:"tables",name:" ",description:" ",price:300,rarity:"epic",spriteSheet:"furniture_tables",spriteX:2,spriteY:4,width:64,height:48,tags:["","",""]}],oM=[{id:"chair_dining_wood",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:50,rarity:"common",spriteSheet:"furniture_chairs",spriteX:0,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_dining_white",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:55,rarity:"common",spriteSheet:"furniture_chairs",spriteX:1,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_dining_upholstered",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_chairs",spriteX:2,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_dining_eames",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:3,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_dining_wishbone",category:"furniture",subcategory:"chairs",name:" ",description:" ",price:180,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:4,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_dining_thonet",category:"furniture",subcategory:"chairs",name:" ",description:" ",price:120,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:5,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_bar_stool",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"furniture_chairs",spriteX:6,spriteY:0,width:32,height:64,tags:["","",""]},{id:"chair_counter_stool",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:65,rarity:"common",spriteSheet:"furniture_chairs",spriteX:7,spriteY:0,width:32,height:56,tags:["","",""]},{id:"chair_office_basic",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_chairs",spriteX:0,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_office_mesh",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:120,rarity:"common",spriteSheet:"furniture_chairs",spriteX:1,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_office_ergonomic",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:300,rarity:"epic",spriteSheet:"furniture_chairs",spriteX:2,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_office_executive",category:"furniture",subcategory:"chairs",name:"  ",description:"   ",price:400,rarity:"epic",spriteSheet:"furniture_chairs",spriteX:3,spriteY:1,width:48,height:64,tags:["","",""]},{id:"chair_gaming",category:"furniture",subcategory:"chairs",name:" ",description:"RGB  ",price:350,rarity:"epic",spriteSheet:"furniture_chairs",spriteX:4,spriteY:1,width:48,height:64,animation:"glow_pulse",tags:["","","RGB"]},{id:"chair_study_kids",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_chairs",spriteX:5,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_kneeling",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:6,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_balance_ball",category:"furniture",subcategory:"chairs",name:"  ",description:" ",price:80,rarity:"common",spriteSheet:"furniture_chairs",spriteX:7,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_folding",category:"furniture",subcategory:"chairs",name:" ",description:" ",price:30,rarity:"common",spriteSheet:"furniture_chairs",spriteX:0,spriteY:2,width:32,height:48,tags:["","",""]},{id:"chair_stacking",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:40,rarity:"common",spriteSheet:"furniture_chairs",spriteX:1,spriteY:2,width:32,height:48,tags:["","",""]},{id:"chair_swing_indoor",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:250,rarity:"epic",spriteSheet:"furniture_chairs",spriteX:2,spriteY:2,width:48,height:80,animation:"swing",tags:["","",""]},{id:"chair_papasan",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:180,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:3,spriteY:2,width:48,height:48,tags:["","",""]},{id:"chair_butterfly",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:4,spriteY:2,width:48,height:48,tags:["","",""]},{id:"chair_adirondack",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:120,rarity:"common",spriteSheet:"furniture_chairs",spriteX:5,spriteY:2,width:48,height:48,tags:["","",""]},{id:"chair_director",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_chairs",spriteX:6,spriteY:2,width:32,height:48,tags:["","",""]},{id:"chair_throne",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:500,rarity:"legendary",spriteSheet:"furniture_chairs",spriteX:7,spriteY:2,width:48,height:80,tags:["","",""]},{id:"cushion_floor",category:"furniture",subcategory:"chairs",name:"",description:" ",price:20,rarity:"common",spriteSheet:"furniture_chairs",spriteX:0,spriteY:3,width:32,height:16,tags:["","",""]}],lM=[{id:"wardrobe_white_2door",category:"furniture",subcategory:"storage",name:" 2 ",description:" 2 ",price:200,rarity:"common",spriteSheet:"furniture_storage",spriteX:0,spriteY:0,width:64,height:96,tags:["","",""]},{id:"wardrobe_wood_3door",category:"furniture",subcategory:"storage",name:" 3 ",description:" 3 ",price:350,rarity:"rare",spriteSheet:"furniture_storage",spriteX:1,spriteY:0,width:80,height:96,tags:["","",""]},{id:"wardrobe_sliding",category:"furniture",subcategory:"storage",name:" ",description:" ",price:400,rarity:"epic",spriteSheet:"furniture_storage",spriteX:2,spriteY:0,width:96,height:96,tags:["","",""]},{id:"wardrobe_open",category:"furniture",subcategory:"storage",name:" ",description:"   ",price:180,rarity:"common",spriteSheet:"furniture_storage",spriteX:3,spriteY:0,width:64,height:96,tags:["","",""]},{id:"dresser_3drawer",category:"furniture",subcategory:"storage",name:"3 ",description:" 3 ",price:120,rarity:"common",spriteSheet:"furniture_storage",spriteX:4,spriteY:0,width:48,height:48,tags:["","","3"]},{id:"dresser_6drawer",category:"furniture",subcategory:"storage",name:"6 ",description:" 6 ",price:200,rarity:"rare",spriteSheet:"furniture_storage",spriteX:5,spriteY:0,width:64,height:64,tags:["","","6"]},{id:"dresser_tall",category:"furniture",subcategory:"storage",name:" ",description:" ",price:250,rarity:"rare",spriteSheet:"furniture_storage",spriteX:6,spriteY:0,width:48,height:80,tags:["","",""]},{id:"dresser_pink_kids",category:"furniture",subcategory:"storage",name:"  ",description:"  ",price:150,rarity:"common",spriteSheet:"furniture_storage",spriteX:7,spriteY:0,width:48,height:48,tags:["","",""]},{id:"armoire_antique",category:"furniture",subcategory:"storage",name:" ",description:" ",price:400,rarity:"epic",spriteSheet:"furniture_storage",spriteX:0,spriteY:1,width:64,height:96,tags:["","",""]},{id:"closet_system",category:"furniture",subcategory:"storage",name:" ",description:" ",price:500,rarity:"legendary",spriteSheet:"furniture_storage",spriteX:1,spriteY:1,width:96,height:96,tags:["","",""]},{id:"bookshelf_small",category:"furniture",subcategory:"storage",name:" ",description:" 3 ",price:80,rarity:"common",spriteSheet:"furniture_storage",spriteX:2,spriteY:1,width:48,height:64,tags:["","",""]},{id:"bookshelf_large",category:"furniture",subcategory:"storage",name:" ",description:" 5 ",price:180,rarity:"common",spriteSheet:"furniture_storage",spriteX:3,spriteY:1,width:64,height:96,tags:["","",""]},{id:"bookshelf_wall",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:350,rarity:"epic",spriteSheet:"furniture_storage",spriteX:4,spriteY:1,width:96,height:96,tags:["","",""]},{id:"bookshelf_ladder",category:"furniture",subcategory:"storage",name:" ",description:" ",price:120,rarity:"rare",spriteSheet:"furniture_storage",spriteX:5,spriteY:1,width:48,height:80,tags:["","",""]},{id:"bookshelf_cube",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_storage",spriteX:6,spriteY:1,width:64,height:64,tags:["","",""]},{id:"shelf_floating",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:40,rarity:"common",spriteSheet:"furniture_storage",spriteX:7,spriteY:1,width:48,height:16,tags:["","",""]},{id:"shelf_corner",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"furniture_storage",spriteX:0,spriteY:2,width:32,height:64,tags:["","",""]},{id:"rack_magazine",category:"furniture",subcategory:"storage",name:" ",description:" ",price:50,rarity:"common",spriteSheet:"furniture_storage",spriteX:1,spriteY:2,width:32,height:48,tags:["","",""]},{id:"bookend_pair",category:"furniture",subcategory:"storage",name:"",description:"  ",price:25,rarity:"common",spriteSheet:"furniture_storage",spriteX:2,spriteY:2,width:24,height:24,tags:["","",""]},{id:"display_cabinet",category:"furniture",subcategory:"storage",name:" ",description:" ",price:280,rarity:"epic",spriteSheet:"furniture_storage",spriteX:3,spriteY:2,width:64,height:80,tags:["","",""]},{id:"basket_woven",category:"furniture",subcategory:"storage",name:" ",description:" ",price:30,rarity:"common",spriteSheet:"furniture_storage",spriteX:4,spriteY:2,width:32,height:32,tags:["","",""]},{id:"box_storage",category:"furniture",subcategory:"storage",name:" ",description:" ",price:20,rarity:"common",spriteSheet:"furniture_storage",spriteX:5,spriteY:2,width:32,height:24,tags:["","",""]},{id:"trunk_vintage",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_storage",spriteX:6,spriteY:2,width:48,height:32,tags:["","",""]},{id:"shoe_rack",category:"furniture",subcategory:"storage",name:"",description:" ",price:80,rarity:"common",spriteSheet:"furniture_storage",spriteX:7,spriteY:2,width:48,height:64,tags:["","",""]},{id:"coat_rack",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"furniture_storage",spriteX:0,spriteY:3,width:32,height:80,tags:["","",""]}],cM=[{id:"tv_stand",category:"furniture",subcategory:"misc",name:"TV ",description:"TV  ",price:120,rarity:"common",spriteSheet:"furniture_misc",spriteX:0,spriteY:0,width:64,height:32,tags:["","TV",""]},{id:"fireplace_electric",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:300,rarity:"epic",spriteSheet:"furniture_misc",spriteX:1,spriteY:0,width:64,height:64,animation:"flicker",tags:["","",""]},{id:"room_divider",category:"furniture",subcategory:"misc",name:"",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_misc",spriteX:2,spriteY:0,width:64,height:80,tags:["","",""]},{id:"mirror_full",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_misc",spriteX:3,spriteY:0,width:32,height:80,tags:["","",""]},{id:"mirror_round",category:"furniture",subcategory:"misc",name:"  ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_misc",spriteX:4,spriteY:0,width:48,height:48,tags:["","",""]},{id:"curtain_white",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"furniture_misc",spriteX:5,spriteY:0,width:48,height:80,tags:["","",""]},{id:"curtain_pink",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"furniture_misc",spriteX:6,spriteY:0,width:48,height:80,tags:["","",""]},{id:"blinds_venetian",category:"furniture",subcategory:"misc",name:" ",description:" ",price:90,rarity:"common",spriteSheet:"furniture_misc",spriteX:7,spriteY:0,width:48,height:64,tags:["","",""]},{id:"clock_wall",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:50,rarity:"common",spriteSheet:"furniture_misc",spriteX:0,spriteY:1,width:32,height:32,tags:["","",""]},{id:"umbrella_stand",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:40,rarity:"common",spriteSheet:"furniture_misc",spriteX:1,spriteY:1,width:24,height:48,tags:["","",""]}],WN=[...iM,...sM,...aM,...oM,...lM,...cM],HN=[{id:"light_ceiling_simple",category:"lighting",subcategory:"ceiling",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"lighting",spriteX:0,spriteY:0,width:48,height:32,tags:["","",""]},{id:"light_chandelier_crystal",category:"lighting",subcategory:"ceiling",name:" ",description:" ",price:500,rarity:"legendary",spriteSheet:"lighting",spriteX:1,spriteY:0,width:64,height:64,animation:"sparkle",tags:["","",""]},{id:"light_chandelier_modern",category:"lighting",subcategory:"ceiling",name:" ",description:" ",price:300,rarity:"epic",spriteSheet:"lighting",spriteX:2,spriteY:0,width:64,height:48,tags:["","",""]},{id:"light_pendant_single",category:"lighting",subcategory:"ceiling",name:" ",description:"1 ",price:80,rarity:"common",spriteSheet:"lighting",spriteX:3,spriteY:0,width:24,height:48,tags:["","",""]},{id:"light_pendant_cluster",category:"lighting",subcategory:"ceiling",name:" ",description:"  ",price:200,rarity:"rare",spriteSheet:"lighting",spriteX:4,spriteY:0,width:64,height:64,tags:["","",""]},{id:"light_industrial",category:"lighting",subcategory:"ceiling",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"lighting",spriteX:5,spriteY:0,width:48,height:48,tags:["","",""]},{id:"light_lantern",category:"lighting",subcategory:"ceiling",name:" ",description:" ",price:100,rarity:"common",spriteSheet:"lighting",spriteX:6,spriteY:0,width:32,height:48,tags:["","",""]},{id:"light_paper_sphere",category:"lighting",subcategory:"ceiling",name:" ",description:"  ",price:90,rarity:"rare",spriteSheet:"lighting",spriteX:7,spriteY:0,width:48,height:48,tags:["","",""]},{id:"light_track",category:"lighting",subcategory:"ceiling",name:" ",description:" ",price:150,rarity:"rare",spriteSheet:"lighting",spriteX:0,spriteY:1,width:64,height:24,tags:["","",""]},{id:"light_recessed",category:"lighting",subcategory:"ceiling",name:"",description:" ",price:40,rarity:"common",spriteSheet:"lighting",spriteX:1,spriteY:1,width:24,height:16,tags:["","",""]},{id:"lamp_table_simple",category:"lighting",subcategory:"table",name:"  ",description:" ",price:50,rarity:"common",spriteSheet:"lighting",spriteX:2,spriteY:1,width:24,height:48,tags:["","",""]},{id:"lamp_table_tiffany",category:"lighting",subcategory:"table",name:" ",description:"",price:250,rarity:"epic",spriteSheet:"lighting",spriteX:3,spriteY:1,width:32,height:48,tags:["","",""]},{id:"lamp_table_minimalist",category:"lighting",subcategory:"table",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"lighting",spriteX:4,spriteY:1,width:24,height:48,tags:["","",""]},{id:"lamp_table_ceramic",category:"lighting",subcategory:"table",name:" ",description:" ",price:100,rarity:"rare",spriteSheet:"lighting",spriteX:5,spriteY:1,width:32,height:48,tags:["","",""]},{id:"lamp_table_crystal",category:"lighting",subcategory:"table",name:"  ",description:" ",price:180,rarity:"epic",spriteSheet:"lighting",spriteX:6,spriteY:1,width:32,height:48,animation:"sparkle",tags:["","",""]},{id:"lamp_desk_adjustable",category:"lighting",subcategory:"table",name:" ",description:" ",price:70,rarity:"common",spriteSheet:"lighting",spriteX:7,spriteY:1,width:24,height:48,tags:["","",""]},{id:"lamp_desk_led",category:"lighting",subcategory:"table",name:"LED  ",description:" LED",price:100,rarity:"common",spriteSheet:"lighting",spriteX:0,spriteY:2,width:24,height:48,tags:["","LED",""]},{id:"lamp_touch_sphere",category:"lighting",subcategory:"table",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"lighting",spriteX:1,spriteY:2,width:24,height:32,tags:["","",""]},{id:"lamp_lava",category:"lighting",subcategory:"table",name:" ",description:" ",price:80,rarity:"rare",spriteSheet:"lighting",spriteX:2,spriteY:2,width:24,height:48,animation:"lava_flow",tags:["","",""]},{id:"lamp_salt",category:"lighting",subcategory:"table",name:" ",description:" ",price:70,rarity:"common",spriteSheet:"lighting",spriteX:3,spriteY:2,width:24,height:32,tags:["","",""]},{id:"lamp_floor_arc",category:"lighting",subcategory:"floor",name:"  ",description:" ",price:200,rarity:"rare",spriteSheet:"lighting",spriteX:4,spriteY:2,width:64,height:96,tags:["","",""]},{id:"lamp_floor_tripod",category:"lighting",subcategory:"floor",name:" ",description:"3 ",price:150,rarity:"rare",spriteSheet:"lighting",spriteX:5,spriteY:2,width:48,height:96,tags:["","",""]},{id:"lamp_floor_torchiere",category:"lighting",subcategory:"floor",name:"  ",description:"  ",price:120,rarity:"common",spriteSheet:"lighting",spriteX:6,spriteY:2,width:32,height:96,tags:["","",""]},{id:"lamp_floor_reading",category:"lighting",subcategory:"floor",name:" ",description:" ",price:100,rarity:"common",spriteSheet:"lighting",spriteX:7,spriteY:2,width:32,height:96,tags:["","",""]},{id:"lamp_floor_tree",category:"lighting",subcategory:"floor",name:"  ",description:"  ",price:180,rarity:"rare",spriteSheet:"lighting",spriteX:0,spriteY:3,width:48,height:96,tags:["","",""]},{id:"lamp_floor_paper",category:"lighting",subcategory:"floor",name:"  ",description:" ",price:80,rarity:"common",spriteSheet:"lighting",spriteX:1,spriteY:3,width:32,height:96,tags:["","",""]},{id:"lamp_floor_rattan",category:"lighting",subcategory:"floor",name:"  ",description:" ",price:130,rarity:"rare",spriteSheet:"lighting",spriteX:2,spriteY:3,width:48,height:80,tags:["","",""]},{id:"lamp_floor_corner",category:"lighting",subcategory:"floor",name:" ",description:" ",price:90,rarity:"common",spriteSheet:"lighting",spriteX:3,spriteY:3,width:24,height:96,tags:["","",""]},{id:"lamp_floor_kids_star",category:"lighting",subcategory:"floor",name:" ",description:" ",price:70,rarity:"common",spriteSheet:"lighting",spriteX:4,spriteY:3,width:32,height:64,tags:["","",""]},{id:"lamp_floor_kids_moon",category:"lighting",subcategory:"floor",name:" ",description:"  ",price:80,rarity:"rare",spriteSheet:"lighting",spriteX:5,spriteY:3,width:32,height:64,tags:["","",""]},{id:"light_strip_rgb",category:"lighting",subcategory:"special",name:"RGB LED ",description:" ",price:60,rarity:"common",spriteSheet:"lighting",spriteX:6,spriteY:3,width:64,height:8,animation:"rgb_cycle",tags:["","LED","RGB"]},{id:"light_neon_love",category:"lighting",subcategory:"special",name:" LOVE",description:"LOVE ",price:150,rarity:"rare",spriteSheet:"lighting",spriteX:7,spriteY:3,width:48,height:32,animation:"glow_pulse",tags:["","",""]},{id:"light_neon_heart",category:"lighting",subcategory:"special",name:" ",description:" ",price:100,rarity:"rare",spriteSheet:"lighting",spriteX:0,spriteY:4,width:32,height:32,animation:"glow_pulse",tags:["","",""]},{id:"light_neon_star",category:"lighting",subcategory:"special",name:" ",description:" ",price:100,rarity:"rare",spriteSheet:"lighting",spriteX:1,spriteY:4,width:32,height:32,animation:"glow_pulse",tags:["","",""]},{id:"light_fairy_string",category:"lighting",subcategory:"special",name:" ",description:" ",price:50,rarity:"common",spriteSheet:"lighting",spriteX:2,spriteY:4,width:64,height:32,animation:"twinkle",tags:["","",""]},{id:"light_globe_string",category:"lighting",subcategory:"special",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"lighting",spriteX:3,spriteY:4,width:64,height:32,tags:["","",""]},{id:"light_projector_star",category:"lighting",subcategory:"special",name:" ",description:" ",price:100,rarity:"rare",spriteSheet:"lighting",spriteX:4,spriteY:4,width:24,height:32,tags:["","",""]},{id:"light_projector_galaxy",category:"lighting",subcategory:"special",name:" ",description:" ",price:150,rarity:"epic",spriteSheet:"lighting",spriteX:5,spriteY:4,width:24,height:32,tags:["","",""]},{id:"candle_electric",category:"lighting",subcategory:"special",name:" ",description:"  ",price:30,rarity:"common",spriteSheet:"lighting",spriteX:6,spriteY:4,width:16,height:24,animation:"flicker",tags:["","",""]},{id:"candle_set",category:"lighting",subcategory:"special",name:" ",description:"3  ",price:50,rarity:"common",spriteSheet:"lighting",spriteX:7,spriteY:4,width:48,height:32,animation:"flicker",tags:["","",""]},{id:"light_wall_sconce",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"lighting",spriteX:0,spriteY:5,width:24,height:32,tags:["","",""]},{id:"light_wall_modern",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:90,rarity:"common",spriteSheet:"lighting",spriteX:1,spriteY:5,width:24,height:24,tags:["","",""]},{id:"light_wall_industrial",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:100,rarity:"rare",spriteSheet:"lighting",spriteX:2,spriteY:5,width:32,height:32,tags:["","",""]},{id:"light_wall_swing_arm",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"lighting",spriteX:3,spriteY:5,width:48,height:32,tags:["","",""]},{id:"light_wall_picture",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"lighting",spriteX:4,spriteY:5,width:48,height:16,tags:["","",""]},{id:"light_wall_vintage",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:130,rarity:"rare",spriteSheet:"lighting",spriteX:5,spriteY:5,width:32,height:40,tags:["","",""]},{id:"light_wall_lantern",category:"lighting",subcategory:"wall",name:" ",description:" ",price:110,rarity:"rare",spriteSheet:"lighting",spriteX:6,spriteY:5,width:24,height:48,tags:["","",""]},{id:"light_wall_crystal",category:"lighting",subcategory:"wall",name:" ",description:" ",price:200,rarity:"epic",spriteSheet:"lighting",spriteX:7,spriteY:5,width:32,height:48,animation:"sparkle",tags:["","",""]},{id:"light_mirror",category:"lighting",subcategory:"wall",name:" ",description:" ",price:100,rarity:"common",spriteSheet:"lighting",spriteX:0,spriteY:6,width:48,height:48,tags:["","",""]},{id:"light_vanity",category:"lighting",subcategory:"wall",name:" ",description:" ",price:150,rarity:"rare",spriteSheet:"lighting",spriteX:1,spriteY:6,width:64,height:16,tags:["","",""]}],GN=[{id:"plant_succulent_small",category:"living",subcategory:"plants",name:" ",description:"  ",price:30,rarity:"common",spriteSheet:"plants",spriteX:0,spriteY:0,width:24,height:32,tags:["","",""]},{id:"plant_cactus_small",category:"living",subcategory:"plants",name:" ",description:" ",price:25,rarity:"common",spriteSheet:"plants",spriteX:1,spriteY:0,width:24,height:32,tags:["","",""]},{id:"plant_pothos_small",category:"living",subcategory:"plants",name:" ",description:"  ",price:35,rarity:"common",spriteSheet:"plants",spriteX:2,spriteY:0,width:32,height:32,tags:["","",""]},{id:"plant_flower_pot_pink",category:"living",subcategory:"plants",name:" ",description:"   ",price:40,rarity:"common",spriteSheet:"plants",spriteX:3,spriteY:0,width:24,height:32,tags:["","",""]},{id:"plant_flower_pot_yellow",category:"living",subcategory:"plants",name:" ",description:"   ",price:40,rarity:"common",spriteSheet:"plants",spriteX:4,spriteY:0,width:24,height:32,tags:["","",""]},{id:"plant_aloe",category:"living",subcategory:"plants",name:"",description:"  ",price:35,rarity:"common",spriteSheet:"plants",spriteX:5,spriteY:0,width:32,height:32,tags:["","",""]},{id:"plant_airplant",category:"living",subcategory:"plants",name:"",description:"   ",price:50,rarity:"rare",spriteSheet:"plants",spriteX:6,spriteY:0,width:24,height:24,tags:["","",""]},{id:"plant_bamboo_lucky",category:"living",subcategory:"plants",name:"",description:"  ",price:45,rarity:"common",spriteSheet:"plants",spriteX:7,spriteY:0,width:24,height:48,tags:["","",""]},{id:"plant_herbs_mint",category:"living",subcategory:"plants",name:" ",description:" ",price:30,rarity:"common",spriteSheet:"plants",spriteX:0,spriteY:1,width:24,height:32,tags:["","",""]},{id:"plant_violet",category:"living",subcategory:"plants",name:" ",description:"  ",price:55,rarity:"rare",spriteSheet:"plants",spriteX:1,spriteY:1,width:32,height:32,tags:["","",""]},{id:"plant_monstera",category:"living",subcategory:"plants",name:"",description:"  ",price:100,rarity:"rare",spriteSheet:"plants",spriteX:2,spriteY:1,width:48,height:64,tags:["","",""]},{id:"plant_fiddle_leaf",category:"living",subcategory:"plants",name:"",description:"  ",price:120,rarity:"rare",spriteSheet:"plants",spriteX:3,spriteY:1,width:48,height:64,tags:["","",""]},{id:"plant_snake",category:"living",subcategory:"plants",name:" ",description:" ",price:80,rarity:"common",spriteSheet:"plants",spriteX:4,spriteY:1,width:32,height:64,tags:["","",""]},{id:"plant_peace_lily",category:"living",subcategory:"plants",name:"",description:"   ",price:90,rarity:"rare",spriteSheet:"plants",spriteX:5,spriteY:1,width:48,height:64,tags:["","",""]},{id:"plant_rubber",category:"living",subcategory:"plants",name:"",description:" ",price:85,rarity:"common",spriteSheet:"plants",spriteX:6,spriteY:1,width:48,height:64,tags:["","",""]},{id:"plant_philodendron",category:"living",subcategory:"plants",name:"",description:"  ",price:95,rarity:"rare",spriteSheet:"plants",spriteX:7,spriteY:1,width:48,height:64,tags:["","",""]},{id:"plant_pothos_hanging",category:"living",subcategory:"plants",name:" ",description:"  ",price:75,rarity:"common",spriteSheet:"plants",spriteX:0,spriteY:2,width:48,height:64,tags:["","",""]},{id:"plant_bonsai",category:"living",subcategory:"plants",name:"",description:" ",price:200,rarity:"epic",spriteSheet:"plants",spriteX:1,spriteY:2,width:48,height:48,tags:["","",""]},{id:"plant_orchid_purple",category:"living",subcategory:"plants",name:" ",description:" ",price:150,rarity:"epic",spriteSheet:"plants",spriteX:2,spriteY:2,width:32,height:64,tags:["","",""]},{id:"plant_orchid_white",category:"living",subcategory:"plants",name:" ",description:"  ",price:150,rarity:"epic",spriteSheet:"plants",spriteX:3,spriteY:2,width:32,height:64,tags:["","",""]},{id:"plant_palm_areca",category:"living",subcategory:"plants",name:" ",description:" ",price:180,rarity:"rare",spriteSheet:"plants",spriteX:4,spriteY:2,width:64,height:96,tags:["","",""]},{id:"plant_palm_kentia",category:"living",subcategory:"plants",name:" ",description:" ",price:200,rarity:"epic",spriteSheet:"plants",spriteX:5,spriteY:2,width:64,height:96,tags:["","",""]},{id:"plant_bird_of_paradise",category:"living",subcategory:"plants",name:"",description:" ",price:220,rarity:"epic",spriteSheet:"plants",spriteX:6,spriteY:2,width:64,height:96,tags:["","",""]},{id:"plant_tree_indoor",category:"living",subcategory:"plants",name:" ",description:"  ",price:250,rarity:"epic",spriteSheet:"plants",spriteX:7,spriteY:2,width:64,height:112,tags:["","",""]},{id:"plant_bamboo_tall",category:"living",subcategory:"plants",name:" ",description:" ",price:180,rarity:"rare",spriteSheet:"plants",spriteX:0,spriteY:3,width:48,height:112,tags:["","",""]},{id:"plant_money_tree",category:"living",subcategory:"plants",name:"",description:" ",price:150,rarity:"rare",spriteSheet:"plants",spriteX:1,spriteY:3,width:48,height:80,tags:["","",""]},{id:"plant_ficus_lyrata",category:"living",subcategory:"plants",name:"",description:"  ",price:160,rarity:"rare",spriteSheet:"plants",spriteX:2,spriteY:3,width:48,height:96,tags:["","",""]},{id:"plant_olive_tree",category:"living",subcategory:"plants",name:" ",description:" ",price:200,rarity:"epic",spriteSheet:"plants",spriteX:3,spriteY:3,width:48,height:96,tags:["","",""]},{id:"plant_citrus_tree",category:"living",subcategory:"plants",name:" ",description:"  ",price:180,rarity:"epic",spriteSheet:"plants",spriteX:4,spriteY:3,width:48,height:80,tags:["","",""]},{id:"plant_cherry_blossom",category:"living",subcategory:"plants",name:" ",description:" ",price:250,rarity:"legendary",spriteSheet:"plants",spriteX:5,spriteY:3,width:64,height:96,season:"spring",tags:["","",""]},{id:"plant_terrarium",category:"living",subcategory:"plants",name:"",description:"   ",price:120,rarity:"rare",spriteSheet:"plants",spriteX:6,spriteY:3,width:32,height:48,tags:["","",""]},{id:"plant_kokedama",category:"living",subcategory:"plants",name:"",description:"  ",price:80,rarity:"rare",spriteSheet:"plants",spriteX:7,spriteY:3,width:32,height:48,tags:["","",""]},{id:"plant_flower_arrangement",category:"living",subcategory:"plants",name:"",description:" ",price:100,rarity:"rare",spriteSheet:"plants",spriteX:0,spriteY:4,width:48,height:48,tags:["","",""]},{id:"plant_rose_vase",category:"living",subcategory:"plants",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"plants",spriteX:1,spriteY:4,width:24,height:48,tags:["","",""]},{id:"plant_sunflower_pot",category:"living",subcategory:"plants",name:" ",description:" ",price:80,rarity:"rare",spriteSheet:"plants",spriteX:2,spriteY:4,width:32,height:64,season:"summer",tags:["","",""]},{id:"plant_christmas_tree_small",category:"living",subcategory:"plants",name:"  ",description:"  ",price:100,rarity:"rare",spriteSheet:"plants",spriteX:3,spriteY:4,width:48,height:64,season:"christmas",tags:["","",""]},{id:"plant_poinsettia",category:"living",subcategory:"plants",name:"",description:" ",price:60,rarity:"common",spriteSheet:"plants",spriteX:4,spriteY:4,width:32,height:48,season:"christmas",tags:["","",""]},{id:"plant_tulip_pot",category:"living",subcategory:"plants",name:" ",description:" ",price:60,rarity:"common",spriteSheet:"plants",spriteX:5,spriteY:4,width:32,height:48,season:"spring",tags:["","",""]},{id:"plant_dried_flowers",category:"living",subcategory:"plants",name:"",description:"   ",price:90,rarity:"rare",spriteSheet:"plants",spriteX:6,spriteY:4,width:32,height:48,tags:["","",""]},{id:"plant_fake_plant",category:"living",subcategory:"plants",name:" ",description:"   ",price:40,rarity:"common",spriteSheet:"plants",spriteX:7,spriteY:4,width:32,height:48,tags:["","",""]}],uM=[{id:"cross_wood_simple",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:50,rarity:"common",spriteSheet:"christian_symbols",spriteX:0,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_wood_rustic",category:"christian",subcategory:"symbols",name:" ",description:"   ",price:70,rarity:"common",spriteSheet:"christian_symbols",spriteX:1,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_gold",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:200,rarity:"epic",spriteSheet:"christian_symbols",spriteX:2,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_silver",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"christian_symbols",spriteX:3,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_neon_blue",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:180,rarity:"epic",spriteSheet:"christian_symbols",spriteX:4,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",animation:"glow_pulse",tags:["","",""]},{id:"cross_stainedglass",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:250,rarity:"legendary",spriteSheet:"christian_symbols",spriteX:5,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_celtic",category:"christian",subcategory:"symbols",name:" ",description:"   ",price:120,rarity:"rare",spriteSheet:"christian_symbols",spriteX:6,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_olive_wood",category:"christian",subcategory:"symbols",name:"  ",description:"    ",price:300,rarity:"legendary",spriteSheet:"christian_symbols",spriteX:7,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"bible_closed",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:40,rarity:"common",spriteSheet:"christian_symbols",spriteX:0,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bible_open",category:"christian",subcategory:"symbols",name:" ",description:"    ",price:50,rarity:"common",spriteSheet:"christian_symbols",spriteX:1,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bible_leather_black",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:100,rarity:"rare",spriteSheet:"christian_symbols",spriteX:2,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bible_leather_brown",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:100,rarity:"rare",spriteSheet:"christian_symbols",spriteX:3,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bible_stand",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"christian_symbols",spriteX:4,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bible_antique",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:200,rarity:"epic",spriteSheet:"christian_symbols",spriteX:5,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"dove_flying",category:"christian",subcategory:"symbols",name:" ",description:"   ",price:80,rarity:"rare",spriteSheet:"christian_symbols",spriteX:0,spriteY:2,width:48,height:48,placeable:!0,layer:"foreground",animation:"float",tags:["","",""]},{id:"dove_olive",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:100,rarity:"rare",spriteSheet:"christian_symbols",spriteX:1,spriteY:2,width:48,height:48,placeable:!0,layer:"foreground",tags:["","",""]},{id:"angel_small",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"christian_symbols",spriteX:2,spriteY:2,width:48,height:48,placeable:!0,layer:"foreground",tags:["","",""]},{id:"angel_praying",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:150,rarity:"epic",spriteSheet:"christian_symbols",spriteX:3,spriteY:2,width:48,height:48,placeable:!0,layer:"foreground",tags:["","",""]},{id:"angel_statue",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:200,rarity:"epic",spriteSheet:"christian_symbols",spriteX:4,spriteY:2,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"lamb_of_god",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:180,rarity:"epic",spriteSheet:"christian_symbols",spriteX:5,spriteY:2,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]}],dM=[{id:"art_good_shepherd",category:"christian",subcategory:"art",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"christian_art",spriteX:0,spriteY:0,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_last_supper",category:"christian",subcategory:"art",name:" ",description:"  ",price:400,rarity:"legendary",spriteSheet:"christian_art",spriteX:1,spriteY:0,width:128,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_jesus_knocking",category:"christian",subcategory:"art",name:"  ",description:" ",price:200,rarity:"epic",spriteSheet:"christian_art",spriteX:2,spriteY:0,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_jesus_blessing",category:"christian",subcategory:"art",name:" ",description:"   ",price:180,rarity:"epic",spriteSheet:"christian_art",spriteX:3,spriteY:0,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_jesus_calming_storm",category:"christian",subcategory:"art",name:"   ",description:"   ",price:220,rarity:"epic",spriteSheet:"christian_art",spriteX:0,spriteY:1,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_resurrection",category:"christian",subcategory:"art",name:"",description:"  ",price:300,rarity:"legendary",spriteSheet:"christian_art",spriteX:1,spriteY:1,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_nativity",category:"christian",subcategory:"art",name:" ",description:"  ",price:250,rarity:"epic",spriteSheet:"christian_art",spriteX:2,spriteY:1,width:64,height:64,placeable:!0,layer:"decoration",season:"christmas",tags:["","",""]},{id:"art_ascension",category:"christian",subcategory:"art",name:"",description:"  ",price:280,rarity:"legendary",spriteSheet:"christian_art",spriteX:3,spriteY:1,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_creation",category:"christian",subcategory:"art",name:"",description:" ",price:500,rarity:"legendary",spriteSheet:"christian_art",spriteX:0,spriteY:2,width:128,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_noah_ark",category:"christian",subcategory:"art",name:" ",description:"  ",price:200,rarity:"epic",spriteSheet:"christian_art",spriteX:1,spriteY:2,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_david_goliath",category:"christian",subcategory:"art",name:" ",description:"  ",price:180,rarity:"epic",spriteSheet:"christian_art",spriteX:2,spriteY:2,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_moses_sea",category:"christian",subcategory:"art",name:"  ",description:"    ",price:220,rarity:"epic",spriteSheet:"christian_art",spriteX:3,spriteY:2,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_daniel_lions",category:"christian",subcategory:"art",name:"   ",description:"   ",price:200,rarity:"epic",spriteSheet:"christian_art",spriteX:0,spriteY:3,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_garden_eden",category:"christian",subcategory:"art",name:"",description:"   ",price:180,rarity:"rare",spriteSheet:"christian_art",spriteX:1,spriteY:3,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_john316",category:"christian",subcategory:"art",name:" 3:16",description:"   ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:2,spriteY:3,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_psalm23",category:"christian",subcategory:"art",name:" 23",description:"  ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:3,spriteY:3,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_joshua1_9",category:"christian",subcategory:"art",name:" 1:9",description:" ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:0,spriteY:4,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_jeremiah2911",category:"christian",subcategory:"art",name:" 29:11",description:"    ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:1,spriteY:4,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_phil413",category:"christian",subcategory:"art",name:" 4:13",description:"    ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:2,spriteY:4,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_proverbs356",category:"christian",subcategory:"art",name:" 3:5-6",description:"    ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:3,spriteY:4,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]}],hM=[{id:"pulpit_wood",category:"christian",subcategory:"worship",name:" ",description:"   ",price:200,rarity:"rare",spriteSheet:"christian_worship",spriteX:0,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"pulpit_modern",category:"christian",subcategory:"worship",name:" ",description:"  ",price:250,rarity:"rare",spriteSheet:"christian_worship",spriteX:1,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"pulpit_acrylic",category:"christian",subcategory:"worship",name:" ",description:"  ",price:300,rarity:"epic",spriteSheet:"christian_worship",spriteX:2,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"pulpit_mini",category:"christian",subcategory:"worship",name:" ",description:"  ",price:120,rarity:"common",spriteSheet:"christian_worship",spriteX:3,spriteY:0,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"organ_pipe",category:"christian",subcategory:"worship",name:" ",description:"  ",price:800,rarity:"legendary",spriteSheet:"christian_worship",spriteX:0,spriteY:1,width:128,height:96,placeable:!0,layer:"furniture",tags:["","",""]},{id:"organ_electric",category:"christian",subcategory:"worship",name:" ",description:"  ",price:300,rarity:"rare",spriteSheet:"christian_worship",spriteX:1,spriteY:1,width:64,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"piano_grand",category:"christian",subcategory:"worship",name:" ",description:"  ",price:500,rarity:"epic",spriteSheet:"christian_worship",spriteX:2,spriteY:1,width:80,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"piano_upright",category:"christian",subcategory:"worship",name:" ",description:"  ",price:300,rarity:"rare",spriteSheet:"christian_worship",spriteX:3,spriteY:1,width:64,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"guitar_acoustic",category:"christian",subcategory:"worship",name:" ",description:" ",price:150,rarity:"rare",spriteSheet:"christian_worship",spriteX:0,spriteY:2,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"cajon_drum",category:"christian",subcategory:"worship",name:"",description:"  ",price:100,rarity:"common",spriteSheet:"christian_worship",spriteX:1,spriteY:2,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"candle_altar",category:"christian",subcategory:"worship",name:" ",description:"  ",price:100,rarity:"rare",spriteSheet:"christian_worship",spriteX:2,spriteY:2,width:48,height:64,placeable:!0,layer:"decoration",animation:"flicker",tags:["","",""]},{id:"candle_prayer",category:"christian",subcategory:"worship",name:" ",description:"    ",price:40,rarity:"common",spriteSheet:"christian_worship",spriteX:3,spriteY:2,width:32,height:48,placeable:!0,layer:"decoration",animation:"flicker",tags:["","",""]},{id:"chandelier_church",category:"christian",subcategory:"worship",name:" ",description:"  ",price:400,rarity:"legendary",spriteSheet:"christian_worship",spriteX:0,spriteY:3,width:80,height:80,placeable:!0,layer:"foreground",tags:["","",""]},{id:"banner_worship",category:"christian",subcategory:"worship",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"christian_worship",spriteX:1,spriteY:3,width:32,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"pew_wood",category:"christian",subcategory:"worship",name:" ",description:"  ",price:150,rarity:"common",spriteSheet:"christian_worship",spriteX:2,spriteY:3,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"pew_cushioned",category:"christian",subcategory:"worship",name:" ",description:"   ",price:200,rarity:"rare",spriteSheet:"christian_worship",spriteX:3,spriteY:3,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"chair_prayer",category:"christian",subcategory:"worship",name:" ",description:"     ",price:120,rarity:"rare",spriteSheet:"christian_worship",spriteX:0,spriteY:4,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"baptismal_font",category:"christian",subcategory:"worship",name:"",description:"  ",price:250,rarity:"epic",spriteSheet:"christian_worship",spriteX:1,spriteY:4,width:64,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"communion_set",category:"christian",subcategory:"worship",name:" ",description:"  ",price:180,rarity:"epic",spriteSheet:"christian_worship",spriteX:2,spriteY:4,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"offering_plate",category:"christian",subcategory:"worship",name:" ",description:"  ",price:100,rarity:"common",spriteSheet:"christian_worship",spriteX:3,spriteY:4,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]}],pM=[{id:"christmas_tree",category:"christian",subcategory:"decor",name:" ",description:"  ",price:200,rarity:"rare",spriteSheet:"christian_decor",spriteX:0,spriteY:0,width:64,height:96,placeable:!0,layer:"furniture",season:"christmas",animation:"sparkle",tags:["","",""]},{id:"christmas_tree_small",category:"christian",subcategory:"decor",name:"  ",description:"  ",price:100,rarity:"common",spriteSheet:"christian_decor",spriteX:1,spriteY:0,width:48,height:64,placeable:!0,layer:"furniture",season:"christmas",tags:["","",""]},{id:"nativity_scene",category:"christian",subcategory:"decor",name:" ",description:"   ",price:250,rarity:"epic",spriteSheet:"christian_decor",spriteX:2,spriteY:0,width:80,height:64,placeable:!0,layer:"furniture",season:"christmas",tags:["","",""]},{id:"christmas_wreath",category:"christian",subcategory:"decor",name:" ",description:"    ",price:80,rarity:"common",spriteSheet:"christian_decor",spriteX:3,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",season:"christmas",tags:["","",""]},{id:"christmas_stocking",category:"christian",subcategory:"decor",name:" ",description:"  ",price:50,rarity:"common",spriteSheet:"christian_decor",spriteX:0,spriteY:1,width:32,height:48,placeable:!0,layer:"decoration",season:"christmas",tags:["","",""]},{id:"christmas_star",category:"christian",subcategory:"decor",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"christian_decor",spriteX:1,spriteY:1,width:48,height:48,placeable:!0,layer:"foreground",season:"christmas",animation:"twinkle",tags:["","",""]},{id:"wise_men",category:"christian",subcategory:"decor",name:" ",description:"  ",price:180,rarity:"epic",spriteSheet:"christian_decor",spriteX:2,spriteY:1,width:64,height:64,placeable:!0,layer:"furniture",season:"christmas",tags:["","",""]},{id:"christmas_lights",category:"christian",subcategory:"decor",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"christian_decor",spriteX:3,spriteY:1,width:64,height:32,placeable:!0,layer:"foreground",season:"christmas",animation:"blink",tags:["","",""]},{id:"easter_eggs",category:"christian",subcategory:"decor",name:"  ",description:"  ",price:80,rarity:"common",spriteSheet:"christian_decor",spriteX:0,spriteY:2,width:48,height:48,placeable:!0,layer:"furniture",season:"easter",tags:["","",""]},{id:"easter_bunny",category:"christian",subcategory:"decor",name:" ",description:"  ",price:100,rarity:"rare",spriteSheet:"christian_decor",spriteX:1,spriteY:2,width:48,height:64,placeable:!0,layer:"furniture",season:"easter",tags:["","",""]},{id:"easter_lily",category:"christian",subcategory:"decor",name:" ",description:" ",price:70,rarity:"common",spriteSheet:"christian_decor",spriteX:2,spriteY:2,width:48,height:64,placeable:!0,layer:"decoration",season:"easter",tags:["","",""]},{id:"empty_tomb",category:"christian",subcategory:"decor",name:" ",description:"   ",price:150,rarity:"epic",spriteSheet:"christian_decor",spriteX:3,spriteY:2,width:64,height:64,placeable:!0,layer:"furniture",season:"easter",tags:["","",""]},{id:"palm_branch",category:"christian",subcategory:"decor",name:" ",description:"  ",price:50,rarity:"common",spriteSheet:"christian_decor",spriteX:0,spriteY:3,width:48,height:64,placeable:!0,layer:"decoration",season:"easter",tags:["","",""]},{id:"resurrection_cross",category:"christian",subcategory:"decor",name:" ",description:"  ",price:180,rarity:"epic",spriteSheet:"christian_decor",spriteX:1,spriteY:3,width:64,height:80,placeable:!0,layer:"decoration",season:"easter",tags:["","",""]},{id:"prayer_rug",category:"christian",subcategory:"decor",name:" ",description:"   ",price:60,rarity:"common",spriteSheet:"christian_decor",spriteX:2,spriteY:3,width:48,height:32,placeable:!0,layer:"floor",tags:["","",""]},{id:"fish_symbol",category:"christian",subcategory:"decor",name:" ",description:"  ",price:40,rarity:"common",spriteSheet:"christian_decor",spriteX:3,spriteY:3,width:48,height:32,placeable:!0,layer:"decoration",tags:["","",""]},{id:"prayer_hand",category:"christian",subcategory:"decor",name:"  ",description:"  ",price:100,rarity:"rare",spriteSheet:"christian_decor",spriteX:0,spriteY:4,width:48,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"stainedglass_window",category:"christian",subcategory:"decor",name:" ",description:" ",price:300,rarity:"legendary",spriteSheet:"christian_decor",spriteX:1,spriteY:4,width:64,height:96,placeable:!0,layer:"decoration",animation:"shimmer",tags:["","",""]},{id:"christian_flag",category:"christian",subcategory:"decor",name:" ",description:"   ",price:70,rarity:"common",spriteSheet:"christian_decor",spriteX:2,spriteY:4,width:32,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"hymn_book_set",category:"christian",subcategory:"decor",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"christian_decor",spriteX:3,spriteY:4,width:48,height:32,placeable:!0,layer:"furniture",tags:["","",""]}],KN=[...uM,...dM,...hM,...pM],fM=[{id:"wall_plain_white",category:"wallpaper",name:"  ",price:0,color:"#FFFFFF",isDefault:!0},{id:"floor_plain_white",category:"floor",name:"  ",price:0,color:"#FFFFFF",isDefault:!0},{id:"wall_sky",category:"wallpaper",name:" ",price:50,spriteSheet:"wallpapers_set",spriteX:0,spriteY:0,width:64,height:64},{id:"wall_star",category:"wallpaper",name:" ",price:50,spriteSheet:"wallpapers_set",spriteX:1,spriteY:0,width:64,height:64},{id:"wall_flower",category:"wallpaper",name:" ",price:50,spriteSheet:"wallpapers_set",spriteX:2,spriteY:0,width:64,height:64},{id:"wall_brick",category:"wallpaper",name:" ",price:80,spriteSheet:"wallpapers_set",spriteX:0,spriteY:1,width:64,height:64},{id:"wall_wood",category:"wallpaper",name:" ",price:80,spriteSheet:"wallpapers_set",spriteX:1,spriteY:1,width:64,height:64},{id:"wall_night",category:"wallpaper",name:" ",price:120,spriteSheet:"wallpapers_set",spriteX:2,spriteY:1,width:64,height:64},{id:"wall_pasterl_yellow",category:"wallpaper",name:" ",price:40,icon:""},{id:"wall_mint_stripe",category:"wallpaper",name:" ",price:60,icon:""},{id:"floor_wood",category:"floor",name:" ",price:50,spriteSheet:"floors_set",spriteX:0,spriteY:0,width:64,height:64},{id:"floor_tile_pink",category:"floor",name:"  ",price:60,spriteSheet:"floors_set",spriteX:1,spriteY:0,width:64,height:64},{id:"floor_tile_blue",category:"floor",name:"  ",price:60,spriteSheet:"floors_set",spriteX:2,spriteY:0,width:64,height:64},{id:"floor_grass",category:"floor",name:" ",price:80,spriteSheet:"floors_set",spriteX:0,spriteY:1,width:64,height:64},{id:"floor_marble",category:"floor",name:" ",price:150,spriteSheet:"floors_set",spriteX:1,spriteY:1,width:64,height:64},{id:"floor_carpet_red",category:"floor",name:"  ",price:200,spriteSheet:"floors_set",spriteX:2,spriteY:1,width:64,height:64},{id:"floor_vintage_rug",category:"floor",name:"  ",price:120,icon:""}],QN=[{id:"elec_pc_set",category:"electronic",name:"  PC",price:500,icon:""},{id:"elec_tv_huge",category:"electronic",name:"65  TV",price:450,icon:""},{id:"elec_home_theater",category:"electronic",name:" ",price:600,icon:""},{id:"elec_ac_standing",category:"electronic",name:" ",price:300,icon:""},{id:"elec_laptop",category:"electronic",name:"  ",price:250,icon:""},{id:"elec_fan",category:"electronic",name:" ",price:80,icon:""},{id:"elec_robot_cleaner",category:"electronic",name:"  ",price:220,icon:""},{id:"elec_air_purifier",category:"electronic",name:"",price:180,icon:""},{id:"elec_humidifier",category:"electronic",name:" ",price:60,icon:""},{id:"elec_camera_dslr",category:"electronic",name:" DSLR",price:350,icon:""}],JN=[{id:"elec_refrigerator",category:"electronic",name:"  ",price:400,icon:""},{id:"elec_toaster",category:"electronic",name:"  ",price:40,icon:""},{id:"kitchen_stove",category:"living",name:"3  ",price:150,icon:""},{id:"kitchen_sink",category:"living",name:" ",price:200,icon:""},{id:"kitchen_dining_table",category:"furniture",name:"4  ",price:250,icon:""},{id:"kitchen_microwave",category:"electronic",name:"  ",price:120,icon:""},{id:"kitchen_blender",category:"electronic",name:" ",price:50,icon:""},{id:"kitchen_coffee_machine",category:"electronic",name:" ",price:180,icon:""},{id:"kitchen_cupboard",category:"furniture",name:"  ",price:140,icon:""},{id:"kitchen_rice_cooker",category:"electronic",name:" ",price:110,icon:""}],ZN=[{id:"amuse_carousel",category:"hobby",name:" ",price:800,icon:""},{id:"amuse_ferris_wheel",category:"hobby",name:" ",price:950,icon:""},{id:"amuse_popcorn",category:"living",name:"  ",price:120,icon:""},{id:"amuse_balloon_stand",category:"living",name:"  ",price:80,icon:""},{id:"amuse_ticket_booth",category:"furniture",name:" ",price:200,icon:""},{id:"amuse_giant_slide",category:"hobby",name:" ",price:500,icon:""},{id:"amuse_cotton_candy",category:"living",name:"  ",price:110,icon:""},{id:"amuse_clown_doll",category:"hobby",name:" ",price:150,icon:""}],eE=[{id:"hobby_piano_grand",category:"hobby",name:" ",price:800,icon:""},{id:"hobby_guitar_acoustic",category:"hobby",name:" ",price:150,icon:""},{id:"hobby_easel",category:"hobby",name:"  ",price:120,icon:""},{id:"hobby_teddy_bear_xl",category:"hobby",name:"  ",price:200,icon:""},{id:"hobby_globe",category:"hobby",name:" ",price:90,icon:""},{id:"hobby_holy_bible",category:"hobby",name:" ()",price:100,icon:""},{id:"inst_violin",category:"hobby",name:" ",price:300,icon:""},{id:"inst_drums",category:"hobby",name:"  ",price:600,icon:""},{id:"inst_trumpet",category:"hobby",name:" ",price:250,icon:""},{id:"inst_cello",category:"hobby",name:" ",price:400,icon:""},{id:"inst_flute",category:"hobby",name:" ",price:180,icon:""},{id:"hobby_gaming_chair",category:"hobby",name:"  ",price:220,icon:""},{id:"hobby_yoga_mat",category:"hobby",name:"  ",price:30,icon:""}],ti=[{id:"base_man",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"base_woman",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"base_boy",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"base_girl",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"base_senior_man",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"base_senior_woman",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"hair_short_black",category:"hair",name:"  ",price:30,icon:""},{id:"hair_short_brown",category:"hair",name:"  ",price:35,icon:""},{id:"hair_short_yellow",category:"hair",name:"  ",price:40,icon:""},{id:"hair_long_black",category:"hair",name:"  ",price:45,icon:""},{id:"hair_long_brown",category:"hair",name:"  ",price:40,icon:""},{id:"hair_long_pink",category:"hair",name:"  ",price:80,icon:""},{id:"hair_curly_yellow",category:"hair",name:"  ",price:50,icon:""},{id:"hair_curly_blue",category:"hair",name:"  ",price:70,icon:""},{id:"hair_cap_red",category:"hair",name:"  ",price:60,icon:""},{id:"hair_beanie_blue",category:"hair",name:"  ",price:45,icon:""},{id:"hair_tiara",category:"hair",name:" ",price:120,icon:""},{id:"eye_basic",category:"eye",name:" ",price:0,icon:"",isDefault:!0},{id:"eye_large",category:"eye",name:" ",price:50,icon:""},{id:"eye_sharp",category:"eye",name:" ",price:60,icon:""},{id:"eye_gentle",category:"eye",name:"  ",price:55,icon:""},{id:"expr_happy",category:"expression",name:" ",price:0,icon:"",isDefault:!0},{id:"expr_laugh",category:"expression",name:" ",price:30,icon:""},{id:"expr_sad",category:"expression",name:" ",price:30,icon:""},{id:"expr_surprised",category:"expression",name:" ",price:40,icon:""},{id:"expr_cool",category:"expression",name:" ",price:50,icon:""},{id:"expr_oops",category:"expression",name:"!",price:35,icon:""},{id:"hand_bible_red",category:"hand",name:"  ",price:150,icon:""},{id:"hand_bible_black",category:"hand",name:"  ",price:150,icon:""},{id:"hand_bible_brown",category:"hand",name:"  ",price:180,icon:""},{id:"hand_bible_blue",category:"hand",name:"  ",price:160,icon:""},{id:"hand_bible_white",category:"hand",name:"   ",price:200,icon:""},{id:"hand_bible_gold",category:"hand",name:"  ()",price:777,icon:""},{id:"hand_bible_study",category:"hand",name:"  ",price:220,icon:""},{id:"hand_bible_kids",category:"hand",name:"  ",price:120,icon:""},{id:"hand_bible_tiny",category:"hand",name:"  ",price:90,icon:""},{id:"hand_bible_pocket",category:"hand",name:" ",price:70,icon:""},{id:"item_mic",category:"hand",name:"  ",price:300,icon:""},{id:"item_guitar",category:"hand",name:"  ",price:500,icon:""},{id:"item_bat",category:"hand",name:"  ",price:250,icon:""},{id:"item_bag",category:"hand",name:"  ",price:100,icon:""},{id:"acc_glasses_horn",category:"accessory",name:"  ",price:40,icon:""},{id:"acc_sunglasses_dark",category:"accessory",name:" ",price:80,icon:""},{id:"acc_ribbon_pink",category:"accessory",name:"  ",price:35,icon:""},{id:"acc_mask_white",category:"accessory",name:"  ",price:10,icon:""},{id:"outfit_hoodie_gray",category:"outfit",name:" ",price:100,icon:""},{id:"outfit_suit_black",category:"outfit",name:"  ",price:250,icon:""},{id:"outfit_dress_yellow",category:"outfit",name:"  ",price:220,icon:""},{id:"outfit_jersey_blue",category:"outfit",name:" ",price:120,icon:""},{id:"outfit_hanbok",category:"outfit",name:"  ",price:500,icon:""},{id:"outfit_sailor",category:"outfit",name:"  ",price:150,icon:""},{id:"outfit_overalls",category:"outfit",name:"  ",price:180,icon:""}],tE=[{id:"plant_cactus",category:"living",name:" ",price:40,icon:""},{id:"plant_sunflower",category:"living",name:" ",price:60,icon:""},{id:"plant_bonsai",category:"living",name:"  ",price:120,icon:""},{id:"living_fish_tank",category:"living",name:" ",price:180,icon:""},{id:"living_dog_house",category:"living",name:"  & ",price:150,icon:""},{id:"living_cat_tower",category:"living",name:" ",price:200,icon:""},{id:"living_water_purifier",category:"living",name:" ",price:100,icon:""},{id:"misc_clock_wall",category:"living",name:" ",price:50,icon:""},{id:"misc_trash_can",category:"living",name:"  ",price:20,icon:""},{id:"misc_slippers",category:"living",name:" ",price:15,icon:""}],rE=[{id:"wallpaper",name:"",icon:"",count:XN.length},{id:"floor",name:"",icon:"",count:qN.length},{id:"furniture",name:"",icon:"",count:WN.length},{id:"lighting",name:"",icon:"",count:HN.length},{id:"electronic",name:"",icon:"",count:QN.length},{id:"kitchen",name:"",icon:"",count:JN.length},{id:"living",name:"/",icon:"",count:GN.length+tE.length},{id:"hobby",name:"/",icon:"",count:eE.length},{id:"amusement",name:"",icon:"",count:ZN.length},{id:"character",name:"",icon:"",count:ti.filter(t=>t.category==="character").length},{id:"hair",name:"/",icon:"",count:ti.filter(t=>t.category==="hair").length},{id:"eye",name:" ",icon:"",count:ti.filter(t=>t.category==="eye").length},{id:"expression",name:"",icon:"",count:ti.filter(t=>t.category==="expression").length},{id:"hand",name:" ",icon:"",count:ti.filter(t=>t.category==="hand").length},{id:"accessory",name:"",icon:"",count:ti.filter(t=>t.category==="accessory").length},{id:"outfit",name:"",icon:"",count:ti.filter(t=>t.category==="outfit").length},{id:"christian",name:"",icon:"",count:KN.length}],Oa=[...XN,...qN,...WN,...HN,...GN,...KN,...fM,...QN,...JN,...ZN,...eE,...ti,...tE];typeof window<"u"&&window.console&&(console.log("    "),console.log(`  : ${Oa.length}`),console.log(":"),rE.forEach(t=>{console.log(`  - ${t.name}: ${t.count}`)}));const gM=(t,e)=>{const[r,n]=C.useState({unlockedRooms:1,activeRoomIndex:0,rooms:[{wallpaper:"wall_plain_white",floor:"floor_plain_white",items:[],characterPos:{x:4,y:4}}]}),[i,s]=C.useState({baseId:"base_man",hairId:null,accessoryId:null,outfitId:null,eyeId:"eye_basic",expressionId:"expr_happy",handId:null}),[a,o]=C.useState(["wall_plain_white","floor_plain_white","base_man"]),[c,u]=C.useState(!0),[d,h]=C.useState(null);C.useEffect(()=>{if(t&&t.miniroom)n(t.miniroom),t.character&&s(t.character),t.inventory&&o(t.inventory),u(!1);else if(t){const _={miniroom:{unlockedRooms:1,activeRoomIndex:0,rooms:[{wallpaper:"wall_plain_white",floor:"floor_plain_white",items:[],characterPos:{x:4,y:4}}]},character:{baseId:"base_man",hairId:null,accessoryId:null,outfitId:null,eyeId:"eye_basic",expressionId:"expr_happy",handId:null},inventory:["wall_plain_white","floor_plain_white","base_man","eye_basic","expr_happy"]};n(_.miniroom),s(_.character),o(_.inventory),u(!1)}},[t]);const p=async _=>{if(!(!t||!t.uid))try{await oe.collection("users").doc(t.uid).set(_,{merge:!0}),e(S=>({...S,..._}))}catch(S){console.error("   :",S)}},g=async _=>{if(!t||(t.score||0)<_.price)return alert(" !"),!1;if(["wallpaper","floor","character","hair","accessory","outfit","eye","expression","hand"].includes(_.category)&&a.includes(_.id))return alert("   ."),!1;const N=(t.score||0)-_.price,T=[...a,_.id],F={score:N,inventory:T,updatedAt:Ne.firestore.FieldValue.serverTimestamp()};try{return await p(F),o(T),alert(`${_.name}() !`),!0}catch{return alert(" "),!1}},y=_=>{const S={...r,..._};n(S),p({miniroom:S})};return{roomData:r,character:i,inventory:a,loading:c,previewItem:d,setPreviewItem:h,buyItem:g,updateRoom:y,placeItem:(_,S,N)=>{const T=[...r.rooms],F={...T[r.activeRoomIndex]},O={id:`${_}_${Date.now()}`,itemId:_,x:S,y:N};F.items=[...F.items||[],O],T[r.activeRoomIndex]=F,y({rooms:T})},movePlacedItem:(_,S,N)=>{const T=[...r.rooms],F={...T[r.activeRoomIndex]};F.items=F.items.map(O=>O.id===_?{...O,x:S,y:N}:O),T[r.activeRoomIndex]=F,y({rooms:T})},removePlacedItem:_=>{const S=[...r.rooms],N={...S[r.activeRoomIndex]};N.items=N.items.filter(T=>T.id!==_),S[r.activeRoomIndex]=N,y({rooms:S})},updateCharacter:_=>{const S={...i,..._};s(S),p({character:S})},moveCharacter:(_,S)=>{const N=[...r.rooms],T={...N[r.activeRoomIndex]};T.characterPos={x:_,y:S},N[r.activeRoomIndex]=T,y({rooms:N})},unlockRoom:async()=>{if(r.unlockedRooms>=5)return;const _=800+(r.unlockedRooms-1)*400;if((t.score||0)<_){alert(` ! (: ${_})`);return}if(confirm(` ? (${_}  )`)){const S=(t.score||0)-_,N={...r,unlockedRooms:r.unlockedRooms+1,rooms:[...r.rooms,{wallpaper:"wall_plain_white",floor:"floor_plain_white",items:[],characterPos:{x:4,y:4}}]};await p({score:S,miniroom:N,updatedAt:Ne.firestore.FieldValue.serverTimestamp()}),n(N)}},activeRoom:r.rooms[r.activeRoomIndex]}},Ho=""+new URL("wallpapers_set-733edfb8.png",import.meta.url).href,Go=""+new URL("floors_set-bcbed0dd.png",import.meta.url).href,mM=""+new URL("furniture_beds-9df7b575.png",import.meta.url).href,Qi=""+new URL("furniture_desks-c959b1ed.png",import.meta.url).href,Gx=""+new URL("furniture_chairs-92512a61.png",import.meta.url).href,Fm={wallpapers_set:Ho,wallpapers_modern:Ho,wallpapers_nature:Ho,wallpapers_vintage:Ho,wallpapers_pastel:Ho,floors_set:Go,floors_wood:Go,floors_tile:Go,floors_carpet:Go,floors_special:Go,furniture_beds:mM,furniture_chairs:Gx,furniture_desks:Qi,furniture_sofas:Gx,furniture_tables:Qi,furniture_storage:Qi,furniture_misc:Qi,lighting_items:Qi,plants_items:Qi,christian_items:Qi},uh=({item:t,size:e=64,className:r="",style:n={},scale:i=1})=>{if(!t||!t.spriteSheet)return null;const s=Fm[t.spriteSheet]||"",a=t.spriteSheet.toLowerCase(),o=t.width||64,c=t.height||64,u=8,d=-(t.spriteX*o),h=-(t.spriteY*c),p=u*o,g={width:`${o*i}px`,height:`${c*i}px`,backgroundImage:`url(${s})`,backgroundPosition:`${d*i}px ${h*i}px`,backgroundSize:`${p*i}px auto`,backgroundRepeat:"no-repeat",backgroundColor:"transparent",imageRendering:"pixelated",mixBlendMode:a.includes("wallpaper")||a.includes("floor")?"normal":"multiply",...n};return l.jsx("div",{className:`sprite-item ${r}`,style:g,title:t.name})},yM=({gender:t="man",hairId:e=null,outfitId:r=null,accId:n=null,eyeId:i="eye_basic",expressionId:s="expr_happy",handId:a=null,isMe:o=!1,className:c=""})=>{const u="#FFDDBB",d="#4A332B",h="#2D1B1B",p="#FF9999",g="rgba(255, 182, 193, 0.6)",y="rgba(255, 255, 255, 0.5)",v="rgba(0, 0, 0, 0.15)",m=(_=>_!=null&&_.includes("brown")?"#704214":_!=null&&_.includes("yellow")||_!=null&&_.includes("gold")?"#E6C15A":_!=null&&_.includes("red")?"#8B0000":_!=null&&_.includes("blue")?"#4169E1":_!=null&&_.includes("pink")?"#FF69B4":"#333333")(e),f=()=>{switch(i){case"eye_large":return l.jsxs("g",{children:[l.jsx("circle",{cx:"12",cy:"19",r:"1.5",fill:"white",stroke:d,strokeWidth:"0.5"}),l.jsx("circle",{cx:"12",cy:"19",r:"0.7",fill:h}),l.jsx("circle",{cx:"20",cy:"19",r:"1.5",fill:"white",stroke:d,strokeWidth:"0.5"}),l.jsx("circle",{cx:"20",cy:"19",r:"0.7",fill:h})]});case"eye_sharp":return l.jsxs("g",{fill:h,children:[l.jsx("path",{d:"M11 18 L14 19.5 L11 19 Z"}),l.jsx("path",{d:"M21 18 L18 19.5 L21 19 Z"})]});case"eye_gentle":return l.jsxs("g",{fill:"none",stroke:h,strokeWidth:"0.8",strokeLinecap:"round",children:[l.jsx("path",{d:"M11 19.5 Q12.5 18 14 19.5"}),l.jsx("path",{d:"M18 19.5 Q19.5 18 21 19.5"})]});default:return l.jsxs("g",{children:[l.jsx("circle",{cx:"12.5",cy:"19",r:"0.8",fill:h}),l.jsx("circle",{cx:"19.5",cy:"19",r:"0.8",fill:h})]})}},w=()=>{switch(s){case"expr_laugh":return l.jsx("path",{d:"M14 22 Q16 23.5 18 22",fill:"none",stroke:p,strokeWidth:"1",strokeLinecap:"round"});case"expr_sad":return l.jsx("path",{d:"M14 23 Q16 21.5 18 23",fill:"none",stroke:d,strokeWidth:"0.6",strokeLinecap:"round"});case"expr_surprised":return l.jsx("circle",{cx:"16",cy:"22.5",r:"1",fill:"none",stroke:p,strokeWidth:"0.6"});case"expr_cool":return l.jsx("rect",{x:"14.5",y:"22",width:"3",height:"0.6",fill:d,opacity:"0.5",rx:"0.2"});case"expr_oops":return l.jsx("circle",{cx:"16",cy:"22.5",r:"0.6",fill:p});default:return l.jsx("rect",{x:"15",y:"22",width:"2",height:"0.6",fill:p,rx:"0.3"})}},b=()=>{if(!a)return null;const _=a.includes("bible")?6:4,S=30;if(a.includes("bible")){let N="#8B0000",T="#FFD700";a.includes("black")&&(N="#1a1a1a"),a.includes("blue")&&(N="#1e3a8a"),a.includes("brown")&&(N="#543310"),a.includes("white")&&(N="#f8fafc",T="#cbd5e1"),a.includes("gold")&&(N="#c5a059",T="#fff");const F=a.includes("tiny")||a.includes("pocket");return l.jsxs("g",{transform:F?"scale(0.8) translate(4, 8)":"",children:[l.jsx("rect",{x:_,y:S,width:"6",height:"8",fill:N,stroke:d,strokeWidth:"0.5",rx:"0.5"}),l.jsx("rect",{x:_+1,y:S+1,width:"4",height:"6",fill:"none",stroke:T,strokeWidth:"0.3",rx:"0.2",opacity:"0.6"}),l.jsx("path",{d:`M${_+3} ${S+2.5} V${S+5.5} M${_+2} ${S+4} H${_+4}`,stroke:T,strokeWidth:"0.6"})]})}return a==="item_mic"?l.jsxs("g",{children:[l.jsx("rect",{x:22,y:28,width:"2",height:"6",fill:"#333",rx:"0.5",transform:"rotate(-15, 22, 28)"}),l.jsx("circle",{cx:23.5,cy:27.5,r:"1.8",fill:"#94a3b8",stroke:d,strokeWidth:"0.4"})]}):a==="item_guitar"?l.jsxs("g",{transform:"translate(18, 25) rotate(-10)",children:[l.jsx("ellipse",{cx:"4",cy:"10",rx:"5",ry:"6",fill:"#92400e",stroke:d,strokeWidth:"0.5"}),l.jsx("circle",{cx:"4",cy:"8",r:"1.5",fill:d,opacity:"0.3"}),l.jsx("rect",{x:"3",y:"0",width:"2",height:"8",fill:"#78350f",stroke:d,strokeWidth:"0.5"}),l.jsx("rect",{x:"2.5",y:"-1",width:"3",height:"3",fill:"#451a03"})]}):a==="item_bag"?l.jsxs("g",{children:[l.jsx("path",{d:"M21 28 Q23 28 23 30 V35 H19 V30 Q19 28 21 28",fill:"white",stroke:d,strokeWidth:"0.5"}),l.jsx("rect",{x:"19",y:"30",width:"4",height:"5",fill:"#f1f5f9",stroke:d,strokeWidth:"0.5"}),l.jsx("path",{d:"M20 32 H22 M21 31 V33",stroke:"#ef4444",strokeWidth:"0.3"})]}):null};return l.jsxs("svg",{viewBox:"0 0 32 48",className:`w-full h-full ${c}`,shapeRendering:"crispEdges",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("ellipse",{cx:"16",cy:"42",rx:"7",ry:"2.5",fill:v}),l.jsx("g",{className:"animate-bounce",style:{animationDuration:"3s"},children:l.jsx("path",{d:"M16 3 L17.5 1.5 Q18.5 0.5 19.5 1.5 Q20.5 2.5 18.5 4.5 L16 7 L13.5 4.5 Q11.5 2.5 12.5 1.5 Q13.5 0.5 14.5 1.5 Z",fill:"#FF4D4D"})}),l.jsxs("g",{children:[l.jsx("rect",{x:"12.5",y:"34",width:"3.2",height:"8",fill:u,stroke:d,strokeWidth:"0.6",rx:"1.5"}),l.jsx("rect",{x:"16.3",y:"34",width:"3.2",height:"8",fill:u,stroke:d,strokeWidth:"0.6",rx:"1.5"})]}),l.jsxs("g",{children:[l.jsx("rect",{x:"10.5",y:"24",width:"11",height:"11",fill:u,stroke:d,strokeWidth:"0.6",rx:"3"}),(()=>{switch(r){case"outfit_hoodie_gray":return l.jsxs("g",{children:[l.jsx("rect",{x:"10.5",y:"24",width:"11",height:"11",fill:"#94a3b8",stroke:d,strokeWidth:"0.6",rx:"3"}),l.jsx("path",{d:"M12 24 Q16 27 20 24",fill:"none",stroke:"#64748b",strokeWidth:"1.5"}),l.jsx("circle",{cx:"13",cy:"27",r:"0.5",fill:"white"}),l.jsx("circle",{cx:"19",cy:"27",r:"0.5",fill:"white"})]});case"outfit_suit_black":return l.jsxs("g",{children:[l.jsx("rect",{x:"10.5",y:"24",width:"11",height:"11",fill:"#1e293b",stroke:d,strokeWidth:"0.6",rx:"1"}),l.jsx("path",{d:"M14 24 L16 29 L18 24",fill:"white"}),l.jsx("rect",{x:"15.5",y:"25",width:"1",height:"2",fill:"#ef4444"})]});case"outfit_dress_yellow":return l.jsxs("g",{children:[l.jsx("path",{d:"M10.5 24 H21.5 L24 37 H8 Z",fill:"#fde047",stroke:d,strokeWidth:"0.6"}),l.jsx("path",{d:"M10.5 28 Q16 30 21.5 28",fill:"none",stroke:"#ca8a04",strokeWidth:"0.5"})]});case"outfit_jersey_blue":return l.jsxs("g",{children:[l.jsx("rect",{x:"10.5",y:"24",width:"11",height:"11",fill:"#3b82f6",stroke:d,strokeWidth:"0.6",rx:"2"}),l.jsx("rect",{x:"11.5",y:"24",width:"0.8",height:"11",fill:"white",opacity:"0.5"}),l.jsx("rect",{x:"19.7",y:"24",width:"0.8",height:"11",fill:"white",opacity:"0.5"})]});case"outfit_hanbok":return l.jsxs("g",{children:[l.jsx("path",{d:"M10.5 24 H21.5 L24 38 H8 Z",fill:"#ef4444",stroke:d,strokeWidth:"0.6"}),l.jsx("path",{d:"M8 24 L16 30 L24 24",fill:"#60a5fa",stroke:d,strokeWidth:"0.6"}),l.jsx("rect",{x:"15.5",y:"28",width:"1",height:"6",fill:"#fde047"})]});case"outfit_sailor":return l.jsxs("g",{children:[l.jsx("rect",{x:"10.5",y:"24",width:"11",height:"11",fill:"white",stroke:d,strokeWidth:"0.6",rx:"2"}),l.jsx("path",{d:"M10.5 24 H21.5 V27 H10.5 Z",fill:"#2563eb"}),l.jsx("rect",{x:"15.5",y:"25.5",width:"1",height:"2",fill:"#ef4444"})]});case"outfit_overalls":return l.jsxs("g",{children:[l.jsx("rect",{x:"10.5",y:"24",width:"11",height:"11",fill:"white",stroke:d,strokeWidth:"0.6",rx:"2"}),l.jsx("path",{d:"M10.5 28 H21.5 V35 H10.5 Z",fill:"#1d4ed8"}),l.jsx("rect",{x:"12",y:"24",width:"1.5",height:"4",fill:"#1d4ed8"}),l.jsx("rect",{x:"18.5",y:"24",width:"1.5",height:"4",fill:"#1d4ed8"})]});default:return null}})(),l.jsx("rect",{x:"7.5",y:"25",width:"3.5",height:"8",fill:u,stroke:d,strokeWidth:"0.6",rx:"1.5"}),l.jsx("rect",{x:"21",y:"25",width:"3.5",height:"8",fill:u,stroke:d,strokeWidth:"0.6",rx:"1.5"})]}),l.jsxs("g",{children:[l.jsx("rect",{x:"8",y:"10",width:"16",height:"15",fill:u,stroke:d,strokeWidth:"0.6",rx:"7"}),f(),w(),l.jsx("circle",{cx:"11",cy:"20.5",r:"1.5",fill:g}),l.jsx("circle",{cx:"21",cy:"20.5",r:"1.5",fill:g})]}),l.jsxs("g",{fill:m,children:[l.jsx("path",{d:"M8 17 Q8 8 16 8 Q24 8 24 17 L24 14 L8 14 Z",stroke:d,strokeWidth:"0.4"}),l.jsx("rect",{x:"8",y:"10",width:"16",height:"4.5",rx:"3"}),l.jsx("rect",{x:"11",y:"11",width:"3",height:"1",fill:y,rx:"0.5"}),l.jsx("rect",{x:"12",y:"10.5",width:"1",height:"2",fill:y,rx:"0.5"}),t==="woman"&&l.jsxs("g",{children:[l.jsx("path",{d:"M8 14 V26 Q5 26 5 20 V14 Z",stroke:d,strokeWidth:"0.5"}),l.jsx("path",{d:"M24 14 V26 Q27 26 27 20 V14 Z",stroke:d,strokeWidth:"0.5"}),(e==null?void 0:e.includes("long"))&&l.jsxs("g",{children:[l.jsx("path",{d:"M5 20 V30 Q5 32 8 32 V26 Z",stroke:d,strokeWidth:"0.5"}),l.jsx("path",{d:"M27 20 V30 Q27 32 24 32 V26 Z",stroke:d,strokeWidth:"0.5"})]})]}),t==="man"&&!(e!=null&&e.includes("cap"))&&!(e!=null&&e.includes("beanie"))&&l.jsx("g",{children:l.jsx("path",{d:"M12 8 L13 5 L14 8 Z",fill:m,stroke:d,strokeWidth:"0.3"})}),e==="hair_cap_red"&&l.jsxs("g",{children:[l.jsx("path",{d:"M8 10 Q16 6 24 10 L24 14 H8 Z",fill:"#ef4444",stroke:d,strokeWidth:"0.6"}),l.jsx("rect",{x:"16",y:"11",width:"10",height:"2.5",fill:"#ef4444",stroke:d,strokeWidth:"0.5",rx:"1"})]}),e==="hair_beanie_blue"&&l.jsx("path",{d:"M8 10 Q16 4 24 10 L24 15 H8 Z",fill:"#3b82f6",stroke:d,strokeWidth:"0.6"}),e==="hair_tiara"&&l.jsx("path",{d:"M12 8 L13 4 L16 7 L19 4 L20 8 Z",fill:"#fde047",stroke:"#ca8a04",strokeWidth:"0.5"})]}),b(),(()=>{switch(n){case"acc_glasses_horn":return l.jsxs("g",{fill:"none",stroke:"#1e293b",strokeWidth:"0.8",children:[l.jsx("rect",{x:"9.5",y:"17.5",width:"5",height:"3.5",rx:"0.5"}),l.jsx("rect",{x:"17.5",y:"17.5",width:"5",height:"3.5",rx:"0.5"}),l.jsx("path",{d:"M14.5 19 H17.5"})]});case"acc_sunglasses_dark":return l.jsxs("g",{fill:"#1e293b",stroke:d,strokeWidth:"0.5",children:[l.jsx("rect",{x:"9.5",y:"17.5",width:"5.5",height:"3.5",rx:"1"}),l.jsx("rect",{x:"17",y:"17.5",width:"5.5",height:"3.5",rx:"1"}),l.jsx("path",{d:"M15 19 H17",fill:"none"})]});case"acc_ribbon_pink":return l.jsxs("g",{transform:"translate(18, 6)",children:[l.jsx("path",{d:"M0 4 Q2 0 4 4 Q2 8 0 4 Z M0 4 Q-2 0 -4 4 Q-2 8 0 4 Z",fill:"#f472b6",stroke:d,strokeWidth:"0.5"}),l.jsx("circle",{cx:"0",cy:"4",r:"1.2",fill:"#db2777"})]});case"acc_mask_white":return l.jsx("rect",{x:"11",y:"21",width:"10",height:"4",fill:"white",stroke:"#cbd5e1",strokeWidth:"0.5",rx:"1"});default:return null}})()]})},nE=({character:t,size:e="w-16 h-20",className:r=""})=>{var n,i;return t?l.jsx("div",{className:`relative flex items-center justify-center ${e} ${r}`,children:l.jsx(yM,{gender:(n=t.baseId)!=null&&n.includes("woman")||(i=t.baseId)!=null&&i.includes("girl")?"woman":"man",hairId:t.hairId,outfitId:t.outfitId,accId:t.accessoryId,eyeId:t.eyeId,expressionId:t.expressionId,handId:t.handId})}):null},wM=({activeRoom:t,character:e,previewItem:r,selectedPlacementId:n,onGridClick:i,onItemClick:s,onCharacterClick:a,onPreviewClick:o,previewPos:c={x:4,y:4},movePlacedItem:u,moveCharacter:d})=>{var D;const[h,p]=C.useState(null),[g,y]=C.useState(null),[v,x]=C.useState({x:0,y:0}),m=10,f=64,w=32,b=r&&!["wallpaper","floor","character","hair","accessory","outfit","eye","expression","hand"].includes(r.category),_=(E,A)=>{const V=(E-A)*(f/2),R=(E+A)*(w/2);return{x:V,y:R}},S=(E,A,V)=>{if(!V)return null;const R=V.getBoundingClientRect(),W=R.width/640,xe=R.left+320*W,se=R.top+180*W,pe=(E-xe)/W,Ue=(A-se)/W,Qt=Math.floor((Ue/(w/2)+pe/(f/2))/2),lt=Math.floor((Ue/(w/2)-pe/(f/2))/2);return Qt>=0&&Qt<m&&lt>=0&&lt<m?{x:Qt,y:lt}:null},N=Nl.useRef(null),T=(E,A,V=null)=>{E.stopPropagation(),p({type:A,id:V})},F=E=>{if(!h)return;const A=N.current.getBoundingClientRect(),V=A.width/640,R=(E.clientX-A.left)/V,W=(E.clientY-A.top)/V;x({x:R,y:W});const xe=S(E.clientX,E.clientY,N.current);xe&&y(xe)},O=()=>{h&&g&&(h.type==="item"?u(h.id,g.x,g.y):h.type==="char"?d(g.x,g.y):h.type==="preview"&&i(g.x,g.y)),p(null),y(null)},G=(r==null?void 0:r.category)==="wallpaper"?r.id:t.wallpaper||"wall_plain_white",K=(r==null?void 0:r.category)==="floor"?r.id:t.floor||"floor_plain_white",te=Oa.find(E=>E.id===G)||((r==null?void 0:r.category)==="wallpaper"?r:null),H=Oa.find(E=>E.id===K)||((r==null?void 0:r.category)==="floor"?r:null),ce=te!=null&&te.spriteSheet?Fm[te.spriteSheet]:"",Me=te?-(te.spriteX*(te.width||64)):0,he=te?-(te.spriteY*(te.height||64)):0,$=H!=null&&H.spriteSheet?Fm[H.spriteSheet]:"",q=H?-(H.spriteX*(H.width||64)):0,Q=H?-(H.spriteY*(H.height||64)):0,ae=(h==null?void 0:h.type)==="char"&&g?g:t.characterPos||{x:4,y:4};return l.jsxs("div",{ref:N,onMouseMove:F,onMouseUp:O,onMouseLeave:O,className:"room-canvas-container py-10 flex items-center justify-center bg-slate-400 rounded-[2rem] overflow-hidden shadow-inner border-4 border-white/50 relative select-none",children:[l.jsxs("div",{style:{position:"relative",width:"640px",height:"520px",margin:"0 auto"},children:[l.jsxs("div",{className:`absolute inset-0 pointer-events-none z-0 transition-opacity duration-500 ${b?"opacity-40":"opacity-100"}`,children:[l.jsx("div",{className:"absolute",style:{width:"320.5px",height:"405px",left:"0",top:"-224px",transform:"skewY(-26.565deg)",transformOrigin:"bottom right",backgroundColor:(te==null?void 0:te.color)||"#fff",borderRight:"1.5px solid rgba(0,0,0,0.1)",backgroundImage:ce?`url(${ce})`:"none",backgroundPosition:`${Me}px ${he}px`,backgroundSize:"512px auto",imageRendering:"pixelated"},children:l.jsx("div",{className:"absolute bottom-0 w-full h-[8px] bg-black/5 border-t border-black/10"})}),l.jsx("div",{className:"absolute",style:{width:"320.5px",height:"405px",left:"320px",top:"-224px",transform:"skewY(26.565deg)",transformOrigin:"bottom left",backgroundColor:(te==null?void 0:te.color)||"#fff",backgroundImage:ce?`url(${ce})`:"none",backgroundPosition:`${Me}px ${he}px`,backgroundSize:"512px auto",imageRendering:"pixelated",filter:"brightness(0.97)"},children:l.jsx("div",{className:"absolute bottom-0 w-full h-[8px] bg-black/10 border-t border-black/20"})}),l.jsx("div",{className:"absolute left-[319.5px] top-[-100px] w-[1px] h-[300px] bg-black/10 z-10"})]}),l.jsxs("div",{className:"absolute top-[180px] left-[288px]",children:[Array.from({length:m}).map((E,A)=>l.jsx("div",{style:{position:"absolute",zIndex:0},children:Array.from({length:m}).map((V,R)=>{const{x:W,y:xe}=_(R,A),se=(g==null?void 0:g.x)===R&&(g==null?void 0:g.y)===A;return l.jsx("div",{className:`transition-colors duration-100 ${se?"bg-indigo-400/30":""}`,style:{position:"absolute",left:W,top:xe,width:f+1,height:w+1,backgroundColor:(H==null?void 0:H.color)||"transparent",backgroundImage:$?`url(${$})`:"none",backgroundPosition:`${q}px ${Q}px`,backgroundSize:"512px auto",clipPath:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",imageRendering:"pixelated"}},R)})},A)),l.jsx("div",{className:`transition-all duration-300 ${b?"opacity-40 saturate-[0.5] blur-[0.5px]":""}`,children:(D=t.items)==null?void 0:D.map(E=>{const A=(h==null?void 0:h.type)==="item"&&h.id===E.id,V=Oa.find(se=>se.id===E.itemId);if(!V)return null;let R,W,xe;if(A)R=v.x-320,W=v.y-180,xe=1e3;else{const se={x:E.x,y:E.y},pe=_(se.x,se.y);R=pe.x,W=pe.y,xe=10+se.y}return l.jsxs(Nl.Fragment,{children:[A&&g&&(()=>{const{x:se,y:pe}=_(g.x,g.y);return l.jsx("div",{className:"absolute pointer-events-none transition-all duration-75",style:{left:se,top:pe,width:f,height:w,background:"rgba(99, 102, 241, 0.2)",clipPath:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",transform:`translate(${f/2-V.width/2}px, ${w-V.height}px)`,zIndex:5}})})(),l.jsxs("div",{onMouseDown:se=>T(se,"item",E.id),onClick:se=>{se.stopPropagation(),s&&s(E)},className:`absolute transition-transform cursor-grab active:cursor-grabbing ${A?"scale-110 drop-shadow-2xl z-[1000]":""}`,style:{left:R,top:W,transform:`translate(${f/2-V.width/2}px, ${w/2-V.height}px) ${A?"translateY(-10px)":""}`,zIndex:xe,opacity:A?.8:1},children:[l.jsx(uh,{item:V,scale:1}),!A&&l.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-8 h-2 bg-black/10 rounded-full blur-[1px] -z-10"})]})]},E.id)})}),l.jsx("div",{className:`transition-all duration-300 ${b?"opacity-40 blur-[0.5px]":""}`,children:(()=>{const{x:E,y:A}=_(ae.x,ae.y);let V={...e};if(r){const W={character:"baseId",hair:"hairId",accessory:"accessoryId",outfit:"outfitId",eye:"eyeId",expression:"expressionId",hand:"handId"};W[r.category]&&(V[W[r.category]]=r.id)}const R=(h==null?void 0:h.type)==="char";return l.jsx("div",{onMouseDown:W=>T(W,"char"),className:`absolute cursor-grab active:cursor-grabbing transition-all ${R?"z-[100] scale-105 opacity-80":""}`,style:{left:E,top:A,zIndex:50+ae.y,transform:"translate(-50%, -70%)"},children:l.jsxs("div",{className:"relative",children:[l.jsx(nE,{character:V}),l.jsx("div",{className:"w-10 h-3 bg-black/10 rounded-full blur-[2px] mx-auto -mt-2"})]})})})()}),b&&(()=>{const E=(h==null?void 0:h.type)==="preview",A=E&&g?g:c,{x:V,y:R}=_(A.x,A.y);return l.jsx("div",{onMouseDown:W=>T(W,"preview"),className:`absolute cursor-grab active:cursor-grabbing transition-all z-[100] ${E?"scale-110 opacity-70":""}`,style:{left:V,top:R,transform:`translate(${f/2-(r.width||64)/2}px, ${w/2-(r.height||64)}px)`},children:l.jsxs("div",{className:"relative group",children:[l.jsx(uh,{item:r,scale:1.2}),l.jsx("div",{className:"absolute inset-0 bg-blue-400/10 blur-xl rounded-full -z-10"}),l.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-indigo-600 text-white text-[8px] px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:" "})]})})})()]})]}),(r||h)&&l.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 w-[85%] z-[100]",children:l.jsx("div",{className:"bg-slate-900/80 backdrop-blur-sm text-white px-6 py-3 rounded-2xl flex items-center justify-between shadow-xl border border-white/10",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-lg",children:h?"":""}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:h?"Dragging":"Preview"}),l.jsx("span",{className:"text-xs font-bold",children:h?"   .":`  : ${r==null?void 0:r.name}`})]})]})})})]})},vM=({shopCategory:t,setShopCategory:e,buyItem:r,inventory:n,onPreview:i,currentTalants:s})=>l.jsxs("div",{className:"bg-white rounded-[2rem] shadow-lg border border-slate-100 p-6 animate-in slide-in-from-bottom-4 duration-300",children:[l.jsx("div",{className:"flex items-center gap-4 mb-6 overflow-x-auto pb-2 scrollbar-hide",children:rE.map(a=>l.jsxs("button",{onClick:()=>e(a.id),className:`px-5 py-2.5 rounded-2xl font-bold whitespace-nowrap transition-all ${t===a.id?"bg-indigo-600 text-white shadow-lg":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[a.icon," ",a.name]},a.id))}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:Oa.filter(a=>a.category===t).map(a=>{const o=n.includes(a.id);return l.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-2xl p-3 flex flex-col items-center hover:shadow-md transition-shadow group relative",children:[l.jsx("div",{className:"w-16 h-16 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform cursor-help overflow-hidden rounded-xl border border-slate-200 shadow-sm bg-white",onClick:()=>i(a),title:" ()",children:a.spriteSheet?l.jsx(uh,{item:a,scale:.8}):a.color||a.gradient||a.baseColor?l.jsx("div",{className:"w-full h-full",style:{backgroundColor:a.color||a.baseColor,backgroundImage:a.gradient}}):l.jsx("div",{className:"text-3xl",children:a.icon||""})}),l.jsx("p",{className:"text-[10px] font-bold text-slate-700 text-center leading-tight mb-auto w-full px-1",children:a.name}),l.jsxs("p",{className:"text-[10px] font-black text-orange-500 mt-1",children:[" ",a.price]}),o?l.jsx("div",{className:"mt-2 w-full py-1.5 bg-slate-200 text-slate-400 rounded-lg text-[9px] font-black text-center",children:" "}):l.jsx("button",{onClick:()=>r(a),className:`mt-2 w-full py-1.5 rounded-lg text-[9px] font-black transition-colors ${s>=a.price?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:""}),l.jsx("button",{onClick:()=>i(a),className:"absolute top-2 right-2 p-1 bg-white shadow-sm border border-slate-100 rounded-full opacity-0 group-hover:opacity-100 transition-opacity text-[8px]",title:"",children:""})]},a.id)})})]}),xM=({inventory:t,onUseItem:e})=>l.jsxs("div",{className:"bg-white rounded-[2rem] shadow-lg border border-slate-100 p-6 animate-in slide-in-from-bottom-4 duration-300",children:[l.jsxs("h3",{className:"text-lg font-black text-slate-800 mb-6 flex items-center gap-2",children:["    ",l.jsxs("span",{className:"text-slate-300 text-sm",children:["(",t.length,")"]})]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t.map((r,n)=>{const i=Oa.find(s=>s.id===r);return i?l.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-3xl p-4 flex flex-col items-center group",children:[l.jsx("div",{className:"w-20 h-20 flex items-center justify-center mb-3 overflow-hidden rounded-xl border border-slate-200 shadow-sm",children:i.spriteSheet?l.jsx(uh,{item:i,scale:1.2}):i.color||i.gradient||i.baseColor?l.jsx("div",{className:"w-full h-full",style:{backgroundColor:i.color||i.baseColor,backgroundImage:i.gradient}}):l.jsx("div",{className:"text-4xl",children:i.icon||""})}),l.jsx("p",{className:"text-sm font-bold text-slate-700 text-center truncate w-full",children:i.name}),l.jsx("button",{onClick:()=>e(i),className:"mt-3 w-full py-2 bg-slate-200 text-slate-600 rounded-xl text-xs font-black hover:bg-indigo-100 hover:text-indigo-600 transition-colors",children:["wallpaper","floor","character","hair","accessory","outfit","eye","expression","hand"].includes(i.category)?"/":""})]},`${r}_${n}`):null})})]}),bM=({currentUser:t,setView:e,setCurrentUser:r})=>{const{roomData:n,character:i,inventory:s,activeRoom:a,loading:o,previewItem:c,setPreviewItem:u,buyItem:d,updateRoom:h,placeItem:p,movePlacedItem:g,removePlacedItem:y,updateCharacter:v,moveCharacter:x,unlockRoom:m}=gM(t,r),[f,w]=C.useState("main"),[b,_]=C.useState("room"),[S,N]=C.useState("wallpaper");C.useState(!1);const[T,F]=C.useState(null),[O,G]=C.useState({x:4,y:4}),K=H=>{u(H),G({x:4,y:4}),w("main")};if(o)return l.jsx("div",{className:"p-20 text-center",children:"  ..."});const te=t.score||0;return l.jsxs("div",{className:"min-h-screen bg-slate-200 flex items-center justify-center p-2 sm:p-4 cy-pixel-font overflow-hidden",children:[l.jsxs("div",{className:"cy-frame-container w-full max-w-5xl flex relative h-[95vh] max-h-[850px]",children:[l.jsxs("div",{className:"cy-inner-frame flex-1 flex flex-col shadow-sm overflow-hidden bg-white",children:[l.jsxs("div",{className:"flex justify-between items-end mb-3 border-b border-slate-100 pb-2 px-4 shrink-0",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsxs("h1",{className:"text-sm sm:text-lg font-bold text-slate-700 tracking-tight truncate max-w-[200px] sm:max-w-none",children:[t.name," ",l.jsx("span",{className:"ml-2 text-[10px] font-normal text-blue-500 underline cursor-pointer",children:""})]})}),l.jsxs("div",{className:"flex gap-2 sm:gap-4 text-[10px] text-slate-500 font-bold",children:[l.jsxs("span",{className:"flex items-center gap-1",children:["TODAY ",l.jsx("span",{className:"text-red-500",children:"24"})]}),l.jsx("span",{className:"w-px h-2 bg-slate-200 mt-1 hidden sm:block"}),l.jsxs("span",{className:"flex items-center gap-1",children:["TOTAL ",l.jsx("span",{className:"text-slate-800",children:"1,245"})]})]})]}),l.jsxs("div",{className:"flex flex-1 gap-2 sm:gap-4 overflow-hidden px-4 pb-4 flex-col md:flex-row min-h-0",children:[l.jsxs("div",{className:"w-full md:w-48 flex md:flex-col gap-2 shrink-0 md:min-h-0",children:[l.jsx("div",{className:"w-20 md:w-full aspect-square bg-slate-50 border border-slate-200 rounded p-1 flex items-center justify-center overflow-hidden shrink-0",children:l.jsx(nE,{character:i,size:"w-full h-full"})}),l.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[l.jsxs("div",{className:"border-t-2 border-dashed border-slate-200 pt-2 text-[10px] text-slate-600 leading-tight hidden md:block",children:[l.jsxs("p",{className:"font-bold text-blue-600 mb-1 truncate",children:["TODAY IS... ",c?"":""]}),l.jsx("p",{className:"line-clamp-2",children:"        !"})]}),l.jsxs("div",{className:"mt-2 md:mt-auto",children:[l.jsxs("div",{className:"p-1 px-2 bg-orange-50 rounded border border-orange-100 flex md:flex-col items-center justify-between md:justify-center",children:[l.jsx("span",{className:"text-[9px] font-bold text-orange-400",children:" "}),l.jsxs("span",{className:"text-xs sm:text-sm font-black text-orange-600",children:[" ",te.toLocaleString()]})]}),l.jsx("select",{className:"w-full mt-1 text-[9px] border border-slate-200 rounded p-1 hidden md:block",children:l.jsx("option",{children:" "})})]})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[l.jsxs("div",{className:"flex gap-1 shrink-0",children:[l.jsx("button",{onClick:()=>{w("main"),u(null)},className:`px-3 sm:px-4 py-1.5 text-[10px] sm:text-xs font-bold rounded-t-lg border-x border-t transition-all ${f==="main"?"bg-white border-slate-200 text-slate-800 -mb-px z-10":"bg-slate-50 border-transparent text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>{w("shop"),u(null)},className:`px-3 sm:px-4 py-1.5 text-[10px] sm:text-xs font-bold rounded-t-lg border-x border-t transition-all ${f==="shop"?"bg-white border-slate-200 text-slate-800 -mb-px z-10":"bg-slate-50 border-transparent text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>{w("inventory"),u(null)},className:`px-3 sm:px-4 py-1.5 text-[10px] sm:text-xs font-bold rounded-t-lg border-x border-t transition-all ${f==="inventory"?"bg-white border-slate-200 text-slate-800 -mb-px z-10":"bg-slate-50 border-transparent text-slate-400"}`,children:""})]}),l.jsxs("div",{className:"flex-1 bg-white border border-slate-200 rounded-b-lg p-2 sm:p-4 overflow-hidden relative flex flex-col min-h-0",children:[f==="main"&&l.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 shrink-0",children:[l.jsxs("span",{className:"text-[10px] font-bold text-slate-400",children:["Miniroom Stage #0",n.activeRoomIndex+1]}),l.jsxs("div",{className:"flex gap-1",children:[n.rooms.map((H,ce)=>l.jsx("button",{onClick:()=>h({activeRoomIndex:ce}),className:`w-4 h-4 sm:w-5 sm:h-5 text-[9px] sm:text-[10px] font-bold rounded border ${n.activeRoomIndex===ce?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-400 border-slate-200"}`,children:ce+1},ce)),n.unlockedRooms<5&&l.jsx("button",{onClick:m,className:"w-4 h-4 sm:w-5 sm:h-5 text-[9px] sm:text-[10px] bg-slate-100 text-slate-400 rounded border border-slate-200 hover:bg-slate-200",children:"+"})]})]}),l.jsx("div",{className:"flex-1 flex items-center justify-center bg-[#f0f0f0] rounded-2xl sm:rounded-3xl border border-slate-200/50 shadow-inner overflow-hidden relative min-h-0",children:l.jsx("div",{className:"transform scale-[0.4] mini:scale-[0.5] sm:scale-[0.6] md:scale-75 lg:scale-95 transition-transform origin-center",children:l.jsx(wM,{activeRoom:a,character:i,previewItem:c,previewPos:O,selectedPlacementId:T,movePlacedItem:g,moveCharacter:x,onGridClick:(H,ce)=>{c&&G({x:H,y:ce})},onItemClick:H=>F(H.id),onCharacterClick:()=>F("character"),onPreviewClick:()=>F("preview")})})})]}),f==="shop"&&l.jsx("div",{className:"h-full overflow-y-auto min-h-0 scrollbar-hide",children:l.jsx(vM,{shopCategory:S,setShopCategory:N,buyItem:d,inventory:s,onPreview:K,currentTalants:te})}),f==="inventory"&&l.jsx("div",{className:"h-full overflow-y-auto min-h-0 scrollbar-hide",children:l.jsx(xM,{inventory:s,onUseItem:H=>{const ce=H.category,Me=[...n.rooms],he=n.activeRoomIndex;ce==="wallpaper"?h({rooms:Me.map(($,q)=>q===he?{...$,wallpaper:H.id}:$)}):ce==="floor"?h({rooms:Me.map(($,q)=>q===he?{...$,floor:H.id}:$)}):["character","hair","accessory","outfit","eye","expression","hand"].includes(ce)?v({[{character:"baseId",hair:"hairId",accessory:"accessoryId",outfit:"outfitId",eye:"eyeId",expression:"expressionId",hand:"handId"}[ce]]:H.id}):p(H.id,4,4),w("main")}})})]}),l.jsxs("div",{className:"mt-2 p-2 bg-slate-50 rounded border border-slate-100 hidden sm:block shrink-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-700",children:""}),l.jsx("button",{className:"text-[9px] text-blue-500 font-bold hover:underline",children:" +"})]}),l.jsxs("div",{className:"text-[9px] flex gap-2",children:[l.jsx("span",{className:"font-bold text-slate-500",children:""}),l.jsx("span",{className:"text-slate-700 truncate",children:"  ~!!"})]})]})]})]})]}),l.jsxs("div",{className:"flex flex-col ml-[-1px] mt-12 z-20 hidden lg:flex shrink-0",children:[l.jsxs("button",{onClick:()=>e("dashboard"),className:"cy-side-tab !bg-orange-500 border-orange-600 !h-16 flex-col gap-1 shadow-lg active:translate-x-1",children:[l.jsx("span",{className:"text-[10px] leading-none",children:""}),l.jsx("span",{children:""})]}),l.jsx("button",{onClick:()=>_("room"),className:`cy-side-tab ${b==="room"?"active":""}`,children:""}),l.jsx("button",{onClick:()=>_("guestbook"),className:`cy-side-tab ${b==="guestbook"?"active":""}`,children:""}),l.jsx("button",{className:"cy-side-tab",children:""}),l.jsx("button",{className:"cy-side-tab",children:""})]})]}),c&&f==="main"&&l.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[200] w-[90%] max-w-[400px] animate-in slide-in-from-bottom-8 duration-500",children:l.jsxs("div",{className:"bg-white/90 backdrop-blur-md border-2 border-indigo-100 p-4 rounded-[2.5rem] shadow-[0_20px_50px_rgba(79,70,229,0.2)] flex items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[l.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center shrink-0 border border-indigo-100",children:l.jsx("span",{className:"text-2xl",children:c.icon||""})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-0.5",children:"Previewing"}),l.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:c.name})]})]}),l.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.includes(c.id)?l.jsx("div",{className:"bg-slate-100 text-slate-400 px-4 py-2.5 rounded-2xl font-black text-[10px]",children:" "}):l.jsxs("button",{onClick:()=>d(c),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-2xl font-black text-xs shadow-lg shadow-indigo-200 transition-all active:scale-95",children:[c.price," "]}),l.jsx("button",{onClick:()=>u(null),className:"w-10 h-10 bg-slate-100 hover:bg-red-50 hover:text-red-500 text-slate-400 rounded-full flex items-center justify-center transition-colors active:scale-95",title:" ",children:l.jsx("span",{className:"text-xl leading-none",children:""})})]})]})})]})},_M=t=>{const[e,r]=C.useState(!1),[n,i]=C.useState(!1),[s,a]=C.useState(()=>parseFloat(localStorage.getItem("bible_ttsSpeed"))||1),[o,c]=C.useState([]),[u,d]=C.useState(()=>localStorage.getItem("bible_selectedVoiceURI")||""),[h,p]=C.useState(-1),[g,y]=C.useState(!1),v=C.useRef([]),x=C.useRef(0),m=C.useRef(!1),f=C.useRef(null);C.useEffect(()=>{const F=()=>{if(!window.speechSynthesis)return;const G=window.speechSynthesis.getVoices();if(G.length===0)return;console.log("Loaded voices:",G.length);const K=G.filter(te=>te.lang==="ko-KR"||te.lang.startsWith("ko"));c(te=>te.length===K.length&&te.every((H,ce)=>H.voiceURI===K[ce].voiceURI)?te:K)};F();const O=navigator.userAgent;return(O.indexOf("NAVER")>-1||O.indexOf("KAKAOTALK")>-1)&&y(!0),window.speechSynthesis.addEventListener?(window.speechSynthesis.addEventListener("voiceschanged",F),()=>window.speechSynthesis.removeEventListener("voiceschanged",F)):(window.speechSynthesis.onvoiceschanged=F,()=>{window.speechSynthesis.onvoiceschanged=null})},[]),C.useEffect(()=>{if(o.length>0){const F=localStorage.getItem("bible_selectedVoiceURI"),O=F&&o.some(G=>G.voiceURI===F);if(!u)if(O)d(F);else{const G=o[0].voiceURI;d(G),localStorage.setItem("bible_selectedVoiceURI",G)}}},[o,u]);const w=F=>{a(O=>{const G=parseFloat((O+F).toFixed(1)),K=Math.max(.6,Math.min(2,G));return localStorage.setItem("bible_ttsSpeed",K),e&&!n&&v.current.length>0&&(_(),setTimeout(()=>{N(t,x.current,K)},50)),K})},b=()=>{n?(i(!1),m.current=!1,S()):(i(!0),m.current=!0,window.speechSynthesis&&window.speechSynthesis.cancel())},_=()=>{window.speechSynthesis&&window.speechSynthesis.cancel(),r(!1),i(!1),m.current=!1,p(-1),v.current=[],x.current=0},S=(F=null)=>{if(!window.speechSynthesis)return;if(x.current>=v.current.length){r(!1),p(-1);return}p(x.current);const O=v.current[x.current];if(!O||O.trim().length===0){x.current++,S(F);return}const G=new SpeechSynthesisUtterance(O);if(u){const K=o.find(te=>te.voiceURI===u);K&&(G.voice=K)}G.lang="ko-KR",G.rate=F!==null?F:s,G.pitch=1,G.onend=()=>{m.current||(x.current++,S(F))},G.onerror=K=>{m.current||K.error==="interrupted"||K.error==="canceled"||(console.error("TTS Error:",K),_())},f.current=G,window.speechSynthesis.speak(G)},N=(F,O=0,G=null)=>{if(g){alert(`/     .

  '  ' 
  .`);return}if(!window.speechSynthesis){alert("     .");return}const K=G!==null?G:s;(window.speechSynthesis.speaking||window.speechSynthesis.pending)&&window.speechSynthesis.cancel();const te=F.split(`
`),H=[];te.forEach(ce=>{const Me=ce.replace(/\[\[VERSE:\d+\]\]/g,"").trim();if(!Me)return;let he=Me;if(he=he.replace(/\([^)]*\)/g,"").replace(/\[[^\]]*\]/g,""),Me.indexOf("#")===0&&(he=he.replace(/[0-9]+/g,$=>u8($))),he=he.replace(/^#+\s*/,""),he=he.replace(/['"]/g," "),Me.indexOf("#")===0)he.trim().length>0&&H.push(he);else{const $=he.split(/([.?!])/g).reduce((q,Q)=>[".","?","!"].indexOf(Q)!==-1?(q.length>0&&(q[q.length-1]+=Q),q):(Q.trim().length>0&&q.push(Q),q),[]);H.push(...$)}}),H.length!==0&&(v.current=H,x.current=O,r(!0),i(!1),m.current=!1,p(O),setTimeout(()=>{S(K)},50))},T=F=>{N(t,F)};return C.useEffect(()=>{t&&_()},[t]),C.useEffect(()=>()=>{window.speechSynthesis&&window.speechSynthesis.cancel()},[]),{isSpeaking:e,isPaused:n,ttsSpeed:s,availableVoices:o,selectedVoiceURI:u,activeChunkIndex:h,handleSpeedChange:w,handleTogglePause:b,handleStop:_,handleSpeak:N,jumpToChunk:T,setSelectedVoiceURI:d}},SM=()=>{const[t,e]=C.useState("login"),[r,n]=C.useState("login"),[i,s]=C.useState(""),[a,o]=C.useState(""),[c,u]=C.useState(""),[d,h]=C.useState(""),[p,g]=C.useState(""),[y,v]=C.useState(""),[x,m]=C.useState(null),{currentUser:f,setCurrentUser:w,authLoading:b}=_8(),[_,S]=C.useState(""),{verseData:N,setVerseData:T,subgroupStats:F,setSubgroupStats:O,communityMembers:G,setCommunityMembers:K,allMembersForRace:te,setAllMembersForRace:H,memos:ce,setMemos:Me,readHistory:he,setReadHistory:$,announcement:q,setAnnouncement:Q,viewingDay:ae,setViewingDay:D,hasReadToday:E,setHasReadToday:A,showConfetti:V,setShowConfetti:R,levelUpToast:W,setLevelUpToast:xe,bonusToast:se,setBonusToast:pe,newAchievement:Ue,setNewAchievement:Qt,handleRead:lt,saveMemo:Jt,changeSubgroup:xp,handleRestart:Kc,changeStartDate:bp,loadMemos:j1,loadAnnouncement:D1,kakaoLink:_p,loadKakaoLink:A1,setKakaoLink:Sp}=E8(f,w,t),[kp,Ip]=C.useState(!1),[Np,Ep]=C.useState("all");C.useState("all");const[Tp,Cp]=C.useState(!1),[jp,Dp]=C.useState(!1),[Ap,Rp]=C.useState(!1),[Pp,Op]=C.useState(!1),[Lp,Mp]=C.useState(!1),[Ar,Ks]=C.useState(!1),[So,Qc]=C.useState(!1),[$p,Wn]=C.useState(!1),[ko,Fp]=C.useState(!1),[Jc,Vp]=C.useState(null),[Zc,Up]=C.useState(new Date),[Io,eu]=C.useState(new Date),[Bp,Qs]=C.useState(""),[No,Eo]=C.useState(null),[To,zp]=C.useState(!1),{isSpeaking:Xr,isPaused:tu,ttsSpeed:xn,availableVoices:Yp,selectedVoiceURI:ru,activeChunkIndex:Xp,handleSpeedChange:ue,handleTogglePause:nt,handleStop:St,handleSpeak:Rr,jumpToChunk:bn,setSelectedVoiceURI:Hn}=_M(N.text),[qr,Js]=C.useState([]),[dr,nu]=C.useState(null),[iE,R1]=C.useState(null),[Hi,P1]=C.useState(""),[sE,aE]=C.useState("all"),[oE,lE]=C.useState("today"),[cE,uE]=C.useState("name"),[iu,O1]=C.useState({text:"",links:[{url:"",text:""}],enabled:!1}),[qp,L1]=C.useState(""),[dE,su]=C.useState(null),[hE,pE]=C.useState(()=>{const fe=localStorage.getItem("bible_fontSize");return fe?parseInt(fe,10):16}),[fE,M1]=C.useState(null),[gE,mE]=C.useState(["1year_revised"]),[kM,yE]=C.useState(!1);C.useEffect(()=>{const fe=navigator.userAgent;(fe.indexOf("NAVER")>-1||fe.indexOf("KAKAOTALK")>-1)&&yE(!0)},[]),C.useEffect(()=>{b||(f?t==="login"&&(f.communityId&&f.subgroupId?e("dashboard"):(m(f),e("plan_type_select"))):t!=="login"&&e("login"))},[f,b]);const wE=async()=>{if(oe)try{await oe.collection("settings").doc("announcement").set({...iu,updatedAt:Ne.firestore.FieldValue.serverTimestamp()}),Q(iu.enabled?iu:null),alert(" !")}catch(fe){console.error("  :",fe),alert(" ")}},vE=async()=>{if(oe)try{await oe.collection("settings").doc("kakao").set({url:qp,updatedAt:Ne.firestore.FieldValue.serverTimestamp()}),Sp(qp),alert("  !")}catch(fe){console.error("   :",fe),alert(" ")}},xE=async(fe,Ee)=>{if(confirm(`${Ee}   ?`))try{await oe.collection("users").doc(fe).delete(),Js(Ie=>Ie.filter(Te=>Te.uid!==fe)),alert(".")}catch(Ie){console.error(Ie),alert(" ")}},bE=async(fe,Ee,Ie)=>{if(!Hi||Hi.length<6){alert("  6  .");return}if(confirm(`${Ee}  ?

 : ${Hi}`))try{await oe.collection("users").doc(fe).set({password:Hi,passwordResetRequired:!0,updatedAt:Ne.firestore.FieldValue.serverTimestamp()},{merge:!0}),alert(` ${Ee}  !

 : ${Hi}

    .`),Js(Te=>Te.map(kt=>kt.uid===fe?{...kt,password:Hi}:kt)),R1(null),P1("")}catch(Te){console.error(Te),alert("  ")}},_E=fe=>nu({...fe}),SE=async()=>{if(dr)try{await oe.collection("users").doc(dr.uid).set({communityId:dr.communityId,communityName:dr.communityName,subgroupId:dr.subgroupId,planId:dr.planId,currentDay:dr.currentDay,score:dr.score,streak:dr.streak,lastReadDate:dr.lastReadDate||null,updatedAt:Ne.firestore.FieldValue.serverTimestamp()},{merge:!0}),Js(fe=>fe.map(Ee=>Ee.uid===dr.uid?dr:Ee)),nu(null),alert(".")}catch(fe){console.error(fe),alert(" ")}},kE=async fe=>{if(fe.preventDefault(),S(""),r==="signup"){if(console.log("===   ==="),console.log(":",i),console.log(" :",a.length),console.log(":",d),!i.trim()||!a.trim()||!d){S("  .");return}if(a!==c){S("  .");return}if(a.length<6){S(" 6  .");return}}const Ee=r==="signup"?i:p,Ie=r==="signup"?a:y;if(!Ee.trim()||!Ie.trim()){S("   .");return}if(Ee==="admin"&&Ie==="08283"&&r==="login")try{Zt&&!Zt.currentUser&&await Zt.signInAnonymously();const Te=await oe.collection("users").get();Js(Te.docs.map(ct=>$m(ct)));const kt=await oe.collection("settings").doc("announcement").get();if(kt.exists){const ct=kt.data();!ct.links&&ct.linkUrl&&ct.linkText&&(ct.links=[{url:ct.linkUrl,text:ct.linkText}]),ct.links||(ct.links=[{url:"",text:""}]),O1(ct)}const Wr=await oe.collection("settings").doc("sync").get();Wr.exists&&M1(Wr.data());const Gn=await oe.collection("settings").doc("kakao").get();Gn.exists&&L1(Gn.data().url),zp(!0);return}catch(Te){console.error(Te),S("   ");return}try{const Te=c8(Ee);console.log(" :",Te);let kt=null;try{console.log("  ..."),kt=await Zt.signInWithEmailAndPassword(Te,Ie),console.log(" !")}catch(qe){if(console.log(" :",qe.code,qe.message),qe&&qe.code==="auth/user-not-found"||qe&&qe.code==="auth/invalid-login-credentials"||qe&&qe.code==="auth/invalid-credential"){if(r==="login"){S("  .   .");return}console.log("  ...");try{kt=await Zt.createUserWithEmailAndPassword(Te,Ie),console.log(" !")}catch(We){console.error("  :",We),console.error(" :",We?We.code:null),console.error(" :",We?We.message:null),We&&We.code==="auth/email-already-in-use"?S("   .      ."):We&&We.code==="auth/weak-password"?S(" 6  ."):We&&We.code==="auth/invalid-email"?S("    ."):S(` : ${We&&We.message||"   "}`);return}}else if(qe&&qe.code==="auth/wrong-password"){S(" .");return}else{console.error("    :",qe),S(" (   )");return}}const Wr=kt.user.uid;console.log(" UID:",Wr);const Gn=oe.collection("users").doc(Wr),ct=await Gn.get();if(!ct.exists){console.log("  - Firestore   ...");const qe={name:Ee.trim(),password:Ie,startDate:new Date().toDateString(),currentDay:1,streak:0,score:0,lastReadDate:null,gender:"male",planId:"1year_revised",communityId:null,communityName:null,subgroupId:null,createdAt:Ne.firestore.FieldValue.serverTimestamp(),updatedAt:Ne.firestore.FieldValue.serverTimestamp()};await Gn.set(qe),console.log("Firestore   !"),m({...qe,uid:Wr}),e("plan_type_select");return}console.log("  -   ");const Gi=$m(ct);w(Gi),A(Gi.lastReadDate===new Date().toDateString()),!Gi.communityId||!Gi.subgroupId?(m(Gi),e("plan_type_select")):e("dashboard")}catch(Te){console.error("  :",Te),S("   ")}},IE=fe=>{Eo(fe),e("bible_version_select")},NE=async fe=>{const Ee=`${No}_${fe}`;if(x)m(Ie=>({...Ie,planId:Ee})),e("community_select");else if(f){const Ie={...f,planId:Ee};w(Ie);try{const Te=Zt.currentUser?Zt.currentUser.uid:null;Te&&await oe.collection("users").doc(Te).set({planId:Ee,updatedAt:Ne.firestore.FieldValue.serverTimestamp()},{merge:!0})}catch(Te){console.error(Te)}e("dashboard"),R(!0),setTimeout(()=>R(!1),2e3)}},EE=(fe,Ee)=>{m(Ie=>({...Ie,communityId:fe,communityName:Ee})),e("subgroup_select")},TE=async fe=>{const Ee={...x,subgroupId:fe};w(Ee),m(null),e("dashboard");try{const Ie=(Zt.currentUser?Zt.currentUser.uid:null)||Ee.uid;Ie&&await oe.collection("users").doc(Ie).set({...Ee,updatedAt:Ne.firestore.FieldValue.serverTimestamp()},{merge:!0})}catch(Ie){console.error(Ie),alert("  ")}},CE=cd.replace("notion-proxy","notion-proxy-bulk"),jE=cd.replace("notion-proxy","notion-proxy-page"),DE=async(fe=["1year_revised"])=>{if(!oe||!cd)return alert(" "),{success:0,error:0,failedItems:[]};let Ee=0,Ie=0;const Te=[];for(const kt of fe){const[Wr,Gn]=kt.split("_"),ct=bi[Wr]?bi[Wr].find(We=>We.id===Gn):null,Gi=ct&&ct.tagName||" ",qe=ct&&ct.name||kt;su({current:0,total:365,success:0,error:0,currentVersion:qe,currentDay:0,status:"    ..."});try{console.log(` ${qe}   ...`);const We=await fetch(CE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:Gi,includeContent:!1})});if(!We.ok)throw new Error(`Bulk API Error: ${We.status}`);const au=await We.json();if(console.log(` ${au.count}   `),!au.items||au.items.length===0)throw new Error("   ");const F1={};for(let hr=1;hr<=365;hr++){const Hr=new Date(2025,0,hr),Gr=String(Hr.getMonth()+1).padStart(2,"0"),lu=String(Hr.getDate()).padStart(2,"0");F1[`${Gr}-${lu}`]=hr}const Wp=au.items;let ou=0;for(const hr of Wp){const Hr=F1[hr.date];if(!Hr){console.log(`   : ${hr.date}`),Ie++,Te.push({planId:kt,versionName:qe,day:0,date:hr.date,error:"  "});continue}try{const Gr=await fetch(jE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageId:hr.pageId})});if(!Gr.ok)throw new Error(`Page API Error: ${Gr.status}`);const lu=await Gr.json();if(lu.text){const RE=`${Wr}_${Gn}_${Hr}`;await oe.collection("verses").doc(RE).set({title:hr.title,text:lu.text,pageId:hr.pageId,day:Hr,planId:kt,syncedAt:Ne.firestore.FieldValue.serverTimestamp()}),Ee++,console.log(` Day ${Hr} (${hr.date})  `)}else throw new Error(" ")}catch(Gr){Ie++,Te.push({planId:kt,versionName:qe,day:Hr,date:hr.date,error:Gr.message}),console.error(` Day ${Hr} :`,Gr.message)}ou++,ou%5===0&&su({current:ou,total:Wp.length,success:Ee,error:Ie,currentVersion:qe,currentDay:Hr,status:`   ... (${ou}/${Wp.length})`}),await new Promise(Gr=>setTimeout(Gr,200))}}catch(We){console.error(` ${qe}  :`,We),Ie+=365,Te.push({planId:kt,versionName:qe,day:0,date:"",error:` : ${We.message}`})}}return await oe.collection("settings").doc("sync").set({lastSyncAt:Ne.firestore.FieldValue.serverTimestamp(),successCount:Ee,errorCount:Ie,syncedVersions:fe,failedItems:Te.slice(0,50)}),su(null),{success:Ee,error:Ie,failedItems:Te}},$1=()=>{Zt&&Zt.signOut(),w(null),zp(!1),m(null),g(""),v(""),S(""),e("login"),A(!1),nu(null),K([])},AE=()=>{Eo(null),m(null),e("plan_type_select")};return b?l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-4 animate-bounce",children:""}),l.jsx("p",{className:"text-slate-500 font-bold",children:"  ..."})]})}):To?l.jsx(C8,{handleLogout:$1,downloadCSV:b8,adminViewMode:oE,setAdminViewMode:lE,adminFilter:sE,setAdminFilter:aE,adminSortBy:cE,setAdminSortBy:uE,allUsers:qr,MOCK_COMMUNITIES:Vn,BIBLE_VERSIONS:bi,announcementInput:iu,setAnnouncementInput:O1,saveAnnouncement:wE,generateMemosCSV:x8,generateMemosHTML:Wx,editingUser:dr,setEditingUser:nu,startEditUser:_E,saveEditUser:SE,changingPassword:iE,setChangingPassword:R1,newPassword:Hi,setNewPassword:P1,changePassword:bE,deleteUser:xE,lastSyncInfo:fE,setLastSyncInfo:M1,syncProgress:dE,setSyncProgress:su,selectedSyncVersions:gE,setSelectedSyncVersions:mE,syncNotionToFirestore:DE,adminStats:w8(qr),kakaoLinkInput:qp,setKakaoLinkInput:L1,saveKakaoLink:vE,db:oe}):t==="login"?l.jsx(T8,{loginTab:r,setLoginTab:n,loginName:p,setLoginName:g,loginPw:y,setLoginPw:v,signupName:i,setSignupName:s,signupBirthdate:d,setSignupBirthdate:h,signupPw:a,setSignupPw:o,signupPwConfirm:c,setSignupPwConfirm:u,errorMsg:_,handleLogin:kE}):["plan_type_select","bible_version_select","community_select","subgroup_select"].includes(t)?l.jsx(j8,{view:t,currentUser:f,tempUser:x,setView:e,selectedPlanType:No,handlePlanTypeSelect:IE,handleVersionSelect:NE,handleCommunitySelect:EE,handleSubgroupSelect:TE}):t==="dashboard"&&f?l.jsx(G8,{currentUser:f,communityMembers:G,allMembersForRace:te,memos:ce,currentMemo:Bp,setCurrentMemo:Qs,readHistory:he,announcement:q,kakaoLink:_p,verseData:N,hasReadToday:E,viewingDay:ae,setViewingDay:D,fontSize:hE,setFontSize:pE,isSpeaking:Xr,isPaused:tu,handleTogglePause:nt,ttsSpeed:xn,handleSpeedChange:ue,handleStop:St,handleSpeak:Rr,availableVoices:Yp,selectedVoiceURI:ru,setSelectedVoiceURI:Hn,activeChunkIndex:Xp,jumpToChunk:bn,handleRead:lt,saveMemo:Jt,handleLogout:$1,handleChangeVersionStart:AE,handleRestart:Kc,changeSubgroup:xp,changeStartDate:bp,dateToOffset:d8,showConfetti:V,levelUpToast:W,bonusToast:se,newAchievement:Ue,showScoreInfo:Tp,setShowScoreInfo:Cp,showReadingGuide:jp,setShowReadingGuide:Dp,showMemoList:Ap,setShowMemoList:Rp,showAchievements:Pp,setShowAchievements:Op,showCalendar:Lp,setShowCalendar:Mp,showFullRanking:Ar,setShowFullRanking:Ks,showDateSettings:So,setShowDateSettings:Qc,showSubgroupChange:$p,setShowSubgroupChange:Wn,showRestartConfirm:ko,setShowRestartConfirm:Fp,showMonthlyContestInfo:kp,setShowMonthlyContestInfo:Ip,calendarDate:Zc,setCalendarDate:Up,dateSettingsDate:Io,setDateSettingsDate:eu,rankingCommunityFilter:Np,setRankingCommunityFilter:Ep,selectedSubgroupDetail:Jc,setSelectedSubgroupDetail:Vp,getSubgroupRanking:()=>m8(F),getProgressRanking:()=>y8(F),getSubgroupDisplay:v8,generateMemosHTML:Wx,getWeeklyMVP:()=>g8(G),setView:e}):t==="mini_room"&&f?l.jsx(bM,{currentUser:f,setCurrentUser:w,setView:e}):null};Hf.createRoot(document.getElementById("root")).render(l.jsx(Nl.StrictMode,{children:l.jsx(SM,{})}));
