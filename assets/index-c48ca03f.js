(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function kN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bx={exports:{}},ih={},zx={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc=Symbol.for("react.element"),EN=Symbol.for("react.portal"),NN=Symbol.for("react.fragment"),TN=Symbol.for("react.strict_mode"),CN=Symbol.for("react.profiler"),jN=Symbol.for("react.provider"),DN=Symbol.for("react.context"),AN=Symbol.for("react.forward_ref"),RN=Symbol.for("react.suspense"),PN=Symbol.for("react.memo"),ON=Symbol.for("react.lazy"),R1=Symbol.iterator;function LN(t){return t===null||typeof t!="object"?null:(t=R1&&t[R1]||t["@@iterator"],typeof t=="function"?t:null)}var Yx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xx=Object.assign,qx={};function Ja(t,e,n){this.props=t,this.context=e,this.refs=qx,this.updater=n||Yx}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wx(){}Wx.prototype=Ja.prototype;function Am(t,e,n){this.props=t,this.context=e,this.refs=qx,this.updater=n||Yx}var Rm=Am.prototype=new Wx;Rm.constructor=Am;Xx(Rm,Ja.prototype);Rm.isPureReactComponent=!0;var P1=Array.isArray,Hx=Object.prototype.hasOwnProperty,Pm={current:null},Gx={key:!0,ref:!0,__self:!0,__source:!0};function Kx(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Hx.call(e,r)&&!Gx.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:cc,type:t,key:s,ref:a,props:i,_owner:Pm.current}}function $N(t,e){return{$$typeof:cc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Om(t){return typeof t=="object"&&t!==null&&t.$$typeof===cc}function MN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var O1=/\/+/g;function Fp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MN(""+t.key):e.toString(36)}function Au(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case cc:case EN:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Fp(a,0):r,P1(i)?(n="",t!=null&&(n=t.replace(O1,"$&/")+"/"),Au(i,e,n,"",function(u){return u})):i!=null&&(Om(i)&&(i=$N(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(O1,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",P1(t))for(var o=0;o<t.length;o++){s=t[o];var c=r+Fp(s,o);a+=Au(s,e,n,c,i)}else if(c=LN(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=r+Fp(s,o++),a+=Au(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function nu(t,e,n){if(t==null)return t;var r=[],i=0;return Au(t,r,"","",function(s){return e.call(n,s,i++)}),r}function FN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},Ru={transition:null},VN={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Ru,ReactCurrentOwner:Pm};function Qx(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:nu,forEach:function(t,e,n){nu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nu(t,function(){e++}),e},toArray:function(t){return nu(t,function(e){return e})||[]},only:function(t){if(!Om(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Ja;oe.Fragment=NN;oe.Profiler=CN;oe.PureComponent=Am;oe.StrictMode=TN;oe.Suspense=RN;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VN;oe.act=Qx;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xx({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Pm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)Hx.call(e,c)&&!Gx.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:cc,type:t.type,key:i,ref:s,props:r,_owner:a}};oe.createContext=function(t){return t={$$typeof:DN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jN,_context:t},t.Consumer=t};oe.createElement=Kx;oe.createFactory=function(t){var e=Kx.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:AN,render:t}};oe.isValidElement=Om;oe.lazy=function(t){return{$$typeof:ON,_payload:{_status:-1,_result:t},_init:FN}};oe.memo=function(t,e){return{$$typeof:PN,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Ru.transition;Ru.transition={};try{t()}finally{Ru.transition=e}};oe.unstable_act=Qx;oe.useCallback=function(t,e){return Wt.current.useCallback(t,e)};oe.useContext=function(t){return Wt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return Wt.current.useEffect(t,e)};oe.useId=function(){return Wt.current.useId()};oe.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Wt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};oe.useRef=function(t){return Wt.current.useRef(t)};oe.useState=function(t){return Wt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Wt.current.useTransition()};oe.version="18.3.1";zx.exports=oe;var A=zx.exports;const Ff=kN(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UN=A,BN=Symbol.for("react.element"),zN=Symbol.for("react.fragment"),YN=Object.prototype.hasOwnProperty,XN=UN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qN={key:!0,ref:!0,__self:!0,__source:!0};function Jx(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)YN.call(e,r)&&!qN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:BN,type:t,key:s,ref:a,props:i,_owner:XN.current}}ih.Fragment=zN;ih.jsx=Jx;ih.jsxs=Jx;Bx.exports=ih;var l=Bx.exports,Vf={},Zx={exports:{}},mn={},eb={exports:{}},tb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,N){var k=F.length;F.push(N);e:for(;0<k;){var P=k-1>>>1,Y=F[P];if(0<i(Y,N))F[P]=N,F[k]=Y,k=P;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var N=F[0],k=F.pop();if(k!==N){F[0]=k;e:for(var P=0,Y=F.length,V=Y>>>1;P<V;){var te=2*(P+1)-1,de=F[te],ie=te+1,ae=F[ie];if(0>i(de,k))ie<Y&&0>i(ae,de)?(F[P]=ae,F[ie]=k,P=ie):(F[P]=de,F[te]=k,P=te);else if(ie<Y&&0>i(ae,k))F[P]=ae,F[ie]=k,P=ie;else break e}}return N}function i(F,N){var k=F.sortIndex-N.sortIndex;return k!==0?k:F.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,h=null,p=3,f=!1,y=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var N=n(u);N!==null;){if(N.callback===null)r(u);else if(N.startTime<=F)r(u),N.sortIndex=N.expirationTime,e(c,N);else break;N=n(u)}}function b(F){if(v=!1,w(F),!y)if(n(c)!==null)y=!0,re(S);else{var N=n(u);N!==null&&se(b,N.startTime-F)}}function S(F,N){y=!1,v&&(v=!1,m(C),C=-1),f=!0;var k=p;try{for(w(N),h=n(c);h!==null&&(!(h.expirationTime>N)||F&&!W());){var P=h.callback;if(typeof P=="function"){h.callback=null,p=h.priorityLevel;var Y=P(h.expirationTime<=N);N=t.unstable_now(),typeof Y=="function"?h.callback=Y:h===n(c)&&r(c),w(N)}else r(c);h=n(c)}if(h!==null)var V=!0;else{var te=n(u);te!==null&&se(b,te.startTime-N),V=!1}return V}finally{h=null,p=k,f=!1}}var _=!1,T=null,C=-1,$=5,D=-1;function W(){return!(t.unstable_now()-D<$)}function U(){if(T!==null){var F=t.unstable_now();D=F;var N=!0;try{N=T(!0,F)}finally{N?Z():(_=!1,T=null)}}else _=!1}var Z;if(typeof g=="function")Z=function(){g(U)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ue=Q.port2;Q.port1.onmessage=U,Z=function(){ue.postMessage(null)}}else Z=function(){x(U,0)};function re(F){T=F,_||(_=!0,Z())}function se(F,N){C=x(function(){F(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||f||(y=!0,re(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var N=3;break;default:N=p}var k=p;p=N;try{return F()}finally{p=k}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,N){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var k=p;p=F;try{return N()}finally{p=k}},t.unstable_scheduleCallback=function(F,N,k){var P=t.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?P+k:P):k=P,F){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=k+Y,F={id:d++,callback:N,priorityLevel:F,startTime:k,expirationTime:Y,sortIndex:-1},k>P?(F.sortIndex=k,e(u,F),n(c)===null&&F===n(u)&&(v?(m(C),C=-1):v=!0,se(b,k-P))):(F.sortIndex=Y,e(c,F),y||f||(y=!0,re(S))),F},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(F){var N=p;return function(){var k=p;p=N;try{return F.apply(this,arguments)}finally{p=k}}}})(tb);eb.exports=tb;var WN=eb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HN=A,pn=WN;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nb=new Set,wl={};function Os(t,e){ja(t,e),ja(t+"Capture",e)}function ja(t,e){for(wl[t]=e,t=0;t<e.length;t++)nb.add(e[t])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uf=Object.prototype.hasOwnProperty,GN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L1={},$1={};function KN(t){return Uf.call($1,t)?!0:Uf.call(L1,t)?!1:GN.test(t)?$1[t]=!0:(L1[t]=!0,!1)}function QN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JN(t,e,n,r){if(e===null||typeof e>"u"||QN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lm=/[\-:]([a-z])/g;function $m(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lm,$m);Tt[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lm,$m);Tt[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lm,$m);Tt[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mm(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JN(e,n,i,r)&&(n=null),r||i===null?KN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $r=HN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ru=Symbol.for("react.element"),ta=Symbol.for("react.portal"),na=Symbol.for("react.fragment"),Fm=Symbol.for("react.strict_mode"),Bf=Symbol.for("react.profiler"),rb=Symbol.for("react.provider"),ib=Symbol.for("react.context"),Vm=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Yf=Symbol.for("react.suspense_list"),Um=Symbol.for("react.memo"),Kr=Symbol.for("react.lazy"),sb=Symbol.for("react.offscreen"),M1=Symbol.iterator;function _o(t){return t===null||typeof t!="object"?null:(t=M1&&t[M1]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,Vp;function Uo(t){if(Vp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vp=e&&e[1]||""}return`
`+Vp+t}var Up=!1;function Bp(t,e){if(!t||Up)return"";Up=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{Up=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Uo(t):""}function ZN(t){switch(t.tag){case 5:return Uo(t.type);case 16:return Uo("Lazy");case 13:return Uo("Suspense");case 19:return Uo("SuspenseList");case 0:case 2:case 15:return t=Bp(t.type,!1),t;case 11:return t=Bp(t.type.render,!1),t;case 1:return t=Bp(t.type,!0),t;default:return""}}function Xf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case na:return"Fragment";case ta:return"Portal";case Bf:return"Profiler";case Fm:return"StrictMode";case zf:return"Suspense";case Yf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ib:return(t.displayName||"Context")+".Consumer";case rb:return(t._context.displayName||"Context")+".Provider";case Vm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Um:return e=t.displayName||null,e!==null?e:Xf(t.type)||"Memo";case Kr:e=t._payload,t=t._init;try{return Xf(t(e))}catch{}}return null}function e4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xf(e);case 8:return e===Fm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ab(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t4(t){var e=ab(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function iu(t){t._valueTracker||(t._valueTracker=t4(t))}function ob(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ab(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qf(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function F1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lb(t,e){e=e.checked,e!=null&&Mm(t,"checked",e,!1)}function Wf(t,e){lb(t,e);var n=mi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hf(t,e.type,mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function V1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hf(t,e,n){(e!=="number"||rd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bo=Array.isArray;function ga(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Gf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function U1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Bo(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mi(n)}}function cb(t,e){var n=mi(e.value),r=mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function B1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ub(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ub(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var su,db=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(su=su||document.createElement("div"),su.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=su.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n4=["Webkit","ms","Moz","O"];Object.keys(Zo).forEach(function(t){n4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zo[e]=Zo[t]})});function hb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zo.hasOwnProperty(t)&&Zo[t]?(""+e).trim():e+"px"}function pb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=hb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var r4=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qf(t,e){if(e){if(r4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Jf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zf=null;function Bm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eg=null,ma=null,ya=null;function z1(t){if(t=hc(t)){if(typeof eg!="function")throw Error(O(280));var e=t.stateNode;e&&(e=ch(e),eg(t.stateNode,t.type,e))}}function fb(t){ma?ya?ya.push(t):ya=[t]:ma=t}function gb(){if(ma){var t=ma,e=ya;if(ya=ma=null,z1(t),e)for(t=0;t<e.length;t++)z1(e[t])}}function mb(t,e){return t(e)}function yb(){}var zp=!1;function wb(t,e,n){if(zp)return t(e,n);zp=!0;try{return mb(t,e,n)}finally{zp=!1,(ma!==null||ya!==null)&&(yb(),gb())}}function xl(t,e){var n=t.stateNode;if(n===null)return null;var r=ch(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var tg=!1;if(Cr)try{var So={};Object.defineProperty(So,"passive",{get:function(){tg=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{tg=!1}function i4(t,e,n,r,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var el=!1,id=null,sd=!1,ng=null,s4={onError:function(t){el=!0,id=t}};function a4(t,e,n,r,i,s,a,o,c){el=!1,id=null,i4.apply(s4,arguments)}function o4(t,e,n,r,i,s,a,o,c){if(a4.apply(this,arguments),el){if(el){var u=id;el=!1,id=null}else throw Error(O(198));sd||(sd=!0,ng=u)}}function Ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Y1(t){if(Ls(t)!==t)throw Error(O(188))}function l4(t){var e=t.alternate;if(!e){if(e=Ls(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Y1(i),t;if(s===r)return Y1(i),e;s=s.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function xb(t){return t=l4(t),t!==null?bb(t):null}function bb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bb(t);if(e!==null)return e;t=t.sibling}return null}var _b=pn.unstable_scheduleCallback,X1=pn.unstable_cancelCallback,c4=pn.unstable_shouldYield,u4=pn.unstable_requestPaint,He=pn.unstable_now,d4=pn.unstable_getCurrentPriorityLevel,zm=pn.unstable_ImmediatePriority,Sb=pn.unstable_UserBlockingPriority,ad=pn.unstable_NormalPriority,h4=pn.unstable_LowPriority,Ib=pn.unstable_IdlePriority,sh=null,sr=null;function p4(t){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(sh,t,void 0,(t.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:m4,f4=Math.log,g4=Math.LN2;function m4(t){return t>>>=0,t===0?32:31-(f4(t)/g4|0)|0}var au=64,ou=4194304;function zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function od(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=zo(o):(s&=a,s!==0&&(r=zo(s)))}else a=n&~i,a!==0?r=zo(a):s!==0&&(r=zo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-On(e),i=1<<n,r|=t[n],e&=~i;return r}function y4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-On(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=y4(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}}function rg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kb(){var t=au;return au<<=1,!(au&4194240)&&(au=64),t}function Yp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-On(e),t[e]=n}function v4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-On(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ym(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-On(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function Eb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nb,Xm,Tb,Cb,jb,ig=!1,lu=[],ai=null,oi=null,li=null,bl=new Map,_l=new Map,Jr=[],x4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q1(t,e){switch(t){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(e.pointerId)}}function Io(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=hc(e),e!==null&&Xm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function b4(t,e,n,r,i){switch(e){case"focusin":return ai=Io(ai,t,e,n,r,i),!0;case"dragenter":return oi=Io(oi,t,e,n,r,i),!0;case"mouseover":return li=Io(li,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return bl.set(s,Io(bl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,_l.set(s,Io(_l.get(s)||null,t,e,n,r,i)),!0}return!1}function Db(t){var e=ns(t.target);if(e!==null){var n=Ls(e);if(n!==null){if(e=n.tag,e===13){if(e=vb(n),e!==null){t.blockedOn=e,jb(t.priority,function(){Tb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zf=r,n.target.dispatchEvent(r),Zf=null}else return e=hc(n),e!==null&&Xm(e),t.blockedOn=n,!1;e.shift()}return!0}function W1(t,e,n){Pu(t)&&n.delete(e)}function _4(){ig=!1,ai!==null&&Pu(ai)&&(ai=null),oi!==null&&Pu(oi)&&(oi=null),li!==null&&Pu(li)&&(li=null),bl.forEach(W1),_l.forEach(W1)}function ko(t,e){t.blockedOn===e&&(t.blockedOn=null,ig||(ig=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,_4)))}function Sl(t){function e(i){return ko(i,t)}if(0<lu.length){ko(lu[0],t);for(var n=1;n<lu.length;n++){var r=lu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ai!==null&&ko(ai,t),oi!==null&&ko(oi,t),li!==null&&ko(li,t),bl.forEach(e),_l.forEach(e),n=0;n<Jr.length;n++)r=Jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)Db(n),n.blockedOn===null&&Jr.shift()}var wa=$r.ReactCurrentBatchConfig,ld=!0;function S4(t,e,n,r){var i=be,s=wa.transition;wa.transition=null;try{be=1,qm(t,e,n,r)}finally{be=i,wa.transition=s}}function I4(t,e,n,r){var i=be,s=wa.transition;wa.transition=null;try{be=4,qm(t,e,n,r)}finally{be=i,wa.transition=s}}function qm(t,e,n,r){if(ld){var i=sg(t,e,n,r);if(i===null)ef(t,e,r,cd,n),q1(t,r);else if(b4(i,t,e,n,r))r.stopPropagation();else if(q1(t,r),e&4&&-1<x4.indexOf(t)){for(;i!==null;){var s=hc(i);if(s!==null&&Nb(s),s=sg(t,e,n,r),s===null&&ef(t,e,r,cd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ef(t,e,r,null,n)}}var cd=null;function sg(t,e,n,r){if(cd=null,t=Bm(r),t=ns(t),t!==null)if(e=Ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cd=t,null}function Ab(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(d4()){case zm:return 1;case Sb:return 4;case ad:case h4:return 16;case Ib:return 536870912;default:return 16}default:return 16}}var ni=null,Wm=null,Ou=null;function Rb(){if(Ou)return Ou;var t,e=Wm,n=e.length,r,i="value"in ni?ni.value:ni.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Ou=i.slice(t,1<r?1-r:void 0)}function Lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cu(){return!0}function H1(){return!1}function yn(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cu:H1,this.isPropagationStopped=H1,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cu)},persist:function(){},isPersistent:cu}),e}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hm=yn(Za),dc=Ve({},Za,{view:0,detail:0}),k4=yn(dc),Xp,qp,Eo,ah=Ve({},dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eo&&(Eo&&t.type==="mousemove"?(Xp=t.screenX-Eo.screenX,qp=t.screenY-Eo.screenY):qp=Xp=0,Eo=t),Xp)},movementY:function(t){return"movementY"in t?t.movementY:qp}}),G1=yn(ah),E4=Ve({},ah,{dataTransfer:0}),N4=yn(E4),T4=Ve({},dc,{relatedTarget:0}),Wp=yn(T4),C4=Ve({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),j4=yn(C4),D4=Ve({},Za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A4=yn(D4),R4=Ve({},Za,{data:0}),K1=yn(R4),P4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=L4[t])?!!e[t]:!1}function Gm(){return $4}var M4=Ve({},dc,{key:function(t){if(t.key){var e=P4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?O4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(t){return t.type==="keypress"?Lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F4=yn(M4),V4=Ve({},ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Q1=yn(V4),U4=Ve({},dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),B4=yn(U4),z4=Ve({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y4=yn(z4),X4=Ve({},ah,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q4=yn(X4),W4=[9,13,27,32],Km=Cr&&"CompositionEvent"in window,tl=null;Cr&&"documentMode"in document&&(tl=document.documentMode);var H4=Cr&&"TextEvent"in window&&!tl,Pb=Cr&&(!Km||tl&&8<tl&&11>=tl),J1=String.fromCharCode(32),Z1=!1;function Ob(t,e){switch(t){case"keyup":return W4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ra=!1;function G4(t,e){switch(t){case"compositionend":return Lb(e);case"keypress":return e.which!==32?null:(Z1=!0,J1);case"textInput":return t=e.data,t===J1&&Z1?null:t;default:return null}}function K4(t,e){if(ra)return t==="compositionend"||!Km&&Ob(t,e)?(t=Rb(),Ou=Wm=ni=null,ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pb&&e.locale!=="ko"?null:e.data;default:return null}}var Q4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ew(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Q4[t.type]:e==="textarea"}function $b(t,e,n,r){fb(r),e=ud(e,"onChange"),0<e.length&&(n=new Hm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nl=null,Il=null;function J4(t){Hb(t,0)}function oh(t){var e=aa(t);if(ob(e))return t}function Z4(t,e){if(t==="change")return e}var Mb=!1;if(Cr){var Hp;if(Cr){var Gp="oninput"in document;if(!Gp){var tw=document.createElement("div");tw.setAttribute("oninput","return;"),Gp=typeof tw.oninput=="function"}Hp=Gp}else Hp=!1;Mb=Hp&&(!document.documentMode||9<document.documentMode)}function nw(){nl&&(nl.detachEvent("onpropertychange",Fb),Il=nl=null)}function Fb(t){if(t.propertyName==="value"&&oh(Il)){var e=[];$b(e,Il,t,Bm(t)),wb(J4,e)}}function eT(t,e,n){t==="focusin"?(nw(),nl=e,Il=n,nl.attachEvent("onpropertychange",Fb)):t==="focusout"&&nw()}function tT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oh(Il)}function nT(t,e){if(t==="click")return oh(e)}function rT(t,e){if(t==="input"||t==="change")return oh(e)}function iT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $n=typeof Object.is=="function"?Object.is:iT;function kl(t,e){if($n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Uf.call(e,i)||!$n(t[i],e[i]))return!1}return!0}function rw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iw(t,e){var n=rw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rw(n)}}function Vb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ub(){for(var t=window,e=rd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rd(t.document)}return e}function Qm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sT(t){var e=Ub(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vb(n.ownerDocument.documentElement,n)){if(r!==null&&Qm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=iw(n,s);var a=iw(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aT=Cr&&"documentMode"in document&&11>=document.documentMode,ia=null,ag=null,rl=null,og=!1;function sw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;og||ia==null||ia!==rd(r)||(r=ia,"selectionStart"in r&&Qm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rl&&kl(rl,r)||(rl=r,r=ud(ag,"onSelect"),0<r.length&&(e=new Hm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ia)))}function uu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sa={animationend:uu("Animation","AnimationEnd"),animationiteration:uu("Animation","AnimationIteration"),animationstart:uu("Animation","AnimationStart"),transitionend:uu("Transition","TransitionEnd")},Kp={},Bb={};Cr&&(Bb=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function lh(t){if(Kp[t])return Kp[t];if(!sa[t])return t;var e=sa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Bb)return Kp[t]=e[n];return t}var zb=lh("animationend"),Yb=lh("animationiteration"),Xb=lh("animationstart"),qb=lh("transitionend"),Wb=new Map,aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(t,e){Wb.set(t,e),Os(e,[t])}for(var Qp=0;Qp<aw.length;Qp++){var Jp=aw[Qp],oT=Jp.toLowerCase(),lT=Jp[0].toUpperCase()+Jp.slice(1);Di(oT,"on"+lT)}Di(zb,"onAnimationEnd");Di(Yb,"onAnimationIteration");Di(Xb,"onAnimationStart");Di("dblclick","onDoubleClick");Di("focusin","onFocus");Di("focusout","onBlur");Di(qb,"onTransitionEnd");ja("onMouseEnter",["mouseout","mouseover"]);ja("onMouseLeave",["mouseout","mouseover"]);ja("onPointerEnter",["pointerout","pointerover"]);ja("onPointerLeave",["pointerout","pointerover"]);Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Os("onBeforeInput",["compositionend","keypress","textInput","paste"]);Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function ow(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,o4(r,e,void 0,t),t.currentTarget=null}function Hb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;ow(i,o,u),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;ow(i,o,u),s=c}}}if(sd)throw t=ng,sd=!1,ng=null,t}function Ce(t,e){var n=e[hg];n===void 0&&(n=e[hg]=new Set);var r=t+"__bubble";n.has(r)||(Gb(e,t,2,!1),n.add(r))}function Zp(t,e,n){var r=0;e&&(r|=4),Gb(n,t,r,e)}var du="_reactListening"+Math.random().toString(36).slice(2);function El(t){if(!t[du]){t[du]=!0,nb.forEach(function(n){n!=="selectionchange"&&(cT.has(n)||Zp(n,!1,t),Zp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[du]||(e[du]=!0,Zp("selectionchange",!1,e))}}function Gb(t,e,n,r){switch(Ab(e)){case 1:var i=S4;break;case 4:i=I4;break;default:i=qm}n=i.bind(null,e,n,t),i=void 0,!tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ef(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=ns(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}wb(function(){var u=s,d=Bm(n),h=[];e:{var p=Wb.get(t);if(p!==void 0){var f=Hm,y=t;switch(t){case"keypress":if(Lu(n)===0)break e;case"keydown":case"keyup":f=F4;break;case"focusin":y="focus",f=Wp;break;case"focusout":y="blur",f=Wp;break;case"beforeblur":case"afterblur":f=Wp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=G1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=N4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=B4;break;case zb:case Yb:case Xb:f=j4;break;case qb:f=Y4;break;case"scroll":f=k4;break;case"wheel":f=q4;break;case"copy":case"cut":case"paste":f=A4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Q1}var v=(e&4)!==0,x=!v&&t==="scroll",m=v?p!==null?p+"Capture":null:p;v=[];for(var g=u,w;g!==null;){w=g;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=xl(g,m),b!=null&&v.push(Nl(g,b,w)))),x)break;g=g.return}0<v.length&&(p=new f(p,y,null,n,d),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==Zf&&(y=n.relatedTarget||n.fromElement)&&(ns(y)||y[jr]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(y=n.relatedTarget||n.toElement,f=u,y=y?ns(y):null,y!==null&&(x=Ls(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=u),f!==y)){if(v=G1,b="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Q1,b="onPointerLeave",m="onPointerEnter",g="pointer"),x=f==null?p:aa(f),w=y==null?p:aa(y),p=new v(b,g+"leave",f,n,d),p.target=x,p.relatedTarget=w,b=null,ns(d)===u&&(v=new v(m,g+"enter",y,n,d),v.target=w,v.relatedTarget=x,b=v),x=b,f&&y)t:{for(v=f,m=y,g=0,w=v;w;w=Ws(w))g++;for(w=0,b=m;b;b=Ws(b))w++;for(;0<g-w;)v=Ws(v),g--;for(;0<w-g;)m=Ws(m),w--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=Ws(v),m=Ws(m)}v=null}else v=null;f!==null&&lw(h,p,f,v,!1),y!==null&&x!==null&&lw(h,x,y,v,!0)}}e:{if(p=u?aa(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var S=Z4;else if(ew(p))if(Mb)S=rT;else{S=tT;var _=eT}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=nT);if(S&&(S=S(t,u))){$b(h,S,n,d);break e}_&&_(t,p,u),t==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&Hf(p,"number",p.value)}switch(_=u?aa(u):window,t){case"focusin":(ew(_)||_.contentEditable==="true")&&(ia=_,ag=u,rl=null);break;case"focusout":rl=ag=ia=null;break;case"mousedown":og=!0;break;case"contextmenu":case"mouseup":case"dragend":og=!1,sw(h,n,d);break;case"selectionchange":if(aT)break;case"keydown":case"keyup":sw(h,n,d)}var T;if(Km)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ra?Ob(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Pb&&n.locale!=="ko"&&(ra||C!=="onCompositionStart"?C==="onCompositionEnd"&&ra&&(T=Rb()):(ni=d,Wm="value"in ni?ni.value:ni.textContent,ra=!0)),_=ud(u,C),0<_.length&&(C=new K1(C,t,null,n,d),h.push({event:C,listeners:_}),T?C.data=T:(T=Lb(n),T!==null&&(C.data=T)))),(T=H4?G4(t,n):K4(t,n))&&(u=ud(u,"onBeforeInput"),0<u.length&&(d=new K1("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=T))}Hb(h,e)})}function Nl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ud(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=xl(t,n),s!=null&&r.unshift(Nl(t,s,i)),s=xl(t,e),s!=null&&r.push(Nl(t,s,i))),t=t.return}return r}function Ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lw(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,i?(c=xl(n,s),c!=null&&a.unshift(Nl(n,c,o))):i||(c=xl(n,s),c!=null&&a.push(Nl(n,c,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var uT=/\r\n?/g,dT=/\u0000|\uFFFD/g;function cw(t){return(typeof t=="string"?t:""+t).replace(uT,`
`).replace(dT,"")}function hu(t,e,n){if(e=cw(e),cw(t)!==e&&n)throw Error(O(425))}function dd(){}var lg=null,cg=null;function ug(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dg=typeof setTimeout=="function"?setTimeout:void 0,hT=typeof clearTimeout=="function"?clearTimeout:void 0,uw=typeof Promise=="function"?Promise:void 0,pT=typeof queueMicrotask=="function"?queueMicrotask:typeof uw<"u"?function(t){return uw.resolve(null).then(t).catch(fT)}:dg;function fT(t){setTimeout(function(){throw t})}function tf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Sl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Sl(e)}function ci(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var eo=Math.random().toString(36).slice(2),Hn="__reactFiber$"+eo,Tl="__reactProps$"+eo,jr="__reactContainer$"+eo,hg="__reactEvents$"+eo,gT="__reactListeners$"+eo,mT="__reactHandles$"+eo;function ns(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dw(t);t!==null;){if(n=t[Hn])return n;t=dw(t)}return e}t=n,n=t.parentNode}return null}function hc(t){return t=t[Hn]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function ch(t){return t[Tl]||null}var pg=[],oa=-1;function Ai(t){return{current:t}}function Ae(t){0>oa||(t.current=pg[oa],pg[oa]=null,oa--)}function Ne(t,e){oa++,pg[oa]=t.current,t.current=e}var yi={},Mt=Ai(yi),nn=Ai(!1),ys=yi;function Da(t,e){var n=t.type.contextTypes;if(!n)return yi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function rn(t){return t=t.childContextTypes,t!=null}function hd(){Ae(nn),Ae(Mt)}function hw(t,e,n){if(Mt.current!==yi)throw Error(O(168));Ne(Mt,e),Ne(nn,n)}function Kb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,e4(t)||"Unknown",i));return Ve({},n,r)}function pd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yi,ys=Mt.current,Ne(Mt,t),Ne(nn,nn.current),!0}function pw(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=Kb(t,e,ys),r.__reactInternalMemoizedMergedChildContext=t,Ae(nn),Ae(Mt),Ne(Mt,t)):Ae(nn),Ne(nn,n)}var vr=null,uh=!1,nf=!1;function Qb(t){vr===null?vr=[t]:vr.push(t)}function yT(t){uh=!0,Qb(t)}function Ri(){if(!nf&&vr!==null){nf=!0;var t=0,e=be;try{var n=vr;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vr=null,uh=!1}catch(i){throw vr!==null&&(vr=vr.slice(t+1)),_b(zm,Ri),i}finally{be=e,nf=!1}}return null}var la=[],ca=0,fd=null,gd=0,vn=[],xn=0,ws=null,xr=1,br="";function Wi(t,e){la[ca++]=gd,la[ca++]=fd,fd=t,gd=e}function Jb(t,e,n){vn[xn++]=xr,vn[xn++]=br,vn[xn++]=ws,ws=t;var r=xr;t=br;var i=32-On(r)-1;r&=~(1<<i),n+=1;var s=32-On(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,xr=1<<32-On(e)+i|n<<i|r,br=s+t}else xr=1<<s|n<<i|r,br=t}function Jm(t){t.return!==null&&(Wi(t,1),Jb(t,1,0))}function Zm(t){for(;t===fd;)fd=la[--ca],la[ca]=null,gd=la[--ca],la[ca]=null;for(;t===ws;)ws=vn[--xn],vn[xn]=null,br=vn[--xn],vn[xn]=null,xr=vn[--xn],vn[xn]=null}var hn=null,un=null,Oe=!1,Rn=null;function Zb(t,e){var n=_n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,un=ci(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ws!==null?{id:xr,overflow:br}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,un=null,!0):!1;default:return!1}}function fg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gg(t){if(Oe){var e=un;if(e){var n=e;if(!fw(t,e)){if(fg(t))throw Error(O(418));e=ci(n.nextSibling);var r=hn;e&&fw(t,e)?Zb(r,n):(t.flags=t.flags&-4097|2,Oe=!1,hn=t)}}else{if(fg(t))throw Error(O(418));t.flags=t.flags&-4097|2,Oe=!1,hn=t}}}function gw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function pu(t){if(t!==hn)return!1;if(!Oe)return gw(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ug(t.type,t.memoizedProps)),e&&(e=un)){if(fg(t))throw e_(),Error(O(418));for(;e;)Zb(t,e),e=ci(e.nextSibling)}if(gw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=ci(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=hn?ci(t.stateNode.nextSibling):null;return!0}function e_(){for(var t=un;t;)t=ci(t.nextSibling)}function Aa(){un=hn=null,Oe=!1}function ey(t){Rn===null?Rn=[t]:Rn.push(t)}var wT=$r.ReactCurrentBatchConfig;function No(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function fu(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mw(t){var e=t._init;return e(t._payload)}function t_(t){function e(m,g){if(t){var w=m.deletions;w===null?(m.deletions=[g],m.flags|=16):w.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=pi(m,g),m.index=0,m.sibling=null,m}function s(m,g,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<g?(m.flags|=2,g):w):(m.flags|=2,g)):(m.flags|=1048576,g)}function a(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,g,w,b){return g===null||g.tag!==6?(g=uf(w,m.mode,b),g.return=m,g):(g=i(g,w),g.return=m,g)}function c(m,g,w,b){var S=w.type;return S===na?d(m,g,w.props.children,b,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Kr&&mw(S)===g.type)?(b=i(g,w.props),b.ref=No(m,g,w),b.return=m,b):(b=zu(w.type,w.key,w.props,null,m.mode,b),b.ref=No(m,g,w),b.return=m,b)}function u(m,g,w,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=df(w,m.mode,b),g.return=m,g):(g=i(g,w.children||[]),g.return=m,g)}function d(m,g,w,b,S){return g===null||g.tag!==7?(g=ds(w,m.mode,b,S),g.return=m,g):(g=i(g,w),g.return=m,g)}function h(m,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=uf(""+g,m.mode,w),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ru:return w=zu(g.type,g.key,g.props,null,m.mode,w),w.ref=No(m,null,g),w.return=m,w;case ta:return g=df(g,m.mode,w),g.return=m,g;case Kr:var b=g._init;return h(m,b(g._payload),w)}if(Bo(g)||_o(g))return g=ds(g,m.mode,w,null),g.return=m,g;fu(m,g)}return null}function p(m,g,w,b){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:o(m,g,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ru:return w.key===S?c(m,g,w,b):null;case ta:return w.key===S?u(m,g,w,b):null;case Kr:return S=w._init,p(m,g,S(w._payload),b)}if(Bo(w)||_o(w))return S!==null?null:d(m,g,w,b,null);fu(m,w)}return null}function f(m,g,w,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,o(g,m,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ru:return m=m.get(b.key===null?w:b.key)||null,c(g,m,b,S);case ta:return m=m.get(b.key===null?w:b.key)||null,u(g,m,b,S);case Kr:var _=b._init;return f(m,g,w,_(b._payload),S)}if(Bo(b)||_o(b))return m=m.get(w)||null,d(g,m,b,S,null);fu(g,b)}return null}function y(m,g,w,b){for(var S=null,_=null,T=g,C=g=0,$=null;T!==null&&C<w.length;C++){T.index>C?($=T,T=null):$=T.sibling;var D=p(m,T,w[C],b);if(D===null){T===null&&(T=$);break}t&&T&&D.alternate===null&&e(m,T),g=s(D,g,C),_===null?S=D:_.sibling=D,_=D,T=$}if(C===w.length)return n(m,T),Oe&&Wi(m,C),S;if(T===null){for(;C<w.length;C++)T=h(m,w[C],b),T!==null&&(g=s(T,g,C),_===null?S=T:_.sibling=T,_=T);return Oe&&Wi(m,C),S}for(T=r(m,T);C<w.length;C++)$=f(T,m,C,w[C],b),$!==null&&(t&&$.alternate!==null&&T.delete($.key===null?C:$.key),g=s($,g,C),_===null?S=$:_.sibling=$,_=$);return t&&T.forEach(function(W){return e(m,W)}),Oe&&Wi(m,C),S}function v(m,g,w,b){var S=_o(w);if(typeof S!="function")throw Error(O(150));if(w=S.call(w),w==null)throw Error(O(151));for(var _=S=null,T=g,C=g=0,$=null,D=w.next();T!==null&&!D.done;C++,D=w.next()){T.index>C?($=T,T=null):$=T.sibling;var W=p(m,T,D.value,b);if(W===null){T===null&&(T=$);break}t&&T&&W.alternate===null&&e(m,T),g=s(W,g,C),_===null?S=W:_.sibling=W,_=W,T=$}if(D.done)return n(m,T),Oe&&Wi(m,C),S;if(T===null){for(;!D.done;C++,D=w.next())D=h(m,D.value,b),D!==null&&(g=s(D,g,C),_===null?S=D:_.sibling=D,_=D);return Oe&&Wi(m,C),S}for(T=r(m,T);!D.done;C++,D=w.next())D=f(T,m,C,D.value,b),D!==null&&(t&&D.alternate!==null&&T.delete(D.key===null?C:D.key),g=s(D,g,C),_===null?S=D:_.sibling=D,_=D);return t&&T.forEach(function(U){return e(m,U)}),Oe&&Wi(m,C),S}function x(m,g,w,b){if(typeof w=="object"&&w!==null&&w.type===na&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ru:e:{for(var S=w.key,_=g;_!==null;){if(_.key===S){if(S=w.type,S===na){if(_.tag===7){n(m,_.sibling),g=i(_,w.props.children),g.return=m,m=g;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Kr&&mw(S)===_.type){n(m,_.sibling),g=i(_,w.props),g.ref=No(m,_,w),g.return=m,m=g;break e}n(m,_);break}else e(m,_);_=_.sibling}w.type===na?(g=ds(w.props.children,m.mode,b,w.key),g.return=m,m=g):(b=zu(w.type,w.key,w.props,null,m.mode,b),b.ref=No(m,g,w),b.return=m,m=b)}return a(m);case ta:e:{for(_=w.key;g!==null;){if(g.key===_)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(m,g.sibling),g=i(g,w.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=df(w,m.mode,b),g.return=m,m=g}return a(m);case Kr:return _=w._init,x(m,g,_(w._payload),b)}if(Bo(w))return y(m,g,w,b);if(_o(w))return v(m,g,w,b);fu(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,w),g.return=m,m=g):(n(m,g),g=uf(w,m.mode,b),g.return=m,m=g),a(m)):n(m,g)}return x}var Ra=t_(!0),n_=t_(!1),md=Ai(null),yd=null,ua=null,ty=null;function ny(){ty=ua=yd=null}function ry(t){var e=md.current;Ae(md),t._currentValue=e}function mg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function va(t,e){yd=t,ty=ua=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jt=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if(ty!==t)if(t={context:t,memoizedValue:e,next:null},ua===null){if(yd===null)throw Error(O(308));ua=t,yd.dependencies={lanes:0,firstContext:t}}else ua=ua.next=t;return e}var rs=null;function iy(t){rs===null?rs=[t]:rs.push(t)}function r_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,iy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Dr(t,r)}function Dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qr=!1;function sy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Dr(t,n)}return i=r.interleaved,i===null?(e.next=e,iy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Dr(t,n)}function $u(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ym(t,n)}}function yw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wd(t,e,n,r){var i=t.updateQueue;Qr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(s!==null){var h=i.baseState;a=0,d=u=c=null,o=s;do{var p=o.lane,f=o.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,v=o;switch(p=e,f=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(f,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(f,h,p):y,p==null)break e;h=Ve({},h,p);break e;case 2:Qr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=f,c=h):d=d.next=f,a|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xs|=a,t.lanes=a,t.memoizedState=h}}function ww(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var pc={},ar=Ai(pc),Cl=Ai(pc),jl=Ai(pc);function is(t){if(t===pc)throw Error(O(174));return t}function ay(t,e){switch(Ne(jl,e),Ne(Cl,t),Ne(ar,pc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kf(e,t)}Ae(ar),Ne(ar,e)}function Pa(){Ae(ar),Ae(Cl),Ae(jl)}function s_(t){is(jl.current);var e=is(ar.current),n=Kf(e,t.type);e!==n&&(Ne(Cl,t),Ne(ar,n))}function oy(t){Cl.current===t&&(Ae(ar),Ae(Cl))}var Me=Ai(0);function vd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rf=[];function ly(){for(var t=0;t<rf.length;t++)rf[t]._workInProgressVersionPrimary=null;rf.length=0}var Mu=$r.ReactCurrentDispatcher,sf=$r.ReactCurrentBatchConfig,vs=0,Fe=null,st=null,ut=null,xd=!1,il=!1,Dl=0,vT=0;function Dt(){throw Error(O(321))}function cy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$n(t[n],e[n]))return!1;return!0}function uy(t,e,n,r,i,s){if(vs=s,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mu.current=t===null||t.memoizedState===null?ST:IT,t=n(r,i),il){s=0;do{if(il=!1,Dl=0,25<=s)throw Error(O(301));s+=1,ut=st=null,e.updateQueue=null,Mu.current=kT,t=n(r,i)}while(il)}if(Mu.current=bd,e=st!==null&&st.next!==null,vs=0,ut=st=Fe=null,xd=!1,e)throw Error(O(300));return t}function dy(){var t=Dl!==0;return Dl=0,t}function Wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Fe.memoizedState=ut=t:ut=ut.next=t,ut}function En(){if(st===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=ut===null?Fe.memoizedState:ut.next;if(e!==null)ut=e,st=t;else{if(t===null)throw Error(O(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ut===null?Fe.memoizedState=ut=t:ut=ut.next=t}return ut}function Al(t,e){return typeof e=="function"?e(t):e}function af(t){var e=En(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=st,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,c=null,u=s;do{var d=u.lane;if((vs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,a=r):c=c.next=h,Fe.lanes|=d,xs|=d}u=u.next}while(u!==null&&u!==s);c===null?a=r:c.next=o,$n(r,e.memoizedState)||(Jt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Fe.lanes|=s,xs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function of(t){var e=En(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);$n(s,e.memoizedState)||(Jt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function a_(){}function o_(t,e){var n=Fe,r=En(),i=e(),s=!$n(r.memoizedState,i);if(s&&(r.memoizedState=i,Jt=!0),r=r.queue,hy(u_.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,Rl(9,c_.bind(null,n,r,i,e),void 0,null),ht===null)throw Error(O(349));vs&30||l_(n,e,i)}return i}function l_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function c_(t,e,n,r){e.value=n,e.getSnapshot=r,d_(e)&&h_(t)}function u_(t,e,n){return n(function(){d_(e)&&h_(t)})}function d_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$n(t,n)}catch{return!0}}function h_(t){var e=Dr(t,1);e!==null&&Ln(e,t,1,-1)}function vw(t){var e=Wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:t},e.queue=t,t=t.dispatch=_T.bind(null,Fe,t),[e.memoizedState,t]}function Rl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function p_(){return En().memoizedState}function Fu(t,e,n,r){var i=Wn();Fe.flags|=t,i.memoizedState=Rl(1|e,n,void 0,r===void 0?null:r)}function dh(t,e,n,r){var i=En();r=r===void 0?null:r;var s=void 0;if(st!==null){var a=st.memoizedState;if(s=a.destroy,r!==null&&cy(r,a.deps)){i.memoizedState=Rl(e,n,s,r);return}}Fe.flags|=t,i.memoizedState=Rl(1|e,n,s,r)}function xw(t,e){return Fu(8390656,8,t,e)}function hy(t,e){return dh(2048,8,t,e)}function f_(t,e){return dh(4,2,t,e)}function g_(t,e){return dh(4,4,t,e)}function m_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function y_(t,e,n){return n=n!=null?n.concat([t]):null,dh(4,4,m_.bind(null,e,t),n)}function py(){}function w_(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v_(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function x_(t,e,n){return vs&21?($n(n,e)||(n=kb(),Fe.lanes|=n,xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jt=!0),t.memoizedState=n)}function xT(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=sf.transition;sf.transition={};try{t(!1),e()}finally{be=n,sf.transition=r}}function b_(){return En().memoizedState}function bT(t,e,n){var r=hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},__(t))S_(e,n);else if(n=r_(t,e,n,r),n!==null){var i=Yt();Ln(n,t,r,i),I_(n,e,r)}}function _T(t,e,n){var r=hi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(__(t))S_(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,$n(o,a)){var c=e.interleaved;c===null?(i.next=i,iy(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=r_(t,e,i,r),n!==null&&(i=Yt(),Ln(n,t,r,i),I_(n,e,r))}}function __(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function S_(t,e){il=xd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function I_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ym(t,n)}}var bd={readContext:kn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},ST={readContext:kn,useCallback:function(t,e){return Wn().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:xw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fu(4194308,4,m_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fu(4,2,t,e)},useMemo:function(t,e){var n=Wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bT.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=Wn();return t={current:t},e.memoizedState=t},useState:vw,useDebugValue:py,useDeferredValue:function(t){return Wn().memoizedState=t},useTransition:function(){var t=vw(!1),e=t[0];return t=xT.bind(null,t[1]),Wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,i=Wn();if(Oe){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),ht===null)throw Error(O(349));vs&30||l_(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,xw(u_.bind(null,r,s,t),[t]),r.flags|=2048,Rl(9,c_.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Wn(),e=ht.identifierPrefix;if(Oe){var n=br,r=xr;n=(r&~(1<<32-On(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IT={readContext:kn,useCallback:w_,useContext:kn,useEffect:hy,useImperativeHandle:y_,useInsertionEffect:f_,useLayoutEffect:g_,useMemo:v_,useReducer:af,useRef:p_,useState:function(){return af(Al)},useDebugValue:py,useDeferredValue:function(t){var e=En();return x_(e,st.memoizedState,t)},useTransition:function(){var t=af(Al)[0],e=En().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:o_,useId:b_,unstable_isNewReconciler:!1},kT={readContext:kn,useCallback:w_,useContext:kn,useEffect:hy,useImperativeHandle:y_,useInsertionEffect:f_,useLayoutEffect:g_,useMemo:v_,useReducer:of,useRef:p_,useState:function(){return of(Al)},useDebugValue:py,useDeferredValue:function(t){var e=En();return st===null?e.memoizedState=t:x_(e,st.memoizedState,t)},useTransition:function(){var t=of(Al)[0],e=En().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:o_,useId:b_,unstable_isNewReconciler:!1};function Dn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hh={isMounted:function(t){return(t=t._reactInternals)?Ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=hi(t),s=Er(r,i);s.payload=e,n!=null&&(s.callback=n),e=ui(t,s,i),e!==null&&(Ln(e,t,i,r),$u(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=hi(t),s=Er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ui(t,s,i),e!==null&&(Ln(e,t,i,r),$u(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=hi(t),i=Er(n,r);i.tag=2,e!=null&&(i.callback=e),e=ui(t,i,r),e!==null&&(Ln(e,t,r,n),$u(e,t,r))}};function bw(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!kl(n,r)||!kl(i,s):!0}function k_(t,e,n){var r=!1,i=yi,s=e.contextType;return typeof s=="object"&&s!==null?s=kn(s):(i=rn(e)?ys:Mt.current,r=e.contextTypes,s=(r=r!=null)?Da(t,i):yi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function _w(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hh.enqueueReplaceState(e,e.state,null)}function wg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},sy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=kn(s):(s=rn(e)?ys:Mt.current,i.context=Da(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(yg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hh.enqueueReplaceState(i,i.state,null),wd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Oa(t,e){try{var n="",r=e;do n+=ZN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function lf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ET=typeof WeakMap=="function"?WeakMap:Map;function E_(t,e,n){n=Er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sd||(Sd=!0,Cg=r),vg(t,e)},n}function N_(t,e,n){n=Er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vg(t,e),typeof r!="function"&&(di===null?di=new Set([this]):di.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Sw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ET;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=VT.bind(null,t,e,n),e.then(t,t))}function Iw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Er(-1,1),e.tag=2,ui(n,e,1))),n.lanes|=1),t)}var NT=$r.ReactCurrentOwner,Jt=!1;function Vt(t,e,n,r){e.child=t===null?n_(e,null,n,r):Ra(e,t.child,n,r)}function Ew(t,e,n,r,i){n=n.render;var s=e.ref;return va(e,i),r=uy(t,e,n,r,s,i),n=dy(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ar(t,e,i)):(Oe&&n&&Jm(e),e.flags|=1,Vt(t,e,r,i),e.child)}function Nw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!by(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,T_(t,e,s,r,i)):(t=zu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:kl,n(a,r)&&t.ref===e.ref)return Ar(t,e,i)}return e.flags|=1,t=pi(s,r),t.ref=e.ref,t.return=e,e.child=t}function T_(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(kl(s,r)&&t.ref===e.ref)if(Jt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Jt=!0);else return e.lanes=t.lanes,Ar(t,e,i)}return xg(t,e,n,r,i)}function C_(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(ha,ln),ln|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(ha,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ne(ha,ln),ln|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ne(ha,ln),ln|=r;return Vt(t,e,i,n),e.child}function j_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xg(t,e,n,r,i){var s=rn(n)?ys:Mt.current;return s=Da(e,s),va(e,i),n=uy(t,e,n,r,s,i),r=dy(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ar(t,e,i)):(Oe&&r&&Jm(e),e.flags|=1,Vt(t,e,n,i),e.child)}function Tw(t,e,n,r,i){if(rn(n)){var s=!0;pd(e)}else s=!1;if(va(e,i),e.stateNode===null)Vu(t,e),k_(e,n,r),wg(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=kn(u):(u=rn(n)?ys:Mt.current,u=Da(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==u)&&_w(e,a,r,u),Qr=!1;var p=e.memoizedState;a.state=p,wd(e,r,a,i),c=e.memoizedState,o!==r||p!==c||nn.current||Qr?(typeof d=="function"&&(yg(e,n,d,r),c=e.memoizedState),(o=Qr||bw(e,n,o,r,p,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,i_(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Dn(e.type,o),a.props=u,h=e.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=kn(c):(c=rn(n)?ys:Mt.current,c=Da(e,c));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||p!==c)&&_w(e,a,r,c),Qr=!1,p=e.memoizedState,a.state=p,wd(e,r,a,i);var y=e.memoizedState;o!==h||p!==y||nn.current||Qr?(typeof f=="function"&&(yg(e,n,f,r),y=e.memoizedState),(u=Qr||bw(e,n,u,r,p,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return bg(t,e,n,r,s,i)}function bg(t,e,n,r,i,s){j_(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&pw(e,n,!1),Ar(t,e,s);r=e.stateNode,NT.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ra(e,t.child,null,s),e.child=Ra(e,null,o,s)):Vt(t,e,o,s),e.memoizedState=r.state,i&&pw(e,n,!0),e.child}function D_(t){var e=t.stateNode;e.pendingContext?hw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hw(t,e.context,!1),ay(t,e.containerInfo)}function Cw(t,e,n,r,i){return Aa(),ey(i),e.flags|=256,Vt(t,e,n,r),e.child}var _g={dehydrated:null,treeContext:null,retryLane:0};function Sg(t){return{baseLanes:t,cachePool:null,transitions:null}}function A_(t,e,n){var r=e.pendingProps,i=Me.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ne(Me,i&1),t===null)return gg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=gh(a,r,0,null),t=ds(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Sg(n),e.memoizedState=_g,t):fy(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return TT(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=pi(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=pi(o,s):(s=ds(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Sg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=_g,r}return s=t.child,t=s.sibling,r=pi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fy(t,e){return e=gh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gu(t,e,n,r){return r!==null&&ey(r),Ra(e,t.child,null,n),t=fy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TT(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=lf(Error(O(422))),gu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=gh({mode:"visible",children:r.children},i,0,null),s=ds(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ra(e,t.child,null,a),e.child.memoizedState=Sg(a),e.memoizedState=_g,s);if(!(e.mode&1))return gu(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(O(419)),r=lf(s,r,void 0),gu(t,e,a,r)}if(o=(a&t.childLanes)!==0,Jt||o){if(r=ht,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Dr(t,i),Ln(r,t,i,-1))}return xy(),r=lf(Error(O(421))),gu(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=UT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,un=ci(i.nextSibling),hn=e,Oe=!0,Rn=null,t!==null&&(vn[xn++]=xr,vn[xn++]=br,vn[xn++]=ws,xr=t.id,br=t.overflow,ws=e),e=fy(e,r.children),e.flags|=4096,e)}function jw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mg(t.return,e,n)}function cf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function R_(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Vt(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jw(t,n,e);else if(t.tag===19)jw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&vd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cf(e,!0,n,null,s);break;case"together":cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function CT(t,e,n){switch(e.tag){case 3:D_(e),Aa();break;case 5:s_(e);break;case 1:rn(e.type)&&pd(e);break;case 4:ay(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ne(md,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?A_(t,e,n):(Ne(Me,Me.current&1),t=Ar(t,e,n),t!==null?t.sibling:null);Ne(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return R_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,C_(t,e,n)}return Ar(t,e,n)}var P_,Ig,O_,L_;P_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ig=function(){};O_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,is(ar.current);var s=null;switch(n){case"input":i=qf(t,i),r=qf(t,r),s=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),s=[];break;case"textarea":i=Gf(t,i),r=Gf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dd)}Qf(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ce("scroll",t),s||o===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};L_=function(t,e,n,r){n!==r&&(e.flags|=4)};function To(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jT(t,e,n){var r=e.pendingProps;switch(Zm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return rn(e.type)&&hd(),At(e),null;case 3:return r=e.stateNode,Pa(),Ae(nn),Ae(Mt),ly(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rn!==null&&(Ag(Rn),Rn=null))),Ig(t,e),At(e),null;case 5:oy(e);var i=is(jl.current);if(n=e.type,t!==null&&e.stateNode!=null)O_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return At(e),null}if(t=is(ar.current),pu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hn]=e,r[Tl]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<Yo.length;i++)Ce(Yo[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":F1(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":U1(r,s),Ce("invalid",r)}Qf(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&hu(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&hu(r.textContent,o,t),i=["children",""+o]):wl.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ce("scroll",r)}switch(n){case"input":iu(r),V1(r,s,!0);break;case"textarea":iu(r),B1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ub(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Hn]=e,t[Tl]=r,P_(t,e,!1,!1),e.stateNode=t;e:{switch(a=Jf(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yo.length;i++)Ce(Yo[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":F1(t,r),i=qf(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":U1(t,r),i=Gf(t,r),Ce("invalid",t);break;default:i=r}Qf(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?pb(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&db(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&vl(t,c):typeof c=="number"&&vl(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wl.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ce("scroll",t):c!=null&&Mm(t,s,c,a))}switch(n){case"input":iu(t),V1(t,r,!1);break;case"textarea":iu(t),B1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ga(t,!!r.multiple,s,!1):r.defaultValue!=null&&ga(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)L_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=is(jl.current),is(ar.current),pu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(s=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:hu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return At(e),null;case 13:if(Ae(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&un!==null&&e.mode&1&&!(e.flags&128))e_(),Aa(),e.flags|=98560,s=!1;else if(s=pu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[Hn]=e}else Aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),s=!1}else Rn!==null&&(Ag(Rn),Rn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?at===0&&(at=3):xy())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return Pa(),Ig(t,e),t===null&&El(e.stateNode.containerInfo),At(e),null;case 10:return ry(e.type._context),At(e),null;case 17:return rn(e.type)&&hd(),At(e),null;case 19:if(Ae(Me),s=e.memoizedState,s===null)return At(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)To(s,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=vd(t),a!==null){for(e.flags|=128,To(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Me,Me.current&1|2),e.child}t=t.sibling}s.tail!==null&&He()>La&&(e.flags|=128,r=!0,To(s,!1),e.lanes=4194304)}else{if(!r)if(t=vd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),To(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Oe)return At(e),null}else 2*He()-s.renderingStartTime>La&&n!==1073741824&&(e.flags|=128,r=!0,To(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=He(),e.sibling=null,n=Me.current,Ne(Me,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return vy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ln&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function DT(t,e){switch(Zm(e),e.tag){case 1:return rn(e.type)&&hd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pa(),Ae(nn),Ae(Mt),ly(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return oy(e),null;case 13:if(Ae(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));Aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Me),null;case 4:return Pa(),null;case 10:return ry(e.type._context),null;case 22:case 23:return vy(),null;case 24:return null;default:return null}}var mu=!1,Ot=!1,AT=typeof WeakSet=="function"?WeakSet:Set,q=null;function da(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function kg(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var Dw=!1;function RT(t,e){if(lg=ld,t=Ub(),Qm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(o=a+i),h!==s||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===t)break t;if(p===n&&++u===i&&(o=a),p===s&&++d===r&&(c=a),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(cg={focusedElem:t,selectionRange:n},ld=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,x=y.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:Dn(e.type,v),x);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(b){Ye(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return y=Dw,Dw=!1,y}function sl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&kg(e,n,s)}i=i.next}while(i!==r)}}function ph(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Eg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $_(t){var e=t.alternate;e!==null&&(t.alternate=null,$_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[Tl],delete e[hg],delete e[gT],delete e[mT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function M_(t){return t.tag===5||t.tag===3||t.tag===4}function Aw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ng(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dd));else if(r!==4&&(t=t.child,t!==null))for(Ng(t,e,n),t=t.sibling;t!==null;)Ng(t,e,n),t=t.sibling}function Tg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Tg(t,e,n),t=t.sibling;t!==null;)Tg(t,e,n),t=t.sibling}var bt=null,An=!1;function Xr(t,e,n){for(n=n.child;n!==null;)F_(t,e,n),n=n.sibling}function F_(t,e,n){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(sh,n)}catch{}switch(n.tag){case 5:Ot||da(n,e);case 6:var r=bt,i=An;bt=null,Xr(t,e,n),bt=r,An=i,bt!==null&&(An?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(An?(t=bt,n=n.stateNode,t.nodeType===8?tf(t.parentNode,n):t.nodeType===1&&tf(t,n),Sl(t)):tf(bt,n.stateNode));break;case 4:r=bt,i=An,bt=n.stateNode.containerInfo,An=!0,Xr(t,e,n),bt=r,An=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&kg(n,e,a),i=i.next}while(i!==r)}Xr(t,e,n);break;case 1:if(!Ot&&(da(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ye(n,e,o)}Xr(t,e,n);break;case 21:Xr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Xr(t,e,n),Ot=r):Xr(t,e,n);break;default:Xr(t,e,n)}}function Rw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AT),e.forEach(function(r){var i=BT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function jn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:bt=o.stateNode,An=!1;break e;case 3:bt=o.stateNode.containerInfo,An=!0;break e;case 4:bt=o.stateNode.containerInfo,An=!0;break e}o=o.return}if(bt===null)throw Error(O(160));F_(s,a,i),bt=null,An=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Ye(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)V_(e,t),e=e.sibling}function V_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jn(e,t),Xn(t),r&4){try{sl(3,t,t.return),ph(3,t)}catch(v){Ye(t,t.return,v)}try{sl(5,t,t.return)}catch(v){Ye(t,t.return,v)}}break;case 1:jn(e,t),Xn(t),r&512&&n!==null&&da(n,n.return);break;case 5:if(jn(e,t),Xn(t),r&512&&n!==null&&da(n,n.return),t.flags&32){var i=t.stateNode;try{vl(i,"")}catch(v){Ye(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&lb(i,s),Jf(o,a);var u=Jf(o,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?pb(i,h):d==="dangerouslySetInnerHTML"?db(i,h):d==="children"?vl(i,h):Mm(i,d,h,u)}switch(o){case"input":Wf(i,s);break;case"textarea":cb(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ga(i,!!s.multiple,f,!1):p!==!!s.multiple&&(s.defaultValue!=null?ga(i,!!s.multiple,s.defaultValue,!0):ga(i,!!s.multiple,s.multiple?[]:"",!1))}i[Tl]=s}catch(v){Ye(t,t.return,v)}}break;case 6:if(jn(e,t),Xn(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ye(t,t.return,v)}}break;case 3:if(jn(e,t),Xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sl(e.containerInfo)}catch(v){Ye(t,t.return,v)}break;case 4:jn(e,t),Xn(t);break;case 13:jn(e,t),Xn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(yy=He())),r&4&&Rw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(u=Ot)||d,jn(e,t),Ot=u):jn(e,t),Xn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(q=t,d=t.child;d!==null;){for(h=q=d;q!==null;){switch(p=q,f=p.child,p.tag){case 0:case 11:case 14:case 15:sl(4,p,p.return);break;case 1:da(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Ye(r,n,v)}}break;case 5:da(p,p.return);break;case 22:if(p.memoizedState!==null){Ow(h);continue}}f!==null?(f.return=p,q=f):Ow(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=hb("display",a))}catch(v){Ye(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Ye(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:jn(e,t),Xn(t),r&4&&Rw(t);break;case 21:break;default:jn(e,t),Xn(t)}}function Xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(M_(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vl(i,""),r.flags&=-33);var s=Aw(t);Tg(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Aw(t);Ng(t,o,a);break;default:throw Error(O(161))}}catch(c){Ye(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PT(t,e,n){q=t,U_(t)}function U_(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||mu;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Ot;o=mu;var u=Ot;if(mu=a,(Ot=c)&&!u)for(q=i;q!==null;)a=q,c=a.child,a.tag===22&&a.memoizedState!==null?Lw(i):c!==null?(c.return=a,q=c):Lw(i);for(;s!==null;)q=s,U_(s),s=s.sibling;q=i,mu=o,Ot=u}Pw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Pw(t)}}function Pw(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||ph(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Dn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ww(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ww(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Sl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Ot||e.flags&512&&Eg(e)}catch(p){Ye(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Ow(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Lw(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ph(4,e)}catch(c){Ye(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ye(e,i,c)}}var s=e.return;try{Eg(e)}catch(c){Ye(e,s,c)}break;case 5:var a=e.return;try{Eg(e)}catch(c){Ye(e,a,c)}}}catch(c){Ye(e,e.return,c)}if(e===t){q=null;break}var o=e.sibling;if(o!==null){o.return=e.return,q=o;break}q=e.return}}var OT=Math.ceil,_d=$r.ReactCurrentDispatcher,gy=$r.ReactCurrentOwner,In=$r.ReactCurrentBatchConfig,ge=0,ht=null,nt=null,kt=0,ln=0,ha=Ai(0),at=0,Pl=null,xs=0,fh=0,my=0,al=null,Qt=null,yy=0,La=1/0,wr=null,Sd=!1,Cg=null,di=null,yu=!1,ri=null,Id=0,ol=0,jg=null,Uu=-1,Bu=0;function Yt(){return ge&6?He():Uu!==-1?Uu:Uu=He()}function hi(t){return t.mode&1?ge&2&&kt!==0?kt&-kt:wT.transition!==null?(Bu===0&&(Bu=kb()),Bu):(t=be,t!==0||(t=window.event,t=t===void 0?16:Ab(t.type)),t):1}function Ln(t,e,n,r){if(50<ol)throw ol=0,jg=null,Error(O(185));uc(t,n,r),(!(ge&2)||t!==ht)&&(t===ht&&(!(ge&2)&&(fh|=n),at===4&&Zr(t,kt)),sn(t,r),n===1&&ge===0&&!(e.mode&1)&&(La=He()+500,uh&&Ri()))}function sn(t,e){var n=t.callbackNode;w4(t,e);var r=od(t,t===ht?kt:0);if(r===0)n!==null&&X1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&X1(n),e===1)t.tag===0?yT($w.bind(null,t)):Qb($w.bind(null,t)),pT(function(){!(ge&6)&&Ri()}),n=null;else{switch(Eb(r)){case 1:n=zm;break;case 4:n=Sb;break;case 16:n=ad;break;case 536870912:n=Ib;break;default:n=ad}n=G_(n,B_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function B_(t,e){if(Uu=-1,Bu=0,ge&6)throw Error(O(327));var n=t.callbackNode;if(xa()&&t.callbackNode!==n)return null;var r=od(t,t===ht?kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kd(t,r);else{e=r;var i=ge;ge|=2;var s=Y_();(ht!==t||kt!==e)&&(wr=null,La=He()+500,us(t,e));do try{MT();break}catch(o){z_(t,o)}while(1);ny(),_d.current=s,ge=i,nt!==null?e=0:(ht=null,kt=0,e=at)}if(e!==0){if(e===2&&(i=rg(t),i!==0&&(r=i,e=Dg(t,i))),e===1)throw n=Pl,us(t,0),Zr(t,r),sn(t,He()),n;if(e===6)Zr(t,r);else{if(i=t.current.alternate,!(r&30)&&!LT(i)&&(e=kd(t,r),e===2&&(s=rg(t),s!==0&&(r=s,e=Dg(t,s))),e===1))throw n=Pl,us(t,0),Zr(t,r),sn(t,He()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:Hi(t,Qt,wr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=yy+500-He(),10<e)){if(od(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dg(Hi.bind(null,t,Qt,wr),e);break}Hi(t,Qt,wr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-On(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OT(r/1960))-r,10<r){t.timeoutHandle=dg(Hi.bind(null,t,Qt,wr),r);break}Hi(t,Qt,wr);break;case 5:Hi(t,Qt,wr);break;default:throw Error(O(329))}}}return sn(t,He()),t.callbackNode===n?B_.bind(null,t):null}function Dg(t,e){var n=al;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=kd(t,e),t!==2&&(e=Qt,Qt=n,e!==null&&Ag(e)),t}function Ag(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function LT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$n(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~my,e&=~fh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-On(e),r=1<<n;t[n]=-1,e&=~r}}function $w(t){if(ge&6)throw Error(O(327));xa();var e=od(t,0);if(!(e&1))return sn(t,He()),null;var n=kd(t,e);if(t.tag!==0&&n===2){var r=rg(t);r!==0&&(e=r,n=Dg(t,r))}if(n===1)throw n=Pl,us(t,0),Zr(t,e),sn(t,He()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hi(t,Qt,wr),sn(t,He()),null}function wy(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(La=He()+500,uh&&Ri())}}function bs(t){ri!==null&&ri.tag===0&&!(ge&6)&&xa();var e=ge;ge|=1;var n=In.transition,r=be;try{if(In.transition=null,be=1,t)return t()}finally{be=r,In.transition=n,ge=e,!(ge&6)&&Ri()}}function vy(){ln=ha.current,Ae(ha)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hT(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(Zm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hd();break;case 3:Pa(),Ae(nn),Ae(Mt),ly();break;case 5:oy(r);break;case 4:Pa();break;case 13:Ae(Me);break;case 19:Ae(Me);break;case 10:ry(r.type._context);break;case 22:case 23:vy()}n=n.return}if(ht=t,nt=t=pi(t.current,null),kt=ln=e,at=0,Pl=null,my=fh=xs=0,Qt=al=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}rs=null}return t}function z_(t,e){do{var n=nt;try{if(ny(),Mu.current=bd,xd){for(var r=Fe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xd=!1}if(vs=0,ut=st=Fe=null,il=!1,Dl=0,gy.current=null,n===null||n.return===null){at=1,Pl=e,nt=null;break}e:{var s=t,a=n.return,o=n,c=e;if(e=kt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Iw(a);if(f!==null){f.flags&=-257,kw(f,a,o,s,e),f.mode&1&&Sw(s,u,e),e=f,c=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(c),e.updateQueue=v}else y.add(c);break e}else{if(!(e&1)){Sw(s,u,e),xy();break e}c=Error(O(426))}}else if(Oe&&o.mode&1){var x=Iw(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),kw(x,a,o,s,e),ey(Oa(c,o));break e}}s=c=Oa(c,o),at!==4&&(at=2),al===null?al=[s]:al.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=E_(s,c,e);yw(s,m);break e;case 1:o=c;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(di===null||!di.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=N_(s,o,e);yw(s,b);break e}}s=s.return}while(s!==null)}q_(n)}catch(S){e=S,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(1)}function Y_(){var t=_d.current;return _d.current=bd,t===null?bd:t}function xy(){(at===0||at===3||at===2)&&(at=4),ht===null||!(xs&268435455)&&!(fh&268435455)||Zr(ht,kt)}function kd(t,e){var n=ge;ge|=2;var r=Y_();(ht!==t||kt!==e)&&(wr=null,us(t,e));do try{$T();break}catch(i){z_(t,i)}while(1);if(ny(),ge=n,_d.current=r,nt!==null)throw Error(O(261));return ht=null,kt=0,at}function $T(){for(;nt!==null;)X_(nt)}function MT(){for(;nt!==null&&!c4();)X_(nt)}function X_(t){var e=H_(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?q_(t):nt=e,gy.current=null}function q_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DT(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,nt=null;return}}else if(n=jT(n,e,ln),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);at===0&&(at=5)}function Hi(t,e,n){var r=be,i=In.transition;try{In.transition=null,be=1,FT(t,e,n,r)}finally{In.transition=i,be=r}return null}function FT(t,e,n,r){do xa();while(ri!==null);if(ge&6)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(v4(t,s),t===ht&&(nt=ht=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yu||(yu=!0,G_(ad,function(){return xa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=In.transition,In.transition=null;var a=be;be=1;var o=ge;ge|=4,gy.current=null,RT(t,n),V_(n,t),sT(cg),ld=!!lg,cg=lg=null,t.current=n,PT(n),u4(),ge=o,be=a,In.transition=s}else t.current=n;if(yu&&(yu=!1,ri=t,Id=i),s=t.pendingLanes,s===0&&(di=null),p4(n.stateNode),sn(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Sd)throw Sd=!1,t=Cg,Cg=null,t;return Id&1&&t.tag!==0&&xa(),s=t.pendingLanes,s&1?t===jg?ol++:(ol=0,jg=t):ol=0,Ri(),null}function xa(){if(ri!==null){var t=Eb(Id),e=In.transition,n=be;try{if(In.transition=null,be=16>t?16:t,ri===null)var r=!1;else{if(t=ri,ri=null,Id=0,ge&6)throw Error(O(331));var i=ge;for(ge|=4,q=t.current;q!==null;){var s=q,a=s.child;if(q.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(q=u;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:sl(8,d,s)}var h=d.child;if(h!==null)h.return=d,q=h;else for(;q!==null;){d=q;var p=d.sibling,f=d.return;if($_(d),d===u){q=null;break}if(p!==null){p.return=f,q=p;break}q=f}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}q=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,q=a;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sl(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,q=m;break e}q=s.return}}var g=t.current;for(q=g;q!==null;){a=q;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,q=w;else e:for(a=g;q!==null;){if(o=q,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ph(9,o)}}catch(S){Ye(o,o.return,S)}if(o===a){q=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,q=b;break e}q=o.return}}if(ge=i,Ri(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(sh,t)}catch{}r=!0}return r}finally{be=n,In.transition=e}}return!1}function Mw(t,e,n){e=Oa(n,e),e=E_(t,e,1),t=ui(t,e,1),e=Yt(),t!==null&&(uc(t,1,e),sn(t,e))}function Ye(t,e,n){if(t.tag===3)Mw(t,t,n);else for(;e!==null;){if(e.tag===3){Mw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(di===null||!di.has(r))){t=Oa(n,t),t=N_(e,t,1),e=ui(e,t,1),t=Yt(),e!==null&&(uc(e,1,t),sn(e,t));break}}e=e.return}}function VT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(kt&n)===n&&(at===4||at===3&&(kt&130023424)===kt&&500>He()-yy?us(t,0):my|=n),sn(t,e)}function W_(t,e){e===0&&(t.mode&1?(e=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):e=1);var n=Yt();t=Dr(t,e),t!==null&&(uc(t,e,n),sn(t,n))}function UT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),W_(t,n)}function BT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),W_(t,n)}var H_;H_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)Jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jt=!1,CT(t,e,n);Jt=!!(t.flags&131072)}else Jt=!1,Oe&&e.flags&1048576&&Jb(e,gd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vu(t,e),t=e.pendingProps;var i=Da(e,Mt.current);va(e,n),i=uy(null,e,r,t,i,n);var s=dy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(s=!0,pd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,sy(e),i.updater=hh,e.stateNode=i,i._reactInternals=e,wg(e,r,t,n),e=bg(null,e,r,!0,s,n)):(e.tag=0,Oe&&s&&Jm(e),Vt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=YT(r),t=Dn(r,t),i){case 0:e=xg(null,e,r,t,n);break e;case 1:e=Tw(null,e,r,t,n);break e;case 11:e=Ew(null,e,r,t,n);break e;case 14:e=Nw(null,e,r,Dn(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),xg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),Tw(t,e,r,i,n);case 3:e:{if(D_(e),t===null)throw Error(O(387));r=e.pendingProps,s=e.memoizedState,i=s.element,i_(t,e),wd(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Oa(Error(O(423)),e),e=Cw(t,e,r,n,i);break e}else if(r!==i){i=Oa(Error(O(424)),e),e=Cw(t,e,r,n,i);break e}else for(un=ci(e.stateNode.containerInfo.firstChild),hn=e,Oe=!0,Rn=null,n=n_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Aa(),r===i){e=Ar(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return s_(e),t===null&&gg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,ug(r,i)?a=null:s!==null&&ug(r,s)&&(e.flags|=32),j_(t,e),Vt(t,e,a,n),e.child;case 6:return t===null&&gg(e),null;case 13:return A_(t,e,n);case 4:return ay(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ra(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),Ew(t,e,r,i,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ne(md,r._currentValue),r._currentValue=a,s!==null)if($n(s.value,a)){if(s.children===i.children&&!nn.current){e=Ar(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Er(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),mg(s.return,n,e),o.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(O(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),mg(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Vt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,va(e,n),i=kn(i),r=r(i),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,i=Dn(r,e.pendingProps),i=Dn(r.type,i),Nw(t,e,r,i,n);case 15:return T_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),Vu(t,e),e.tag=1,rn(r)?(t=!0,pd(e)):t=!1,va(e,n),k_(e,r,i),wg(e,r,i,n),bg(null,e,r,!0,t,n);case 19:return R_(t,e,n);case 22:return C_(t,e,n)}throw Error(O(156,e.tag))};function G_(t,e){return _b(t,e)}function zT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,e,n,r){return new zT(t,e,n,r)}function by(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YT(t){if(typeof t=="function")return by(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vm)return 11;if(t===Um)return 14}return 2}function pi(t,e){var n=t.alternate;return n===null?(n=_n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zu(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")by(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case na:return ds(n.children,i,s,e);case Fm:a=8,i|=8;break;case Bf:return t=_n(12,n,e,i|2),t.elementType=Bf,t.lanes=s,t;case zf:return t=_n(13,n,e,i),t.elementType=zf,t.lanes=s,t;case Yf:return t=_n(19,n,e,i),t.elementType=Yf,t.lanes=s,t;case sb:return gh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rb:a=10;break e;case ib:a=9;break e;case Vm:a=11;break e;case Um:a=14;break e;case Kr:a=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=_n(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ds(t,e,n,r){return t=_n(7,t,r,e),t.lanes=n,t}function gh(t,e,n,r){return t=_n(22,t,r,e),t.elementType=sb,t.lanes=n,t.stateNode={isHidden:!1},t}function uf(t,e,n){return t=_n(6,t,null,e),t.lanes=n,t}function df(t,e,n){return e=_n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yp(0),this.expirationTimes=Yp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _y(t,e,n,r,i,s,a,o,c){return t=new XT(t,e,n,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_n(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sy(s),t}function qT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function K_(t){if(!t)return yi;t=t._reactInternals;e:{if(Ls(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(rn(n))return Kb(t,n,e)}return e}function Q_(t,e,n,r,i,s,a,o,c){return t=_y(n,r,!0,t,i,s,a,o,c),t.context=K_(null),n=t.current,r=Yt(),i=hi(n),s=Er(r,i),s.callback=e??null,ui(n,s,i),t.current.lanes=i,uc(t,i,r),sn(t,r),t}function mh(t,e,n,r){var i=e.current,s=Yt(),a=hi(i);return n=K_(n),e.context===null?e.context=n:e.pendingContext=n,e=Er(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ui(i,e,a),t!==null&&(Ln(t,i,a,s),$u(t,i,a)),a}function Ed(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sy(t,e){Fw(t,e),(t=t.alternate)&&Fw(t,e)}function WT(){return null}var J_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Iy(t){this._internalRoot=t}yh.prototype.render=Iy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));mh(t,e,null,null)};yh.prototype.unmount=Iy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bs(function(){mh(null,t,null,null)}),e[jr]=null}};function yh(t){this._internalRoot=t}yh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jr.length&&e!==0&&e<Jr[n].priority;n++);Jr.splice(n,0,t),n===0&&Db(t)}};function ky(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vw(){}function HT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ed(a);s.call(u)}}var a=Q_(e,r,t,0,null,!1,!1,"",Vw);return t._reactRootContainer=a,t[jr]=a.current,El(t.nodeType===8?t.parentNode:t),bs(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Ed(c);o.call(u)}}var c=_y(t,0,!1,null,null,!1,!1,"",Vw);return t._reactRootContainer=c,t[jr]=c.current,El(t.nodeType===8?t.parentNode:t),bs(function(){mh(e,c,n,r)}),c}function vh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=Ed(a);o.call(c)}}mh(e,a,t,i)}else a=HT(n,e,t,i,r);return Ed(a)}Nb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zo(e.pendingLanes);n!==0&&(Ym(e,n|1),sn(e,He()),!(ge&6)&&(La=He()+500,Ri()))}break;case 13:bs(function(){var r=Dr(t,1);if(r!==null){var i=Yt();Ln(r,t,1,i)}}),Sy(t,1)}};Xm=function(t){if(t.tag===13){var e=Dr(t,134217728);if(e!==null){var n=Yt();Ln(e,t,134217728,n)}Sy(t,134217728)}};Tb=function(t){if(t.tag===13){var e=hi(t),n=Dr(t,e);if(n!==null){var r=Yt();Ln(n,t,e,r)}Sy(t,e)}};Cb=function(){return be};jb=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};eg=function(t,e,n){switch(e){case"input":if(Wf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ch(r);if(!i)throw Error(O(90));ob(r),Wf(r,i)}}}break;case"textarea":cb(t,n);break;case"select":e=n.value,e!=null&&ga(t,!!n.multiple,e,!1)}};mb=wy;yb=bs;var GT={usingClientEntryPoint:!1,Events:[hc,aa,ch,fb,gb,wy]},Co={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KT={bundleType:Co.bundleType,version:Co.version,rendererPackageName:Co.rendererPackageName,rendererConfig:Co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xb(t),t===null?null:t.stateNode},findFiberByHostInstance:Co.findFiberByHostInstance||WT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{sh=wu.inject(KT),sr=wu}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GT;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ky(e))throw Error(O(200));return qT(t,e,null,n)};mn.createRoot=function(t,e){if(!ky(t))throw Error(O(299));var n=!1,r="",i=J_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_y(t,1,!1,null,null,n,!1,r,i),t[jr]=e.current,El(t.nodeType===8?t.parentNode:t),new Iy(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=xb(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return bs(t)};mn.hydrate=function(t,e,n){if(!wh(e))throw Error(O(200));return vh(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!ky(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=J_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Q_(e,null,t,1,n??null,i,!1,s,a),t[jr]=e.current,El(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new yh(e)};mn.render=function(t,e,n){if(!wh(e))throw Error(O(200));return vh(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!wh(t))throw Error(O(40));return t._reactRootContainer?(bs(function(){vh(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};mn.unstable_batchedUpdates=wy;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wh(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return vh(t,e,n,!1,r)};mn.version="18.3.1-next-f1338f8080-20240426";function Z_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z_)}catch(t){console.error(t)}}Z_(),Zx.exports=mn;var QT=Zx.exports,Uw=QT;Vf.createRoot=Uw.createRoot,Vf.hydrateRoot=Uw.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},JT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},t2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let p=(o&15)<<2|u>>6,f=u&63;c||(f=64,a||(p=64)),r.push(n[d],n[h],n[p],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(e2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||u==null||h==null)throw new ZT;const p=s<<2|o>>4;if(r.push(p),u!==64){const f=o<<4&240|u>>2;if(r.push(f),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eC=function(t){const e=e2(t);return t2.encodeByteArray(e,!0)},Nd=function(t){return eC(t).replace(/\./g,"")},n2=function(t){try{return t2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Td(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!tC(n)||(t[n]=Td(t[n],e[n]));return t}function tC(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=()=>nC().__FIREBASE_DEFAULTS__,iC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&n2(t[1]);return e&&JSON.parse(e)},Ey=()=>{try{return rC()||iC()||sC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},r2=()=>{var t;return(t=Ey())===null||t===void 0?void 0:t.config},aC=t=>{var e;return(e=Ey())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),o="";return[Nd(JSON.stringify(n)),Nd(JSON.stringify(a)),o].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function Ny(){var t;const e=(t=Ey())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uC(){return typeof self=="object"&&self.self===self}function i2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ty(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s2(){const t=Ue();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dC(){return!Ny()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ol(){try{return typeof indexedDB=="object"}catch{return!1}}function hC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="FirebaseError";class Xt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pC,Object.setPrototypeOf(this,Xt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$s.prototype.create)}}class $s{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?fC(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Xt(i,o,r)}}function fC(t,e){return t.replace(gC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rg(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(zw(s)&&zw(a)){if(!Rg(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Xo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function a2(t,e){const n=new yC(t,e);return n.subscribe.bind(n)}class yC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=hf),i.error===void 0&&(i.error=hf),i.complete===void 0&&(i.complete=hf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t){return t&&t._delegate?t._delegate:t}class ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bC(e))try{this.getOrInitializeService({instanceIdentifier:Gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gi){return this.instances.has(e)}getOptions(e=Gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gi){return this.component?this.component.multipleInstances?e:Gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xC(t){return t===Gi?void 0:t}function bC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy=[];var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const o2={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},SC=pe.INFO,IC={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},kC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=IC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xh{constructor(e){this.name=e,this._logLevel=SC,this._logHandler=kC,this._userLogHandler=null,Cy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}function EC(t){Cy.forEach(e=>{e.setLogLevel(t)})}function NC(t,e){for(const n of Cy){let r=null;e&&e.level&&(r=o2[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...a)=>{const o=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(r??i.logLevel)&&t({level:pe[s].toLowerCase(),message:o,args:a,type:i.name})}}}const TC=(t,e)=>e.some(n=>t instanceof n);let Yw,Xw;function CC(){return Yw||(Yw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jC(){return Xw||(Xw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l2=new WeakMap,Pg=new WeakMap,c2=new WeakMap,pf=new WeakMap,jy=new WeakMap;function DC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(fi(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&l2.set(n,t)}).catch(()=>{}),jy.set(e,t),e}function AC(t){if(Pg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Pg.set(t,e)}let Og={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||c2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RC(t){Og=t(Og)}function PC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ff(this),e,...n);return c2.set(r,e.sort?e.sort():[e]),fi(r)}:jC().includes(t)?function(...e){return t.apply(ff(this),e),fi(l2.get(this))}:function(...e){return fi(t.apply(ff(this),e))}}function OC(t){return typeof t=="function"?PC(t):(t instanceof IDBTransaction&&AC(t),TC(t,CC())?new Proxy(t,Og):t)}function fi(t){if(t instanceof IDBRequest)return DC(t);if(pf.has(t))return pf.get(t);const e=OC(t);return e!==t&&(pf.set(t,e),jy.set(e,t)),e}const ff=t=>jy.get(t);function LC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=fi(a);return r&&a.addEventListener("upgradeneeded",c=>{r(fi(a.result),c.oldVersion,c.newVersion,fi(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const $C=["get","getKey","getAll","getAllKeys","count"],MC=["put","add","delete","clear"],gf=new Map;function qw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=MC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$C.includes(n)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return gf.set(e,s),s}RC(t=>({...t,get:(e,n,r)=>qw(e,n)||t.get(e,n,r),has:(e,n)=>!!qw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lg="@firebase/app",Ww="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new xh("@firebase/app"),UC="@firebase/app-compat",BC="@firebase/analytics-compat",zC="@firebase/analytics",YC="@firebase/app-check-compat",XC="@firebase/app-check",qC="@firebase/auth",WC="@firebase/auth-compat",HC="@firebase/database",GC="@firebase/database-compat",KC="@firebase/functions",QC="@firebase/functions-compat",JC="@firebase/installations",ZC="@firebase/installations-compat",ej="@firebase/messaging",tj="@firebase/messaging-compat",nj="@firebase/performance",rj="@firebase/performance-compat",ij="@firebase/remote-config",sj="@firebase/remote-config-compat",aj="@firebase/storage",oj="@firebase/storage-compat",lj="@firebase/firestore",cj="@firebase/firestore-compat",uj="firebase",dj="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="[DEFAULT]",hj={[Lg]:"fire-core",[UC]:"fire-core-compat",[zC]:"fire-analytics",[BC]:"fire-analytics-compat",[XC]:"fire-app-check",[YC]:"fire-app-check-compat",[qC]:"fire-auth",[WC]:"fire-auth-compat",[HC]:"fire-rtdb",[GC]:"fire-rtdb-compat",[KC]:"fire-fn",[QC]:"fire-fn-compat",[JC]:"fire-iid",[ZC]:"fire-iid-compat",[ej]:"fire-fcm",[tj]:"fire-fcm-compat",[nj]:"fire-perf",[rj]:"fire-perf-compat",[ij]:"fire-rc",[sj]:"fire-rc-compat",[aj]:"fire-gcs",[oj]:"fire-gcs-compat",[lj]:"fire-fst",[cj]:"fire-fst-compat","fire-js":"fire-js",[uj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Map,Ll=new Map;function Cd(t,e){try{t.container.addComponent(e)}catch(n){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function u2(t,e){t.container.addOrOverwriteComponent(e)}function xi(t){const e=t.name;if(Ll.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;Ll.set(e,t);for(const n of vi.values())Cd(n,t);return!0}function d2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pj(t,e,n=wi){d2(t,e).clearInstance(n)}function fj(){Ll.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Nr=new $s("app","Firebase",gj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mj=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=dj;function Dy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wi,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=r2()),!n)throw Nr.create("no-options");const s=vi.get(i);if(s){if(Rg(n,s.options)&&Rg(r,s.config))return s;throw Nr.create("duplicate-app",{appName:i})}const a=new _C(i);for(const c of Ll.values())a.addComponent(c);const o=new mj(n,r,a);return vi.set(i,o),o}function yj(t=wi){const e=vi.get(t);if(!e&&t===wi&&r2())return Dy();if(!e)throw Nr.create("no-app",{appName:t});return e}function wj(){return Array.from(vi.values())}async function h2(t){const e=t.name;vi.has(e)&&(vi.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function or(t,e,n){var r;let i=(r=hj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(o.join(" "));return}xi(new ur(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function p2(t,e){if(t!==null&&typeof t!="function")throw Nr.create("invalid-log-argument");NC(t,e)}function f2(t){EC(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj="firebase-heartbeat-database",xj=1,$l="firebase-heartbeat-store";let mf=null;function g2(){return mf||(mf=LC(vj,xj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($l)}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),mf}async function bj(t){try{return await(await g2()).transaction($l).objectStore($l).get(m2(t))}catch(e){if(e instanceof Xt)_s.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_s.warn(n.message)}}}async function Hw(t,e){try{const r=(await g2()).transaction($l,"readwrite");await r.objectStore($l).put(e,m2(t)),await r.done}catch(n){if(n instanceof Xt)_s.warn(n.message);else{const r=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_s.warn(r.message)}}}function m2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=1024,Sj=30*24*60*60*1e3;class Ij{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ej(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Gw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=Sj}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Gw(),{heartbeatsToSend:n,unsentEntries:r}=kj(this._heartbeatsCache.heartbeats),i=Nd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Gw(){return new Date().toISOString().substring(0,10)}function kj(t,e=_j){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Kw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Kw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ej{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ol()?hC().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await bj(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Kw(t){return Nd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t){xi(new ur("platform-logger",e=>new FC(e),"PRIVATE")),xi(new ur("heartbeat",e=>new Ij(e),"PRIVATE")),or(Lg,Ww,t),or(Lg,Ww,"esm2017"),or("fire-js","")}Nj("");const Tj=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Xt,SDK_VERSION:Pi,_DEFAULT_ENTRY_NAME:wi,_addComponent:Cd,_addOrOverwriteComponent:u2,_apps:vi,_clearComponents:fj,_components:Ll,_getProvider:d2,_registerComponent:xi,_removeServiceInstance:pj,deleteApp:h2,getApp:yj,getApps:wj,initializeApp:Dy,onLog:p2,registerVersion:or,setLogLevel:f2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n){this._delegate=e,this.firebase=n,Cd(e,new ur("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),h2(this._delegate)))}_getService(e,n=wi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=wi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Cd(this._delegate,e)}_addOrOverwriteComponent(e){u2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Qw=new $s("app-compat","Firebase",jj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:or,setLogLevel:f2,onLog:p2,apps:null,SDK_VERSION:Pi,INTERNAL:{registerComponent:o,removeApp:r,useAsService:c,modularAPIs:Tj}};n.default=n,Object.defineProperty(n,"apps",{get:a});function r(u){delete e[u]}function i(u){if(u=u||wi,!Bw(e,u))throw Qw.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,d={}){const h=Dy(u,d);if(Bw(e,h.name))return e[h.name];const p=new t(h,n);return e[h.name]=p,p}function a(){return Object.keys(e).map(u=>e[u])}function o(u){const d=u.name,h=d.replace("-compat","");if(xi(u)&&u.type==="PUBLIC"){const p=(f=i())=>{if(typeof f[h]!="function")throw Qw.create("invalid-app-argument",{appName:d});return f[h]()};u.serviceProps!==void 0&&Td(p,u.serviceProps),n[h]=p,t.prototype[h]=function(...f){return this._getService.bind(this,d).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[h]:null}function c(u,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(){const t=Dj(Cj);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:y2,extendNamespace:e,createSubscribe:a2,ErrorFactory:$s,deepExtend:Td});function e(n){Td(t,n)}return t}const Aj=y2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=new xh("@firebase/app-compat"),Rj="@firebase/app-compat",Pj="0.2.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t){or(Rj,Pj,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(uC()&&self.firebase!==void 0){Jw.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Jw.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Ee=Aj;Oj();var Lj="firebase",$j="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ee.registerVersion(Lj,$j,"app-compat");function Ay(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const jo={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Hs={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}}function w2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Fj=Mj,Vj=w2,v2=new $s("auth","Firebase",w2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new xh("@firebase/auth");function Uj(t,...e){jd.logLevel<=pe.WARN&&jd.warn(`Auth (${Pi}): ${t}`,...e)}function Yu(t,...e){jd.logLevel<=pe.ERROR&&jd.error(`Auth (${Pi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t,...e){throw Ry(t,...e)}function Et(t,...e){return Ry(t,...e)}function x2(t,e,n){const r=Object.assign(Object.assign({},Vj()),{[e]:n});return new $s("auth","Firebase",r).create(e,{appName:t.name})}function no(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ct(t,"argument-error"),x2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ry(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return v2.create(t,...e)}function L(t,e,...n){if(!t)throw Ry(e,...n)}function er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yu(e),new Error(e)}function Mn(t,e){t||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Py(){return Zw()==="http:"||Zw()==="https:"}function Zw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Py()||i2()||"connection"in navigator)?navigator.onLine:!0}function zj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mn(n>e,"Short delay should be less than long delay!"),this.isMobile=cC()||Ty()}get(){return Bj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e){Mn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=new fc(3e4,6e4);function rt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function lt(t,e,n,r,i={}){return _2(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=to(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),b2.fetch()(S2(t,t.config.apiHost,n,o),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function _2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Yj),e);try{const i=new qj(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw qo(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qo(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw qo(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw qo(t,"user-disabled",a);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw x2(t,d,u);Ct(t,d)}}catch(i){if(i instanceof Xt)throw i;Ct(t,"network-request-failed",{message:String(i)})}}async function Mr(t,e,n,r,i={}){const s=await lt(t,e,n,r,i);return"mfaPendingCredential"in s&&Ct(t,"multi-factor-auth-required",{_serverResponse:s}),s}function S2(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Oy(t.config,i):`${t.config.apiScheme}://${i}`}class qj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Et(this.auth,"network-request-failed")),Xj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Et(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wj(t,e){return lt(t,"POST","/v1/accounts:delete",e)}async function Hj(t,e){return lt(t,"POST","/v1/accounts:update",e)}async function Gj(t,e){return lt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Kj(t,e=!1){const n=K(t),r=await n.getIdToken(e),i=bh(r);L(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ll(yf(i.auth_time)),issuedAtTime:ll(yf(i.iat)),expirationTime:ll(yf(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function yf(t){return Number(t)*1e3}function bh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const i=n2(n);return i?JSON.parse(i):(Yu("Failed to decode base64 JWT payload"),null)}catch(i){return Yu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Qj(t){const e=bh(t);return L(e,"internal-error"),L(typeof e.exp<"u","internal-error"),L(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xt&&Jj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Jj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Rr(t,Gj(n,{idToken:r}));L(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?n3(s.providerUserInfo):[],o=t3(t.providerData,a),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new I2(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function e3(t){const e=K(t);await Fl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function t3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function n3(t){return t.map(e=>{var{providerId:n}=e,r=Ay(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(t,e){const n=await _2(t,{},async()=>{const r=to({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=S2(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",b2.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken<"u","internal-error"),L(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return L(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await r3(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Vl;return r&&(L(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(L(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(L(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,e){L(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ay(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new I2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Rr(this,this.stsTokenManager.getToken(this.auth,e));return L(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Kj(this,e)}reload(){return e3(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Rr(this,Wj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,c,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(a=n.photoURL)!==null&&a!==void 0?a:void 0,v=(o=n.tenantId)!==null&&o!==void 0?o:void 0,x=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,m=(u=n.createdAt)!==null&&u!==void 0?u:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:b,isAnonymous:S,providerData:_,stsTokenManager:T}=n;L(w&&T,e,"internal-error");const C=Vl.fromJSON(this.name,T);L(typeof w=="string",e,"internal-error"),qr(h,e.name),qr(p,e.name),L(typeof b=="boolean",e,"internal-error"),L(typeof S=="boolean",e,"internal-error"),qr(f,e.name),qr(y,e.name),qr(v,e.name),qr(x,e.name),qr(m,e.name),qr(g,e.name);const $=new hs({uid:w,auth:e,email:p,emailVerified:b,displayName:h,isAnonymous:S,photoURL:y,phoneNumber:f,tenantId:v,stsTokenManager:C,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&($.providerData=_.map(D=>Object.assign({},D))),x&&($._redirectEventId=x),$}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vl;i.updateFromServerResponse(n);const s=new hs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Fl(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;function dn(t){Mn(t instanceof Function,"Expected a class definition");let e=ev.get(t);return e?(Mn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ev.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}k2.type="NONE";const $a=k2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,e,n){return`firebase:${t}:${e}:${n}`}class ba{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ps(this.userKey,i.apiKey,s),this.fullPersistenceKey=ps("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?hs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ba(dn($a),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||dn($a);const a=ps(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(a);if(d){const h=hs._fromJSON(e,d);u!==s&&(o=h),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ba(s,e,r):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new ba(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C2(e))return"Blackberry";if(j2(e))return"Webos";if(Ly(e))return"Safari";if((e.includes("chrome/")||N2(e))&&!e.includes("edge/"))return"Chrome";if(gc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function E2(t=Ue()){return/firefox\//i.test(t)}function Ly(t=Ue()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N2(t=Ue()){return/crios\//i.test(t)}function T2(t=Ue()){return/iemobile/i.test(t)}function gc(t=Ue()){return/android/i.test(t)}function C2(t=Ue()){return/blackberry/i.test(t)}function j2(t=Ue()){return/webos/i.test(t)}function ro(t=Ue()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function i3(t=Ue()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function s3(t=Ue()){var e;return ro(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function a3(){return s2()&&document.documentMode===10}function D2(t=Ue()){return ro(t)||gc(t)||j2(t)||C2(t)||/windows phone/i.test(t)||T2(t)}function o3(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t,e=[]){let n;switch(t){case"Browser":n=tv(Ue());break;case"Worker":n=`${tv(Ue())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pi}/${r}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l3(t){return(await lt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function R2(t,e){return lt(t,"GET","/v2/recaptchaConfig",rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){return t!==void 0&&t.getResponse!==void 0}function rv(t){return t!==void 0&&t.enterprise!==void 0}class P2{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function $y(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Et("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",c3().appendChild(r)})}function O2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const u3="https://www.google.com/recaptcha/enterprise.js?render=",d3="recaptcha-enterprise",h3="NO_RECAPTCHA";class L2{constructor(e){this.type=d3,this.auth=Je(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{R2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new P2(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;rv(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(h3)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&rv(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}$y(u3+o).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function bi(t,e,n,r=!1){const i=new L2(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iv(this),this.idTokenSubscription=new iv(this),this.beforeStateQueue=new p3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ba.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return L(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?K(e):null;return n&&L(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&L(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(dn(e))})}async initializeRecaptchaConfig(){const e=await R2(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new P2(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new L2(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $s("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dn(e)||this._popupRedirectResolver;L(n,this,"argument-error"),this.redirectPersistenceManager=await ba.create(this,[dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),a=this._isInitialized?Promise.resolve():this._initializationPromise;return L(a,this,"internal-error"),a.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Uj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Je(t){return K(t)}class iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=a2(n=>this.observer=n)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function g3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function m3(t,e,n){const r=Je(t);L(r._canInitEmulator,r,"emulator-config-failed"),L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=$2(e),{host:a,port:o}=y3(e),c=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||w3()}function $2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function y3(t){const e=$2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:sv(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:sv(a)}}}function sv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function w3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(t,e){return lt(t,"POST","/v1/accounts:resetPassword",rt(t,e))}async function F2(t,e){return lt(t,"POST","/v1/accounts:update",e)}async function v3(t,e){return lt(t,"POST","/v1/accounts:update",rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wf(t,e){return Mr(t,"POST","/v1/accounts:signInWithPassword",rt(t,e))}async function _h(t,e){return lt(t,"POST","/v1/accounts:sendOobCode",rt(t,e))}async function x3(t,e){return _h(t,e)}async function vf(t,e){return _h(t,e)}async function xf(t,e){return _h(t,e)}async function b3(t,e){return _h(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _3(t,e){return Mr(t,"POST","/v1/accounts:signInWithEmailLink",rt(t,e))}async function S3(t,e){return Mr(t,"POST","/v1/accounts:signInWithEmailLink",rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends io{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ul(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ul(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await bi(e,r,"signInWithPassword");return wf(e,i)}else return wf(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await bi(e,r,"signInWithPassword");return wf(e,s)}else return Promise.reject(i)});case"emailLink":return _3(e,{email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return F2(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return S3(e,{idToken:n,email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tr(t,e){return Mr(t,"POST","/v1/accounts:signInWithIdp",rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="http://localhost";class dr extends io{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ct("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ay(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new dr(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Tr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Tr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Tr(e,n)}buildRequest(){const e={requestUri:I3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=to(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k3(t,e){return lt(t,"POST","/v1/accounts:sendVerificationCode",rt(t,e))}async function E3(t,e){return Mr(t,"POST","/v1/accounts:signInWithPhoneNumber",rt(t,e))}async function N3(t,e){const n=await Mr(t,"POST","/v1/accounts:signInWithPhoneNumber",rt(t,e));if(n.temporaryProof)throw qo(t,"account-exists-with-different-credential",n);return n}const T3={USER_NOT_FOUND:"user-not-found"};async function C3(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Mr(t,"POST","/v1/accounts:signInWithPhoneNumber",rt(t,n),T3)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends io{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new fs({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new fs({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return E3(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return N3(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return C3(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new fs({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function D3(t){const e=pa(Xo(t)).link,n=e?pa(Xo(e)).deep_link_id:null,r=pa(Xo(t)).deep_link_id;return(r?pa(Xo(r)).link:null)||r||n||e||t}class Sh{constructor(e){var n,r,i,s,a,o;const c=pa(Xo(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,h=j3((i=c.mode)!==null&&i!==void 0?i:null);L(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=D3(e);try{return new Sh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.providerId=Oi.PROVIDER_ID}static credential(e,n){return Ul._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Sh.parseLink(n);return L(r,"argument-error"),Ul._fromEmailAndCode(e,r.code,r.tenantId)}}Oi.PROVIDER_ID="password";Oi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Fr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _a extends so{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return L("providerId"in n&&"signInMethod"in n,"argument-error"),dr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return L(e.idToken||e.accessToken,"argument-error"),dr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return _a.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return _a.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=e;if(!r&&!i&&!n&&!s||!o)return null;try{return new _a(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends so{constructor(){super("facebook.com")}static credential(e){return dr._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gn.credential(e.oauthAccessToken)}catch{return null}}}Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends so{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return dr._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Kn.credential(n,r)}catch{return null}}}Kn.GOOGLE_SIGN_IN_METHOD="google.com";Kn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends so{constructor(){super("github.com")}static credential(e){return dr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qn.credential(e.oauthAccessToken)}catch{return null}}}Qn.GITHUB_SIGN_IN_METHOD="github.com";Qn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="http://localhost";class Ma extends io{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Tr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Tr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Tr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Ma(r,s)}static _create(e,n){return new Ma(e,n)}buildRequest(){return{requestUri:A3,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="saml.";class Dd extends Fr{constructor(e){L(e.startsWith(R3),"argument-error"),super(e)}static credentialFromResult(e){return Dd.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Dd.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Ma.fromJSON(e);return L(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Ma._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends so{constructor(){super("twitter.com")}static credential(e,n){return dr._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Jn.credential(n,r)}catch{return null}}}Jn.TWITTER_SIGN_IN_METHOD="twitter.com";Jn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(t,e){return Mr(t,"POST","/v1/accounts:signUp",rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await hs._fromIdTokenResponse(e,r,i),a=av(r);return new Nn({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=av(r);return new Nn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function av(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3(t){var e;const n=Je(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Nn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Xu(n,{returnSecureToken:!0}),i=await Nn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends Xt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ad(e,n,r,i)}}function V2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O3(t,e){const n=K(t);await Ih(!0,n,e);const{providerUserInfo:r}=await Hj(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=U2(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function My(t,e,n=!1){const r=await Rr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nn._forOperation(t,"link",r)}async function Ih(t,e,n){await Fl(e);const r=U2(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";L(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Rr(t,V2(r,i,e,t),n);L(s.idToken,r,"internal-error");const a=bh(s.idToken);L(a,r,"internal-error");const{sub:o}=a;return L(t.uid===o,r,"user-mismatch"),Nn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ct(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(t,e,n=!1){const r="signIn",i=await V2(t,r,e),s=await Nn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function kh(t,e){return z2(Je(t),e)}async function Y2(t,e){const n=K(t);return await Ih(!1,n,e.providerId),My(n,e)}async function X2(t,e){return B2(K(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L3(t,e){return Mr(t,"POST","/v1/accounts:signInWithCustomToken",rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3(t,e){const n=Je(t),r=await L3(n,{token:e,returnSecureToken:!0}),i=await Nn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Fy._fromServerResponse(e,n):"totpInfo"in n?Vy._fromServerResponse(e,n):Ct(e,"internal-error")}}class Fy extends mc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Fy(n)}}class Vy extends mc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Vy(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t,e,n){var r;L(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),L(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(L(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(L(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3(t,e,n){var r;const i=Je(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const a=await bi(i,s,"getOobCode",!0);n&&Sa(i,a,n),await vf(i,a)}else n&&Sa(i,s,n),await vf(i,s).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const o=await bi(i,s,"getOobCode",!0);n&&Sa(i,o,n),await vf(i,o)}else return Promise.reject(a)})}async function F3(t,e,n){await M2(K(t),{oobCode:e,newPassword:n})}async function V3(t,e){await v3(K(t),{oobCode:e})}async function q2(t,e){const n=K(t),r=await M2(n,{oobCode:e}),i=r.requestType;switch(L(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":L(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":L(r.mfaInfo,n,"internal-error");default:L(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=mc._fromServerResponse(Je(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function U3(t,e){const{data:n}=await q2(K(t),e);return n.email}async function B3(t,e,n){var r;const i=Je(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await bi(i,s,"signUpPassword");a=Xu(i,u)}else a=Xu(i,s).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=await bi(i,s,"signUpPassword");return Xu(i,d)}else return Promise.reject(u)});const o=await a.catch(u=>Promise.reject(u)),c=await Nn._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(c.user),c}function z3(t,e,n){return kh(K(t),Oi.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y3(t,e,n){var r;const i=Je(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(o,c){L(c.handleCodeInApp,i,"argument-error"),c&&Sa(i,o,c)}if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const o=await bi(i,s,"getOobCode",!0);a(o,n),await xf(i,o)}else a(s,n),await xf(i,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const c=await bi(i,s,"getOobCode",!0);a(c,n),await xf(i,c)}else return Promise.reject(o)})}function X3(t,e){const n=Sh.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function q3(t,e,n){const r=K(t),i=Oi.credentialWithLink(e,n||Ml());return L(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),kh(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t,e){return lt(t,"POST","/v1/accounts:createAuthUri",rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(t,e){const n=Py()?Ml():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await W3(K(t),r);return i||[]}async function G3(t,e){const n=K(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Sa(n.auth,i,e);const{email:s}=await x3(n.auth,i);s!==t.email&&await t.reload()}async function K3(t,e,n){const r=K(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Sa(r.auth,s,n);const{email:a}=await b3(r.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3(t,e){return lt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=K(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Rr(r,Q3(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Z3(t,e){return W2(K(t),e,null)}function eD(t,e){return W2(K(t),null,e)}async function W2(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Rr(t,F2(r,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const a=(n=(e=bh(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new Ia(s,o)}}if(!r)return null;switch(r){case"facebook.com":return new nD(s,i);case"github.com":return new rD(s,i);case"google.com":return new iD(s,i);case"twitter.com":return new sD(s,i,t.screenName||null);case"custom":case"anonymous":return new Ia(s,null);default:return new Ia(s,r,i)}}class Ia{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class H2 extends Ia{constructor(e,n,r,i){super(e,n,r),this.username=i}}class nD extends Ia{constructor(e,n){super(e,"facebook.com",n)}}class rD extends H2{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class iD extends Ia{constructor(e,n){super(e,"google.com",n)}}class sD extends H2{constructor(e,n,r){super(e,"twitter.com",n,r)}}function aD(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:tD(n)}class ss{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new ss("enroll",e,n)}static _fromMfaPendingCredential(e){return new ss("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return ss._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return ss._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Je(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(o=>mc._fromServerResponse(r,o));L(i.mfaPendingCredential,r,"internal-error");const a=ss._fromMfaPendingCredential(i.mfaPendingCredential);return new Uy(a,s,async o=>{const c=await o._process(r,a);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(n.operationType){case"signIn":const d=await Nn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return L(n.user,r,"internal-error"),Nn._forOperation(n.user,n.operationType,u);default:Ct(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function oD(t,e){var n;const r=K(t),i=e;return L(e.customData.operationType,r,"argument-error"),L((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Uy._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:start",rt(t,e))}function cD(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:finalize",rt(t,e))}function uD(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",rt(t,e))}class By{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>mc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new By(e)}async getSession(){return ss._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Rr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Rr(this.user,uD(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const bf=new WeakMap;function dD(t){const e=K(t);return bf.has(e)||bf.set(e,By._fromUser(e)),bf.get(e)}const Rd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rd,"1"),this.storage.removeItem(Rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(){const t=Ue();return Ly(t)||ro(t)}const pD=1e3,fD=10;class K2 extends G2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=hD()&&o3(),this.fallbackToPolling=D2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);a3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},pD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}K2.type="LOCAL";const zy=K2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2 extends G2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Q2.type="SESSION";const Ss=Q2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Eh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(n.origin,s)),c=await gD(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const u=yc("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(p.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(){return window}function yD(t){tt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(){return typeof tt().WorkerGlobalScope<"u"&&typeof tt().importScripts=="function"}async function wD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xD(){return Yy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="firebaseLocalStorageDb",bD=1,Pd="firebaseLocalStorage",Z2="fbase_key";class wc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nh(t,e){return t.transaction([Pd],e?"readwrite":"readonly").objectStore(Pd)}function _D(){const t=indexedDB.deleteDatabase(J2);return new wc(t).toPromise()}function $g(){const t=indexedDB.open(J2,bD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Pd,{keyPath:Z2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Pd)?e(r):(r.close(),await _D(),e(await $g()))})})}async function ov(t,e,n){const r=Nh(t,!0).put({[Z2]:e,value:n});return new wc(r).toPromise()}async function SD(t,e){const n=Nh(t,!1).get(e),r=await new wc(n).toPromise();return r===void 0?null:r.value}function lv(t,e){const n=Nh(t,!0).delete(e);return new wc(n).toPromise()}const ID=800,kD=3;class eS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $g(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eh._getInstance(xD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wD(),!this.activeServiceWorker)return;this.sender=new mD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $g();return await ov(e,Rd,"1"),await lv(e,Rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ov(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>SD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Nh(i,!1).getAll();return new wc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ID)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eS.type="LOCAL";const Bl=eS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t,e){return lt(t,"POST","/v2/accounts/mfaSignIn:start",rt(t,e))}function ND(t,e){return lt(t,"POST","/v2/accounts/mfaSignIn:finalize",rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=500,CD=6e4,vu=1e12;class jD{constructor(e){this.auth=e,this.counter=vu,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new DD(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||vu;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||vu;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||vu;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class DD{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;L(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=AD(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},CD)},TD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function AD(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=O2("rcb"),RD=new fc(3e4,6e4),PD="https://www.google.com/recaptcha/api.js?";class OD{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=tt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return L(LD(n),e,"argument-error"),this.shouldResolveImmediately(n)&&nv(tt().grecaptcha)?Promise.resolve(tt().grecaptcha):new Promise((r,i)=>{const s=tt().setTimeout(()=>{i(Et(e,"network-request-failed"))},RD.get());tt()[_f]=()=>{tt().clearTimeout(s),delete tt()[_f];const o=tt().grecaptcha;if(!o||!nv(o)){i(Et(e,"internal-error"));return}const c=o.render;o.render=(u,d)=>{const h=c(u,d);return this.counter++,h},this.hostLanguage=n,r(o)};const a=`${PD}?${to({onload:_f,render:"explicit",hl:n})}`;$y(a).catch(()=>{clearTimeout(s),i(Et(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=tt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function LD(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class $D{async load(e){return new jD(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="recaptcha",MD={theme:"light",type:"image"};let FD=class{constructor(e,n=Object.assign({},MD),r){this.parameters=n,this.type=tS,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Je(r),this.isInvisible=this.parameters.size==="invisible",L(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;L(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $D:new OD,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),i(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){L(!this.parameters.sitekey,this.auth,"argument-error"),L(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),L(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=tt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){L(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){L(Py()&&!Yy(),this.auth,"internal-error"),await VD(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await l3(this.auth);L(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return L(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function VD(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=fs._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function UD(t,e,n){const r=Je(t),i=await Th(r,e,K(n));return new Xy(i,s=>kh(r,s))}async function BD(t,e,n){const r=K(t);await Ih(!1,r,"phone");const i=await Th(r.auth,e,K(n));return new Xy(i,s=>Y2(r,s))}async function zD(t,e,n){const r=K(t),i=await Th(r.auth,e,K(n));return new Xy(i,s=>X2(r,s))}async function Th(t,e,n){var r;const i=await n.verify();try{L(typeof i=="string",t,"argument-error"),L(n.type===tS,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return L(a.type==="enroll",t,"internal-error"),(await lD(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{L(a.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return L(o,t,"missing-multi-factor-info"),(await ED(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await k3(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return a}}finally{n._reset()}}async function YD(t,e){await My(K(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is=class qu{constructor(e){this.providerId=qu.PROVIDER_ID,this.auth=Je(e)}verifyPhoneNumber(e,n){return Th(this.auth,e,K(n))}static credential(e,n){return fs._fromVerification(e,n)}static credentialFromResult(e){const n=e;return qu.credentialFromTaggedObject(n)}static credentialFromError(e){return qu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?fs._fromTokenResponse(n,r):null}};Is.PROVIDER_ID="phone";Is.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(t,e){return e?dn(e):(L(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends io{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Tr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Tr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XD(t){return z2(t.auth,new qy(t),t.bypassAuthState)}function qD(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),B2(n,new qy(t),t.bypassAuthState)}async function WD(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),My(n,new qy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XD;case"linkViaPopup":case"linkViaRedirect":return WD;case"reauthViaPopup":case"reauthViaRedirect":return qD;default:Ct(this.auth,"internal-error")}}resolve(e){Mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new fc(2e3,1e4);async function GD(t,e,n){const r=Je(t);no(t,e,Fr);const i=Ms(r,n);return new _r(r,"signInViaPopup",e,i).executeNotNull()}async function KD(t,e,n){const r=K(t);no(r.auth,e,Fr);const i=Ms(r.auth,n);return new _r(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function QD(t,e,n){const r=K(t);no(r.auth,e,Fr);const i=Ms(r.auth,n);return new _r(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class _r extends nS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,_r.currentPopupAction&&_r.currentPopupAction.cancel(),_r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return L(e,this.auth,"internal-error"),e}async onExecution(){Mn(this.filter.length===1,"Popup operations only handle one event");const e=yc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Et(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HD.get())};e()}}_r.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="pendingRedirect",cl=new Map;class ZD extends nS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cl.get(this.auth._key());if(!e){try{const r=await eA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cl.set(this.auth._key(),e)}return this.bypassAuthState||cl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eA(t,e){const n=iS(e),r=rS(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Wy(t,e){return rS(t)._set(iS(e),"true")}function tA(){cl.clear()}function Hy(t,e){cl.set(t._key(),e)}function rS(t){return dn(t._redirectPersistence)}function iS(t){return ps(JD,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t,e,n){return rA(t,e,n)}async function rA(t,e,n){const r=Je(t);no(t,e,Fr),await r._initializationPromise;const i=Ms(r,n);return await Wy(i,r),i._openRedirect(r,e,"signInViaRedirect")}function iA(t,e,n){return sA(t,e,n)}async function sA(t,e,n){const r=K(t);no(r.auth,e,Fr),await r.auth._initializationPromise;const i=Ms(r.auth,n);await Wy(i,r.auth);const s=await sS(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function aA(t,e,n){return oA(t,e,n)}async function oA(t,e,n){const r=K(t);no(r.auth,e,Fr),await r.auth._initializationPromise;const i=Ms(r.auth,n);await Ih(!1,r,e.providerId),await Wy(i,r.auth);const s=await sS(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function lA(t,e){return await Je(t)._initializationPromise,Ch(t,e,!1)}async function Ch(t,e,n=!1){const r=Je(t),i=Ms(r,e),a=await new ZD(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}async function sS(t){const e=yc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=10*60*1e3;class aS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!oS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Et(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cA&&this.cachedEventUids.clear(),this.cachedEventUids.has(cv(e))}saveEventToCache(e){this.cachedEventUids.add(cv(e)),this.lastProcessedEventTime=Date.now()}}function cv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(t,e={}){return lt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hA=/^https?/;async function pA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lS(t);for(const n of e)try{if(fA(n))return}catch{}Ct(t,"unauthorized-domain")}function fA(t){const e=Ml(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!hA.test(n))return!1;if(dA.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=new fc(3e4,6e4);function uv(){const t=tt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mA(t){return new Promise((e,n)=>{var r,i,s;function a(){uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uv(),n(Et(t,"network-request-failed"))},timeout:gA.get()})}if(!((i=(r=tt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=tt().gapi)===null||s===void 0)&&s.load)a();else{const o=O2("iframefcb");return tt()[o]=()=>{gapi.load?a():n(Et(t,"network-request-failed"))},$y(`https://apis.google.com/js/api.js?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Wu=null,e})}let Wu=null;function yA(t){return Wu=Wu||mA(t),Wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new fc(5e3,15e3),vA="__/auth/iframe",xA="emulator/auth/iframe",bA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_A=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SA(t){const e=t.config;L(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Oy(e,xA):`https://${t.config.authDomain}/${vA}`,r={apiKey:e.apiKey,appName:t.name,v:Pi},i=_A.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${to(r).slice(1)}`}async function IA(t){const e=await yA(t),n=tt().gapi;return L(n,t,"internal-error"),e.open({where:document.body,url:SA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bA,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Et(t,"network-request-failed"),o=tt().setTimeout(()=>{s(a)},wA.get());function c(){tt().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EA=500,NA=600,TA="_blank",CA="http://localhost";class dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jA(t,e,n,r=EA,i=NA){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},kA),{width:r.toString(),height:i.toString(),top:s,left:a}),u=Ue().toLowerCase();n&&(o=N2(u)?TA:n),E2(u)&&(e=e||CA,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[f,y])=>`${p}${f}=${y},`,"");if(s3(u)&&o!=="_self")return DA(e||"",o),new dv(null);const h=window.open(e||"",o,d);L(h,t,"popup-blocked");try{h.focus()}catch{}return new dv(h)}function DA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="__/auth/handler",RA="emulator/auth/handler",PA=encodeURIComponent("fac");async function Mg(t,e,n,r,i,s){L(t.config.authDomain,t,"auth-domain-config-required"),L(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pi,eventId:i};if(e instanceof Fr){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",mC(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))a[d]=h}if(e instanceof so){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await t._getAppCheckToken(),u=c?`#${PA}=${encodeURIComponent(c)}`:"";return`${OA(t)}?${to(o).slice(1)}${u}`}function OA({config:t}){return t.emulator?Oy(t,RA):`https://${t.authDomain}/${AA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="webStorageSupport";class LA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ss,this._completeRedirectFn=Ch,this._overrideRedirectResult=Hy}async _openPopup(e,n,r,i){var s;Mn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Mg(e,n,r,Ml(),i);return jA(e,a,yc())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Mg(e,n,r,Ml(),i);return yD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Mn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IA(e),r=new aS(e);return n.register("authEvent",i=>(L(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sf,{type:Sf},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Sf];a!==void 0&&n(!!a),Ct(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return D2()||Ly()||ro()}}const $A=LA;class MA{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return er("unexpected MultiFactorSessionType")}}}class Gy extends MA{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Gy(e)}_finalizeEnroll(e,n,r){return cD(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return ND(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class cS{constructor(){}static assertion(e){return Gy._fromCredential(e)}}cS.FACTOR_ID="phone";var hv="@firebase/auth",pv="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function UA(t){xi(new ur("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;L(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A2(t)},u=new f3(r,i,s,c);return g3(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xi(new ur("auth-internal",e=>{const n=Je(e.getProvider("auth").getImmediate());return(r=>new FA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(hv,pv,VA(t)),or(hv,pv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=5*60;aC("authIdTokenMaxAge");UA("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=2e3;async function YA(t,e,n){var r;const{BuildInfo:i}=ks();Mn(e.sessionId,"AuthEvent did not contain a session ID");const s=await GA(e.sessionId),a={};return ro()?a.ibi=i.packageName:gc()?a.apn=i.packageName:Ct(t,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,Mg(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,a)}async function XA(t){const{BuildInfo:e}=ks(),n={};ro()?n.iosBundleId=e.packageName:gc()?n.androidPackageName=e.packageName:Ct(t,"operation-not-supported-in-this-environment"),await lS(t,n)}function qA(t){const{cordova:e}=ks();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,i3()?"_blank":"_system","location=yes"),n(i)})})}async function WA(t,e,n){const{cordova:r}=ks();let i=()=>{};try{await new Promise((s,a)=>{let o=null;function c(){var h;s();const p=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof p=="function"&&p(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){o||(o=window.setTimeout(()=>{a(Et(t,"redirect-cancelled-by-user"))},zA))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(c),document.addEventListener("resume",u,!1),gc()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",d,!1),o&&window.clearTimeout(o)}})}finally{i()}}function HA(t){var e,n,r,i,s,a,o,c,u,d;const h=ks();L(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),L(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),L(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L(typeof((c=(o=(a=h==null?void 0:h.cordova)===null||a===void 0?void 0:a.plugins)===null||o===void 0?void 0:o.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L(typeof((d=(u=h==null?void 0:h.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function GA(t){const e=KA(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function KA(t){if(Mn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=20;class JA extends aS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function ZA(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:nR(),postBody:null,tenantId:t.tenantId,error:Et(t,"no-auth-event")}}function eR(t,e){return Fg()._set(Vg(t),e)}async function fv(t){const e=await Fg()._get(Vg(t));return e&&await Fg()._remove(Vg(t)),e}function tR(t,e){var n,r;const i=iR(e);if(i.includes("/__/auth/callback")){const s=Hu(i),a=s.firebaseError?rR(decodeURIComponent(s.firebaseError)):null,o=(r=(n=a==null?void 0:a.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],c=o?Et(o):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function nR(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<QA;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Fg(){return dn(zy)}function Vg(t){return ps("authEvent",t.config.apiKey,t.name)}function rR(t){try{return JSON.parse(t)}catch{return null}}function iR(t){const e=Hu(t),n=e.link?decodeURIComponent(e.link):void 0,r=Hu(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Hu(i).link||i||r||n||t}function Hu(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return pa(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=500;class aR{constructor(){this._redirectPersistence=Ss,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ch,this._overrideRedirectResult=Hy}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new JA(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Ct(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){HA(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),tA(),await this._originValidation(e);const a=ZA(e,r,i);await eR(e,a);const o=await YA(e,a,n),c=await qA(o);return WA(e,s,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XA(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=ks(),a=setTimeout(async()=>{await fv(e),n.onEvent(gv())},sR),o=async d=>{clearTimeout(a);const h=await fv(e);let p=null;h&&(d!=null&&d.url)&&(p=tR(h,d.url)),n.onEvent(p||gv())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const c=i,u=`${s.packageName.toLowerCase()}://`;ks().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(u)&&o({url:d}),typeof c=="function")try{c(d)}catch(h){console.error(h)}}}}const oR=aR;function gv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Et("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t,e){Je(t)._logFramework(e)}var cR="@firebase/auth-compat",uR="0.4.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=1e3;function ul(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function hR(){return ul()==="http:"||ul()==="https:"}function uS(t=Ue()){return!!((ul()==="file:"||ul()==="ionic:"||ul()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function pR(){return Ty()||Ny()}function fR(){return s2()&&(document==null?void 0:document.documentMode)===11}function gR(t=Ue()){return/Edge\/\d+/.test(t)}function mR(t=Ue()){return fR()||gR(t)}function dS(){try{const t=self.localStorage,e=yc();if(t)return t.setItem(e,"1"),t.removeItem(e),mR()?Ol():!0}catch{return Ky()&&Ol()}return!1}function Ky(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function If(){return(hR()||i2()||uS())&&!pR()&&dS()&&!Ky()}function hS(){return uS()&&typeof document<"u"}async function yR(){return hS()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},dR);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function wR(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn={LOCAL:"local",NONE:"none",SESSION:"session"},Do=L,pS="persistence";function vR(t,e){if(Do(Object.values(cn).includes(e),t,"invalid-persistence-type"),Ty()){Do(e!==cn.SESSION,t,"unsupported-persistence-type");return}if(Ny()){Do(e===cn.NONE,t,"unsupported-persistence-type");return}if(Ky()){Do(e===cn.NONE||e===cn.LOCAL&&Ol(),t,"unsupported-persistence-type");return}Do(e===cn.NONE||dS(),t,"unsupported-persistence-type")}async function Ug(t){await t._initializationPromise;const e=fS(),n=ps(pS,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function xR(t,e){const n=fS();if(!n)return[];const r=ps(pS,t,e);switch(n.getItem(r)){case cn.NONE:return[$a];case cn.LOCAL:return[Bl,Ss];case cn.SESSION:return[Ss];default:return[]}}function fS(){var t;try{return((t=wR())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=L;class ii{constructor(){this.browserResolver=dn($A),this.cordovaResolver=dn(oR),this.underlyingResolver=null,this._redirectPersistence=Ss,this._completeRedirectFn=Ch,this._overrideRedirectResult=Hy}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return hS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bR(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await yR();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){return t.unwrap()}function _R(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t){return mS(t)}function IR(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new kR(t,oD(t,e))}else if(r){const i=mS(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function mS(t){const{_tokenResponse:e}=t instanceof Xt?t.customData:t;if(!e)return null;if(!(t instanceof Xt)&&"temporaryProof"in e&&"phoneNumber"in e)return Is.credentialFromResult(t);const n=e.providerId;if(!n||n===jo.PASSWORD)return null;let r;switch(n){case jo.GOOGLE:r=Kn;break;case jo.FACEBOOK:r=Gn;break;case jo.GITHUB:r=Qn;break;case jo.TWITTER:r=Jn;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:c}=e;return!s&&!a&&!i&&!o?null:o?n.startsWith("saml.")?Ma._create(n,o):dr._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:i,accessToken:s}):new _a(n).credential({idToken:i,accessToken:s,rawNonce:c})}return t instanceof Xt?r.credentialFromError(t):r.credentialFromResult(t)}function Gt(t,e){return e.catch(n=>{throw n instanceof Xt&&IR(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:SR(n),additionalUserInfo:aD(n),user:Sr.getOrCreate(i)}})}async function Bg(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Gt(t,n.confirm(r))}}class kR{constructor(e,n){this.resolver=n,this.auth=_R(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Gt(gS(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._delegate=e,this.multiFactor=dD(e)}static getOrCreate(e){return Sr.USER_MAP.has(e)||Sr.USER_MAP.set(e,new Sr(e)),Sr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Gt(this.auth,Y2(this._delegate,e))}async linkWithPhoneNumber(e,n){return Bg(this.auth,BD(this._delegate,e,n))}async linkWithPopup(e){return Gt(this.auth,QD(this._delegate,e,ii))}async linkWithRedirect(e){return await Ug(Je(this.auth)),aA(this._delegate,e,ii)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Gt(this.auth,X2(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Bg(this.auth,zD(this._delegate,e,n))}reauthenticateWithPopup(e){return Gt(this.auth,KD(this._delegate,e,ii))}async reauthenticateWithRedirect(e){return await Ug(Je(this.auth)),iA(this._delegate,e,ii)}sendEmailVerification(e){return G3(this._delegate,e)}async unlink(e){return await O3(this._delegate,e),this}updateEmail(e){return Z3(this._delegate,e)}updatePassword(e){return eD(this._delegate,e)}updatePhoneNumber(e){return YD(this._delegate,e)}updateProfile(e){return J3(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return K3(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=L;class zg{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Ao(r,"invalid-api-key",{appName:e.name}),Ao(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?ii:void 0;this._delegate=n.initialize({options:{persistence:ER(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Fj),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){m3(this._delegate,e,n)}applyActionCode(e){return V3(this._delegate,e)}checkActionCode(e){return q2(this._delegate,e)}confirmPasswordReset(e,n){return F3(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Gt(this._delegate,B3(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return H3(this._delegate,e)}isSignInWithEmailLink(e){return X3(this._delegate,e)}async getRedirectResult(){Ao(If(),this._delegate,"operation-not-supported-in-this-environment");const e=await lA(this._delegate,ii);return e?Gt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){lR(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:a}=mv(e,n,r);return this._delegate.onAuthStateChanged(i,s,a)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:a}=mv(e,n,r);return this._delegate.onIdTokenChanged(i,s,a)}sendSignInLinkToEmail(e,n){return Y3(this._delegate,e,n)}sendPasswordResetEmail(e,n){return M3(this._delegate,e,n||void 0)}async setPersistence(e){vR(this._delegate,e);let n;switch(e){case cn.SESSION:n=Ss;break;case cn.LOCAL:n=await dn(Bl)._isAvailable()?Bl:zy;break;case cn.NONE:n=$a;break;default:return Ct("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Gt(this._delegate,P3(this._delegate))}signInWithCredential(e){return Gt(this._delegate,kh(this._delegate,e))}signInWithCustomToken(e){return Gt(this._delegate,$3(this._delegate,e))}signInWithEmailAndPassword(e,n){return Gt(this._delegate,z3(this._delegate,e,n))}signInWithEmailLink(e,n){return Gt(this._delegate,q3(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Bg(this._delegate,UD(this._delegate,e,n))}async signInWithPopup(e){return Ao(If(),this._delegate,"operation-not-supported-in-this-environment"),Gt(this._delegate,GD(this._delegate,e,ii))}async signInWithRedirect(e){return Ao(If(),this._delegate,"operation-not-supported-in-this-environment"),await Ug(this._delegate),nA(this._delegate,e,ii)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return U3(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}zg.Persistence=cn;function mv(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:a=>i(a&&Sr.getOrCreate(a)),error:e,complete:n}}function ER(t,e){const n=xR(t,e);if(typeof self<"u"&&!n.includes(Bl)&&n.push(Bl),typeof window<"u")for(const r of[zy,Ss])n.includes(r)||n.push(r);return n.includes($a)||n.push($a),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.providerId="phone",this._delegate=new Is(gS(Ee.auth()))}static credential(e,n){return Is.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Qy.PHONE_SIGN_IN_METHOD=Is.PHONE_SIGN_IN_METHOD;Qy.PROVIDER_ID=Is.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=L;class TR{constructor(e,n,r=Ee.app()){var i;NR((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new FD(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="auth-compat";function jR(t){t.INTERNAL.registerComponent(new ur(CR,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new zg(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Hs.EMAIL_SIGNIN,PASSWORD_RESET:Hs.PASSWORD_RESET,RECOVER_EMAIL:Hs.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Hs.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Hs.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Hs.VERIFY_EMAIL}},EmailAuthProvider:Oi,FacebookAuthProvider:Gn,GithubAuthProvider:Qn,GoogleAuthProvider:Kn,OAuthProvider:_a,SAMLAuthProvider:Dd,PhoneAuthProvider:Qy,PhoneMultiFactorGenerator:cS,RecaptchaVerifier:TR,TwitterAuthProvider:Jn,Auth:zg,AuthCredential:io,Error:Xt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(cR,uR)}jR(Ee);var DR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,Jy=Jy||{},J=DR||self;function jh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function vc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function AR(t){return Object.prototype.hasOwnProperty.call(t,kf)&&t[kf]||(t[kf]=++RR)}var kf="closure_uid_"+(1e9*Math.random()>>>0),RR=0;function PR(t,e,n){return t.call.apply(t.bind,arguments)}function OR(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Lt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Lt=PR:Lt=OR,Lt.apply(null,arguments)}function xu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function gt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var a=Array(arguments.length-2),o=2;o<arguments.length;o++)a[o-2]=arguments[o];return e.prototype[i].apply(r,a)}}function Li(){this.s=this.s,this.o=this.o}var LR=0;Li.prototype.s=!1;Li.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),LR!=0)&&AR(this)};Li.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Zy(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function yv(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(jh(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let a=0;a<s;a++)t[i+a]=r[a]}else t.push(r)}}function $t(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};var $R=function(){if(!J.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{J.addEventListener("test",()=>{},e),J.removeEventListener("test",()=>{},e)}catch{}return t}();function zl(t){return/^[\s\xa0]*$/.test(t)}function Dh(){var t=J.navigator;return t&&(t=t.userAgent)?t:""}function Zn(t){return Dh().indexOf(t)!=-1}function e0(t){return e0[" "](t),t}e0[" "]=function(){};function MR(t,e){var n=j5;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var FR=Zn("Opera"),Fa=Zn("Trident")||Zn("MSIE"),wS=Zn("Edge"),Yg=wS||Fa,vS=Zn("Gecko")&&!(Dh().toLowerCase().indexOf("webkit")!=-1&&!Zn("Edge"))&&!(Zn("Trident")||Zn("MSIE"))&&!Zn("Edge"),VR=Dh().toLowerCase().indexOf("webkit")!=-1&&!Zn("Edge");function xS(){var t=J.document;return t?t.documentMode:void 0}var Xg;e:{var Ef="",Nf=function(){var t=Dh();if(vS)return/rv:([^\);]+)(\)|;)/.exec(t);if(wS)return/Edge\/([\d\.]+)/.exec(t);if(Fa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(VR)return/WebKit\/(\S+)/.exec(t);if(FR)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Nf&&(Ef=Nf?Nf[1]:""),Fa){var Tf=xS();if(Tf!=null&&Tf>parseFloat(Ef)){Xg=String(Tf);break e}}Xg=Ef}var qg;if(J.document&&Fa){var wv=xS();qg=wv||parseInt(Xg,10)||void 0}else qg=void 0;var UR=qg;function Yl(t,e){if($t.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(vS){e:{try{e0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:BR[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Yl.$.h.call(this)}}gt(Yl,$t);var BR={2:"touch",3:"pen",4:"mouse"};Yl.prototype.h=function(){Yl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var xc="closure_listenable_"+(1e6*Math.random()|0),zR=0;function YR(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++zR,this.fa=this.ia=!1}function Ah(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function t0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function XR(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function bS(t){const e={};for(const n in t)e[n]=t[n];return e}const vv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _S(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<vv.length;s++)n=vv[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Rh(t){this.src=t,this.g={},this.h=0}Rh.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var a=Hg(t,e,r,i);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new YR(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Wg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=yS(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Ah(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Hg(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var n0="closure_lm_"+(1e6*Math.random()|0),Cf={};function SS(t,e,n,r,i){if(r&&r.once)return kS(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)SS(t,e[s],n,r,i);return null}return n=s0(n),t&&t[xc]?t.O(e,n,vc(r)?!!r.capture:!!r,i):IS(t,e,n,!1,r,i)}function IS(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var a=vc(i)?!!i.capture:!!i,o=i0(t);if(o||(t[n0]=o=new Rh(t)),n=o.add(e,n,r,a,s),n.proxy)return n;if(r=qR(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$R||(i=a),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(NS(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function qR(){function t(n){return e.call(t.src,t.listener,n)}const e=WR;return t}function kS(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)kS(t,e[s],n,r,i);return null}return n=s0(n),t&&t[xc]?t.P(e,n,vc(r)?!!r.capture:!!r,i):IS(t,e,n,!0,r,i)}function ES(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ES(t,e[s],n,r,i);else r=vc(r)?!!r.capture:!!r,n=s0(n),t&&t[xc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Hg(s,n,r,i),-1<n&&(Ah(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=i0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Hg(e,n,r,i)),(n=-1<t?e[t]:null)&&r0(n))}function r0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[xc])Wg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(NS(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=i0(e))?(Wg(n,t),n.h==0&&(n.src=null,e[n0]=null)):Ah(t)}}}function NS(t){return t in Cf?Cf[t]:Cf[t]="on"+t}function WR(t,e){if(t.fa)t=!0;else{e=new Yl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&r0(t),t=n.call(r,e)}return t}function i0(t){return t=t[n0],t instanceof Rh?t:null}var jf="__closure_events_fn_"+(1e9*Math.random()>>>0);function s0(t){return typeof t=="function"?t:(t[jf]||(t[jf]=function(e){return t.handleEvent(e)}),t[jf])}function ft(){Li.call(this),this.i=new Rh(this),this.S=this,this.J=null}gt(ft,Li);ft.prototype[xc]=!0;ft.prototype.removeEventListener=function(t,e,n,r){ES(this,t,e,n,r)};function Nt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new $t(e,t);else if(e instanceof $t)e.target=e.target||t;else{var i=e;e=new $t(r,t),_S(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=e.g=n[s];i=bu(a,r,!0,e)&&i}if(a=e.g=t,i=bu(a,r,!0,e)&&i,i=bu(a,r,!1,e)&&i,n)for(s=0;s<n.length;s++)a=e.g=n[s],i=bu(a,r,!1,e)&&i}ft.prototype.N=function(){if(ft.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ah(n[r]);delete t.g[e],t.h--}}this.J=null};ft.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ft.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function bu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==n){var o=a.listener,c=a.la||a.src;a.ia&&Wg(t.i,a),i=o.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var a0=J.JSON.stringify;class HR{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function GR(){var t=o0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class KR{constructor(){this.h=this.g=null}add(e,n){const r=TS.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var TS=new HR(()=>new QR,t=>t.reset());class QR{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function JR(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function ZR(t){J.setTimeout(()=>{throw t},0)}let Xl,ql=!1,o0=new KR,CS=()=>{const t=J.Promise.resolve(void 0);Xl=()=>{t.then(e5)}};var e5=()=>{for(var t;t=GR();){try{t.h.call(t.g)}catch(n){ZR(n)}var e=TS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ql=!1};function Ph(t,e){ft.call(this),this.h=t||1,this.g=e||J,this.j=Lt(this.qb,this),this.l=Date.now()}gt(Ph,ft);z=Ph.prototype;z.ga=!1;z.T=null;z.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Nt(this,"tick"),this.ga&&(l0(this),this.start()))}};z.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function l0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}z.N=function(){Ph.$.N.call(this),l0(this),delete this.g};function c0(t,e,n){if(typeof t=="function")n&&(t=Lt(t,n));else if(t&&typeof t.handleEvent=="function")t=Lt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:J.setTimeout(t,e||0)}function jS(t){t.g=c0(()=>{t.g=null,t.i&&(t.i=!1,jS(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class t5 extends Li{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jS(this)}N(){super.N(),this.g&&(J.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wl(t){Li.call(this),this.h=t,this.g={}}gt(Wl,Li);var xv=[];function DS(t,e,n,r){Array.isArray(n)||(n&&(xv[0]=n.toString()),n=xv);for(var i=0;i<n.length;i++){var s=SS(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function AS(t){t0(t.g,function(e,n){this.g.hasOwnProperty(n)&&r0(e)},t),t.g={}}Wl.prototype.N=function(){Wl.$.N.call(this),AS(this)};Wl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Oh(){this.g=!0}Oh.prototype.Ea=function(){this.g=!1};function n5(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var a="",o=s.split("&"),c=0;c<o.length;c++){var u=o[c].split("=");if(1<u.length){var d=u[0];u=u[1];var h=d.split("_");a=2<=h.length&&h[1]=="type"?a+(d+"="+u+"&"):a+(d+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+a})}function r5(t,e,n,r,i,s,a){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+a})}function fa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+s5(t,n)+(r?" "+r:"")})}function i5(t,e){t.info(function(){return"TIMEOUT: "+e})}Oh.prototype.info=function(){};function s5(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return a0(n)}catch{return e}}var Fs={},bv=null;function Lh(){return bv=bv||new ft}Fs.Ta="serverreachability";function RS(t){$t.call(this,Fs.Ta,t)}gt(RS,$t);function Hl(t){const e=Lh();Nt(e,new RS(e))}Fs.STAT_EVENT="statevent";function PS(t,e){$t.call(this,Fs.STAT_EVENT,t),this.stat=e}gt(PS,$t);function zt(t){const e=Lh();Nt(e,new PS(e,t))}Fs.Ua="timingevent";function OS(t,e){$t.call(this,Fs.Ua,t),this.size=e}gt(OS,$t);function bc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return J.setTimeout(function(){t()},e)}var $h={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},LS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function u0(){}u0.prototype.h=null;function _v(t){return t.h||(t.h=t.i())}function $S(){}var _c={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function d0(){$t.call(this,"d")}gt(d0,$t);function h0(){$t.call(this,"c")}gt(h0,$t);var Gg;function Mh(){}gt(Mh,u0);Mh.prototype.g=function(){return new XMLHttpRequest};Mh.prototype.i=function(){return{}};Gg=new Mh;function Sc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Wl(this),this.P=a5,t=Yg?125:void 0,this.V=new Ph(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new MS}function MS(){this.i=null,this.g="",this.h=!1}var a5=45e3,Kg={},Od={};z=Sc.prototype;z.setTimeout=function(t){this.P=t};function Qg(t,e,n){t.L=1,t.v=Vh(Pr(e)),t.s=n,t.S=!0,FS(t,null)}function FS(t,e){t.G=Date.now(),Ic(t),t.A=Pr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),WS(n.i,"t",r),t.C=0,n=t.l.J,t.h=new MS,t.g=fI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new t5(Lt(t.Pa,t,t.g),t.O)),DS(t.U,t.g,"readystatechange",t.nb),e=t.I?bS(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Hl(),n5(t.j,t.u,t.A,t.m,t.W,t.s)}z.nb=function(t){t=t.target;const e=this.M;e&&tr(t)==3?e.l():this.Pa(t)};z.Pa=function(t){try{if(t==this.g)e:{const d=tr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||Yg||this.g&&(this.h.h||this.g.ja()||Ev(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Hl(3):Hl(2)),Fh(this);var n=this.g.da();this.ca=n;t:if(VS(this)){var r=Ev(this.g);t="";var i=r.length,s=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){as(this),dl(this);var a="";break t}this.h.i=new J.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,r5(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,c=this.g;if((o=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zl(o)){var u=o;break t}}u=null}if(n=u)fa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jg(this,n);else{this.i=!1,this.o=3,zt(12),as(this),dl(this);break e}}this.S?(US(this,d,a),Yg&&this.i&&d==3&&(DS(this.U,this.V,"tick",this.mb),this.V.start())):(fa(this.j,this.m,a,null),Jg(this,a)),d==4&&as(this),this.i&&!this.J&&(d==4?uI(this.l,this):(this.i=!1,Ic(this)))}else N5(this.g),n==400&&0<a.indexOf("Unknown SID")?(this.o=3,zt(12)):(this.o=0,zt(13)),as(this),dl(this)}}}catch{}finally{}};function VS(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function US(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=o5(t,n),i==Od){e==4&&(t.o=4,zt(14),r=!1),fa(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Kg){t.o=4,zt(15),fa(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else fa(t.j,t.m,i,null),Jg(t,i);VS(t)&&i!=Od&&i!=Kg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,zt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),w0(e),e.M=!0,zt(11))):(fa(t.j,t.m,n,"[Invalid Chunked Response]"),as(t),dl(t))}z.mb=function(){if(this.g){var t=tr(this.g),e=this.g.ja();this.C<e.length&&(Fh(this),US(this,t,e),this.i&&t!=4&&Ic(this))}};function o5(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Od:(n=Number(e.substring(n,r)),isNaN(n)?Kg:(r+=1,r+n>e.length?Od:(e=e.slice(r,r+n),t.C=r+n,e)))}z.cancel=function(){this.J=!0,as(this)};function Ic(t){t.Y=Date.now()+t.P,BS(t,t.P)}function BS(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=bc(Lt(t.lb,t),e)}function Fh(t){t.B&&(J.clearTimeout(t.B),t.B=null)}z.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(i5(this.j,this.A),this.L!=2&&(Hl(),zt(17)),as(this),this.o=2,dl(this)):BS(this,this.Y-t)};function dl(t){t.l.H==0||t.J||uI(t.l,t)}function as(t){Fh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,l0(t.V),AS(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Jg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Zg(n.i,t))){if(!t.K&&Zg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Md(n),zh(n);else break e;y0(n),zt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=bc(Lt(n.ib,n),6e3));if(1>=KS(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else os(n,11)}else if((t.K||n.g==t)&&Md(n),!zl(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const d=u[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const p=u[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const y=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(p0(s,s.h),s.h=null))}if(r.F){const v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,je(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var a=t;if(r.wa=pI(r,r.J?r.pa:null,r.Y),a.K){QS(r.i,a);var o=a,c=r.L;c&&o.setTimeout(c),o.B&&(Fh(o),Ic(o)),r.g=a}else lI(r);0<n.j.length&&Yh(n)}else u[0]!="stop"&&u[0]!="close"||os(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?os(n,7):m0(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Hl(4)}catch{}}function l5(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(jh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function c5(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(jh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function zS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(jh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=c5(t),r=l5(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var YS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function u5(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function gs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof gs){this.h=t.h,Ld(this,t.j),this.s=t.s,this.g=t.g,$d(this,t.m),this.l=t.l;var e=t.i,n=new Gl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Sv(this,n),this.o=t.o}else t&&(e=String(t).match(YS))?(this.h=!1,Ld(this,e[1]||"",!0),this.s=Wo(e[2]||""),this.g=Wo(e[3]||"",!0),$d(this,e[4]),this.l=Wo(e[5]||"",!0),Sv(this,e[6]||"",!0),this.o=Wo(e[7]||"")):(this.h=!1,this.i=new Gl(null,this.h))}gs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ho(e,Iv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ho(e,Iv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ho(n,n.charAt(0)=="/"?p5:h5,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ho(n,g5)),t.join("")};function Pr(t){return new gs(t)}function Ld(t,e,n){t.j=n?Wo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function $d(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Sv(t,e,n){e instanceof Gl?(t.i=e,m5(t.i,t.h)):(n||(e=Ho(e,f5)),t.i=new Gl(e,t.h))}function je(t,e,n){t.i.set(e,n)}function Vh(t){return je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Wo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ho(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,d5),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function d5(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Iv=/[#\/\?@]/g,h5=/[#\?:]/g,p5=/[#\?]/g,f5=/[#\?@]/g,g5=/#/g;function Gl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function $i(t){t.g||(t.g=new Map,t.h=0,t.i&&u5(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}z=Gl.prototype;z.add=function(t,e){$i(this),this.i=null,t=ao(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function XS(t,e){$i(t),e=ao(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function qS(t,e){return $i(t),e=ao(t,e),t.g.has(e)}z.forEach=function(t,e){$i(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};z.ta=function(){$i(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};z.Z=function(t){$i(this);let e=[];if(typeof t=="string")qS(this,t)&&(e=e.concat(this.g.get(ao(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};z.set=function(t,e){return $i(this),this.i=null,t=ao(this,t),qS(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function WS(t,e,n){XS(t,e),0<n.length&&(t.i=null,t.g.set(ao(t,e),Zy(n)),t.h+=n.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;a[r]!==""&&(i+="="+encodeURIComponent(String(a[r]))),t.push(i)}}return this.i=t.join("&")};function ao(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function m5(t,e){e&&!t.j&&($i(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(XS(this,r),WS(this,i,n))},t)),t.j=e}var y5=class{constructor(t,e){this.g=t,this.map=e}};function HS(t){this.l=t||w5,J.PerformanceNavigationTiming?(t=J.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(J.g&&J.g.Ka&&J.g.Ka()&&J.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var w5=10;function GS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function KS(t){return t.h?1:t.g?t.g.size:0}function Zg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function p0(t,e){t.g?t.g.add(e):t.h=e}function QS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}HS.prototype.cancel=function(){if(this.i=JS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function JS(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Zy(t.i)}var v5=class{stringify(t){return J.JSON.stringify(t,void 0)}parse(t){return J.JSON.parse(t,void 0)}};function x5(){this.g=new v5}function b5(t,e,n){const r=n||"";try{zS(t,function(i,s){let a=i;vc(i)&&(a=a0(i)),e.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function _5(t,e){const n=new Oh;if(J.Image){const r=new Image;r.onload=xu(_u,n,r,"TestLoadImage: loaded",!0,e),r.onerror=xu(_u,n,r,"TestLoadImage: error",!1,e),r.onabort=xu(_u,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=xu(_u,n,r,"TestLoadImage: timeout",!1,e),J.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function _u(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function kc(t){this.l=t.fc||null,this.j=t.ob||!1}gt(kc,u0);kc.prototype.g=function(){return new Uh(this.l,this.j)};kc.prototype.i=function(t){return function(){return t}}({});function Uh(t,e){ft.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=f0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gt(Uh,ft);var f0=0;z=Uh.prototype;z.open=function(t,e){if(this.readyState!=f0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Kl(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||J).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ec(this)),this.readyState=f0};z.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Kl(this)),this.g&&(this.readyState=3,Kl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof J.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ZS(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ZS(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}z.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ec(this):Kl(this),this.readyState==3&&ZS(this)}};z.Za=function(t){this.g&&(this.response=this.responseText=t,Ec(this))};z.Ya=function(t){this.g&&(this.response=t,Ec(this))};z.ka=function(){this.g&&Ec(this)};function Ec(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Kl(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Kl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Uh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var S5=J.JSON.parse;function qe(t){ft.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=eI,this.L=this.M=!1}gt(qe,ft);var eI="",I5=/^https?$/i,k5=["POST","PUT"];z=qe.prototype;z.Oa=function(t){this.M=t};z.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Gg.g(),this.C=this.u?_v(this.u):_v(Gg),this.g.onreadystatechange=Lt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){kv(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=J.FormData&&t instanceof J.FormData,!(0<=yS(k5,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rI(this),0<this.B&&((this.L=E5(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Lt(this.ua,this)):this.A=c0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){kv(this,s)}};function E5(t){return Fa&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.ua=function(){typeof Jy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nt(this,"timeout"),this.abort(8))};function kv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,tI(t),Bh(t)}function tI(t){t.F||(t.F=!0,Nt(t,"complete"),Nt(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Nt(this,"complete"),Nt(this,"abort"),Bh(this))};z.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bh(this,!0)),qe.$.N.call(this)};z.La=function(){this.s||(this.G||this.v||this.l?nI(this):this.kb())};z.kb=function(){nI(this)};function nI(t){if(t.h&&typeof Jy<"u"&&(!t.C[1]||tr(t)!=4||t.da()!=2)){if(t.v&&tr(t)==4)c0(t.La,0,t);else if(Nt(t,"readystatechange"),tr(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.I).match(YS)[1]||null;!i&&J.self&&J.self.location&&(i=J.self.location.protocol.slice(0,-1)),r=!I5.test(i?i.toLowerCase():"")}n=r}if(n)Nt(t,"complete"),Nt(t,"success");else{t.m=6;try{var s=2<tr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",tI(t)}}finally{Bh(t)}}}}function Bh(t,e){if(t.g){rI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Nt(t,"ready");try{n.onreadystatechange=r}catch{}}}function rI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(J.clearTimeout(t.A),t.A=null)}z.isActive=function(){return!!this.g};function tr(t){return t.g?t.g.readyState:0}z.da=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}};z.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),S5(e)}};function Ev(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case eI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function N5(t){const e={};t=(t.g&&2<=tr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(zl(t[r]))continue;var n=JR(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}XR(e,function(r){return r.join(", ")})}z.Ia=function(){return this.m};z.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function iI(t){let e="";return t0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function g0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=iI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):je(t,e,n))}function Ro(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function sI(t){this.Ga=0,this.j=[],this.l=new Oh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ro("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ro("baseRetryDelayMs",5e3,t),this.hb=Ro("retryDelaySeedMs",1e4,t),this.eb=Ro("forwardChannelMaxRetries",2,t),this.xa=Ro("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new HS(t&&t.concurrentRequestLimit),this.Ja=new x5,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}z=sI.prototype;z.ra=8;z.H=1;function m0(t){if(aI(t),t.H==3){var e=t.W++,n=Pr(t.I);if(je(n,"SID",t.K),je(n,"RID",e),je(n,"TYPE","terminate"),Nc(t,n),e=new Sc(t,t.l,e),e.L=2,e.v=Vh(Pr(n)),n=!1,J.navigator&&J.navigator.sendBeacon)try{n=J.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&J.Image&&(new Image().src=e.v,n=!0),n||(e.g=fI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ic(e)}hI(t)}function zh(t){t.g&&(w0(t),t.g.cancel(),t.g=null)}function aI(t){zh(t),t.u&&(J.clearTimeout(t.u),t.u=null),Md(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&J.clearTimeout(t.m),t.m=null)}function Yh(t){if(!GS(t.i)&&!t.m){t.m=!0;var e=t.Na;Xl||CS(),ql||(Xl(),ql=!0),o0.add(e,t),t.C=0}}function T5(t,e){return KS(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=bc(Lt(t.Na,t,e),dI(t,t.C)),t.C++,!0)}z.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Sc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=bS(s),_S(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=oI(this,i,e),n=Pr(this.I),je(n,"RID",t),je(n,"CVER",22),this.F&&je(n,"X-HTTP-Session-Id",this.F),Nc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(iI(s)))+"&"+e:this.o&&g0(n,this.o,s)),p0(this.i,i),this.bb&&je(n,"TYPE","init"),this.P?(je(n,"$req",e),je(n,"SID","null"),i.aa=!0,Qg(i,n,null)):Qg(i,n,e),this.H=2}}else this.H==3&&(t?Nv(this,t):this.j.length==0||GS(this.i)||Nv(this))};function Nv(t,e){var n;e?n=e.m:n=t.W++;const r=Pr(t.I);je(r,"SID",t.K),je(r,"RID",n),je(r,"AID",t.V),Nc(t,r),t.o&&t.s&&g0(r,t.o,t.s),n=new Sc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=oI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),p0(t.i,n),Qg(n,r,e)}function Nc(t,e){t.na&&t0(t.na,function(n,r){je(e,r,n)}),t.h&&zS({},function(n,r){je(e,r,n)})}function oI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Lt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const a=["count="+n];s==-1?0<n?(s=i[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let o=!0;for(let c=0;c<n;c++){let u=i[c].g;const d=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),o=!1;else try{b5(d,a,"req"+u+"_")}catch{r&&r(d)}}if(o){r=a.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function lI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Xl||CS(),ql||(Xl(),ql=!0),o0.add(e,t),t.A=0}}function y0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=bc(Lt(t.Ma,t),dI(t,t.A)),t.A++,!0)}z.Ma=function(){if(this.u=null,cI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=bc(Lt(this.jb,this),t)}};z.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zt(10),zh(this),cI(this))};function w0(t){t.B!=null&&(J.clearTimeout(t.B),t.B=null)}function cI(t){t.g=new Sc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Pr(t.wa);je(e,"RID","rpc"),je(e,"SID",t.K),je(e,"AID",t.V),je(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&je(e,"TO",t.qa),je(e,"TYPE","xmlhttp"),Nc(t,e),t.o&&t.s&&g0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Vh(Pr(e)),n.s=null,n.S=!0,FS(n,t)}z.ib=function(){this.v!=null&&(this.v=null,zh(this),y0(this),zt(19))};function Md(t){t.v!=null&&(J.clearTimeout(t.v),t.v=null)}function uI(t,e){var n=null;if(t.g==e){Md(t),w0(t),t.g=null;var r=2}else if(Zg(t.i,e))n=e.F,QS(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Lh(),Nt(r,new OS(r,n)),Yh(t)}else lI(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&T5(t,e)||r==2&&y0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:os(t,5);break;case 4:os(t,10);break;case 3:os(t,6);break;default:os(t,2)}}}function dI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function os(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Lt(t.pb,t);n||(n=new gs("//www.google.com/images/cleardot.gif"),J.location&&J.location.protocol=="http"||Ld(n,"https"),Vh(n)),_5(n.toString(),r)}else zt(2);t.H=0,t.h&&t.h.za(e),hI(t),aI(t)}z.pb=function(t){t?(this.l.info("Successfully pinged google.com"),zt(2)):(this.l.info("Failed to ping google.com"),zt(1))};function hI(t){if(t.H=0,t.ma=[],t.h){const e=JS(t.i);(e.length!=0||t.j.length!=0)&&(yv(t.ma,e),yv(t.ma,t.j),t.i.i.length=0,Zy(t.j),t.j.length=0),t.h.ya()}}function pI(t,e,n){var r=n instanceof gs?Pr(n):new gs(n);if(r.g!="")e&&(r.g=e+"."+r.g),$d(r,r.m);else{var i=J.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new gs(null);r&&Ld(s,r),e&&(s.g=e),i&&$d(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&je(r,n,e),je(r,"VER",t.ra),Nc(t,r),r}function fI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new qe(new kc({ob:!0})):new qe(t.va),e.Oa(t.J),e}z.isActive=function(){return!!this.h&&this.h.isActive(this)};function gI(){}z=gI.prototype;z.Ba=function(){};z.Aa=function(){};z.za=function(){};z.ya=function(){};z.isActive=function(){return!0};z.Va=function(){};function Fd(){if(Fa&&!(10<=Number(UR)))throw Error("Environmental error: no available transport.")}Fd.prototype.g=function(t,e){return new fn(t,e)};function fn(t,e){ft.call(this),this.g=new sI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!zl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new oo(this)}gt(fn,ft);fn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;zt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=pI(t,null,t.Y),Yh(t)};fn.prototype.close=function(){m0(this.g)};fn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=a0(t),t=n);e.j.push(new y5(e.fb++,t)),e.H==3&&Yh(e)};fn.prototype.N=function(){this.g.h=null,delete this.j,m0(this.g),delete this.g,fn.$.N.call(this)};function mI(t){d0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}gt(mI,d0);function yI(){h0.call(this),this.status=1}gt(yI,h0);function oo(t){this.g=t}gt(oo,gI);oo.prototype.Ba=function(){Nt(this.g,"a")};oo.prototype.Aa=function(t){Nt(this.g,new mI(t))};oo.prototype.za=function(t){Nt(this.g,new yI)};oo.prototype.ya=function(){Nt(this.g,"b")};function C5(){this.blockSize=-1}function Fn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}gt(Fn,C5);Fn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Df(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],a=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(a<<21&4294967295|a>>>11),a=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(a<<21&4294967295|a>>>11),a=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(a<<21&4294967295|a>>>11),a=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Fn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Df(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Df(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Df(this,r),i=0;break}}this.h=i,this.i+=e};Fn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function _e(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var j5={};function v0(t){return-128<=t&&128>t?MR(t,function(e){return new _e([e|0],0>e?-1:0)}):new _e([t|0],0>t?-1:0)}function nr(t){if(isNaN(t)||!isFinite(t))return ka;if(0>t)return St(nr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=em;return new _e(e,0)}function wI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return St(wI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=nr(Math.pow(e,8)),r=ka,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+s),e);8>s?(s=nr(Math.pow(e,s)),r=r.R(s).add(nr(a))):(r=r.R(n),r=r.add(nr(a)))}return r}var em=4294967296,ka=v0(0),tm=v0(1),Tv=v0(16777216);z=_e.prototype;z.ea=function(){if(bn(this))return-St(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:em+r)*e,e*=em}return t};z.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ir(this))return"0";if(bn(this))return"-"+St(this).toString(t);for(var e=nr(Math.pow(t,6)),n=this,r="";;){var i=Ud(n,e).g;n=Vd(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Ir(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};z.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ir(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function bn(t){return t.h==-1}z.X=function(t){return t=Vd(this,t),bn(t)?-1:Ir(t)?0:1};function St(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new _e(n,~t.h).add(tm)}z.abs=function(){return bn(this)?St(this):this};z.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),a=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=a>>>16,s&=65535,a&=65535,n[i]=a<<16|s}return new _e(n,n[n.length-1]&-2147483648?-1:0)};function Vd(t,e){return t.add(St(e))}z.R=function(t){if(Ir(this)||Ir(t))return ka;if(bn(this))return bn(t)?St(this).R(St(t)):St(St(this).R(t));if(bn(t))return St(this.R(St(t)));if(0>this.X(Tv)&&0>t.X(Tv))return nr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,a=this.D(r)&65535,o=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=a*c,Su(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Su(n,2*r+2*i+1),n[2*r+2*i+1]+=a*o,Su(n,2*r+2*i+1),n[2*r+2*i+2]+=s*o,Su(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new _e(n,0)};function Su(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Po(t,e){this.g=t,this.h=e}function Ud(t,e){if(Ir(e))throw Error("division by zero");if(Ir(t))return new Po(ka,ka);if(bn(t))return e=Ud(St(t),e),new Po(St(e.g),St(e.h));if(bn(e))return e=Ud(t,St(e)),new Po(St(e.g),e.h);if(30<t.g.length){if(bn(t)||bn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=tm,r=e;0>=r.X(t);)n=Cv(n),r=Cv(r);var i=Gs(n,1),s=Gs(r,1);for(r=Gs(r,2),n=Gs(n,2);!Ir(r);){var a=s.add(r);0>=a.X(t)&&(i=i.add(n),s=a),r=Gs(r,1),n=Gs(n,1)}return e=Vd(t,i.R(e)),new Po(i,e)}for(i=ka;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=nr(n),a=s.R(e);bn(a)||0<a.X(t);)n-=r,s=nr(n),a=s.R(e);Ir(s)&&(s=tm),i=i.add(s),t=Vd(t,a)}return new Po(i,t)}z.gb=function(t){return Ud(this,t).h};z.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new _e(n,this.h&t.h)};z.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new _e(n,this.h|t.h)};z.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new _e(n,this.h^t.h)};function Cv(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new _e(n,t.h)}function Gs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new _e(i,t.h)}Fd.prototype.createWebChannel=Fd.prototype.g;fn.prototype.send=fn.prototype.u;fn.prototype.open=fn.prototype.m;fn.prototype.close=fn.prototype.close;$h.NO_ERROR=0;$h.TIMEOUT=8;$h.HTTP_ERROR=6;LS.COMPLETE="complete";$S.EventType=_c;_c.OPEN="a";_c.CLOSE="b";_c.ERROR="c";_c.MESSAGE="d";ft.prototype.listen=ft.prototype.O;qe.prototype.listenOnce=qe.prototype.P;qe.prototype.getLastError=qe.prototype.Sa;qe.prototype.getLastErrorCode=qe.prototype.Ia;qe.prototype.getStatus=qe.prototype.da;qe.prototype.getResponseJson=qe.prototype.Wa;qe.prototype.getResponseText=qe.prototype.ja;qe.prototype.send=qe.prototype.ha;qe.prototype.setWithCredentials=qe.prototype.Oa;Fn.prototype.digest=Fn.prototype.l;Fn.prototype.reset=Fn.prototype.reset;Fn.prototype.update=Fn.prototype.j;_e.prototype.add=_e.prototype.add;_e.prototype.multiply=_e.prototype.R;_e.prototype.modulo=_e.prototype.gb;_e.prototype.compare=_e.prototype.X;_e.prototype.toNumber=_e.prototype.ea;_e.prototype.toString=_e.prototype.toString;_e.prototype.getBits=_e.prototype.D;_e.fromNumber=nr;_e.fromString=wI;var D5=function(){return new Fd},A5=function(){return Lh()},Af=$h,R5=LS,P5=Fs,jv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},O5=kc,Iu=$S,L5=qe,$5=Fn,Ea=_e;const Dv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new xh("@firebase/firestore");function nm(){return _i.logLevel}function M5(t){_i.setLogLevel(t)}function R(t,...e){if(_i.logLevel<=pe.DEBUG){const n=e.map(x0);_i.debug(`Firestore (${lo}): ${t}`,...n)}}function Ge(t,...e){if(_i.logLevel<=pe.ERROR){const n=e.map(x0);_i.error(`Firestore (${lo}): ${t}`,...n)}}function Vn(t,...e){if(_i.logLevel<=pe.WARN){const n=e.map(x0);_i.warn(`Firestore (${lo}): ${t}`,...n)}}function x0(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: `+t;throw Ge(e),new Error(e)}function G(t,e){t||X()}function F5(t,e){t||X()}function B(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Xt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class U5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class B5{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new pt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pt,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{R("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(R("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(R("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(G(typeof r.accessToken=="string"),new vI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return G(e===null||typeof e=="string"),new dt(e)}}class z5{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Y5{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new z5(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class X5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q5{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{s.error!=null&&R("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.T;return this.T=s.token,R("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{R("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):R("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(G(typeof n.token=="string"),this.T=n.token,new X5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=W5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ee(t,e){return t<e?-1:t>e?1:0}function Va(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function bI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.timestamp=e}static fromTimestamp(e){return new H(e)}static min(){return new H(new $e(0,0))}static max(){return new H(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ql.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ql?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class fe extends Ql{construct(e,n,r){return new fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new fe(n)}static emptyPath(){return new fe([])}}const H5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends Ql{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return H5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ke(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new j(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new j(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new j(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.path=e}static fromPath(e){return new M(fe.fromString(e))}static fromName(e){return new M(fe.fromString(e).popFirst(5))}static empty(){return new M(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new M(new fe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function rm(t){return t.fields.find(e=>e.kind===2)}function Ki(t){return t.fields.filter(e=>e.kind!==2)}_I.UNKNOWN_ID=-1;class G5{constructor(e,n){this.fieldPath=e,this.kind=n}}class Bd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Bd(0,gn.min())}}function SI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=H.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new gn(i,M.empty(),e)}function II(t){return new gn(t.readTime,t.key,-1)}class gn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gn(H.min(),M.empty(),-1)}static max(){return new gn(H.max(),M.empty(),-1)}}function b0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(t){if(t.code!==E.FAILED_PRECONDITION||t.message!==kI)throw t;R("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new I((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof I?n:I.resolve(n)}catch(n){return I.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):I.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):I.reject(n)}static resolve(e){return new I((n,r)=>{n(e)})}static reject(e){return new I((n,r)=>{r(e)})}static waitFor(e){return new I((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=I.resolve(!1);for(const r of e)n=n.next(i=>i?I.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new I((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(d=>{a[u]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new I((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new pt,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new hl(e,n.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=_0(r.target.error);this.v.reject(new hl(e,i))}}static open(e,n,r,i){try{return new Xh(n,e.transaction(i,r))}catch(s){throw new hl(n,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(R("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Q5(n)}}class Pn{constructor(e,n,r){this.name=e,this.version=n,this.V=r,Pn.S(Ue())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return R("SimpleDb","Removing database:",e),Qi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ol())return!1;if(Pn.C())return!0;const e=Ue(),n=Pn.S(e),r=0<n&&n<10,i=Pn.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.k)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async $(e){return this.db||(R("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;n(a)},i.onblocked=()=>{r(new hl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new j(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new j(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new hl(e,a))},i.onupgradeneeded=s=>{R("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.V.O(a,i.transaction,s.oldVersion,this.version).next(()=>{R("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=n=>this.F(n)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.$(e);const o=Xh.open(this.db,e,s?"readonly":"readwrite",r),c=i(o).next(u=>(o.P(),u)).catch(u=>(o.abort(u),I.reject(u))).toPromise();return c.catch(()=>{}),await o.R,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&a<3;if(R("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class K5{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Qi(this.L.delete())}}class hl extends j{constructor(e,n){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Fi(t){return t.name==="IndexedDbTransactionError"}class Q5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(R("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(R("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qi(r)}add(e){return R("SimpleDb","ADD",this.store.name,e,e),Qi(this.store.add(e))}get(e){return Qi(this.store.get(e)).next(n=>(n===void 0&&(n=null),R("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return R("SimpleDb","DELETE",this.store.name,e),Qi(this.store.delete(e))}count(){return R("SimpleDb","COUNT",this.store.name),Qi(this.store.count())}j(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.W(i,(a,o)=>{s.push(o)}).next(()=>s)}{const i=this.store.getAll(r.range);return new I((s,a)=>{i.onerror=o=>{a(o.target.error)},i.onsuccess=o=>{s(o.target.result)}})}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new I((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}J(e,n){R("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,a,o)=>o.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Z(e){const n=this.cursor({});return new I((r,i)=>{n.onerror=s=>{const a=_0(s.target.error);i(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}W(e,n){const r=[];return new I((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const c=new K5(o),u=n(o.primaryKey,o.value,c);if(u instanceof I){const d=u.catch(h=>(c.done(),I.reject(h)));r.push(d)}c.isDone?i():c.K===null?o.continue():o.continue(c.K)}}).next(()=>I.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Qi(t){return new I((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=_0(r.target.error);n(i)}})}let Av=!1;function _0(t){const e=Pn.S(Ue());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Av||(Av=!0,setTimeout(()=>{throw r},0)),r}}return t}class J5{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}et(e){R("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{R("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(n){Fi(n)?R("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Mi(n)}await this.et(6e4)})}}class Z5{constructor(e,n){this.localStore=e,this.persistence=n}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.st(n,e))}st(e,n){const r=new Set;let i=n,s=!0;return I.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return R("IndexBackiller",`Processing collection: ${a}`),this.it(e,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>n-i)}it(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.rt(i,s)).next(o=>(R("IndexBackiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}rt(e,n){let r=e;return n.changes.forEach((i,s)=>{const a=II(s);b0(a,r)>0&&(r=a)}),new gn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Zt.ct=-1;function Tc(t){return t==null}function Jl(t){return t===0&&1/t==-1/0}function NI(t){return typeof t=="number"&&Number.isInteger(t)&&!Jl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rv(e)),e=e6(t.get(n),e);return Rv(e)}function e6(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Rv(t){return t+""}function rr(t){const e=t.length;if(G(e>=2),e===2)return G(t.charAt(0)===""&&t.charAt(1)===""),fe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const a=t.indexOf("",s);switch((a<0||a>n)&&X(),t.charAt(a+1)){case"":const o=t.substring(s,a);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,a),i+="\0";break;case"":i+=t.substring(s,a+1);break;default:X()}s=a+2}return new fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t,e){return[t,qt(e)]}function TI(t,e,n){return[t,qt(e),n]}const t6={},n6=["prefixPath","collectionGroup","readTime","documentId"],r6=["prefixPath","collectionGroup","documentId"],i6=["collectionGroup","readTime","prefixPath","documentId"],s6=["canonicalId","targetId"],a6=["targetId","path"],o6=["path","targetId"],l6=["collectionId","parent"],c6=["indexId","uid"],u6=["uid","sequenceNumber"],d6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],h6=["indexId","uid","orderedDocumentKey"],p6=["userId","collectionPath","documentId"],f6=["userId","collectionPath","largestBatchId"],g6=["userId","collectionGroup","largestBatchId"],CI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],m6=[...CI,"documentOverlays"],jI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DI=jI,y6=[...DI,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im extends EI{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function mt(t,e){const n=B(t);return Pn.M(n.ht,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??_t.RED,this.left=i??_t.EMPTY,this.right=s??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(t,e,n,r,i){return this}insert(t,e,n){return new _t(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lv(this.data.getIterator())}getIteratorFrom(e){return new Lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Re)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Re(this.comparator);return n.data=e,n}}class Lv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ks(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new en([])}unionWith(e){let n=new Re(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new RI("Invalid base64 string: "+i):i}}(e);return new ot(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const v6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(t){if(G(!!t),typeof t=="string"){let e=0;const n=v6.exec(t);if(G(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ii(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function S0(t){const e=t.mapValue.fields.__previous_value__;return qh(e)?S0(e):e}function Zl(t){const e=Si(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,n,r,i,s,a,o,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class ki{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ki("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ki&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ku={nullValue:"NULL_VALUE"};function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qh(t)?4:PI(t)?9007199254740991:10:X()}function hr(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Si(r.timestampValue),a=Si(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ii(r.bytesValue).isEqual(Ii(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Xe(r.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(r.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Xe(r.integerValue)===Xe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Xe(r.doubleValue),a=Xe(i.doubleValue);return s===a?Jl(s)===Jl(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Va(t.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:return function(r,i){const s=r.mapValue.fields||{},a=i.mapValue.fields||{};if(Ov(s)!==Ov(a))return!1;for(const o in s)if(s.hasOwnProperty(o)&&(a[o]===void 0||!hr(s[o],a[o])))return!1;return!0}(t,e);default:return X()}}function ec(t,e){return(t.values||[]).find(n=>hr(n,e))!==void 0}function Ei(t,e){if(t===e)return 0;const n=Es(t),r=Es(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(i,s){const a=Xe(i.integerValue||i.doubleValue),o=Xe(s.integerValue||s.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return $v(t.timestampValue,e.timestampValue);case 4:return $v(Zl(t),Zl(e));case 5:return ee(t.stringValue,e.stringValue);case 6:return function(i,s){const a=Ii(i),o=Ii(s);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const a=i.split("/"),o=s.split("/");for(let c=0;c<a.length&&c<o.length;c++){const u=ee(a[c],o[c]);if(u!==0)return u}return ee(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const a=ee(Xe(i.latitude),Xe(s.latitude));return a!==0?a:ee(Xe(i.longitude),Xe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const a=i.values||[],o=s.values||[];for(let c=0;c<a.length&&c<o.length;++c){const u=Ei(a[c],o[c]);if(u)return u}return ee(a.length,o.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===si.mapValue&&s===si.mapValue)return 0;if(i===si.mapValue)return 1;if(s===si.mapValue)return-1;const a=i.fields||{},o=Object.keys(a),c=s.fields||{},u=Object.keys(c);o.sort(),u.sort();for(let d=0;d<o.length&&d<u.length;++d){const h=ee(o[d],u[d]);if(h!==0)return h;const p=Ei(a[o[d]],c[u[d]]);if(p!==0)return p}return ee(o.length,u.length)}(t.mapValue,e.mapValue);default:throw X()}}function $v(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=Si(t),r=Si(e),i=ee(n.seconds,r.seconds);return i!==0?i:ee(n.nanos,r.nanos)}function Ua(t){return sm(t)}function sm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Si(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ii(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,M.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const a of r.values||[])s?s=!1:i+=",",i+=sm(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of i)a?a=!1:s+=",",s+=`${o}:${sm(r.fields[o])}`;return s+"}"}(t.mapValue):X();var e,n}function Ns(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function am(t){return!!t&&"integerValue"in t}function tc(t){return!!t&&"arrayValue"in t}function Mv(t){return!!t&&"nullValue"in t}function Fv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qu(t){return!!t&&"mapValue"in t}function pl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function b6(t){return"nullValue"in t?Ku:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ns(ki.empty(),M.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:X()}function _6(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ns(ki.empty(),M.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?si:X()}function Vv(t,e){const n=Ei(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Uv(t,e){const n=Ei(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(n)}setAll(e){let n=Ke.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=pl(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Qu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Qu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Vs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new It(pl(this.value))}}function OI(t){const e=[];return Vs(t.fields,(n,r)=>{const i=new Ke([n]);if(Qu(r)){const s=OI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new De(e,0,H.min(),H.min(),H.min(),It.empty(),0)}static newFoundDocument(e,n,r,i){return new De(e,1,n,H.min(),r,i,0)}static newNoDocument(e,n){return new De(e,2,n,H.min(),H.min(),It.empty(),0)}static newUnknownDocument(e,n){return new De(e,3,n,H.min(),H.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof De&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new De(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){this.position=e,this.inclusive=n}}function Bv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=M.comparator(M.fromName(a.referenceValue),n.key):r=Ei(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function zv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n="asc"){this.field=e,this.dir=n}}function S6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{}class ce extends LI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new I6(e,n,r):n==="array-contains"?new N6(e,r):n==="in"?new BI(e,r):n==="not-in"?new T6(e,r):n==="array-contains-any"?new C6(e,r):new ce(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new k6(e,r):new E6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ei(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(Ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class xe extends LI{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new xe(e,n)}matches(e){return Ba(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Ba(t){return t.op==="and"}function om(t){return t.op==="or"}function I0(t){return $I(t)&&Ba(t)}function $I(t){for(const e of t.filters)if(e instanceof xe)return!1;return!0}function lm(t){if(t instanceof ce)return t.field.canonicalString()+t.op.toString()+Ua(t.value);if(I0(t))return t.filters.map(e=>lm(e)).join(",");{const e=t.filters.map(n=>lm(n)).join(",");return`${t.op}(${e})`}}function MI(t,e){return t instanceof ce?function(n,r){return r instanceof ce&&n.op===r.op&&n.field.isEqual(r.field)&&hr(n.value,r.value)}(t,e):t instanceof xe?function(n,r){return r instanceof xe&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,a)=>i&&MI(s,r.filters[a]),!0):!1}(t,e):void X()}function FI(t,e){const n=t.filters.concat(e);return xe.create(n,t.op)}function VI(t){return t instanceof ce?function(e){return`${e.field.canonicalString()} ${e.op} ${Ua(e.value)}`}(t):t instanceof xe?function(e){return e.op.toString()+" {"+e.getFilters().map(VI).join(" ,")+"}"}(t):"Filter"}class I6 extends ce{constructor(e,n,r){super(e,n,r),this.key=M.fromName(r.referenceValue)}matches(e){const n=M.comparator(e.key,this.key);return this.matchesComparison(n)}}class k6 extends ce{constructor(e,n){super(e,"in",n),this.keys=UI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class E6 extends ce{constructor(e,n){super(e,"not-in",n),this.keys=UI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}class N6 extends ce{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tc(n)&&ec(n.arrayValue,this.value)}}class BI extends ce{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ec(this.value.arrayValue,n)}}class T6 extends ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ec(this.value.arrayValue,n)}}class C6 extends ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ec(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.dt=null}}function cm(t,e=null,n=[],r=[],i=null,s=null,a=null){return new j6(t,e,n,r,i,s,a)}function Ts(t){const e=B(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Tc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ua(r)).join(",")),e.dt=n}return e.dt}function Cc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!S6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zv(t.startAt,e.startAt)&&zv(t.endAt,e.endAt)}function zd(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Yd(t,e){return t.filters.filter(n=>n instanceof ce&&n.field.isEqual(e))}function Yv(t,e,n){let r=Ku,i=!0;for(const s of Yd(t,e)){let a=Ku,o=!0;switch(s.op){case"<":case"<=":a=b6(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=Ku}Vv({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];Vv({value:r,inclusive:i},{value:a,inclusive:n.inclusive})<0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}function Xv(t,e,n){let r=si,i=!0;for(const s of Yd(t,e)){let a=si,o=!0;switch(s.op){case">=":case">":a=_6(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=si}Uv({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];Uv({value:r,inclusive:i},{value:a,inclusive:n.inclusive})>0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.wt=null,this._t=null,this.startAt,this.endAt}}function zI(t,e,n,r,i,s,a,o){return new Vr(t,e,n,r,i,s,a,o)}function co(t){return new Vr(t)}function qv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function k0(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Wh(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function E0(t){return t.collectionGroup!==null}function ms(t){const e=B(t);if(e.wt===null){e.wt=[];const n=Wh(e),r=k0(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Na(n)),e.wt.push(new Na(Ke.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Na(Ke.keyField(),s))}}}return e.wt}function an(t){const e=B(t);if(!e._t)if(e.limitType==="F")e._t=cm(e.path,e.collectionGroup,ms(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of ms(e)){const a=s.dir==="desc"?"asc":"desc";n.push(new Na(s.field,a))}const r=e.endAt?new Ni(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ni(e.startAt.position,e.startAt.inclusive):null;e._t=cm(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function um(t,e){e.getFirstInequalityField(),Wh(t);const n=t.filters.concat([e]);return new Vr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xd(t,e,n){return new Vr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jc(t,e){return Cc(an(t),an(e))&&t.limitType===e.limitType}function YI(t){return`${Ts(an(t))}|lt:${t.limitType}`}function dm(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>VI(r)).join(", ")}]`),Tc(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ua(r)).join(",")),`Target(${n})`}(an(t))}; limitType=${t.limitType})`}function Dc(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):M.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of ms(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,a){const o=Bv(i,s,a);return i.inclusive?o<=0:o<0}(n.startAt,ms(n),r)||n.endAt&&!function(i,s,a){const o=Bv(i,s,a);return i.inclusive?o>=0:o>0}(n.endAt,ms(n),r))}(t,e)}function XI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qI(t){return(e,n)=>{let r=!1;for(const i of ms(t)){const s=D6(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function D6(t,e,n){const r=t.field.isKeyField()?M.comparator(e.key,n.key):function(i,s,a){const o=s.data.field(i),c=a.data.field(i);return o!==null&&c!==null?Ei(o,c):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return AI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=new Te(M.comparator);function tn(){return A6}const WI=new Te(M.comparator);function Go(...t){let e=WI;for(const n of t)e=e.insert(n.key,n);return e}function HI(t){let e=WI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ir(){return fl()}function GI(){return fl()}function fl(){return new Vi(t=>t.toString(),(t,e)=>t.isEqual(e))}const R6=new Te(M.comparator),P6=new Re(M.comparator);function ne(...t){let e=P6;for(const n of t)e=e.add(n);return e}const O6=new Re(ee);function N0(){return O6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(e)?"-0":e}}function QI(t){return{integerValue:""+t}}function JI(t,e){return NI(e)?QI(e):KI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this._=void 0}}function L6(t,e,n){return t instanceof za?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&qh(i)&&(i=S0(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Cs?ek(t,e):t instanceof js?tk(t,e):function(r,i){const s=ZI(r,i),a=Wv(s)+Wv(r.gt);return am(s)&&am(r.gt)?QI(a):KI(r.serializer,a)}(t,e)}function $6(t,e,n){return t instanceof Cs?ek(t,e):t instanceof js?tk(t,e):n}function ZI(t,e){return t instanceof Ya?am(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class za extends Hh{}class Cs extends Hh{constructor(e){super(),this.elements=e}}function ek(t,e){const n=nk(e);for(const r of t.elements)n.some(i=>hr(i,r))||n.push(r);return{arrayValue:{values:n}}}class js extends Hh{constructor(e){super(),this.elements=e}}function tk(t,e){let n=nk(e);for(const r of t.elements)n=n.filter(i=>!hr(i,r));return{arrayValue:{values:n}}}class Ya extends Hh{constructor(e,n){super(),this.serializer=e,this.gt=n}}function Wv(t){return Xe(t.integerValue||t.doubleValue)}function nk(t){return tc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.field=e,this.transform=n}}function M6(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Cs&&r instanceof Cs||n instanceof js&&r instanceof js?Va(n.elements,r.elements,hr):n instanceof Ya&&r instanceof Ya?hr(n.gt,r.gt):n instanceof za&&r instanceof za}(t.transform,e.transform)}class F6{constructor(e,n){this.version=e,this.transformResults=n}}class Le{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Le}static exists(e){return new Le(void 0,e)}static updateTime(e){return new Le(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gh{}function rk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ho(t.key,Le.none()):new uo(t.key,t.data,Le.none());{const n=t.data,r=It.empty();let i=new Re(Ke.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Ur(t.key,r,new en(i.toArray()),Le.none())}}function V6(t,e,n){t instanceof uo?function(r,i,s){const a=r.value.clone(),o=Gv(r.fieldTransforms,i,s.transformResults);a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ur?function(r,i,s){if(!Ju(r.precondition,i))return void i.convertToUnknownDocument(s.version);const a=Gv(r.fieldTransforms,i,s.transformResults),o=i.data;o.setAll(ik(r)),o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function gl(t,e,n,r){return t instanceof uo?function(i,s,a,o){if(!Ju(i.precondition,s))return a;const c=i.value.clone(),u=Kv(i.fieldTransforms,o,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ur?function(i,s,a,o){if(!Ju(i.precondition,s))return a;const c=Kv(i.fieldTransforms,o,s),u=s.data;return u.setAll(ik(i)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,s,a){return Ju(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function U6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ZI(r.transform,i||null);s!=null&&(n===null&&(n=It.empty()),n.set(r.field,s))}return n||null}function Hv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Va(n,r,(i,s)=>M6(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uo extends Gh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ur extends Gh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ik(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Gv(t,e,n){const r=new Map;G(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,$6(a,o,n[i]))}return r}function Kv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,L6(s,a,e))}return r}class ho extends Gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T0 extends Gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&V6(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GI();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const c=rk(a,o);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,(n,r)=>Hv(n,r))&&Va(this.baseMutations,e.baseMutations,(n,r)=>Hv(n,r))}}class j0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){G(e.mutations.length===r.length);let i=R6;const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new j0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,he;function sk(t){switch(t){default:return X();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function ak(t){if(t===void 0)return Ge("GRPC error has no .code"),E.UNKNOWN;switch(t){case et.OK:return E.OK;case et.CANCELLED:return E.CANCELLED;case et.UNKNOWN:return E.UNKNOWN;case et.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case et.INTERNAL:return E.INTERNAL;case et.UNAVAILABLE:return E.UNAVAILABLE;case et.UNAUTHENTICATED:return E.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case et.NOT_FOUND:return E.NOT_FOUND;case et.ALREADY_EXISTS:return E.ALREADY_EXISTS;case et.PERMISSION_DENIED:return E.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case et.ABORTED:return E.ABORTED;case et.OUT_OF_RANGE:return E.OUT_OF_RANGE;case et.UNIMPLEMENTED:return E.UNIMPLEMENTED;case et.DATA_LOSS:return E.DATA_LOSS;default:return X()}}(he=et||(et={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Eu}static getOrCreateInstance(){return Eu===null&&(Eu=new A0),Eu}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Eu=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=new Ea([4294967295,4294967295],0);function Qv(t){const e=ok().encode(t),n=new $5;return n.update(e),new Uint8Array(n.digest())}function Jv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ea([n,r],0),new Ea([i,s],0)]}class R0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ko(`Invalid padding: ${n}`);if(r<0)throw new Ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ko(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ko(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Ea.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(Ea.fromNumber(r)));return i.compare(z6)===1&&(i=new Ea([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=Qv(e),[r,i]=Jv(n);for(let s=0;s<this.hashCount;s++){const a=this.Et(r,i,s);if(!this.At(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new R0(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.It===0)return;const n=Qv(e),[r,i]=Jv(n);for(let s=0;s<this.hashCount;s++){const a=this.Et(r,i,s);this.Rt(a)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Pc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rc(H.min(),i,new Te(ee),tn(),ne())}}class Pc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pc(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class lk{constructor(e,n){this.targetId=e,this.Vt=n}}class ck{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Zv{constructor(){this.St=0,this.Dt=tx(),this.Ct=ot.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ne(),n=ne(),r=ne();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new Pc(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=tx()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Y6{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=tn(),this.zt=ex(),this.Wt=new Te(ee)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const a=s.target;if(zd(a))if(i===0){const o=new M(a.path);this.Yt(r,o,De.newNoDocument(o,H.min()))}else G(i===1);else{const o=this.ie(r);if(o!==i){const c=this.re(e,o);if(c!==0){this.ee(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,u)}(n=A0.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,d,h){var p,f,y,v,x,m;const g={localCacheCount:d,existenceFilterCount:h.count},w=h.unchangedNames;return w&&(g.bloomFilter={applied:u===0,hashCount:(p=w==null?void 0:w.hashCount)!==null&&p!==void 0?p:0,bitmapLength:(v=(y=(f=w==null?void 0:w.bits)===null||f===void 0?void 0:f.bitmap)===null||y===void 0?void 0:y.length)!==null&&v!==void 0?v:0,padding:(m=(x=w==null?void 0:w.bits)===null||x===void 0?void 0:x.padding)!==null&&m!==void 0?m:0}),g}(c,o,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:a=0},hashCount:o=0}=r;let c,u;try{c=Ii(s).toUint8Array()}catch(d){if(d instanceof RI)return Vn("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw d}try{u=new R0(c,a,o)}catch(d){return Vn(d instanceof Ko?"BloomFilter error: ":"Applying bloom filter failed: ",d),1}return u.It===0?1:i!==n-this.oe(e.targetId,u)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const a=this.Gt.ue(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;n.vt(o)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,a)=>{const o=this.se(a);if(o){if(s.current&&zd(o.target)){const c=new M(o.target.path);this.jt.get(c)!==null||this.ae(a,c)||this.Yt(a,c,De.newNoDocument(c,e))}s.Mt&&(n.set(a,s.Ot()),s.Ft())}});let r=ne();this.zt.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.se(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.jt.forEach((s,a)=>a.setReadTime(e));const i=new Rc(e,n,this.Wt,this.jt,r);return this.jt=tn(),this.zt=ex(),this.Wt=new Te(ee),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new Zv,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Re(ee),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||R("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Zv),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function ex(){return new Te(M.comparator)}function tx(){return new Te(M.comparator)}const X6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),q6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),W6=(()=>({and:"AND",or:"OR"}))();class H6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hm(t,e){return t.useProto3Json||Tc(e)?e:{value:e}}function Xa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function G6(t,e){return Xa(t,e.toTimestamp())}function Qe(t){return G(!!t),H.fromTimestamp(function(e){const n=Si(e);return new $e(n.seconds,n.nanos)}(t))}function P0(t,e){return function(n){return new fe(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function dk(t){const e=fe.fromString(t);return G(xk(e)),e}function nc(t,e){return P0(t.databaseId,e.path)}function lr(t,e){const n=dk(e);if(n.get(1)!==t.databaseId.projectId)throw new j(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(pk(n))}function pm(t,e){return P0(t.databaseId,e)}function hk(t){const e=dk(t);return e.length===4?fe.emptyPath():pk(e)}function rc(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pk(t){return G(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function nx(t,e,n){return{name:nc(t,e),fields:n.value.mapValue.fields}}function fk(t,e,n){const r=lr(t,e.name),i=Qe(e.updateTime),s=e.createTime?Qe(e.createTime):H.min(),a=new It({mapValue:{fields:e.fields}}),o=De.newFoundDocument(r,i,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function K6(t,e){return"found"in e?function(n,r){G(!!r.found),r.found.name,r.found.updateTime;const i=lr(n,r.found.name),s=Qe(r.found.updateTime),a=r.found.createTime?Qe(r.found.createTime):H.min(),o=new It({mapValue:{fields:r.found.fields}});return De.newFoundDocument(i,s,a,o)}(t,e):"missing"in e?function(n,r){G(!!r.missing),G(!!r.readTime);const i=lr(n,r.missing),s=Qe(r.readTime);return De.newNoDocument(i,s)}(t,e):X()}function Q6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(G(u===void 0||typeof u=="string"),ot.fromBase64String(u||"")):(G(u===void 0||u instanceof Uint8Array),ot.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?E.UNKNOWN:ak(c.code);return new j(u,c.message||"")}(a);n=new ck(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=lr(t,r.document.name),s=Qe(r.document.updateTime),a=r.document.createTime?Qe(r.document.createTime):H.min(),o=new It({mapValue:{fields:r.document.fields}}),c=De.newFoundDocument(i,s,a,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Zu(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=lr(t,r.document),s=r.readTime?Qe(r.readTime):H.min(),a=De.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Zu([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=lr(t,r.document),s=r.removedTargetIds||[];n=new Zu([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new B6(i,s),o=r.targetId;n=new lk(o,a)}}return n}function ic(t,e){let n;if(e instanceof uo)n={update:nx(t,e.key,e.value)};else if(e instanceof ho)n={delete:nc(t,e.key)};else if(e instanceof Ur)n={update:nx(t,e.key,e.data),updateMask:rP(e.fieldMask)};else{if(!(e instanceof T0))return X();n={verify:nc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const a=s.transform;if(a instanceof za)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Cs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof js)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ya)return{fieldPath:s.field.canonicalString(),increment:a.gt};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:G6(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X()}(t,e.precondition)),n}function fm(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Le.updateTime(Qe(i.updateTime)):i.exists!==void 0?Le.exists(i.exists):Le.none()}(e.currentDocument):Le.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let o=null;if("setToServerValue"in a)G(a.setToServerValue==="REQUEST_TIME"),o=new za;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];o=new Cs(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];o=new js(u)}else"increment"in a?o=new Ya(s,a.increment):X();const c=Ke.fromServerFormat(a.fieldPath);return new Ac(c,o)}(t,i)):[];if(e.update){e.update.name;const i=lr(t,e.update.name),s=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(o){const c=o.fieldPaths||[];return new en(c.map(u=>Ke.fromServerFormat(u)))}(e.updateMask);return new Ur(i,s,a,n,r)}return new uo(i,s,n,r)}if(e.delete){const i=lr(t,e.delete);return new ho(i,n)}if(e.verify){const i=lr(t,e.verify);return new T0(i,n)}return X()}function J6(t,e){return t&&t.length>0?(G(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Qe(r.updateTime):Qe(i);return s.isEqual(H.min())&&(s=Qe(i)),new F6(s,r.transformResults||[])}(n,e))):[]}function gk(t,e){return{documents:[pm(t,e.path)]}}function mk(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=pm(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=pm(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(c.length!==0)return vk(xe.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Js(d.field),direction:eP(d.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=hm(t,e.limit);var o;return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(o=e.startAt).inclusive,values:o.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function yk(t){let e=hk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){G(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(d){const h=wk(d);return h instanceof xe&&I0(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(d=>function(h){return new Na(Zs(h.field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(d)));let o=null;n.limit&&(o=function(d){let h;return h=typeof d=="object"?d.value:d,Tc(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){const h=!!d.before,p=d.values||[];return new Ni(p,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const h=!d.before,p=d.values||[];return new Ni(p,h)}(n.endAt)),zI(e,i,a,s,o,"F",c,u)}function Z6(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wk(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Zs(e.unaryFilter.field);return ce.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Zs(e.unaryFilter.field);return ce.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zs(e.unaryFilter.field);return ce.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Zs(e.unaryFilter.field);return ce.create(s,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(e){return ce.create(Zs(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return xe.create(e.compositeFilter.filters.map(n=>wk(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return X()}}(e.compositeFilter.op))}(t):X()}function eP(t){return X6[t]}function tP(t){return q6[t]}function nP(t){return W6[t]}function Js(t){return{fieldPath:t.canonicalString()}}function Zs(t){return Ke.fromServerFormat(t.fieldPath)}function vk(t){return t instanceof ce?function(e){if(e.op==="=="){if(Fv(e.value))return{unaryFilter:{field:Js(e.field),op:"IS_NAN"}};if(Mv(e.value))return{unaryFilter:{field:Js(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Fv(e.value))return{unaryFilter:{field:Js(e.field),op:"IS_NOT_NAN"}};if(Mv(e.value))return{unaryFilter:{field:Js(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Js(e.field),op:tP(e.op),value:e.value}}}(t):t instanceof xe?function(e){const n=e.getFilters().map(r=>vk(r));return n.length===1?n[0]:{compositeFilter:{op:nP(e.op),filters:n}}}(t):X()}function rP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,i,s=H.min(),a=H.min(),o=ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.fe=e}}function iP(t,e){let n;if(e.document)n=fk(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=M.fromSegments(e.noDocument.path),i=As(e.noDocument.readTime);n=De.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return X();{const r=M.fromSegments(e.unknownDocument.path),i=As(e.unknownDocument.version);n=De.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new $e(r[0],r[1]);return H.fromTimestamp(i)}(e.readTime)),n}function rx(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:nc(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Xa(i,s.version.toTimestamp()),createTime:Xa(i,s.createTime.toTimestamp())}}(t.fe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ds(e.version)};else{if(!e.isUnknownDocument())return X();r.unknownDocument={path:n.path.toArray(),version:Ds(e.version)}}return r}function qd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ds(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function As(t){const e=new $e(t.seconds,t.nanoseconds);return H.fromTimestamp(e)}function Ji(t,e){const n=(e.baseMutations||[]).map(s=>fm(t.fe,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>fm(t.fe,s)),i=$e.fromMillis(e.localWriteTimeMs);return new C0(e.batchId,i,n,r)}function Qo(t){const e=As(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?As(t.lastLimboFreeSnapshotVersion):H.min();let r;var i;return t.query.documents!==void 0?(G((i=t.query).documents.length===1),r=an(co(hk(i.documents[0])))):r=function(s){return an(yk(s))}(t.query),new kr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function _k(t,e){const n=Ds(e.snapshotVersion),r=Ds(e.lastLimboFreeSnapshotVersion);let i;i=zd(e.target)?gk(t.fe,e.target):mk(t.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ts(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function O0(t){const e=yk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xd(e,e.limit,"L"):e}function Rf(t,e){return new D0(e.largestBatchId,fm(t.fe,e.overlayMutation))}function ix(t,e){const n=e.path.lastSegment();return[t,qt(e.path.popLast()),n]}function sx(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ds(r.readTime),documentKey:qt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{getBundleMetadata(e,n){return ax(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:As(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return ax(e).put({bundleId:(r=n).id,createTime:Ds(Qe(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return ox(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:O0(i.bundledQuery),readTime:As(i.readTime)};var i})}saveNamedQuery(e,n){return ox(e).put(function(r){return{name:r.name,readTime:Ds(Qe(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function ax(t){return mt(t,"bundles")}function ox(t){return mt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){const r=n.uid||"";return new Kh(e,r)}getOverlay(e,n){return Oo(e).get(ix(this.userId,n)).next(r=>r?Rf(this.serializer,r):null)}getOverlays(e,n){const r=ir();return I.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,a)=>{const o=new D0(n,a);i.push(this.we(e,o))}),I.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(a=>i.add(qt(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Oo(e).J("collectionPathOverlayIndex",o))}),I.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ir(),s=qt(n),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Oo(e).j("collectionPathOverlayIndex",a).next(o=>{for(const c of o){const u=Rf(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ir();let a;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Oo(e).X({index:"collectionGroupOverlayIndex",range:o},(c,u,d)=>{const h=Rf(this.serializer,u);s.size()<i||h.largestBatchId===a?(s.set(h.getKey(),h),a=h.largestBatchId):d.done()}).next(()=>s)}we(e,n){return Oo(e).put(function(r,i,s){const[a,o,c]=ix(i,s.mutation.key);return{userId:i,collectionPath:o,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ic(r.fe,s.mutation)}}(this.serializer,this.userId,n))}}function Oo(t){return mt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Xe(e.integerValue));else if("doubleValue"in e){const r=Xe(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),Jl(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),typeof r=="string"?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Ii(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?PI(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):X()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),M.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}Zi.Ve=new Zi;function aP(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function lx(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=aP(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class oP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.De(r.value),r=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ne(r.value),r=n.next();this.ke()}Me(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=n.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=n.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const n=this.Fe(e),r=lx(n);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Le(e){const n=this.Fe(e),r=lx(n);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}De(e){const n=255&e;n===0?(this.Ue(0),this.Ue(255)):n===255?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;n===0?(this.Ge(0),this.Ge(255)):n===255?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lP{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class cP{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Lo{constructor(){this.je=new oP,this.ze=new lP(this.je),this.We=new cP(this.je)}seed(e){this.je.seed(e)}He(e){return e===0?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new es(this.indexId,this.documentKey,this.arrayValue,r)}}function Wr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=cx(t.arrayValue,e.arrayValue),n!==0?n:(n=cx(t.directionalValue,e.directionalValue),n!==0?n:M.comparator(t.documentKey,e.documentKey)))}function cx(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const r=n;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){G(e.collectionGroup===this.collectionId);const n=rm(e);if(n!==void 0&&!this.en(n))return!1;const r=Ki(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.en(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Ze!==void 0){if(!i.has(this.Ze.field.canonicalString())){const o=r[s];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.Ye.length||!this.sn(this.Ye[a++],o))return!1}return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t){var e,n;if(G(t instanceof ce||t instanceof xe),t instanceof ce){if(t instanceof BI){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ce.create(t.field,"==",s)))||[];return xe.create(i,"or")}return t}const r=t.filters.map(i=>Sk(i));return xe.create(r,t.op)}function dP(t){if(t.getFilters().length===0)return[];const e=ym(Sk(t));return G(Ik(e)),gm(e)||mm(e)?[e]:e.getFilters()}function gm(t){return t instanceof ce}function mm(t){return t instanceof xe&&I0(t)}function Ik(t){return gm(t)||mm(t)||function(e){if(e instanceof xe&&om(e)){for(const n of e.getFilters())if(!gm(n)&&!mm(n))return!1;return!0}return!1}(t)}function ym(t){if(G(t instanceof ce||t instanceof xe),t instanceof ce)return t;if(t.filters.length===1)return ym(t.filters[0]);const e=t.filters.map(r=>ym(r));let n=xe.create(e,t.op);return n=Wd(n),Ik(n)?n:(G(n instanceof xe),G(Ba(n)),G(n.filters.length>1),n.filters.reduce((r,i)=>L0(r,i)))}function L0(t,e){let n;return G(t instanceof ce||t instanceof xe),G(e instanceof ce||e instanceof xe),n=t instanceof ce?e instanceof ce?function(r,i){return xe.create([r,i],"and")}(t,e):ux(t,e):e instanceof ce?ux(e,t):function(r,i){if(G(r.filters.length>0&&i.filters.length>0),Ba(r)&&Ba(i))return FI(r,i.getFilters());const s=om(r)?r:i,a=om(r)?i:r,o=s.filters.map(c=>L0(c,a));return xe.create(o,"or")}(t,e),Wd(n)}function ux(t,e){if(Ba(e))return FI(e,t.getFilters());{const n=e.filters.map(r=>L0(t,r));return xe.create(n,"or")}}function Wd(t){if(G(t instanceof ce||t instanceof xe),t instanceof ce)return t;const e=t.getFilters();if(e.length===1)return Wd(e[0]);if($I(t))return t;const n=e.map(i=>Wd(i)),r=[];return n.forEach(i=>{i instanceof ce?r.push(i):i instanceof xe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:xe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.rn=new $0}addToCollectionParentIndex(e,n){return this.rn.add(n),I.resolve()}getCollectionParents(e,n){return I.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return I.resolve()}deleteFieldIndex(e,n){return I.resolve()}getDocumentsMatchingTarget(e,n){return I.resolve(null)}getIndexType(e,n){return I.resolve(0)}getFieldIndexes(e,n){return I.resolve([])}getNextCollectionGroupToUpdate(e){return I.resolve(null)}getMinOffset(e,n){return I.resolve(gn.min())}getMinOffsetFromCollectionGroup(e,n){return I.resolve(gn.min())}updateCollectionGroup(e,n,r){return I.resolve()}updateIndexEntries(e,n){return I.resolve()}}class $0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Re(fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new Uint8Array(0);class pP{constructor(e,n){this.user=e,this.databaseId=n,this.on=new $0,this.un=new Vi(r=>Ts(r),(r,i)=>Cc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const s={collectionId:r,parent:qt(i)};return dx(e).put(s)}return I.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[bI(n),""],!1,!0);return dx(e).j(i).next(s=>{for(const a of s){if(a.collectionId!==n)break;r.push(rr(a.parent))}return r})}addFieldIndex(e,n){const r=Tu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const a=Mo(e);return s.next(o=>{a.put(sx(o,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Tu(e),i=Mo(e),s=$o(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=$o(e);let i=!0;const s=new Map;return I.forEach(this.cn(n),a=>this.an(e,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=ne();const o=[];return I.forEach(s,(c,u)=>{var d;R("IndexedDbIndexManager",`Using index ${d=c,`id=${d.indexId}|cg=${d.collectionGroup}|f=${d.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`} to execute ${Ts(n)}`);const h=function(w,b){const S=rm(b);if(S===void 0)return null;for(const _ of Yd(w,S.fieldPath))switch(_.op){case"array-contains-any":return _.value.arrayValue.values||[];case"array-contains":return[_.value]}return null}(u,c),p=function(w,b){const S=new Map;for(const _ of Ki(b))for(const T of Yd(w,_.fieldPath))switch(T.op){case"==":case"in":S.set(_.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return S.set(_.fieldPath.canonicalString(),T.value),Array.from(S.values())}return null}(u,c),f=function(w,b){const S=[];let _=!0;for(const T of Ki(b)){const C=T.kind===0?Yv(w,T.fieldPath,w.startAt):Xv(w,T.fieldPath,w.startAt);S.push(C.value),_&&(_=C.inclusive)}return new Ni(S,_)}(u,c),y=function(w,b){const S=[];let _=!0;for(const T of Ki(b)){const C=T.kind===0?Xv(w,T.fieldPath,w.endAt):Yv(w,T.fieldPath,w.endAt);S.push(C.value),_&&(_=C.inclusive)}return new Ni(S,_)}(u,c),v=this.hn(c,u,f),x=this.hn(c,u,y),m=this.ln(c,u,p),g=this.fn(c.indexId,h,v,f.inclusive,x,y.inclusive,m);return I.forEach(g,w=>r.H(w,n.limit).next(b=>{b.forEach(S=>{const _=M.fromSegments(S.documentKey);a.has(_)||(a=a.add(_),o.push(_))})}))}).next(()=>o)}return I.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=dP(xe.create(e.filters,"and")).map(r=>cm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,r,i,s,a,o){const c=(n!=null?n.length:1)*Math.max(r.length,s.length),u=c/(n!=null?n.length:1),d=[];for(let h=0;h<c;++h){const p=n?this.dn(n[h/u]):Nu,f=this.wn(e,p,r[h%u],i),y=this._n(e,p,s[h%u],a),v=o.map(x=>this.wn(e,p,x,!0));d.push(...this.createRange(f,y,v))}return d}wn(e,n,r,i){const s=new es(e,M.empty(),n,r);return i?s:s.Je()}_n(e,n,r,i){const s=new es(e,M.empty(),n,r);return i?s.Je():s}an(e,n){const r=new uP(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const o of s)r.tn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let r=2;const i=this.cn(n);return I.forEach(i,s=>this.an(e,s).next(a=>{a?r!==0&&a.fields.length<function(o){let c=new Re(Ke.comparator),u=!1;for(const d of o.filters)for(const h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:c=c.add(h.field));for(const d of o.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}mn(e,n){const r=new Lo;for(const i of Ki(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const a=r.He(i.kind);Zi.Ve._e(s,a)}return r.Qe()}dn(e){const n=new Lo;return Zi.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const r=new Lo;return Zi.Ve._e(Ns(this.databaseId,n),r.He(function(i){const s=Ki(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,n,r){if(r===null)return[];let i=[];i.push(new Lo);let s=0;for(const a of Ki(e)){const o=r[s++];for(const c of i)if(this.yn(n,a.fieldPath)&&tc(o))i=this.pn(i,a,o);else{const u=c.He(a.kind);Zi.Ve._e(o,u)}}return this.In(i)}hn(e,n,r){return this.ln(e,n,r.position)}In(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Qe();return n}pn(e,n,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const c=new Lo;c.seed(o.Qe()),Zi.Ve._e(a,c.He(n.kind)),s.push(c)}return s}yn(e,n){return!!e.filters.find(r=>r instanceof ce&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Tu(e),i=Mo(e);return(n?r.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.j()).next(s=>{const a=[];return I.forEach(s,o=>i.get([o.indexId,this.uid]).next(c=>{a.push(function(u,d){const h=d?new Bd(d.sequenceNumber,new gn(As(d.readTime),new M(rr(d.documentKey)),d.largestBatchId)):Bd.empty(),p=u.fields.map(([f,y])=>new G5(Ke.fromServerFormat(f),y));return new _I(u.indexId,u.collectionGroup,p,h)}(o,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ee(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Tu(e),s=Mo(e);return this.Tn(e).next(a=>i.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(o=>I.forEach(o,c=>s.put(sx(c.indexId,this.user,a,r)))))}updateIndexEntries(e,n){const r=new Map;return I.forEach(n,(i,s)=>{const a=r.get(i.collectionGroup);return(a?I.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),I.forEach(o,c=>this.En(e,i,c).next(u=>{const d=this.An(s,c);return u.isEqual(d)?I.resolve():this.vn(e,s,c,u,d)}))))})}Rn(e,n,r,i){return $o(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,r,i){return $o(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,n.key),n.key.path.toArray()])}En(e,n,r){const i=$o(e);let s=new Re(Wr);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,n)])},(a,o)=>{s=s.add(new es(r.indexId,n,o.arrayValue,o.directionalValue))}).next(()=>s)}An(e,n){let r=new Re(Wr);const i=this.mn(n,e);if(i==null)return r;const s=rm(n);if(s!=null){const a=e.data.field(s.fieldPath);if(tc(a))for(const o of a.arrayValue.values||[])r=r.add(new es(n.indexId,e.key,this.dn(o),i))}else r=r.add(new es(n.indexId,e.key,Nu,i));return r}vn(e,n,r,i,s){R("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const a=[];return function(o,c,u,d,h){const p=o.getIterator(),f=c.getIterator();let y=Ks(p),v=Ks(f);for(;y||v;){let x=!1,m=!1;if(y&&v){const g=u(y,v);g<0?m=!0:g>0&&(x=!0)}else y!=null?m=!0:x=!0;x?(d(v),v=Ks(f)):m?(h(y),y=Ks(p)):(y=Ks(p),v=Ks(f))}}(i,s,Wr,o=>{a.push(this.Rn(e,n,r,o))},o=>{a.push(this.Pn(e,n,r,o))}),I.waitFor(a)}Tn(e){let n=1;return Mo(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((a,o)=>Wr(a,o)).filter((a,o,c)=>!o||Wr(a,c[o-1])!==0);const i=[];i.push(e);for(const a of r){const o=Wr(a,e),c=Wr(a,n);if(o===0)i[0]=e.Je();else if(o>0&&c<0)i.push(a),i.push(a.Je());else if(c>0)break}i.push(n);const s=[];for(let a=0;a<i.length;a+=2){if(this.bn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Nu,[]],c=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Nu,[]];s.push(IDBKeyRange.bound(o,c))}return s}bn(e,n){return Wr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(hx)}getMinOffset(e,n){return I.mapArray(this.cn(n),r=>this.an(e,r).next(i=>i||X())).next(hx)}}function dx(t){return mt(t,"collectionParents")}function $o(t){return mt(t,"indexEntries")}function Tu(t){return mt(t,"indexConfiguration")}function Mo(t){return mt(t,"indexState")}function hx(t){G(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;b0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new gn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const c=r.X({range:a},(d,h,p)=>(o++,p.delete()));s.push(c.next(()=>{G(o===1)}));const u=[];for(const d of n.mutations){const h=TI(e,d.key.path,n.batchId);s.push(i.delete(h)),u.push(d.key)}return I.waitFor(s).next(()=>u)}function Hd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw X();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);class Qh{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,n,r,i){G(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Qh(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hr(e).X({index:"userMutationsIndex",range:r},(i,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ea(e),a=Hr(e);return a.add({}).next(o=>{G(typeof o=="number");const c=new C0(o,n,r,i),u=function(p,f,y){const v=y.baseMutations.map(m=>ic(p.fe,m)),x=y.mutations.map(m=>ic(p.fe,m));return{userId:f,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:v,mutations:x}}(this.serializer,this.userId,c),d=[];let h=new Re((p,f)=>ee(p.canonicalString(),f.canonicalString()));for(const p of i){const f=TI(this.userId,p.key.path,o);h=h.add(p.key.path.popLast()),d.push(a.put(u)),d.push(s.put(f,t6))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Vn[o]=c.keys()}),I.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return Hr(e).get(n).next(r=>r?(G(r.userId===this.userId),Ji(this.serializer,r)):null)}Sn(e,n){return this.Vn[n]?I.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Vn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Hr(e).X({index:"userMutationsIndex",range:i},(a,o,c)=>{o.userId===this.userId&&(G(o.batchId>=r),s=Ji(this.serializer,o)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hr(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hr(e).j("userMutationsIndex",n).next(r=>r.map(i=>Ji(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Gu(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ea(e).X({range:i},(a,o,c)=>{const[u,d,h]=a,p=rr(d);if(u===this.userId&&n.path.isEqual(p))return Hr(e).get(h).next(f=>{if(!f)throw X();G(f.userId===this.userId),s.push(Ji(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Re(ee);const i=[];return n.forEach(s=>{const a=Gu(this.userId,s.path),o=IDBKeyRange.lowerBound(a),c=ea(e).X({range:o},(u,d,h)=>{const[p,f,y]=u,v=rr(f);p===this.userId&&s.path.isEqual(v)?r=r.add(y):h.done()});i.push(c)}),I.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Gu(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new Re(ee);return ea(e).X({range:a},(c,u,d)=>{const[h,p,f]=c,y=rr(p);h===this.userId&&r.isPrefixOf(y)?y.length===i&&(o=o.add(f)):d.done()}).next(()=>this.Dn(e,o))}Dn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Hr(e).get(s).next(a=>{if(a===null)throw X();G(a.userId===this.userId),r.push(Ji(this.serializer,a))}))}),I.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return kk(e.ht,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),I.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return I.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ea(e).X({range:r},(s,a,o)=>{if(s[0]===this.userId){const c=rr(s[1]);i.push(c)}else o.done()}).next(()=>{G(i.length===0)})})}containsKey(e,n){return Ek(e,this.userId,n)}xn(e){return Nk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ek(t,e,n){const r=Gu(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return ea(t).X({range:s,Y:!0},(o,c,u)=>{const[d,h,p]=o;d===e&&h===i&&(a=!0),u.done()}).next(()=>a)}function Hr(t){return mt(t,"mutations")}function ea(t){return mt(t,"documentMutations")}function Nk(t){return mt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Rs(0)}static Mn(){return new Rs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const r=new Rs(n.highestTargetId);return n.highestTargetId=r.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>H.fromTimestamp(new $e(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.On(e,i)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(n,r),this.On(e,r))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Qs(e).delete(n.targetId)).next(()=>this.$n(e)).next(r=>(G(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Qs(e).X((a,o)=>{const c=Qo(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>I.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Qs(e).X((r,i)=>{const s=Qo(i);n(s)})}$n(e){return fx(e).get("targetGlobalKey").next(n=>(G(n!==null),n))}On(e,n){return fx(e).put("targetGlobalKey",n)}Fn(e,n){return Qs(e).put(_k(this.serializer,n))}Bn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ts(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Qs(e).X({range:i,index:"queryTargetsIndex"},(a,o,c)=>{const u=Qo(o);Cc(n,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=ei(e);return n.forEach(a=>{const o=qt(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))}),I.waitFor(i)}removeMatchingKeys(e,n,r){const i=ei(e);return I.forEach(n,s=>{const a=qt(s.path);return I.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ei(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ei(e);let s=ne();return i.X({range:r,Y:!0},(a,o,c)=>{const u=rr(a[1]),d=new M(u);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=qt(n.path),i=IDBKeyRange.bound([r],[bI(r)],!1,!0);let s=0;return ei(e).X({index:"documentTargetsIndex",Y:!0,range:i},([a,o],c,u)=>{a!==0&&(s++,u.done())}).next(()=>s>0)}le(e,n){return Qs(e).get(n).next(r=>r?Qo(r):null)}}function Qs(t){return mt(t,"targets")}function fx(t){return mt(t,"targetGlobal")}function ei(t){return mt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx([t,e],[n,r]){const i=ee(t,n);return i===0?ee(e,r):i}class gP{constructor(e){this.Ln=e,this.buffer=new Re(gx),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();gx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}Qn(e){R("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fi(n)?R("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Mi(n)}await this.Qn(3e5)})}}class yP{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return I.resolve(Zt.ct);const r=new gP(n);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(R("LruGarbageCollector","Garbage collection skipped; disabled"),I.resolve(px)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(R("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),px):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let r,i,s,a,o,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(R("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,a=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),nm()<=pe.DEBUG&&R("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),I.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function wP(t,e){return new yP(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n){this.db=e,this.garbageCollector=wP(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Jn(e){let n=0;return this.Wn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(r,i)=>n(i))}addReference(e,n,r){return Cu(e,r)}removeReference(e,n,r){return Cu(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Cu(e,n)}Xn(e,n){return function(r,i){let s=!1;return Nk(r).Z(a=>Ek(r,a,i).next(o=>(o&&(s=!0),I.resolve(!o)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(a,o)=>{if(o<=n){const c=this.Xn(e,a).next(u=>{if(!u)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,H.min()),ei(e).delete([0,qt(a.path)])))});i.push(c)}}).next(()=>I.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Cu(e,n)}Yn(e,n){const r=ei(e);let i,s=Zt.ct;return r.X({index:"documentTargetsIndex"},([a,o],{path:c,sequenceNumber:u})=>{a===0?(s!==Zt.ct&&n(new M(rr(i)),s),s=u,i=c):s=Zt.ct}).next(()=>{s!==Zt.ct&&n(new M(rr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cu(t,e){return ei(t).put(function(n,r){return{targetId:0,path:qt(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.changes=new Vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,De.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?I.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return qi(e).put(r)}removeEntry(e,n,r){return qi(e).delete(function(i,s){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],qd(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Zn(e,r)))}getEntry(e,n){let r=De.newInvalidDocument(n);return qi(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Fo(n))},(i,s)=>{r=this.ts(n,s)}).next(()=>r)}es(e,n){let r={size:0,document:De.newInvalidDocument(n)};return qi(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Fo(n))},(i,s)=>{r={document:this.ts(n,s),size:Hd(s)}}).next(()=>r)}getEntries(e,n){let r=tn();return this.ns(e,n,(i,s)=>{const a=this.ts(i,s);r=r.insert(i,a)}).next(()=>r)}ss(e,n){let r=tn(),i=new Te(M.comparator);return this.ns(e,n,(s,a)=>{const o=this.ts(s,a);r=r.insert(s,o),i=i.insert(s,Hd(a))}).next(()=>({documents:r,rs:i}))}ns(e,n,r){if(n.isEmpty())return I.resolve();let i=new Re(wx);n.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Fo(i.first()),Fo(i.last())),a=i.getIterator();let o=a.getNext();return qi(e).X({index:"documentKeyIndex",range:s},(c,u,d)=>{const h=M.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&wx(o,h)<0;)r(o,null),o=a.getNext();o&&o.isEqual(h)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?d.G(Fo(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),qd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qi(e).j(IDBKeyRange.bound(a,o,!0)).next(c=>{let u=tn();for(const d of c){const h=this.ts(M.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Dc(n,h)||i.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=tn();const a=yx(n,r),o=yx(n,gn.max());return qi(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(c,u,d)=>{const h=this.ts(M.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new bP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return mx(e).get("remoteDocumentGlobalKey").next(n=>(G(!!n),n))}Zn(e,n){return mx(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const r=iP(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(H.min())))return r}return De.newInvalidDocument(e)}}function Ck(t){return new xP(t)}class bP extends Tk{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new Vi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Re((s,a)=>ee(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.us.get(s);if(n.push(this.os.removeEntry(e,s,o.readTime)),a.isValidDocument()){const c=rx(this.os.serializer,a);i=i.add(s.path.popLast());const u=Hd(c);r+=u-o.size,n.push(this.os.addEntry(e,s,c))}else if(r-=o.size,this.trackRemovals){const c=rx(this.os.serializer,a.convertToNoDocument(H.min()));n.push(this.os.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.os.updateMetadata(e,r)),I.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(r=>(this.us.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:r,rs:i})=>(i.forEach((s,a)=>{this.us.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function mx(t){return mt(t,"remoteDocumentGlobal")}function qi(t){return mt(t,"remoteDocumentsV14")}function Fo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yx(t,e){const n=e.documentKey.path.toArray();return[t,qd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function wx(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ee(n[s],r[s]),i)return i;return i=ee(n.length,r.length),i||(i=ee(n[n.length-2],r[r.length-2]),i||ee(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&gl(r.mutation,i,en.empty(),$e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const i=ir();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Go();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=tn();const a=fl(),o=fl();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Ur)?s=s.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),gl(d.mutation,u,d.mutation.getFieldMask(),$e.now())):a.set(u.key,en.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var h;return o.set(u,new _P(d,(h=a.get(u))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=fl();let i=new Te((a,o)=>a-o),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||en.empty();d=o.applyToLocalView(u,d),r.set(c,d);const h=(i.get(o.batchId)||ne()).add(c);i=i.insert(o.batchId,h)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,h=GI();d.forEach(p=>{if(!s.has(p)){const f=rk(n.get(p),r.get(p));f!==null&&h.set(p,f),s=s.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,h))}return I.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return M.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):E0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):I.resolve(ir());let o=-1,c=s;return a.next(u=>I.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?I.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,ne())).next(d=>({batchId:o,changes:HI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(r=>{let i=Go();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Go();return this.indexManager.getCollectionParents(e,i).next(a=>I.forEach(a,o=>{const c=function(u,d){return new Vr(d,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((o,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,De.newInvalidDocument(u)))});let a=Go();return s.forEach((o,c)=>{const u=i.get(o);u!==void 0&&gl(u.mutation,c,en.empty(),$e.now()),Dc(n,c)&&(a=a.insert(o,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return I.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Qe(r.createTime)}),I.resolve()}getNamedQuery(e,n){return I.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:O0(r.bundledQuery),readTime:Qe(r.readTime)}}(n)),I.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.overlays=new Te(M.comparator),this.ls=new Map}getOverlay(e,n){return I.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ir();return I.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),I.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),I.resolve()}getOverlaysForCollection(e,n,r){const i=ir(),s=n.length+1,a=new M(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return I.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Te((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=ir(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=ir(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=i)););return I.resolve(o)}we(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new D0(n,r));let s=this.ls.get(n);s===void 0&&(s=ne(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this.fs=new Re(ct.ds),this.ws=new Re(ct._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new ct(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new ct(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new M(new fe([])),r=new ct(n,e),i=new ct(n,e+1),s=[];return this.ws.forEachInRange([r,i],a=>{this.ys(a),s.push(a.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new M(new fe([])),r=new ct(n,e),i=new ct(n,e+1);let s=ne();return this.ws.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new ct(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return M.comparator(e.key,n.key)||ee(e.As,n.As)}static _s(e,n){return ee(e.As,n.As)||M.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Re(ct.ds)}checkEmpty(e){return I.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new C0(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.Rs=this.Rs.add(new ct(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return I.resolve(a)}lookupMutationBatch(e,n){return I.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.bs(r),s=i<0?0:i;return I.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return I.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),i=new ct(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],a=>{const o=this.Ps(a.As);s.push(o)}),I.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Re(ee);return n.forEach(i=>{const s=new ct(i,0),a=new ct(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,a],o=>{r=r.add(o.As)})}),I.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;M.isDocumentKey(s)||(s=s.child(""));const a=new ct(new M(s),0);let o=new Re(ee);return this.Rs.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.As)),!0)},a),I.resolve(this.Vs(o))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){G(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return I.forEach(n.mutations,i=>{const s=new ct(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new ct(n,0),i=this.Rs.firstAfterOrEqual(r);return I.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,I.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.Ds=e,this.docs=new Te(M.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return I.resolve(r?r.document.mutableCopy():De.newInvalidDocument(n))}getEntries(e,n){let r=tn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():De.newInvalidDocument(i))}),I.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=tn();const a=n.path,o=new M(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||b0(II(d),r)<=0||(i.has(d.key)||Dc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return I.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Cs(e,n){return I.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new NP(this)}getSize(e){return I.resolve(this.size)}}class NP extends Tk{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),I.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.persistence=e,this.xs=new Vi(n=>Ts(n),Cc),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Ns=0,this.ks=new M0,this.targetCount=0,this.Ms=Rs.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),I.resolve()}getLastRemoteSnapshotVersion(e){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return I.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),I.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Rs(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,I.resolve()}updateTargetData(e,n){return this.Fn(n),I.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,I.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.xs.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),I.waitFor(s).next(()=>i)}getTargetCount(e){return I.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return I.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),I.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),I.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),I.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return I.resolve(r)}containsKey(e,n){return I.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.$s={},this.overlays={},this.Os=new Zt(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new TP(this),this.indexManager=new hP,this.remoteDocumentCache=function(r){return new EP(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new bk(n),this.qs=new SP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new kP(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){R("MemoryPersistence","Starting transaction:",e);const i=new CP(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return I.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class CP extends EI{constructor(e){super(),this.currentSequenceNumber=e}}class Jh{constructor(e){this.persistence=e,this.Qs=new M0,this.js=null}static zs(e){return new Jh(e)}get Ws(){if(this.js)return this.js;throw X()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),I.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),I.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),I.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.Ws,r=>{const i=M.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,H.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return I.or([()=>I.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Xh("createOrUpgrade",n);r<1&&i>=1&&(function(o){o.createObjectStore("owner")}(e),function(o){o.createObjectStore("mutationQueues",{keyPath:"userId"}),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pv,{unique:!0}),o.createObjectStore("documentMutations")}(e),vx(e),function(o){o.createObjectStore("remoteDocuments")}(e));let a=I.resolve();return r<3&&i>=3&&(r!==0&&(function(o){o.deleteObjectStore("targetDocuments"),o.deleteObjectStore("targets"),o.deleteObjectStore("targetGlobal")}(e),vx(e)),a=a.next(()=>function(o){const c=o.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:H.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(o,c){return c.store("mutations").j().next(u=>{o.deleteObjectStore("mutations"),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pv,{unique:!0});const d=c.store("mutations"),h=u.map(p=>d.put(p));return I.waitFor(h)})}(e,s))),a=a.next(()=>{(function(o){o.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.Ys(s))),r<6&&i>=6&&(a=a.next(()=>(function(o){o.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(a=a.next(()=>this.Zs(s))),r<8&&i>=8&&(a=a.next(()=>this.ti(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(o){o.objectStoreNames.contains("remoteDocumentChanges")&&o.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.ei(s))),r<11&&i>=11&&(a=a.next(()=>{(function(o){o.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(o){o.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(o){const c=o.createObjectStore("documentOverlays",{keyPath:p6});c.createIndex("collectionPathOverlayIndex",f6,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",g6,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(o){const c=o.createObjectStore("remoteDocumentsV14",{keyPath:n6});c.createIndex("documentKeyIndex",r6),c.createIndex("collectionGroupIndex",i6)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.si(e,s))),r<15&&i>=15&&(a=a.next(()=>function(o){o.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),o.createObjectStore("indexState",{keyPath:c6}).createIndex("sequenceNumberIndex",u6,{unique:!1}),o.createObjectStore("indexEntries",{keyPath:d6}).createIndex("documentKeyIndex",h6,{unique:!1})}(e))),a}Xs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=Hd(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next(i=>I.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",a).next(o=>I.forEach(o,c=>{G(c.userId===s.userId);const u=Ji(this.serializer,c);return kk(e,s.userId,u).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((a,o)=>{const c=new fe(a),u=function(d){return[0,qt(d)]}(c);s.push(n.get(u).next(d=>d?I.resolve():(h=>n.put({targetId:0,path:qt(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>I.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:l6});const r=n.store("collectionParents"),i=new $0,s=a=>{if(i.add(a)){const o=a.lastSegment(),c=a.popLast();return r.put({collectionId:o,parent:qt(c)})}};return n.store("remoteDocuments").X({Y:!0},(a,o)=>{const c=new fe(a);return s(c.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([a,o,c],u)=>{const d=rr(o);return s(d.popLast())}))}ei(e){const n=e.store("targets");return n.X((r,i)=>{const s=Qo(i),a=_k(this.serializer,s);return n.put(a)})}ni(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((s,a)=>{const o=n.store("remoteDocumentsV14"),c=(u=a,u.document?new M(fe.fromString(u.document.name).popFirst(5)):u.noDocument?M.fromSegments(u.noDocument.path):u.unknownDocument?M.fromSegments(u.unknownDocument.path):X()).path.toArray();var u;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(d))}).next(()=>I.waitFor(i))}si(e,n){const r=n.store("mutations"),i=Ck(this.serializer),s=new Dk(Jh.zs,this.serializer.fe);return r.j().next(a=>{const o=new Map;return a.forEach(c=>{var u;let d=(u=o.get(c.userId))!==null&&u!==void 0?u:ne();Ji(this.serializer,c).keys().forEach(h=>d=d.add(h)),o.set(c.userId,d)}),I.forEach(o,(c,u)=>{const d=new dt(u),h=Kh.de(this.serializer,d),p=s.getIndexManager(d),f=Qh.de(d,this.serializer,p,s.referenceDelegate);return new jk(i,f,h,p).recalculateAndSaveOverlaysForDocumentKeys(new im(n,Zt.ct),c).next()})})}}function vx(t){t.createObjectStore("targetDocuments",{keyPath:a6}).createIndex("documentTargetsIndex",o6,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",s6,{unique:!0}),t.createObjectStore("targetGlobal")}const Pf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class F0{constructor(e,n,r,i,s,a,o,c,u,d,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ii=s,this.window=a,this.document=o,this.ri=u,this.oi=d,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=p=>Promise.resolve(),!F0.D())throw new j(E.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vP(this,i),this.di=n+"main",this.serializer=new bk(c),this.wi=new Pn(this.di,this.ui,new jP(this.serializer)),this.Bs=new fP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ck(this.serializer),this.qs=new sP,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,d===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(E.FAILED_PRECONDITION,Pf);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Zt(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ju(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(Fi(e))return R("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return R("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Vo(e).get("owner").next(n=>I.resolve(this.Ri(n)))}Pi(e){return ju(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=mt(n,"clientMetadata");return r.j().next(i=>{const s=this.Si(i,18e5),a=i.filter(o=>s.indexOf(o)===-1);return I.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this._i)for(const n of e)this._i.removeItem(this.Di(n.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?I.resolve(!0):Vo(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new j(E.FAILED_PRECONDITION,Pf);return!1}}return!(!this.networkEnabled||!this.inForeground)||ju(e).j().next(r=>this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&R("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new im(e,Zt.ct);return this.Ai(n).next(()=>this.Pi(n))}),this.wi.close(),this.Mi()}Si(e,n){return e.filter(r=>this.Vi(r.updateTimeMs,n)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>ju(e).j().next(n=>this.Si(n,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return Qh.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pP(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Kh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,r){R("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(a=this.ui)===15?y6:a===14?DI:a===13?jI:a===12?m6:a===11?CI:void X();var a;let o;return this.wi.runTransaction(e,i,s,c=>(o=new im(c,this.Os?this.Os.next():Zt.ct),n==="readwrite-primary"?this.Ti(o).next(u=>!!u||this.Ei(o)).next(u=>{if(!u)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new j(E.FAILED_PRECONDITION,kI);return r(o)}).next(u=>this.vi(o).next(()=>u)):this.Oi(o).next(()=>r(o)))).then(c=>(o.raiseOnCommittedEvent(),c))}Oi(e){return Vo(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new j(E.FAILED_PRECONDITION,Pf)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vo(e).put("owner",n)}static D(){return Pn.D()}Ai(e){const n=Vo(e);return n.get("owner").next(r=>this.Ri(r)?(R("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):I.resolve())}Vi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ge(`Detected an update time that is in the future: ${e} > ${r}`),!1))}gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;dC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const r=((n=this._i)===null||n===void 0?void 0:n.getItem(this.Di(e)))!==null;return R("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ge("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vo(t){return mt(t,"owner")}function ju(t){return mt(t,"clientMetadata")}function V0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=ne(),i=ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new U0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(qv(n))return I.resolve(null);let r=an(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xd(n,null,"F"),r=an(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ne(...s);return this.Ui.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ji(n,o);return this.zi(n,u,a,c.readTime)?this.Ki(e,Xd(n,null,"F")):this.Wi(e,u,n,c)}))})))}Gi(e,n,r,i){return qv(n)||i.isEqual(H.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const a=this.ji(n,s);return this.zi(n,a,r,i)?this.Qi(e,n):(nm()<=pe.DEBUG&&R("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dm(n)),this.Wi(e,a,n,SI(i,-1)))})}ji(e,n){let r=new Re(qI(e));return n.forEach((i,s)=>{Dc(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return nm()<=pe.DEBUG&&R("QueryEngine","Using full collection scan to execute query:",dm(n)),this.Ui.getDocumentsMatchingQuery(e,n,gn.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new Te(ee),this.Yi=new Vi(s=>Ts(s),Cc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jk(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function Rk(t,e,n,r){return new DP(t,e,n,r)}async function Pk(t,e){const n=B(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let c=ne();for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({er:u,removedBatchIds:a,addedBatchIds:o}))})})}function AP(t,e){const n=B(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(a,o,c,u){const d=c.batch,h=d.keys();let p=I.resolve();return h.forEach(f=>{p=p.next(()=>u.getEntry(o,f)).next(y=>{const v=c.docVersions.get(f);G(v!==null),y.version.compareTo(v)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(o,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let o=ne();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(o=o.add(a.batch.mutations[c].key));return o}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Ok(t){const e=B(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function RP(t,e){const n=B(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;o.push(n.Bs.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(s,d.addedDocuments,h)));let f=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(ot.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,r)),i=i.insert(h,f),function(y,v,x){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,f,d)&&o.push(n.Bs.updateTargetData(s,f))});let c=tn(),u=ne();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(Lk(s,a,e.documentUpdates).next(d=>{c=d.nr,u=d.sr})),!r.isEqual(H.min())){const d=n.Bs.getLastRemoteSnapshotVersion(s).next(h=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return I.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.Ji=i,s))}function Lk(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=tn();return n.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(H.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):R("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{nr:a,sr:i}})}function PP(t,e){const n=B(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qa(t,e){const n=B(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,I.resolve(i)):n.Bs.allocateTargetId(r).next(a=>(i=new kr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function Wa(t,e,n){const r=B(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Fi(a))throw a;R("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function Gd(t,e,n){const r=B(t);let i=H.min(),s=ne();return r.persistence.runTransaction("Execute query","readonly",a=>function(o,c,u){const d=B(o),h=d.Yi.get(u);return h!==void 0?I.resolve(d.Ji.get(h)):d.Bs.getTargetData(c,u)}(r,a,an(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>r.Hi.getDocumentsMatchingQuery(a,e,n?i:H.min(),n?s:ne())).next(o=>(Fk(r,XI(e),o),{documents:o,ir:s})))}function $k(t,e){const n=B(t),r=B(n.Bs),i=n.Ji.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(a=>a?a.target:null))}function Mk(t,e){const n=B(t),r=n.Xi.get(e)||H.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Zi.getAllFromCollectionGroup(i,e,SI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Fk(n,e,i),i))}function Fk(t,e,n){let r=t.Xi.get(e)||H.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}async function OP(t,e,n,r){const i=B(t);let s=ne(),a=tn();for(const u of n){const d=e.rr(u.metadata.name);u.document&&(s=s.add(d));const h=e.ur(u);h.setReadTime(e.cr(u.metadata.readTime)),a=a.insert(d,h)}const o=i.Zi.newChangeBuffer({trackRemovals:!0}),c=await qa(i,function(u){return an(co(fe.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Lk(u,o,a).next(d=>(o.apply(u),d)).next(d=>i.Bs.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Bs.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.nr,d.sr)).next(()=>d.nr)))}async function LP(t,e,n=ne()){const r=await qa(t,an(O0(e.bundledQuery))),i=B(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const a=Qe(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.qs.saveNamedQuery(s,e);const o=r.withResumeToken(ot.EMPTY_BYTE_STRING,a);return i.Ji=i.Ji.insert(o.targetId,o),i.Bs.updateTargetData(s,o).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,n,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}function xx(t,e){return`firestore_clients_${t}_${e}`}function bx(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Of(t,e){return`firestore_targets_${t}_${e}`}class Kd{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static ar(e,n,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new j(i.error.code,i.error.message))),a?new Kd(e,n,i.state,s):(Ge("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ml{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static ar(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new ml(e,r.state,i):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=N0();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=NI(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new Qd(e,s):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class B0{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new B0(n.clientId,n.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wm{constructor(){this.activeTargetIds=N0()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lf{constructor(e,n,r,i,s){this.window=e,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Te(ee),this.started=!1,this.yr=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=xx(this.persistenceKey,this.wr),this.Ir=function(o){return`firestore_sequence_number_${o}`}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new wm),this.Tr=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vr=function(o){return`firestore_online_state_${o}`}(this.persistenceKey),this.Rr=function(o){return`firestore_bundle_loaded_v2_${o}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const r of e){if(r===this.wr)continue;const i=this.getItem(xx(this.persistenceKey,r));if(i){const s=Qd.ar(r,i);s&&(this.gr=this.gr.insert(s.clientId,s))}}this.Pr();const n=this.storage.getItem(this.vr);if(n){const r=this.br(n);r&&this.Vr(r)}for(const r of this.yr)this.mr(r);this.yr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,r){this.Dr(e,n,r),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Of(this.persistenceKey,e));if(r){const i=ml.ar(e,r);i&&(n=i.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Of(this.persistenceKey,e))}updateQueryState(e,n,r){this.kr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return R("SharedClientState","READ",e,n),n}setItem(e,n){R("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){R("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const n=e;if(n.storageArea===this.storage){if(R("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Tr.test(n.key)){if(n.newValue==null){const r=this.Or(n.key);return this.Fr(r,null)}{const r=this.Br(n.key,n.newValue);if(r)return this.Fr(r.clientId,r)}}else if(this.Er.test(n.key)){if(n.newValue!==null){const r=this.Lr(n.key,n.newValue);if(r)return this.qr(r)}}else if(this.Ar.test(n.key)){if(n.newValue!==null){const r=this.Ur(n.key,n.newValue);if(r)return this.Kr(r)}}else if(n.key===this.vr){if(n.newValue!==null){const r=this.br(n.newValue);if(r)return this.Vr(r)}}else if(n.key===this.Ir){const r=function(i){let s=Zt.ct;if(i!=null)try{const a=JSON.parse(i);G(typeof a=="number"),s=a}catch(a){Ge("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Zt.ct&&this.sequenceNumberHandler(r)}else if(n.key===this.Rr){const r=this.Gr(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Qr(i)))}}}else this.yr.push(n)})}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,r){const i=new Kd(this.currentUser,e,n,r),s=bx(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const n=bx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){const n={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(n))}kr(e,n,r){const i=Of(this.persistenceKey,e),s=new ml(e,n,r);this.setItem(i,s.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const r=this.Or(e);return Qd.ar(r,n)}Lr(e,n){const r=this.Er.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Kd.ar(new dt(s),i,n)}Ur(e,n){const r=this.Ar.exec(e),i=Number(r[1]);return ml.ar(i,n)}br(e){return B0.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);R("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const r=n?this.gr.insert(e,n):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),a=[],o=[];return s.forEach(c=>{i.has(c)||a.push(c)}),i.forEach(c=>{s.has(c)||o.push(c)}),this.syncEngine.Wr(a,o).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=N0();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class Vk{constructor(){this.Hr=new wm,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){R("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){R("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=null;function $f(){return Du===null?Du=268435456+Math.round(2147483648*Math.random()):Du++,"0x"+Du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class VP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const a=$f(),o=this.To(e,n);R("RestConnection",`Sending RPC '${e}' ${a}:`,o,r);const c={};return this.Eo(c,i,s),this.Ao(e,o,c,r).then(u=>(R("RestConnection",`Received RPC '${e}' ${a}: `,u),u),u=>{throw Vn("RestConnection",`RPC '${e}' ${a} failed with error: `,u,"url: ",o,"request:",r),u})}vo(e,n,r,i,s,a){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){const r=MP[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=$f();return new Promise((a,o)=>{const c=new L5;c.setWithCredentials(!0),c.listenOnce(R5.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Af.NO_ERROR:const d=c.getResponseJson();R(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case Af.TIMEOUT:R(Rt,`RPC '${e}' ${s} timed out`),o(new j(E.DEADLINE_EXCEEDED,"Request time out"));break;case Af.HTTP_ERROR:const h=c.getStatus();if(R(Rt,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const f=p==null?void 0:p.error;if(f&&f.status&&f.message){const y=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(x)>=0?x:E.UNKNOWN}(f.status);o(new j(y,f.message))}else o(new j(E.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new j(E.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{R(Rt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);R(Rt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Ro(e,n,r){const i=$f(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=D5(),o=A5(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new O5({})),this.Eo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=s.join("");R(Rt,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=a.createWebChannel(d,c);let p=!1,f=!1;const y=new FP({ro:x=>{f?R(Rt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(R(Rt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),R(Rt,`RPC '${e}' stream ${i} sending:`,x),h.send(x))},oo:()=>h.close()}),v=(x,m,g)=>{x.listen(m,w=>{try{g(w)}catch(b){setTimeout(()=>{throw b},0)}})};return v(h,Iu.EventType.OPEN,()=>{f||R(Rt,`RPC '${e}' stream ${i} transport opened.`)}),v(h,Iu.EventType.CLOSE,()=>{f||(f=!0,R(Rt,`RPC '${e}' stream ${i} transport closed`),y.wo())}),v(h,Iu.EventType.ERROR,x=>{f||(f=!0,Vn(Rt,`RPC '${e}' stream ${i} transport errored:`,x),y.wo(new j(E.UNAVAILABLE,"The operation could not be completed")))}),v(h,Iu.EventType.MESSAGE,x=>{var m;if(!f){const g=x.data[0];G(!!g);const w=g,b=w.error||((m=w[0])===null||m===void 0?void 0:m.error);if(b){R(Rt,`RPC '${e}' stream ${i} received error:`,b);const S=b.status;let _=function(C){const $=et[C];if($!==void 0)return ak($)}(S),T=b.message;_===void 0&&(_=E.INTERNAL,T="Unknown error status: "+S+" with message "+b.message),f=!0,y.wo(new j(_,T)),h.close()}else R(Rt,`RPC '${e}' stream ${i} received:`,g),y._o(g)}}),v(o,P5.STAT_EVENT,x=>{x.stat===jv.PROXY?R(Rt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===jv.NOPROXY&&R(Rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(){return typeof window<"u"?window:null}function ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){return new H6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&R("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n,r,i,s,a,o,c){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new z0(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(Ge(n.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new j(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return R("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(R("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UP extends Bk{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=Q6(this.serializer,e),r=function(i){if(!("targetChange"in i))return H.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?H.min():s.readTime?Qe(s.readTime):H.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=rc(this.serializer),n.addTarget=function(i,s){let a;const o=s.target;if(a=zd(o)?{documents:gk(i,o)}:{query:mk(i,o)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=uk(i,s.resumeToken);const c=hm(i,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(H.min())>0){a.readTime=Xa(i,s.snapshotVersion.toTimestamp());const c=hm(i,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Z6(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=rc(this.serializer),n.removeTarget=e,this.Wo(n)}}class BP extends Bk{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(G(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=J6(e.writeResults,e.commitTime),r=Qe(e.commitTime);return this.listener.cu(r,n)}return G(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=rc(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ic(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new j(E.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new j(E.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,n,r,s,a,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(E.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class YP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ge(n),this.mu=!1):R("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(async()=>{Ui(this)&&(R("RemoteStore","Restarting streams for network reachability change."),await async function(o){const c=B(o);c.vu.add(4),await po(c),c.bu.set("Unknown"),c.vu.delete(4),await Lc(c)}(this))})}),this.bu=new YP(r,i)}}async function Lc(t){if(Ui(t))for(const e of t.Ru)await e(!0)}async function po(t){for(const e of t.Ru)await e(!1)}function Zh(t,e){const n=B(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),q0(n)?X0(n):go(n).Ko()&&Y0(n,e))}function sc(t,e){const n=B(t),r=go(n);n.Au.delete(e),r.Ko()&&zk(n,e),n.Au.size===0&&(r.Ko()?r.jo():Ui(n)&&n.bu.set("Unknown"))}function Y0(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(t).su(e)}function zk(t,e){t.Vu.qt(e),go(t).iu(e)}function X0(t){t.Vu=new Y6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),go(t).start(),t.bu.gu()}function q0(t){return Ui(t)&&!go(t).Uo()&&t.Au.size>0}function Ui(t){return B(t).vu.size===0}function Yk(t){t.Vu=void 0}async function qP(t){t.Au.forEach((e,n)=>{Y0(t,e)})}async function WP(t,e){Yk(t),q0(t)?(t.bu.Iu(e),X0(t)):t.bu.set("Unknown")}async function HP(t,e,n){if(t.bu.set("Online"),e instanceof ck&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const a of i.targetIds)r.Au.has(a)&&(await r.remoteSyncer.rejectListen(a,s),r.Au.delete(a),r.Vu.removeTarget(a))}(t,e)}catch(r){R("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jd(t,r)}else if(e instanceof Zu?t.Vu.Ht(e):e instanceof lk?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(H.min()))try{const r=await Ok(t.localStore);n.compareTo(r)>=0&&await function(i,s){const a=i.Vu.ce(s);return a.targetChanges.forEach((o,c)=>{if(o.resumeToken.approximateByteSize()>0){const u=i.Au.get(c);u&&i.Au.set(c,u.withResumeToken(o.resumeToken,s))}}),a.targetMismatches.forEach((o,c)=>{const u=i.Au.get(o);if(!u)return;i.Au.set(o,u.withResumeToken(ot.EMPTY_BYTE_STRING,u.snapshotVersion)),zk(i,o);const d=new kr(u.target,o,c,u.sequenceNumber);Y0(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){R("RemoteStore","Failed to raise snapshot:",r),await Jd(t,r)}}async function Jd(t,e,n){if(!Fi(e))throw e;t.vu.add(1),await po(t),t.bu.set("Offline"),n||(n=()=>Ok(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{R("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Lc(t)})}function Xk(t,e){return e().catch(n=>Jd(t,n,e))}async function fo(t){const e=B(t),n=Ti(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;GP(e);)try{const i=await PP(e.localStore,r);if(i===null){e.Eu.length===0&&n.jo();break}r=i.batchId,KP(e,i)}catch(i){await Jd(e,i)}qk(e)&&Wk(e)}function GP(t){return Ui(t)&&t.Eu.length<10}function KP(t,e){t.Eu.push(e);const n=Ti(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function qk(t){return Ui(t)&&!Ti(t).Uo()&&t.Eu.length>0}function Wk(t){Ti(t).start()}async function QP(t){Ti(t).hu()}async function JP(t){const e=Ti(t);for(const n of t.Eu)e.uu(n.mutations)}async function ZP(t,e,n){const r=t.Eu.shift(),i=j0.from(r,e,n);await Xk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await fo(t)}async function eO(t,e){e&&Ti(t).ou&&await async function(n,r){if(i=r.code,sk(i)&&i!==E.ABORTED){const s=n.Eu.shift();Ti(n).Qo(),await Xk(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await fo(n)}var i}(t,e),qk(t)&&Wk(t)}async function Sx(t,e){const n=B(t);n.asyncQueue.verifyOperationInProgress(),R("RemoteStore","RemoteStore received new credentials");const r=Ui(n);n.vu.add(3),await po(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Lc(n)}async function vm(t,e){const n=B(t);e?(n.vu.delete(2),await Lc(n)):e||(n.vu.add(2),await po(n),n.bu.set("Unknown"))}function go(t){return t.Su||(t.Su=function(e,n,r){const i=B(e);return i.fu(),new UP(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:qP.bind(null,t),ao:WP.bind(null,t),nu:HP.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),q0(t)?X0(t):t.bu.set("Unknown")):(await t.Su.stop(),Yk(t))})),t.Su}function Ti(t){return t.Du||(t.Du=function(e,n,r){const i=B(e);return i.fu(),new BP(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:QP.bind(null,t),ao:eO.bind(null,t),au:JP.bind(null,t),cu:ZP.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await fo(t)):(await t.Du.stop(),t.Eu.length>0&&(R("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new W0(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mo(t,e){if(Ge("AsyncQueue",`${e}: ${t}`),Fi(t))return new j(E.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.comparator=e?(n,r)=>e(n,r)||M.comparator(n.key,r.key):(n,r)=>M.comparator(n.key,r.key),this.keyedMap=Go(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new Ta(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ta;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.Cu=new Te(M.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):X():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ha{constructor(e,n,r,i,s,a,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Ha(e,n,Ta.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this.Nu=void 0,this.listeners=[]}}class nO{constructor(){this.queries=new Vi(e=>YI(e),jc),this.onlineState="Unknown",this.ku=new Set}}async function H0(t,e){const n=B(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new tO),i)try{s.Nu=await n.onListen(r)}catch(a){const o=mo(a,`Initialization of query '${dm(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&K0(n)}async function G0(t,e){const n=B(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function rO(t,e){const n=B(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.listeners)o.$u(i)&&(r=!0);a.Nu=i}}r&&K0(n)}function iO(t,e,n){const r=B(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function K0(t){t.ku.forEach(e=>{e.next()})}class Q0{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ha(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.serializer=e}rr(e){return lr(this.serializer,e)}ur(e){return e.metadata.exists?fk(this.serializer,e.document,!1):De.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Qe(e)}}class aO{constructor(e,n,r){this.ju=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Hk(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const r=fe.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,r=new kx(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const a of i.metadata.queries){const o=(n.get(a)||ne()).add(s);n.set(a,o)}}return n}async complete(){const e=await OP(this.localStore,new kx(this.serializer),this.documents,this.ju.id),n=this.Wu(this.documents);for(const r of this.queries)await LP(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function Hk(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.key=e}}class Kk{constructor(e){this.key=e}}class Qk{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ne(),this.mutatedKeys=ne(),this.tc=qI(e),this.ec=new Ta(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new Ix,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),f=Dc(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let x=!1;p&&f?p.data.isEqual(f.data)?y!==v&&(r.track({type:3,doc:f}),x=!0):this.rc(p,f)||(r.track({type:2,doc:f}),x=!0,(c&&this.tc(f,c)>0||u&&this.tc(f,u)<0)&&(o=!0)):!p&&f?(r.track({type:0,doc:f}),x=!0):p&&!f&&(r.track({type:1,doc:p}),x=!0,(c||u)&&(o=!0)),x&&(f?(a=a.add(f),s=v?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{ec:a,ic:r,zi:o,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((u,d)=>function(h,p){const f=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return f(h)-f(p)}(u.type,d.type)||this.tc(u.doc,d.doc)),this.oc(r);const a=n?this.uc():[],o=this.Zu.size===0&&this.current?1:0,c=o!==this.Xu;return this.Xu=o,s.length!==0||c?{snapshot:new Ha(this.query,e.ec,i,s,e.mutatedKeys,o===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:a}:{cc:a}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ix,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ne(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new Kk(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new Gk(r))}),n}hc(e){this.Yu=e.ir,this.Zu=ne();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Ha.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class oO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lO{constructor(e){this.key=e,this.fc=!1}}class cO{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.dc={},this.wc=new Vi(o=>YI(o),jc),this._c=new Map,this.mc=new Set,this.gc=new Te(M.comparator),this.yc=new Map,this.Ic=new M0,this.Tc={},this.Ec=new Map,this.Ac=Rs.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function uO(t,e){const n=n1(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const a=await qa(n.localStore,an(e)),o=n.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,i=await J0(n,e,r,o==="current",a.resumeToken),n.isPrimaryClient&&Zh(n.remoteStore,a)}return i}async function J0(t,e,n,r,i){t.Rc=(h,p,f)=>async function(y,v,x,m){let g=v.view.sc(x);g.zi&&(g=await Gd(y.localStore,v.query,!1).then(({documents:S})=>v.view.sc(S,g)));const w=m&&m.targetChanges.get(v.targetId),b=v.view.applyChanges(g,y.isPrimaryClient,w);return xm(y,v.targetId,b.cc),b.snapshot}(t,h,p,f);const s=await Gd(t.localStore,e,!0),a=new Qk(e,s.ir),o=a.sc(s.documents),c=Pc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=a.applyChanges(o,t.isPrimaryClient,c);xm(t,n,u.cc);const d=new oO(e,n,a);return t.wc.set(e,d),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function dO(t,e){const n=B(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!jc(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Wa(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),sc(n.remoteStore,r.targetId),Ga(n,r.targetId)}).catch(Mi)):(Ga(n,r.targetId),await Wa(n.localStore,r.targetId,!0))}async function hO(t,e,n){const r=r1(t);try{const i=await function(s,a){const o=B(s),c=$e.now(),u=a.reduce((p,f)=>p.add(f.key),ne());let d,h;return o.persistence.runTransaction("Locally write mutations","readwrite",p=>{let f=tn(),y=ne();return o.Zi.getEntries(p,u).next(v=>{f=v,f.forEach((x,m)=>{m.isValidDocument()||(y=y.add(x))})}).next(()=>o.localDocuments.getOverlayedDocuments(p,f)).next(v=>{d=v;const x=[];for(const m of a){const g=U6(m,d.get(m.key).overlayedDocument);g!=null&&x.push(new Ur(m.key,g,OI(g.value.mapValue),Le.exists(!0)))}return o.mutationQueue.addMutationBatch(p,c,x,a)}).next(v=>{h=v;const x=v.applyToLocalDocumentSet(d,y);return o.documentOverlayCache.saveOverlays(p,v.batchId,x)})}).then(()=>({batchId:h.batchId,changes:HI(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,o){let c=s.Tc[s.currentUser.toKey()];c||(c=new Te(ee)),c=c.insert(a,o),s.Tc[s.currentUser.toKey()]=c}(r,i.batchId,n),await Br(r,i.changes),await fo(r.remoteStore)}catch(i){const s=mo(i,"Failed to persist write");n.reject(s)}}async function Jk(t,e){const n=B(t);try{const r=await RP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.yc.get(s);a&&(G(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.fc=!0:i.modifiedDocuments.size>0?G(a.fc):i.removedDocuments.size>0&&(G(a.fc),a.fc=!1))}),await Br(n,r,e)}catch(r){await Mi(r)}}function Ex(t,e,n){const r=B(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wc.forEach((s,a)=>{const o=a.view.Mu(e);o.snapshot&&i.push(o.snapshot)}),function(s,a){const o=B(s);o.onlineState=a;let c=!1;o.queries.forEach((u,d)=>{for(const h of d.listeners)h.Mu(a)&&(c=!0)}),c&&K0(o)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pO(t,e,n){const r=B(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let a=new Te(M.comparator);a=a.insert(s,De.newNoDocument(s,H.min()));const o=ne().add(s),c=new Rc(H.min(),new Map,new Te(ee),a,o);await Jk(r,c),r.gc=r.gc.remove(s),r.yc.delete(e),t1(r)}else await Wa(r.localStore,e,!1).then(()=>Ga(r,e,n)).catch(Mi)}async function fO(t,e){const n=B(t),r=e.batch.batchId;try{const i=await AP(n.localStore,e);e1(n,r,null),Z0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Br(n,i)}catch(i){await Mi(i)}}async function gO(t,e,n){const r=B(t);try{const i=await function(s,a){const o=B(s);return o.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return o.mutationQueue.lookupMutationBatch(c,a).next(d=>(G(d!==null),u=d.keys(),o.mutationQueue.removeMutationBatch(c,d))).next(()=>o.mutationQueue.performConsistencyCheck(c)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>o.localDocuments.getDocuments(c,u))})}(r.localStore,e);e1(r,e,n),Z0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Br(r,i)}catch(i){await Mi(i)}}async function mO(t,e){const n=B(t);Ui(n.remoteStore)||R("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",o=>a.mutationQueue.getHighestUnacknowledgedBatchId(o))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Ec.get(r)||[];i.push(e),n.Ec.set(r,i)}catch(r){const i=mo(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Z0(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function e1(t,e,n){const r=B(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Ga(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||Zk(t,r)})}function Zk(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(sc(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),t1(t))}function xm(t,e,n){for(const r of n)r instanceof Gk?(t.Ic.addReference(r.key,e),yO(t,r)):r instanceof Kk?(R("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||Zk(t,r.key)):X()}function yO(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(R("SyncEngine","New document in limbo: "+n),t.mc.add(r),t1(t))}function t1(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new M(fe.fromString(e)),r=t.Ac.next();t.yc.set(r,new lO(n)),t.gc=t.gc.insert(n,r),Zh(t.remoteStore,new kr(an(co(n.path)),r,"TargetPurposeLimboResolution",Zt.ct))}}async function Br(t,e,n){const r=B(t),i=[],s=[],a=[];r.wc.isEmpty()||(r.wc.forEach((o,c)=>{a.push(r.Rc(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const d=U0.Li(c.targetId,u);s.push(d)}}))}),await Promise.all(a),r.dc.nu(i),await async function(o,c){const u=B(o);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>I.forEach(c,h=>I.forEach(h.Fi,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>I.forEach(h.Bi,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!Fi(d))throw d;R("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const p=u.Ji.get(h),f=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(f);u.Ji=u.Ji.insert(h,y)}}}(r.localStore,s))}async function wO(t,e){const n=B(t);if(!n.currentUser.isEqual(e)){R("SyncEngine","User change. New user:",e.toKey());const r=await Pk(n.localStore,e);n.currentUser=e,function(i,s){i.Ec.forEach(a=>{a.forEach(o=>{o.reject(new j(E.CANCELLED,s))})}),i.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Br(n,r.er)}}function vO(t,e){const n=B(t),r=n.yc.get(e);if(r&&r.fc)return ne().add(r.key);{let i=ne();const s=n._c.get(e);if(!s)return i;for(const a of s){const o=n.wc.get(a);i=i.unionWith(o.view.nc)}return i}}async function xO(t,e){const n=B(t),r=await Gd(n.localStore,e.query,!0),i=e.view.hc(r);return n.isPrimaryClient&&xm(n,e.targetId,i.cc),i}async function bO(t,e){const n=B(t);return Mk(n.localStore,e).then(r=>Br(n,r))}async function _O(t,e,n,r){const i=B(t),s=await function(a,o){const c=B(a),u=B(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Sn(d,o).next(h=>h?c.localDocuments.getDocuments(d,h):I.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await fo(i.remoteStore):n==="acknowledged"||n==="rejected"?(e1(i,e,r||null),Z0(i,e),function(a,o){B(B(a).mutationQueue).Cn(o)}(i.localStore,e)):X(),await Br(i,s)):R("SyncEngine","Cannot apply mutation batch with id: "+e)}async function SO(t,e){const n=B(t);if(n1(n),r1(n),e===!0&&n.vc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Nx(n,r.toArray());n.vc=!0,await vm(n.remoteStore,!0);for(const s of i)Zh(n.remoteStore,s)}else if(e===!1&&n.vc!==!1){const r=[];let i=Promise.resolve();n._c.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(Ga(n,a),Wa(n.localStore,a,!0))),sc(n.remoteStore,a)}),await i,await Nx(n,r),function(s){const a=B(s);a.yc.forEach((o,c)=>{sc(a.remoteStore,c)}),a.Ic.Ts(),a.yc=new Map,a.gc=new Te(M.comparator)}(n),n.vc=!1,await vm(n.remoteStore,!1)}}async function Nx(t,e,n){const r=B(t),i=[],s=[];for(const a of e){let o;const c=r._c.get(a);if(c&&c.length!==0){o=await qa(r.localStore,an(c[0]));for(const u of c){const d=r.wc.get(u),h=await xO(r,d);h.snapshot&&s.push(h.snapshot)}}else{const u=await $k(r.localStore,a);o=await qa(r.localStore,u),await J0(r,eE(u),a,!1,o.resumeToken)}i.push(o)}return r.dc.nu(s),i}function eE(t){return zI(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function IO(t){const e=B(t);return B(B(e.localStore).persistence).$i()}async function kO(t,e,n,r){const i=B(t);if(i.vc)return void R("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await Mk(i.localStore,XI(s[0])),o=Rc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ot.EMPTY_BYTE_STRING);await Br(i,a,o);break}case"rejected":await Wa(i.localStore,e,!0),Ga(i,e,r);break;default:X()}}async function EO(t,e,n){const r=n1(t);if(r.vc){for(const i of e){if(r._c.has(i)){R("SyncEngine","Adding an already active target "+i);continue}const s=await $k(r.localStore,i),a=await qa(r.localStore,s);await J0(r,eE(s),a.targetId,!1,a.resumeToken),Zh(r.remoteStore,a)}for(const i of n)r._c.has(i)&&await Wa(r.localStore,i,!1).then(()=>{sc(r.remoteStore,i),Ga(r,i)}).catch(Mi)}}function n1(t){const e=B(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pO.bind(null,e),e.dc.nu=rO.bind(null,e.eventManager),e.dc.Pc=iO.bind(null,e.eventManager),e}function r1(t){const e=B(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gO.bind(null,e),e}function NO(t,e,n){const r=B(t);(async function(i,s,a){try{const o=await s.getMetadata();if(await function(h,p){const f=B(h),y=Qe(p.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",v=>f.qs.getBundleMetadata(v,p.id)).then(v=>!!v&&v.createTime.compareTo(y)>=0)}(i.localStore,o))return await s.close(),a._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(o)),Promise.resolve(new Set);a._updateProgress(Hk(o));const c=new aO(o,i.localStore,s.serializer);let u=await s.bc();for(;u;){const h=await c.zu(u);h&&a._updateProgress(h),u=await s.bc()}const d=await c.complete();return await Br(i,d.Ju,void 0),await function(h,p){const f=B(h);return f.persistence.runTransaction("Save bundle","readwrite",y=>f.qs.saveBundleMetadata(y,p))}(i.localStore,o),a._completeWith(d.progress),Promise.resolve(d.Hu)}catch(o){return Vn("SyncEngine",`Loading bundle failed with ${o}`),a._failWith(o),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class bm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Oc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Rk(this.persistence,new Ak,e.initialUser,this.serializer)}createPersistence(e){return new Dk(Jh.zs,this.serializer)}createSharedClientState(e){return new Vk}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class tE extends bm{constructor(e,n,r){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await r1(this.Vc.syncEngine),await fo(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return Rk(this.persistence,new Ak,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new mP(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new Z5(n,this.persistence);return new J5(e.asyncQueue,r)}createPersistence(e){const n=V0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new F0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Uk(),ed(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Vk}}class TO extends tE{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Vc.syncEngine;this.sharedClientState instanceof Lf&&(this.sharedClientState.syncEngine={jr:_O.bind(null,n),zr:kO.bind(null,n),Wr:EO.bind(null,n),$i:IO.bind(null,n),Qr:bO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ii(async r=>{await SO(this.Vc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=Uk();if(!Lf.D(n))throw new j(E.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=V0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lf(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class i1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ex(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wO.bind(null,this.syncEngine),await vm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new nO}createDatastore(e){const n=Oc(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new VP(i));var i;return function(s,a,o,c){return new zP(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=o=>Ex(this.syncEngine,o,0),a=_x.D()?new _x:new $P,new XP(n,r,i,s,a);var n,r,i,s,a}createSyncEngine(e,n){return function(r,i,s,a,o,c,u){const d=new cO(r,i,s,a,o,c);return u&&(d.vc=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=B(e);R("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await po(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ge("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new pt,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(e===null)return null;const n=this.xc.decode(e),r=Number(n);isNaN(r)&&this.Mc(`length string (${n}) is not valid number`);const i=await this.$c(r);return new sO(JSON.parse(i),e.length+r)}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(this.buffer.length===0)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const n=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Fc(){const e=await this.Cc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new j(E.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=B(r),a=rc(s.serializer)+"/documents",o={documents:i.map(h=>nc(s.serializer,h))},c=await s.vo("BatchGetDocuments",a,o,i.length),u=new Map;c.forEach(h=>{const p=K6(s.serializer,h);u.set(p.key.toString(),p)});const d=[];return i.forEach(h=>{const p=u.get(h.toString());G(!!p),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ho(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=M.fromPath(r);this.mutations.push(new T0(i,this.precondition(i)))}),await async function(n,r){const i=B(n),s=rc(i.serializer)+"/documents",a={writes:r.map(o=>ic(i.serializer,o))};await i.Io("Commit",s,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X();n=H.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new j(E.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(H.min())?Le.exists(!1):Le.updateTime(n):Le.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(H.min()))throw new j(E.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Le.updateTime(n)}return Le.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new z0(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No(async()=>{const e=new jO(this.datastore),n=this.qc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Uc(i)}))}).catch(r=>{this.Uc(r)})})}qc(e){try{const n=this.updateFunction(e);return!Tc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!sk(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=xI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{R("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(R("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mo(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function td(t,e){t.asyncQueue.verifyOperationInProgress(),R("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Pk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _m(t,e){t.asyncQueue.verifyOperationInProgress();const n=await s1(t);R("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>Sx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Sx(e.remoteStore,s)),t._onlineComponents=e}function nE(t){return t.name==="FirebaseError"?t.code===E.FAILED_PRECONDITION||t.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function s1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){R("FirestoreClient","Using user provided OfflineComponentProvider");try{await td(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!nE(n))throw n;Vn("Error using user provided cache. Falling back to memory cache: "+n),await td(t,new bm)}}else R("FirestoreClient","Using default OfflineComponentProvider"),await td(t,new bm);return t._offlineComponents}async function tp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(R("FirestoreClient","Using user provided OnlineComponentProvider"),await _m(t,t._uninitializedComponentsProvider._online)):(R("FirestoreClient","Using default OnlineComponentProvider"),await _m(t,new i1))),t._onlineComponents}function rE(t){return s1(t).then(e=>e.persistence)}function a1(t){return s1(t).then(e=>e.localStore)}function iE(t){return tp(t).then(e=>e.remoteStore)}function o1(t){return tp(t).then(e=>e.syncEngine)}function RO(t){return tp(t).then(e=>e.datastore)}async function Ka(t){const e=await tp(t),n=e.eventManager;return n.onListen=uO.bind(null,e.syncEngine),n.onUnlisten=dO.bind(null,e.syncEngine),n}function PO(t){return t.asyncQueue.enqueue(async()=>{const e=await rE(t),n=await iE(t);return e.setNetworkEnabled(!0),function(r){const i=B(r);return i.vu.delete(0),Lc(i)}(n)})}function OO(t){return t.asyncQueue.enqueue(async()=>{const e=await rE(t),n=await iE(t);return e.setNetworkEnabled(!1),async function(r){const i=B(r);i.vu.add(0),await po(i),i.bu.set("Offline")}(n)})}function LO(t,e){const n=new pt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const a=await function(o,c){const u=B(o);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,c))}(r,i);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new j(E.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const o=mo(a,`Failed to get document '${i} from cache`);s.reject(o)}}(await a1(t),e,n)),n.promise}function sE(t,e,n={}){const r=new pt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,a,o,c){const u=new ep({next:h=>{s.enqueueAndForget(()=>G0(i,d));const p=h.docs.has(a);!p&&h.fromCache?c.reject(new j(E.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&o&&o.source==="server"?c.reject(new j(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Q0(co(a.path),u,{includeMetadataChanges:!0,Ku:!0});return H0(i,d)}(await Ka(t),t.asyncQueue,e,n,r)),r.promise}function $O(t,e){const n=new pt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const a=await Gd(r,i,!0),o=new Qk(i,a.ir),c=o.sc(a.documents),u=o.applyChanges(c,!1);s.resolve(u.snapshot)}catch(a){const o=mo(a,`Failed to execute query '${i} against cache`);s.reject(o)}}(await a1(t),e,n)),n.promise}function aE(t,e,n={}){const r=new pt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,a,o,c){const u=new ep({next:h=>{s.enqueueAndForget(()=>G0(i,d)),h.fromCache&&o.source==="server"?c.reject(new j(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Q0(a,u,{includeMetadataChanges:!0,Ku:!0});return H0(i,d)}(await Ka(t),t.asyncQueue,e,n,r)),r.promise}function MO(t,e){const n=new ep(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){B(r).ku.add(i),i.next()}(await Ka(t),n)),()=>{n.Dc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){B(r).ku.delete(i)}(await Ka(t),n))}}function FO(t,e,n,r){const i=function(s,a){let o;return o=typeof s=="string"?ok().encode(s):s,function(c,u){return new CO(c,u)}(function(c,u){if(c instanceof Uint8Array)return Tx(c,u);if(c instanceof ArrayBuffer)return Tx(new Uint8Array(c),u);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(o),a)}(n,Oc(e));t.asyncQueue.enqueueAndForget(async()=>{NO(await o1(t),i,r)})}function VO(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=B(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(await a1(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e,n){if(!n)throw new j(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lE(t,e,n,r){if(e===!0&&r===!0)throw new j(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jx(t){if(!M.isDocumentKey(t))throw new j(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dx(t){if(M.isDocumentKey(t))throw new j(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function np(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function me(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=np(t);throw new j(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function cE(t,e){if(e<=0)throw new j(E.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new j(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new j(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new j(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class $c{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ax({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new j(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ax(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new V5;switch(n.type){case"firstParty":return new Y5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new j(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Cx.get(e);n&&(R("ComponentProvider","Removing Datastore"),Cx.delete(e),n.terminate())}(this),Promise.resolve()}}function UO(t,e,n,r={}){var i;const s=(t=me(t,$c))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Vn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let o,c;if(typeof r.mockUserToken=="string")o=r.mockUserToken,c=dt.MOCK_USER;else{o=lC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new j(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dt(u)}t._authCredentials=new U5(new vI(o,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}}class jt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jt(this.firestore,e,this._query)}}class cr extends jt{constructor(e,n,r){super(e,n,co(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new M(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function uE(t,e,...n){if(t=K(t),l1("collection","path",e),t instanceof $c){const r=fe.fromString(e,...n);return Dx(r),new cr(t,null,r)}{if(!(t instanceof Pe||t instanceof cr))throw new j(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return Dx(r),new cr(t.firestore,null,r)}}function BO(t,e){if(t=me(t,$c),l1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(E.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jt(t,null,function(n){return new Vr(fe.emptyPath(),n)}(e))}function Zd(t,e,...n){if(t=K(t),arguments.length===1&&(e=xI.A()),l1("doc","path",e),t instanceof $c){const r=fe.fromString(e,...n);return jx(r),new Pe(t,null,new M(r))}{if(!(t instanceof Pe||t instanceof cr))throw new j(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return jx(r),new Pe(t.firestore,t instanceof cr?t.converter:null,new M(r))}}function dE(t,e){return t=K(t),e=K(e),(t instanceof Pe||t instanceof cr)&&(e instanceof Pe||e instanceof cr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function hE(t,e){return t=K(t),e=K(e),t instanceof jt&&e instanceof jt&&t.firestore===e.firestore&&jc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new z0(this,"async_queue_retry"),this.Xc=()=>{const n=ed();n&&R("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=ed();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new pt;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Fi(e))throw e;R("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ge("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=W0.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&X()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function Sm(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class YO{constructor(){this._progressObserver={},this._taskCompletionResolver=new pt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=-1;class We extends $c{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new zO,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||pE(this),this._firestoreClient.terminate()}}function yt(t){return t._firestoreClient||pE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function pE(t){var e,n,r;const i=t._freezeSettings(),s=function(a,o,c,u){return new x6(a,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,oE(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new AO(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function qO(t,e){gE(t=me(t,We));const n=yt(t);if(n._uninitializedComponentsProvider)throw new j(E.FAILED_PRECONDITION,"SDK cache is already specified.");Vn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new i1;return fE(n,i,new tE(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function WO(t){gE(t=me(t,We));const e=yt(t);if(e._uninitializedComponentsProvider)throw new j(E.FAILED_PRECONDITION,"SDK cache is already specified.");Vn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new i1;return fE(e,r,new TO(r,n.cacheSizeBytes))}function fE(t,e,n){const r=new pt;return t.asyncQueue.enqueue(async()=>{try{await td(t,n),await _m(t,e),r.resolve()}catch(i){const s=i;if(!nE(s))throw s;Vn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function HO(t){if(t._initialized&&!t._terminated)throw new j(E.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Pn.D())return Promise.resolve();const r=n+"main";await Pn.delete(r)}(V0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function GO(t){return function(e){const n=new pt;return e.asyncQueue.enqueueAndForget(async()=>mO(await o1(e),n)),n.promise}(yt(t=me(t,We)))}function KO(t){return PO(yt(t=me(t,We)))}function QO(t){return OO(yt(t=me(t,We)))}function JO(t,e){const n=yt(t=me(t,We)),r=new YO;return FO(n,t._databaseId,e,r),r}function ZO(t,e){return VO(yt(t=me(t,We)),e).then(n=>n?new jt(t,null,n.query):null)}function gE(t){if(t._initialized||t._terminated)throw new j(E.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pr(ot.fromBase64String(e))}catch(n){throw new j(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pr(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=/^__.*__$/;class tL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new uo(e,this.data,n,this.fieldTransforms)}}class mE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class ip{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ip(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return eh(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(yE(this.ca)&&eL.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class nL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oc(e)}ya(e,n,r,i=!1){return new ip({ca:e,methodName:n,ga:r,path:Ke.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bs(t){const e=t._freezeSettings(),n=Oc(t._databaseId);return new nL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sp(t,e,n,r,i,s={}){const a=t.ya(s.merge||s.mergeFields?2:0,e,n,i);h1("Data must be an object, but it was:",a,r);const o=xE(r,a);let c,u;if(s.merge)c=new en(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=Im(e,h,n);if(!a.contains(p))throw new j(E.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);_E(d,p)||d.push(p)}c=new en(d),u=a.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=a.fieldTransforms;return new tL(new It(o),c,u)}class Mc extends Us{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mc}}function wE(t,e,n){return new ip({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class c1 extends Us{_toFieldTransform(e){return new Ac(e.path,new za)}isEqual(e){return e instanceof c1}}class rL extends Us{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=wE(this,e,!0),r=this.pa.map(s=>zs(s,n)),i=new Cs(r);return new Ac(e.path,i)}isEqual(e){return this===e}}class iL extends Us{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=wE(this,e,!0),r=this.pa.map(s=>zs(s,n)),i=new js(r);return new Ac(e.path,i)}isEqual(e){return this===e}}class sL extends Us{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new Ya(e.serializer,JI(e.serializer,this.Ia));return new Ac(e.path,n)}isEqual(e){return this===e}}function u1(t,e,n,r){const i=t.ya(1,e,n);h1("Data must be an object, but it was:",i,r);const s=[],a=It.empty();Vs(r,(c,u)=>{const d=p1(e,c,n);u=K(u);const h=i.da(d);if(u instanceof Mc)s.push(d);else{const p=zs(u,h);p!=null&&(s.push(d),a.set(d,p))}});const o=new en(s);return new mE(a,o,i.fieldTransforms)}function d1(t,e,n,r,i,s){const a=t.ya(1,e,n),o=[Im(e,r,n)],c=[i];if(s.length%2!=0)throw new j(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)o.push(Im(e,s[p])),c.push(s[p+1]);const u=[],d=It.empty();for(let p=o.length-1;p>=0;--p)if(!_E(u,o[p])){const f=o[p];let y=c[p];y=K(y);const v=a.da(f);if(y instanceof Mc)u.push(f);else{const x=zs(y,v);x!=null&&(u.push(f),d.set(f,x))}}const h=new en(u);return new mE(d,h,a.fieldTransforms)}function vE(t,e,n,r=!1){return zs(n,t.ya(r?4:3,e))}function zs(t,e){if(bE(t=K(t)))return h1("Unsupported field value:",e,t),xE(t,e);if(t instanceof Us)return function(n,r){if(!yE(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const a of n){let o=zs(a,r.wa(s));o==null&&(o={nullValue:"NULL_VALUE"}),i.push(o),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=K(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return JI(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=$e.fromDate(n);return{timestampValue:Xa(r.serializer,i)}}if(n instanceof $e){const i=new $e(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Xa(r.serializer,i)}}if(n instanceof rp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof pr)return{bytesValue:uk(r.serializer,n._byteString)};if(n instanceof Pe){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:P0(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${np(n)}`)}(t,e)}function xE(t,e){const n={};return AI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(t,(r,i)=>{const s=zs(i,e.ha(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function bE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof rp||t instanceof pr||t instanceof Pe||t instanceof Us)}function h1(t,e,n){if(!bE(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=np(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function Im(t,e,n){if((e=K(e))instanceof Ci)return e._internalPath;if(typeof e=="string")return p1(t,e);throw eh("Field path arguments must be of type string or ",t,!1,void 0,n)}const aL=new RegExp("[~\\*/\\[\\]]");function p1(t,e,n){if(e.search(aL)>=0)throw eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ci(...e.split("."))._internalPath}catch{throw eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function eh(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new j(E.INVALID_ARGUMENT,o+t+c)}function _E(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ap("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oL extends ac{data(){return super.data()}}function ap(t,e){return typeof e=="string"?p1(t,e):e instanceof Ci?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f1{}class Fc extends f1{}function Gr(t,e,...n){let r=[];e instanceof f1&&r.push(e),r=r.concat(n),function(i){const s=i.filter(o=>o instanceof g1).length,a=i.filter(o=>o instanceof op).length;if(s>1||s>0&&a>0)throw new j(E.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class op extends Fc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new op(e,n,r)}_apply(e){const n=this._parse(e);return kE(e._query,n),new jt(e.firestore,e.converter,um(e._query,n))}_parse(e){const n=Bs(e.firestore);return function(i,s,a,o,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new j(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Px(d,u);const p=[];for(const f of d)p.push(Rx(o,i,f));h={arrayValue:{values:p}}}else h=Rx(o,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Px(d,u),h=vE(a,s,d,u==="in"||u==="not-in");return ce.create(c,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lL(t,e,n){const r=e,i=ap("where",t);return op._create(i,r,n)}class g1 extends f1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new g1(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const a=i.getFlattenedFilters();for(const o of a)kE(s,o),s=um(s,o)}(e._query,n),new jt(e.firestore,e.converter,um(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class m1 extends Fc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new m1(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new j(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new j(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Na(i,s);return function(o,c){if(k0(o)===null){const u=Wh(o);u!==null&&EE(o,u,c.field)}}(r,a),a}(e._query,this._field,this._direction);return new jt(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Vr(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function cL(t,e="asc"){const n=e,r=ap("orderBy",t);return m1._create(r,n)}class lp extends Fc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new lp(e,n,r)}_apply(e){return new jt(e.firestore,e.converter,Xd(e._query,this._limit,this._limitType))}}function uL(t){return cE("limit",t),lp._create("limit",t,"F")}function dL(t){return cE("limitToLast",t),lp._create("limitToLast",t,"L")}class cp extends Fc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new cp(e,n,r)}_apply(e){const n=IE(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(r,i){return new Vr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function hL(...t){return cp._create("startAt",t,!0)}function pL(...t){return cp._create("startAfter",t,!1)}class up extends Fc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new up(e,n,r)}_apply(e){const n=IE(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(r,i){return new Vr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function fL(...t){return up._create("endBefore",t,!1)}function gL(...t){return up._create("endAt",t,!0)}function IE(t,e,n,r){if(n[0]=K(n[0]),n[0]instanceof ac)return function(i,s,a,o,c){if(!o)throw new j(E.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const d of ms(i))if(d.field.isKeyField())u.push(Ns(s,o.key));else{const h=o.data.field(d.field);if(qh(h))throw new j(E.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=d.field.canonicalString();throw new j(E.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(h)}return new Ni(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Bs(t.firestore);return function(s,a,o,c,u,d){const h=s.explicitOrderBy;if(u.length>h.length)throw new j(E.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let f=0;f<u.length;f++){const y=u[f];if(h[f].field.isKeyField()){if(typeof y!="string")throw new j(E.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!E0(s)&&y.indexOf("/")!==-1)throw new j(E.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const v=s.path.child(fe.fromString(y));if(!M.isDocumentKey(v))throw new j(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const x=new M(v);p.push(Ns(a,x))}else{const v=vE(o,c,y);p.push(v)}}return new Ni(p,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Rx(t,e,n){if(typeof(n=K(n))=="string"){if(n==="")throw new j(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E0(e)&&n.indexOf("/")!==-1)throw new j(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fe.fromString(n));if(!M.isDocumentKey(r))throw new j(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ns(t,new M(r))}if(n instanceof Pe)return Ns(t,n._key);throw new j(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${np(n)}.`)}function Px(t,e){if(!Array.isArray(t)||t.length===0)throw new j(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kE(t,e){if(e.isInequality()){const r=Wh(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new j(E.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=k0(t);s!==null&&EE(t,i,s)}const n=function(r,i){for(const s of r)for(const a of s.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(E.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(E.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function EE(t,e,n){if(!n.isEqual(e))throw new j(E.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class y1{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new rp(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=S0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=Si(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fe.fromString(e);G(xk(r));const i=new ki(r.get(1),r.get(3)),s=new M(r.popFirst(5));return i.isEqual(n)||Ge(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class mL extends y1{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Or extends ac{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ap("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yl extends Or{data(e={}){return super.data(e)}}class ji{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ls(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yl(this._firestore,this._userDataWriter,r.key,r,new ls(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{const o=new yl(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ls(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const o=new yl(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ls(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:yL(a.type),doc:o,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}function NE(t,e){return t instanceof Or&&e instanceof Or?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ji&&e instanceof ji&&t._firestore===e._firestore&&hE(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){t=me(t,Pe);const e=me(t.firestore,We);return sE(yt(e),t._key).then(n=>w1(e,t,n))}class Ys extends y1{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}function vL(t){t=me(t,Pe);const e=me(t.firestore,We),n=yt(e),r=new Ys(e);return LO(n,t._key).then(i=>new Or(e,r,t._key,i,new ls(i!==null&&i.hasLocalMutations,!0),t.converter))}function xL(t){t=me(t,Pe);const e=me(t.firestore,We);return sE(yt(e),t._key,{source:"server"}).then(n=>w1(e,t,n))}function bL(t){t=me(t,jt);const e=me(t.firestore,We),n=yt(e),r=new Ys(e);return SE(t._query),aE(n,t._query).then(i=>new ji(e,r,t,i))}function _L(t){t=me(t,jt);const e=me(t.firestore,We),n=yt(e),r=new Ys(e);return $O(n,t._query).then(i=>new ji(e,r,t,i))}function SL(t){t=me(t,jt);const e=me(t.firestore,We),n=yt(e),r=new Ys(e);return aE(n,t._query,{source:"server"}).then(i=>new ji(e,r,t,i))}function Ox(t,e,n){t=me(t,Pe);const r=me(t.firestore,We),i=dp(t.converter,e,n);return Vc(r,[sp(Bs(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Le.none())])}function Lx(t,e,n,...r){t=me(t,Pe);const i=me(t.firestore,We),s=Bs(i);let a;return a=typeof(e=K(e))=="string"||e instanceof Ci?d1(s,"updateDoc",t._key,e,n,r):u1(s,"updateDoc",t._key,e),Vc(i,[a.toMutation(t._key,Le.exists(!0))])}function IL(t){return Vc(me(t.firestore,We),[new ho(t._key,Le.none())])}function kL(t,e){const n=me(t.firestore,We),r=Zd(t),i=dp(t.converter,e);return Vc(n,[sp(Bs(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Le.exists(!1))]).then(()=>r)}function TE(t,...e){var n,r,i;t=K(t);let s={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||Sm(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges};if(Sm(e[a])){const h=e[a];e[a]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[a+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[a+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,d;if(t instanceof Pe)u=me(t.firestore,We),d=co(t._key.path),c={next:h=>{e[a]&&e[a](w1(u,t,h))},error:e[a+1],complete:e[a+2]};else{const h=me(t,jt);u=me(h.firestore,We),d=h._query;const p=new Ys(u);c={next:f=>{e[a]&&e[a](new ji(u,p,h,f))},error:e[a+1],complete:e[a+2]},SE(t._query)}return function(h,p,f,y){const v=new ep(y),x=new Q0(p,v,f);return h.asyncQueue.enqueueAndForget(async()=>H0(await Ka(h),x)),()=>{v.Dc(),h.asyncQueue.enqueueAndForget(async()=>G0(await Ka(h),x))}}(yt(u),d,o,c)}function EL(t,e){return MO(yt(t=me(t,We)),Sm(e)?e:{next:e})}function Vc(t,e){return function(n,r){const i=new pt;return n.asyncQueue.enqueueAndForget(async()=>hO(await o1(n),r,i)),i.promise}(yt(t),e)}function w1(t,e,n){const r=n.docs.get(e._key),i=new Ys(t);return new Or(t,i,e._key,r,new ls(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Bs(e)}set(e,n,r){this._verifyNotCommitted();const i=ti(e,this._firestore),s=dp(i.converter,n,r),a=sp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Le.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=ti(e,this._firestore);let a;return a=typeof(n=K(n))=="string"||n instanceof Ci?d1(this._dataReader,"WriteBatch.update",s._key,n,r,i):u1(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Le.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ti(e,this._firestore);return this._mutations=this._mutations.concat(new ho(n._key,Le.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(E.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ti(t,e){if((t=K(t)).firestore!==e)throw new j(E.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Bs(e)}get(e){const n=ti(e,this._firestore),r=new mL(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return X();const s=i[0];if(s.isFoundDocument())return new ac(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new ac(this._firestore,r,n._key,null,n.converter);throw X()})}set(e,n,r){const i=ti(e,this._firestore),s=dp(i.converter,n,r),a=sp(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,a),this}update(e,n,r,...i){const s=ti(e,this._firestore);let a;return a=typeof(n=K(n))=="string"||n instanceof Ci?d1(this._dataReader,"Transaction.update",s._key,n,r,i):u1(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){const n=ti(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ti(e,this._firestore),r=new Ys(this._firestore);return super.get(e).then(i=>new Or(this._firestore,r,n._key,i._document,new ls(!1,!1),n.converter))}}function jL(t,e,n){t=me(t,We);const r=Object.assign(Object.assign({},NL),n);return function(i){if(i.maxAttempts<1)throw new j(E.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,a){const o=new pt;return i.asyncQueue.enqueueAndForget(async()=>{const c=await RO(i);new DO(i.asyncQueue,c,a,s,o).run()}),o.promise}(yt(t),i=>e(new CL(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(){return new Mc("deleteField")}function AL(){return new c1("serverTimestamp")}function RL(...t){return new rL("arrayUnion",t)}function PL(...t){return new iL("arrayRemove",t)}function OL(t){return new sL("increment",t)}(function(t,e=!0){(function(n){lo=n})(Pi),xi(new ur("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),a=new We(new B5(n.getProvider("auth-internal")),new q5(n.getProvider("app-check-internal")),function(o,c){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new j(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ki(o.options.projectId,c)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),or(Dv,"3.13.0",t),or(Dv,"3.13.0","esm2017")})();const LL="@firebase/firestore-compat",$L="0.3.12";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function Mx(){if(!w6())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}let CE=class km{constructor(e){this._delegate=e}static fromBase64String(e){return Mx(),new km(pr.fromBase64String(e))}static fromUint8Array(e){return $x(),new km(pr.fromUint8Array(e))}toBase64(){return Mx(),this._delegate.toBase64()}toUint8Array(){return $x(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t){return ML(t,["next","error","complete"])}function ML(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{enableIndexedDbPersistence(e,n){return qO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return WO(e._delegate)}clearIndexedDbPersistence(e){return HO(e._delegate)}}class jE{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ki||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Vn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){UO(this._delegate,e,n,r)}enableNetwork(){return KO(this._delegate)}disableNetwork(){return QO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lE("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return GO(this._delegate)}onSnapshotsInSync(e){return EL(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qa(this,uE(this._delegate,e))}catch(n){throw Bt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Sn(this,Zd(this._delegate,e))}catch(n){throw Bt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ut(this,BO(this._delegate,e))}catch(n){throw Bt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return jL(this._delegate,n=>e(new DE(this,n)))}batch(){return yt(this._delegate),new AE(new TL(this._delegate,e=>Vc(this._delegate,e)))}loadBundle(e){return JO(this._delegate,e)}namedQuery(e){return ZO(this._delegate,e).then(n=>n?new Ut(this,n):null)}}class hp extends y1{constructor(e){super(),this.firestore=e}convertBytes(e){return new CE(new pr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Sn.forKey(n,this.firestore,null)}}function VL(t){M5(t)}class DE{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new hp(e)}get(e){const n=cs(e);return this._delegate.get(n).then(r=>new oc(this._firestore,new Or(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=cs(e);return r?(v1("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=cs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=cs(e);return this._delegate.delete(n),this}}class AE{constructor(e){this._delegate=e}set(e,n,r){const i=cs(e);return r?(v1("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=cs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=cs(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ps{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new yl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ps.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Ps(e,new hp(e),n),i.set(n,s)),s}}Ps.INSTANCES=new WeakMap;class Sn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new hp(e)}static forPath(e,n,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sn(n,new Pe(n._delegate,r,new M(e)))}static forKey(e,n,r){return new Sn(n,new Pe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qa(this.firestore,uE(this._delegate,e))}catch(n){throw Bt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=K(e),e instanceof Pe?dE(this._delegate,e):!1}set(e,n){n=v1("DocumentReference.set",n);try{return n?Ox(this._delegate,e,n):Ox(this._delegate,e)}catch(r){throw Bt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Lx(this._delegate,e):Lx(this._delegate,e,n,...r)}catch(i){throw Bt(i,"updateDoc()","DocumentReference.update()")}}delete(){return IL(this._delegate)}onSnapshot(...e){const n=RE(e),r=PE(e,i=>new oc(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return TE(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=vL(this._delegate):(e==null?void 0:e.source)==="server"?n=xL(this._delegate):n=wL(this._delegate),n.then(r=>new oc(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Sn(this.firestore,e?this._delegate.withConverter(Ps.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Bt(t,e,n){return t.message=t.message.replace(e,n),t}function RE(t){for(const e of t)if(typeof e=="object"&&!Em(e))return e;return{}}function PE(t,e){var n,r;let i;return Em(t[0])?i=t[0]:Em(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class oc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Sn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return NE(this._delegate,e._delegate)}}class lc extends oc{data(e){const n=this._delegate.data(e);return F5(n!==void 0),n}}class Ut{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new hp(e)}where(e,n,r){try{return new Ut(this.firestore,Gr(this._delegate,lL(e,n,r)))}catch(i){throw Bt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ut(this.firestore,Gr(this._delegate,cL(e,n)))}catch(r){throw Bt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ut(this.firestore,Gr(this._delegate,uL(e)))}catch(n){throw Bt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ut(this.firestore,Gr(this._delegate,dL(e)))}catch(n){throw Bt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ut(this.firestore,Gr(this._delegate,hL(...e)))}catch(n){throw Bt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ut(this.firestore,Gr(this._delegate,pL(...e)))}catch(n){throw Bt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ut(this.firestore,Gr(this._delegate,fL(...e)))}catch(n){throw Bt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ut(this.firestore,Gr(this._delegate,gL(...e)))}catch(n){throw Bt(n,"endAt()","Query.endAt()")}}isEqual(e){return hE(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=_L(this._delegate):(e==null?void 0:e.source)==="server"?n=SL(this._delegate):n=bL(this._delegate),n.then(r=>new Nm(this.firestore,new ji(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=RE(e),r=PE(e,i=>new Nm(this.firestore,new ji(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return TE(this._delegate,n,r)}withConverter(e){return new Ut(this.firestore,e?this._delegate.withConverter(Ps.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class UL{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new lc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Nm{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ut(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new lc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new UL(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new lc(this._firestore,r))})}isEqual(e){return NE(this._delegate,e._delegate)}}class Qa extends Ut{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sn(this.firestore,e):null}doc(e){try{return e===void 0?new Sn(this.firestore,Zd(this._delegate)):new Sn(this.firestore,Zd(this._delegate,e))}catch(n){throw Bt(n,"doc()","CollectionReference.doc()")}}add(e){return kL(this._delegate,e).then(n=>new Sn(this.firestore,n))}isEqual(e){return dE(this._delegate,e._delegate)}withConverter(e){return new Qa(this.firestore,e?this._delegate.withConverter(Ps.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function cs(t){return me(t,Pe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(...e){this._delegate=new Ci(...e)}static documentId(){return new x1(Ke.keyField().canonicalString())}isEqual(e){return e=K(e),e instanceof Ci?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._delegate=e}static serverTimestamp(){const e=AL();return e._methodName="FieldValue.serverTimestamp",new ts(e)}static delete(){const e=DL();return e._methodName="FieldValue.delete",new ts(e)}static arrayUnion(...e){const n=RL(...e);return n._methodName="FieldValue.arrayUnion",new ts(n)}static arrayRemove(...e){const n=PL(...e);return n._methodName="FieldValue.arrayRemove",new ts(n)}static increment(e){const n=OL(e);return n._methodName="FieldValue.increment",new ts(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL={Firestore:jE,GeoPoint:rp,Timestamp:$e,Blob:CE,Transaction:DE,WriteBatch:AE,DocumentReference:Sn,DocumentSnapshot:oc,Query:Ut,QueryDocumentSnapshot:lc,QuerySnapshot:Nm,CollectionReference:Qa,FieldPath:x1,FieldValue:ts,setLogLevel:VL,CACHE_SIZE_UNLIMITED:XO};function zL(t,e){t.INTERNAL.registerComponent(new ur("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},BL)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(t){zL(t,(e,n)=>new jE(e,n,new FL)),t.registerVersion(LL,$L)}YL(Ee);const XL={apiKey:"AIzaSyAOMubppe1JZbBh0VBv7UIbZyY2S1RI9fw",authDomain:"bible-sungseo.firebaseapp.com",projectId:"bible-sungseo",storageBucket:"bible-sungseo.firebasestorage.app",messagingSenderId:"1061949588108",appId:"1:1061949588108:web:e8e3bbd6c3f73afa5131a9"};let we,Pt;try{Ee.apps.length?Ee.app():Ee.initializeApp(XL),Pt=Ee.auth(),we=Ee.firestore()}catch(t){console.error("Firebase init failed:",t)}let th=[];for(let t=1;t<=14;t++)th.push(t+"");th=th.concat(["1","2","","","1","2","3","4","5",""]);const qL=[" "," "," "," "," "],WL=["",""],HL=["1","2","3","4","5","6"],GL=["","",""],Lr=[{id:"senior",name:"",color:"bg-orange-500",icon:"",subgroups:th},{id:"youth",name:"",color:"bg-blue-500",icon:"",subgroups:qL},{id:"middlehigh",name:"",color:"bg-purple-500",icon:"",subgroups:WL},{id:"elementary",name:"",color:"bg-yellow-500",icon:"",subgroups:HL},{id:"kinder",name:"",color:"bg-pink-500",icon:"",subgroups:GL}],KL=[{date:"1-1",range:" 1-2"},{date:"1-2",range:" 3-5"},{date:"1-3",range:" 6-8"},{date:"1-4",range:" 9-11"},{date:"1-5",range:" 1-3"},{date:"1-6",range:" 4-6"},{date:"1-7",range:" 7-9"},{date:"1-8",range:" 10-12"},{date:"1-9",range:" 13-14"},{date:"1-10",range:" 15-16"},{date:"1-11",range:" 17-19"},{date:"1-12",range:" 20-21"},{date:"1-13",range:" 22-24"},{date:"1-14",range:" 25-26"},{date:"1-15",range:" 27-28"},{date:"1-16",range:" 29-30"},{date:"1-17",range:" 31-33"},{date:"1-18",range:" 34-35"},{date:"1-19",range:" 36-38"},{date:"1-20",range:" 39-40"},{date:"1-21",range:" 1-4"},{date:"1-22",range:" 5-7"},{date:"1-23",range:" 8-10"},{date:"1-24",range:" 11-14"},{date:"1-25",range:" 15-18"},{date:"1-26",range:" 19-21"},{date:"1-27",range:" 22-24"},{date:"1-28",range:" 1-3"},{date:"1-29",range:" 4-6"},{date:"1-30",range:" 7-8"},{date:"1-31",range:" 9-11"},{date:"2-1",range:" 12-15"},{date:"2-2",range:" 16-18"},{date:"2-3",range:" 19-21"},{date:"2-4",range:" 1-4"},{date:"2-5",range:" 1-3"},{date:"2-6",range:" 4-6"},{date:"2-7",range:" 7-9"},{date:"2-8",range:" 10-13"},{date:"2-9",range:" 14-17"},{date:"2-10",range:" 18-21"},{date:"2-11",range:" 22-24"},{date:"2-12",range:" 25-29"},{date:"2-13",range:" 30-32"},{date:"2-14",range:" 33-34"},{date:"2-15",range:" 35-38"},{date:"2-16",range:" 39-42"},{date:"2-17",range:" 1-2"},{date:"2-18",range:" 3-4"},{date:"2-19",range:" 5-6"},{date:"2-20",range:" 7-9"},{date:"2-21",range:" 10-12"},{date:"2-22",range:" 1-6"},{date:"2-23",range:" 1-2,  1-3"},{date:"2-24",range:" 4-8"},{date:"2-25",range:" 9-14"},{date:"2-26",range:" 7-10"},{date:"2-27",range:" 1-3"},{date:"2-28",range:" 4-7"},{date:"3-1",range:" 8-10"},{date:"3-2",range:" 11-13"},{date:"3-3",range:" 1-3"},{date:"3-4",range:" 4-6"},{date:"3-5",range:" 7-10"},{date:"3-6",range:" 1-4"},{date:"3-7",range:" 5-6"},{date:"3-8",range:" 7-9"},{date:"3-9",range:" 10-11"},{date:"3-10",range:" 12-13"},{date:"3-11",range:" 14-15"},{date:"3-12",range:" 16-18"},{date:"3-13",range:" 19-21"},{date:"3-14",range:" 22-23"},{date:"3-15",range:" 24-25"},{date:"3-16",range:" 26"},{date:"3-17",range:" 27-28"},{date:"3-18",range:" 1-3"},{date:"3-19",range:" 4-5"},{date:"3-20",range:" 1-3"},{date:"3-21",range:" 4-6"},{date:"3-22",range:" 7-9"},{date:"3-23",range:" 10-12"},{date:"3-24",range:" 13-16"},{date:"3-25",range:" 1-3"},{date:"3-26",range:" 4-6"},{date:"3-27",range:" 1-5"},{date:"3-28",range:" 6-9"},{date:"3-29",range:" 10-11"},{date:"3-30",range:" 12-13,  1"},{date:"3-31",range:" 2-3"},{date:"4-1",range:" 12-15"},{date:"4-2",range:" 16-19"},{date:"4-3",range:" 20-23"},{date:"4-4",range:" 24-26"},{date:"4-5",range:" 1-4"},{date:"4-6",range:" 5-7"},{date:"4-7",range:" 8-9"},{date:"4-8",range:" 10-12"},{date:"4-9",range:" 13-14"},{date:"4-10",range:" 15-16"},{date:"4-11",range:" 17-19"},{date:"4-12",range:" 20-21"},{date:"4-13",range:" 22-23"},{date:"4-14",range:" 24-25"},{date:"4-15",range:" 26-27"},{date:"4-16",range:" 1-2"},{date:"4-17",range:" 3-6"},{date:"4-18",range:" 7-9"},{date:"4-19",range:" 10-13"},{date:"4-20",range:" 14-15"},{date:"4-21",range:" 16-17"},{date:"4-22",range:" 18-20"},{date:"4-23",range:" 21-24"},{date:"4-24",range:" 25-26"},{date:"4-25",range:" 27-31"},{date:"4-26",range:" 1-3"},{date:"4-27",range:" 4-7"},{date:"4-28",range:" 8-12"},{date:"4-29",range:" 13-14"},{date:"4-30",range:" 15-17"},{date:"5-1",range:" 18-19"},{date:"5-2",range:" 20-22"},{date:"5-3",range:" 23-24"},{date:"5-4",range:" 1-7"},{date:"5-5",range:" 8-12"},{date:"5-6",range:" 13-17"},{date:"5-7",range:" 18-19"},{date:"5-8",range:" 20-24"},{date:"5-9",range:" 25-29"},{date:"5-10",range:" 30-33"},{date:"5-11",range:" 34-37"},{date:"5-12",range:" 38-41"},{date:"5-13",range:" 42-44"},{date:"5-14",range:" 45-49"},{date:"5-15",range:" 50-53"},{date:"5-16",range:" 54-58"},{date:"5-17",range:" 59-65"},{date:"5-18",range:" 66-68"},{date:"5-19",range:" 69-72"},{date:"5-20",range:" 1-3"},{date:"5-21",range:" 4-7"},{date:"5-22",range:" 8-10"},{date:"5-23",range:" 11-14"},{date:"5-24",range:" 15-20"},{date:"5-25",range:" 21-23"},{date:"5-26",range:" 24-27"},{date:"5-27",range:" 28-30"},{date:"5-28",range:" 31-35"},{date:"5-29",range:" 36-39"},{date:"5-30",range:" 40-42"},{date:"5-31",range:" 43-45"},{date:"6-1",range:" 46-49"},{date:"6-2",range:" 50-54"},{date:"6-3",range:" 55-58"},{date:"6-4",range:" 59-63"},{date:"6-5",range:" 64-66"},{date:"6-6",range:" 1-3"},{date:"6-7",range:" 1,  1-3"},{date:"6-8",range:" 1-3"},{date:"6-9",range:" 1-3"},{date:"6-10",range:" 4-6"},{date:"6-11",range:" 7-8"},{date:"6-12",range:" 9-10"},{date:"6-13",range:" 11-12"},{date:"6-14",range:" 13-14"},{date:"6-15",range:" 15-16"},{date:"6-16",range:" 6-7"},{date:"6-17",range:" 8-9"},{date:"6-18",range:" 10-12"},{date:"6-19",range:" 1-5"},{date:"6-20",range:" 6-8"},{date:"6-21",range:" 9-11"},{date:"6-22",range:" 12-14"},{date:"6-23",range:" 15-16"},{date:"6-24",range:" 1-5"},{date:"6-25",range:" 6-9"},{date:"6-26",range:" 10-13"},{date:"6-27",range:" 1-5"},{date:"6-28",range:" 1-3,  1-2"},{date:"6-29",range:" 3-5,  1"},{date:"6-30",range:" 4-7"},{date:"7-1",range:" 27-29"},{date:"7-2",range:" 30-31"},{date:"7-3",range:" 32-34"},{date:"7-4",range:" 35-36"},{date:"7-5",range:" 1-4"},{date:"7-6",range:" 5-7"},{date:"7-7",range:" 8-10"},{date:"7-8",range:" 11-13"},{date:"7-9",range:" 14-16"},{date:"7-10",range:" 17-21"},{date:"7-11",range:" 22-24"},{date:"7-12",range:" 25-27"},{date:"7-13",range:" 28-30"},{date:"7-14",range:" 31-32"},{date:"7-15",range:" 33-36"},{date:"7-16",range:" 1-2"},{date:"7-17",range:" 3-5"},{date:"7-18",range:" 6-7"},{date:"7-19",range:" 8-9"},{date:"7-20",range:" 10-11,  1"},{date:"7-21",range:" 2-4"},{date:"7-22",range:" 5-7"},{date:"7-23",range:" 8-11"},{date:"7-24",range:" 12-15"},{date:"7-25",range:" 16-18"},{date:"7-26",range:" 19-21"},{date:"7-27",range:" 22-24"},{date:"7-28",range:" 25-27"},{date:"7-29",range:" 28-31"},{date:"7-30",range:" 1-3"},{date:"7-31",range:" 4-7"},{date:"8-1",range:" 8-12"},{date:"8-2",range:" 1-4"},{date:"8-3",range:" 5-8,  12"},{date:"8-4",range:" 13-15"},{date:"8-5",range:" 16-17"},{date:"8-6",range:" 18-19"},{date:"8-7",range:" 20-22"},{date:"8-8",range:" 1-3"},{date:"8-9",range:" 4-5"},{date:"8-10",range:" 6-8"},{date:"8-11",range:" 9-10"},{date:"8-12",range:" 11-14"},{date:"8-13",range:" 1-4,  15"},{date:"8-14",range:" 1-4"},{date:"8-15",range:" 5-9"},{date:"8-16",range:" 1-4"},{date:"8-17",range:" 5-9"},{date:"8-18",range:" 10-14"},{date:"8-19",range:" 16-17"},{date:"8-20",range:" 18-19"},{date:"8-21",range:" 20-23"},{date:"8-22",range:" 1-3"},{date:"8-23",range:" 24-25"},{date:"8-24",range:" 1-5"},{date:"8-25",range:" 6-10"},{date:"8-26",range:" 11-14"},{date:"8-27",range:" 15-18"},{date:"8-28",range:" 19-21"},{date:"8-29",range:" 22-23"},{date:"8-30",range:" 24-27"},{date:"8-31",range:" 28-30"},{date:"9-1",range:" 31-33"},{date:"9-2",range:" 34-36"},{date:"9-3",range:" 37-39"},{date:"9-4",range:" 40-41"},{date:"9-5",range:" 42-44"},{date:"9-6",range:" 45-46"},{date:"9-7",range:" 47-48"},{date:"9-8",range:" 1-2"},{date:"9-9",range:" 3-4"},{date:"9-10",range:" 5-6"},{date:"9-11",range:" 7-8"},{date:"9-12",range:" 9-10"},{date:"9-13",range:" 11-12"},{date:"9-14",range:" 13-14"},{date:"9-15",range:" 15-16"},{date:"9-16",range:" 17-18"},{date:"9-17",range:" 19-20"},{date:"9-18",range:" 21-22"},{date:"9-19",range:" 23-24"},{date:"9-20",range:" 13-14"},{date:"9-21",range:" 15-17"},{date:"9-22",range:" 18-20"},{date:"9-23",range:" 1-3"},{date:"9-24",range:" 4-6"},{date:"9-25",range:" 1-4"},{date:"9-26",range:" 1-4,  1"},{date:"9-27",range:" 1-4"},{date:"9-28",range:" 5,  1-3"},{date:"9-29",range:" 8-12"},{date:"9-30",range:" 13-14"},{date:"10-1",range:" 37-39"},{date:"10-2",range:" 40-42"},{date:"10-3",range:" 43-44"},{date:"10-4",range:" 45-47"},{date:"10-5",range:" 48-50"},{date:"10-6",range:" 1-3"},{date:"10-7",range:" 4-5"},{date:"10-8",range:" 6-9"},{date:"10-9",range:" 10-12"},{date:"10-10",range:" 13-15"},{date:"10-11",range:" 16-18"},{date:"10-12",range:" 19-20"},{date:"10-13",range:" 21-23"},{date:"10-14",range:" 24-26"},{date:"10-15",range:" 27-28"},{date:"10-16",range:" 29-31"},{date:"10-17",range:" 32-34,  90"},{date:"10-18",range:" 1-3"},{date:"10-19",range:" 4-6"},{date:"10-20",range:" 7-9"},{date:"10-21",range:" 10-12"},{date:"10-22",range:" 13-16"},{date:"10-23",range:" 17-20"},{date:"10-24",range:" 21-23"},{date:"10-25",range:" 24-26"},{date:"10-26",range:" 27-29"},{date:"10-27",range:" 73-77"},{date:"10-28",range:" 78-80"},{date:"10-29",range:" 81-86"},{date:"10-30",range:" 87-91"},{date:"10-31",range:" 92-97"},{date:"11-1",range:" 98-103"},{date:"11-2",range:" 104-106"},{date:"11-3",range:" 107-111"},{date:"11-4",range:" 112-117"},{date:"11-5",range:" 118:1-119:80"},{date:"11-6",range:" 119:81-120:7"},{date:"11-7",range:" 121-127"},{date:"11-8",range:" 128-134"},{date:"11-9",range:" 135-138"},{date:"11-10",range:" 139-144"},{date:"11-11",range:" 145-150"},{date:"11-12",range:" 1-5"},{date:"11-13",range:" 6-9"},{date:"11-14",range:" 10-12"},{date:"11-15",range:" 13-16"},{date:"11-16",range:" 17-20"},{date:"11-17",range:" 21-24"},{date:"11-18",range:" 25-28"},{date:"11-19",range:" 1-3"},{date:"11-20",range:" 4-7"},{date:"11-21",range:" 29-31"},{date:"11-22",range:" 32-33"},{date:"11-23",range:" 34-36"},{date:"11-24",range:" 1-3"},{date:"11-25",range:" 4-6"},{date:"11-26",range:" 7-9"},{date:"11-27",range:" 10-12"},{date:"11-28",range:" 13-15"},{date:"11-29",range:" 16-18"},{date:"11-30",range:" 19-22"},{date:"12-1",range:" 23-25"},{date:"12-2",range:" 26:1-29:23"},{date:"12-3",range:" 29:24-32"},{date:"12-4",range:" 33-36"},{date:"12-5",range:" 37-39"},{date:"12-6",range:" 40-42"},{date:"12-7",range:" 43-45"},{date:"12-8",range:" 46-48"},{date:"12-9",range:" 49-50"},{date:"12-10",range:" 51-52"},{date:"12-11",range:" 1-2"},{date:"12-12",range:" 3-5"},{date:"12-13",range:" 1-4"},{date:"12-14",range:" 1-3"},{date:"12-15",range:" 4-5"},{date:"12-16",range:" 6-7"},{date:"12-17",range:" 8-9"},{date:"12-18",range:" 10-11"},{date:"12-19",range:" 12-13"},{date:"12-20",range:" 14-16"},{date:"12-21",range:" 17-18"},{date:"12-22",range:" 19-21"},{date:"12-23",range:" 21-23"},{date:"12-24",range:" 24-26"},{date:"12-25",range:" 27-28"},{date:"12-26",range:" 1-5"},{date:"12-27",range:" 6,  1-4"},{date:"12-28",range:" 1-3,  1-2"},{date:"12-29",range:" 3-5, , "},{date:"12-30",range:" 15-18"},{date:"12-31",range:" 19-22"}],QL=[{date:"1-1",range:" 1"},{date:"1-2",range:" 2"},{date:"1-3",range:" 3"},{date:"1-4",range:" 4"},{date:"1-5",range:" 5:1-26"},{date:"1-6",range:" 5:27-48"},{date:"1-7",range:" 6:1-18"},{date:"1-8",range:" 6:19-34"},{date:"1-9",range:" 7"},{date:"1-10",range:" 8:1-17"},{date:"1-11",range:" 8:18-34"},{date:"1-12",range:" 9:1-13"},{date:"1-13",range:" 9:14-38"},{date:"1-14",range:" 10:1-25"},{date:"1-15",range:" 10:26-11:1"},{date:"1-16",range:" 11:2-30"},{date:"1-17",range:" 12:1-21"},{date:"1-18",range:" 12:22-50"},{date:"1-19",range:" 13:1-30"},{date:"1-20",range:" 13:31-58"},{date:"1-21",range:" 14:1-21"},{date:"1-22",range:" 14:22-36"},{date:"1-23",range:" 15:1-20"},{date:"1-24",range:" 15:21-39"},{date:"1-25",range:" 16"},{date:"1-26",range:" 17"},{date:"1-27",range:" 18"},{date:"1-28",range:" 19"},{date:"1-29",range:" 20"},{date:"1-30",range:" 21:1-22"},{date:"1-31",range:" 21:23-46"},{date:"2-1",range:" 22:1-22"},{date:"2-2",range:" 22:23-46"},{date:"2-3",range:" 23:1-24"},{date:"2-4",range:" 23:25-39"},{date:"2-5",range:" 24:1-28"},{date:"2-6",range:" 24:29-51"},{date:"2-7",range:" 25:1-30"},{date:"2-8",range:" 25:31-46"},{date:"2-9",range:" 26:1-30"},{date:"2-10",range:" 26:31-56"},{date:"2-11",range:" 26:57-75"},{date:"2-12",range:" 27:1-31"},{date:"2-13",range:" 27:32-66"},{date:"2-14",range:" 28"},{date:"2-15",range:" 1"},{date:"2-16",range:" 2:1-24"},{date:"2-17",range:" 2:25-47"},{date:"2-18",range:" 3"},{date:"2-19",range:" 4:1-22"},{date:"2-20",range:" 4:23-37"},{date:"2-21",range:" 5:1-26"},{date:"2-22",range:" 5:27-42"},{date:"2-23",range:" 1"},{date:"2-24",range:" 2"},{date:"2-25",range:" 3"},{date:"2-26",range:" 4"},{date:"2-27",range:" 5"},{date:"2-28",range:" 6"},{date:"3-1",range:" 7"},{date:"3-2",range:" 8"},{date:"3-3",range:" 9:1-18"},{date:"3-4",range:" 9:19-33"},{date:"3-5",range:" 10"},{date:"3-6",range:" 11:1-16"},{date:"3-7",range:" 11:17-36"},{date:"3-8",range:" 12"},{date:"3-9",range:" 13"},{date:"3-10",range:" 14"},{date:"3-11",range:" 15:1-13"},{date:"3-12",range:" 15:14-33"},{date:"3-13",range:" 16"},{date:"3-14",range:" 1"},{date:"3-15",range:" 2"},{date:"3-16",range:" 3"},{date:"3-17",range:" 4:1-5:1"},{date:"3-18",range:" 5:2-26"},{date:"3-19",range:" 6"},{date:"3-20",range:" 1"},{date:"3-21",range:" 2"},{date:"3-22",range:" 3"},{date:"3-23",range:" 4"},{date:"3-24",range:" 5"},{date:"3-25",range:" 6"},{date:"3-26",range:" 7"},{date:"3-27",range:" 8"},{date:"3-28",range:" 9"},{date:"3-29",range:" 10:1-18"},{date:"3-30",range:" 10:19-39"},{date:"3-31",range:" 11:1-16"},{date:"4-1",range:" 11:17-40"},{date:"4-2",range:" 12:1-11"},{date:"4-3",range:" 12:12-29"},{date:"4-4",range:" 13"},{date:"4-5",range:" 1"},{date:"4-6",range:" 2"},{date:"4-7",range:" 3"},{date:"4-8",range:" 1:1-28"},{date:"4-9",range:" 1:29-45"},{date:"4-10",range:" 2"},{date:"4-11",range:" 3"},{date:"4-12",range:" 4:1-25"},{date:"4-13",range:" 4:26-41"},{date:"4-14",range:" 5"},{date:"4-15",range:" 6:1-29"},{date:"4-16",range:" 6:30-56"},{date:"4-17",range:" 7"},{date:"4-18",range:" 8:1-21"},{date:"4-19",range:" 8:22-38"},{date:"4-20",range:" 9:1-29"},{date:"4-21",range:" 9:30-50"},{date:"4-22",range:" 10:1-31"},{date:"4-23",range:" 10:32-52"},{date:"4-24",range:" 11:1-19"},{date:"4-25",range:" 11:20-33"},{date:"4-26",range:" 12:1-27"},{date:"4-27",range:" 12:28-44"},{date:"4-28",range:" 13:1-13"},{date:"4-29",range:" 13:14-37"},{date:"4-30",range:" 14:1-26"},{date:"5-1",range:" 14:27-52"},{date:"5-2",range:" 14:53-72"},{date:"5-3",range:" 15:1-20"},{date:"5-4",range:" 15:21-47"},{date:"5-5",range:" 16"},{date:"5-6",range:" 6"},{date:"5-7",range:" 7:1-16"},{date:"5-8",range:" 7:17-36"},{date:"5-9",range:" 7:37-60"},{date:"5-10",range:" 8:1-17"},{date:"5-11",range:" 8:18-40"},{date:"5-12",range:" 9:1-22"},{date:"5-13",range:" 9:23-43"},{date:"5-14",range:" 10:1-23"},{date:"5-15",range:" 10:24-48"},{date:"5-16",range:" 12"},{date:"5-17",range:" 13"},{date:"5-18",range:" 1"},{date:"5-19",range:" 2"},{date:"5-20",range:" 3"},{date:"5-21",range:" 4"},{date:"5-22",range:" 5"},{date:"5-23",range:" 6"},{date:"5-24",range:" 7:1-24"},{date:"5-25",range:" 7:25-40"},{date:"5-26",range:" 8"},{date:"5-27",range:" 9"},{date:"5-28",range:" 10:1-11:1"},{date:"5-29",range:" 11:2-34"},{date:"5-30",range:" 12"},{date:"5-31",range:" 13"},{date:"6-1",range:" 14:1-19"},{date:"6-2",range:" 14:20-40"},{date:"6-3",range:" 15:1-34"},{date:"6-4",range:" 15:35-58"},{date:"6-5",range:" 16"},{date:"6-6",range:" 1"},{date:"6-7",range:" 2"},{date:"6-8",range:" 3"},{date:"6-9",range:" 4"},{date:"6-10",range:" 5"},{date:"6-11",range:" 6"},{date:"6-12",range:" 7"},{date:"6-13",range:" 8"},{date:"6-14",range:" 9"},{date:"6-15",range:" 10"},{date:"6-16",range:" 11:1-15"},{date:"6-17",range:" 11:16-33"},{date:"6-18",range:" 12"},{date:"6-19",range:" 13"},{date:"6-20",range:" 1"},{date:"6-21",range:" 2"},{date:"6-22",range:" 3"},{date:"6-23",range:" 4"},{date:"6-24",range:" 5"},{date:"6-25",range:" 1"},{date:"6-26",range:" 2"},{date:"6-27",range:" 3"},{date:"6-28",range:" 1"},{date:"6-29",range:" 2"},{date:"6-30",range:" 3"},{date:"7-1",range:" 4"},{date:"7-2",range:" 5"},{date:"7-3",range:" 1"},{date:"7-4",range:" 4"},{date:"7-5",range:" 5"},{date:"7-6",range:" 6"},{date:"7-7",range:" 7"},{date:"7-8",range:" 1:1-25"},{date:"7-9",range:" 1:26-45"},{date:"7-10",range:" 1:46-80"},{date:"7-11",range:" 2:1-20"},{date:"7-12",range:" 2:21-52"},{date:"7-13",range:" 3:1-20"},{date:"7-14",range:" 3:21-4:13"},{date:"7-15",range:" 4:14-30"},{date:"7-16",range:" 4:31-44"},{date:"7-17",range:" 5:1-16"},{date:"7-18",range:" 5:17-39"},{date:"7-19",range:" 6:1-26"},{date:"7-20",range:" 6:27-49"},{date:"7-21",range:" 7:1-17"},{date:"7-22",range:" 7:18-50"},{date:"7-23",range:" 8:1-25"},{date:"7-24",range:" 8:26-56"},{date:"7-25",range:" 9:1-27"},{date:"7-26",range:" 9:28-50"},{date:"7-27",range:" 9:51-10:20"},{date:"7-28",range:" 10:21-42"},{date:"7-29",range:" 11:1-28"},{date:"7-30",range:" 11:29-54"},{date:"7-31",range:" 12:1-34"},{date:"8-1",range:" 12:35-59"},{date:"8-2",range:" 13:1-17"},{date:"8-3",range:" 13:18-35"},{date:"8-4",range:" 14:1-14"},{date:"8-5",range:" 14:15-35"},{date:"8-6",range:" 15:1-10"},{date:"8-7",range:" 15:11-32"},{date:"8-8",range:" 16:1-18"},{date:"8-9",range:" 16:19-31"},{date:"8-10",range:" 17:1-19"},{date:"8-11",range:" 17:20-37"},{date:"8-12",range:" 18:1-17"},{date:"8-13",range:" 18:18-43"},{date:"8-14",range:" 19:1-27"},{date:"8-15",range:" 19:28-48"},{date:"8-16",range:" 20:1-26"},{date:"8-17",range:" 20:27-47"},{date:"8-18",range:" 21:1-19"},{date:"8-19",range:" 21:20-38"},{date:"8-20",range:" 22:1-23"},{date:"8-21",range:" 22:24-46"},{date:"8-22",range:" 22:47-71"},{date:"8-23",range:" 23:1-25"},{date:"8-24",range:" 23:26-56"},{date:"8-25",range:" 24:1-35"},{date:"8-26",range:" 24:36-53"},{date:"8-27",range:" 14"},{date:"8-28",range:" 15:1-21"},{date:"8-29",range:" 15:22-41"},{date:"8-30",range:" 16:1-15"},{date:"8-31",range:" 16:16-40"},{date:"9-1",range:" 17:1-15"},{date:"9-2",range:" 17:16-34"},{date:"9-3",range:" 18"},{date:"9-4",range:" 19:1-20"},{date:"9-5",range:" 19:21-41"},{date:"9-6",range:" 20:1-16"},{date:"9-7",range:" 20:17-38"},{date:"9-8",range:" 1"},{date:"9-9",range:" 2"},{date:"9-10",range:" 3"},{date:"9-11",range:" 4"},{date:"9-12",range:" 5"},{date:"9-13",range:" 6"},{date:"9-14",range:" 1"},{date:"9-15",range:" 2"},{date:"9-16",range:" 3:1-4:1"},{date:"9-17",range:" 4:2-23"},{date:"9-18",range:" 1"},{date:"9-19",range:" 2"},{date:"9-20",range:" 3:1-4:1"},{date:"9-21",range:" 4:2-18"},{date:"9-22",range:" 1"},{date:"9-23",range:" 1"},{date:"9-24",range:" 2"},{date:"9-25",range:" 3"},{date:"9-26",range:" 4"},{date:"9-27",range:" 5"},{date:"9-28",range:" 1"},{date:"9-29",range:" 2"},{date:"9-30",range:" 3"},{date:"10-1",range:" 8"},{date:"10-2",range:" 9"},{date:"10-3",range:" 10"},{date:"10-4",range:" 11"},{date:"10-5",range:" 12"},{date:"10-6",range:" 13"},{date:"10-7",range:" 14"},{date:"10-8",range:" 1:1-28"},{date:"10-9",range:" 1:29-51"},{date:"10-10",range:" 2:1-12"},{date:"10-11",range:" 2:13-25"},{date:"10-12",range:" 3:1-21"},{date:"10-13",range:" 3:22-36"},{date:"10-14",range:" 4:1-26"},{date:"10-15",range:" 4:27-54"},{date:"10-16",range:" 5:1-30"},{date:"10-17",range:" 5:31-47"},{date:"10-18",range:" 6:1-21"},{date:"10-19",range:" 6:22-40"},{date:"10-20",range:" 6:41-71"},{date:"10-21",range:" 7:1-24"},{date:"10-22",range:" 7:25-52"},{date:"10-23",range:" 7:53-8:20"},{date:"10-24",range:" 8:21-38"},{date:"10-25",range:" 8:39-59"},{date:"10-26",range:" 9:1-23"},{date:"10-27",range:" 9:24-41"},{date:"10-28",range:" 10:1-21"},{date:"10-29",range:" 10:22-42"},{date:"10-30",range:" 11:1-27"},{date:"10-31",range:" 11:28-57"},{date:"11-1",range:" 12:1-26"},{date:"11-2",range:" 12:27-36"},{date:"11-3",range:" 12:37-50"},{date:"11-4",range:" 13:1-20"},{date:"11-5",range:" 13:21-38"},{date:"11-6",range:" 14:1-14"},{date:"11-7",range:" 14:15-31"},{date:"11-8",range:" 15:1-16:4"},{date:"11-9",range:" 16:5-33"},{date:"11-10",range:" 17:1-13"},{date:"11-11",range:" 17:14-26"},{date:"11-12",range:" 18:1-18"},{date:"11-13",range:" 18:19-40"},{date:"11-14",range:" 19:1-16"},{date:"11-15",range:" 19:17-42"},{date:"11-16",range:" 20:1-18"},{date:"11-17",range:" 20:19-31"},{date:"11-18",range:" 21:1-14"},{date:"11-19",range:" 21:15-25"},{date:"11-20",range:" 21:1-16"},{date:"11-21",range:" 21:17-40"},{date:"11-22",range:" 22:1-16"},{date:"11-23",range:" 22:17-30"},{date:"11-24",range:" 23:1-11"},{date:"11-25",range:" 23:12-35"},{date:"11-26",range:" 24"},{date:"11-27",range:" 25"},{date:"11-28",range:" 26:1-18"},{date:"11-29",range:" 26:19-32"},{date:"11-30",range:" 27:1-20"},{date:"12-1",range:" 27:21-44"},{date:"12-2",range:" 28:1-16"},{date:"12-3",range:" 28:17-31"},{date:"12-4",range:" 1"},{date:"12-5",range:" 2"},{date:"12-6",range:" 3"},{date:"12-7",range:" 4"},{date:"12-8",range:" 5"},{date:"12-9",range:" 6"},{date:"12-10",range:" 1"},{date:"12-11",range:" 2"},{date:"12-12",range:" 3"},{date:"12-13",range:" 4"},{date:"12-14",range:" 1"},{date:"12-15",range:" 2"},{date:"12-16",range:" 3"},{date:"12-17",range:" 1"},{date:"12-18",range:" 2"},{date:"12-19",range:" 3"},{date:"12-20",range:" 4"},{date:"12-21",range:" 5"},{date:"12-22",range:" 1"},{date:"12-23",range:" 1"},{date:"12-24",range:" 15"},{date:"12-25",range:" 16"},{date:"12-26",range:" 17"},{date:"12-27",range:" 18:1-19:4"},{date:"12-28",range:" 19:5-21"},{date:"12-29",range:" 20"},{date:"12-30",range:" 21"},{date:"12-31",range:" 22"}],qn={whole_bible:KL,new_testament:QL},JL={...qn,"1year_revised":qn.whole_bible,"1year_new":qn.whole_bible,"1year_easy":qn.whole_bible,"1year_saehangul":qn.whole_bible,"1year_sequential":qn.whole_bible,nt_new:qn.whole_bible,nt_easy:qn.whole_bible,nt_saehangul:qn.whole_bible,nt_message:qn.whole_bible},Fx=JL,Tm=[{min:0,title:" ",emoji:""},{min:50,title:" ",emoji:""},{min:150,title:" ",emoji:""},{min:350,title:" ",emoji:""},{min:600,title:" ",emoji:""},{min:1e3,title:" ",emoji:""},{min:1500,title:" ",emoji:""},{min:2200,title:" ",emoji:""},{min:3200,title:"  ",emoji:""},{min:4300,title:"",emoji:""}],ZL=t=>[...Tm].reverse().find(e=>t>=e.min)||Tm[0],Cm=[{id:"first_read",title:" ",desc:"  ",emoji:"",condition:t=>t.currentDay>1},{id:"streak_7",title:" ",desc:"7  ",emoji:"",condition:t=>t.streak>=7},{id:"streak_30",title:"  ",desc:"30  ",emoji:"",condition:t=>t.streak>=30},{id:"streak_100",title:" ",desc:"100  ",emoji:"",condition:t=>t.streak>=100},{id:"day_30",title:"30 ",desc:"30 ",emoji:"",condition:t=>t.currentDay>=30},{id:"day_100",title:"100 ",desc:"100 ",emoji:"",condition:t=>t.currentDay>=100},{id:"day_200",title:"200 ",desc:"200 ",emoji:"",condition:t=>t.currentDay>=200},{id:"day_365",title:" ",desc:"365  !",emoji:"",condition:t=>t.currentDay>=365},{id:"first_memo",title:" ",desc:"  ",emoji:"",condition:(t,e)=>Object.keys(e||{}).length>=1},{id:"memo_10",title:" 10",desc:" 10 ",emoji:"",condition:(t,e)=>Object.keys(e||{}).length>=10},{id:"memo_50",title:" 50",desc:" 50 ",emoji:"",condition:(t,e)=>Object.keys(e||{}).length>=50},{id:"score_100",title:"100 ",desc:" 100 ",emoji:"",condition:t=>t.score>=100},{id:"score_500",title:"500 ",desc:" 500 ",emoji:"",condition:t=>t.score>=500},{id:"score_1000",title:"1000 ",desc:" 1000 ",emoji:"",condition:t=>t.score>=1e3}],nh=[{id:"1year",title:" ",desc:"1  1 ."},{id:"nt",title:" ",desc:"1   1 ."}],gi={"1year":[{id:"revised",name:"",desc:"   ",tagName:" "},{id:"new",name:"",desc:"     ",tagName:" "},{id:"easy",name:"",desc:"     ",tagName:" "},{id:"saehangul",name:"",desc:"    ",tagName:" "},{id:"sequential",name:"()",desc:"   ",tagName:" "}],nt:[{id:"new",name:"",desc:"     ",tagName:" "},{id:"easy",name:"",desc:"     ",tagName:" "},{id:"saehangul",name:"",desc:"    ",tagName:" "},{id:"message",name:" ",desc:"       ",tagName:" "}]},e$=t=>`${encodeURIComponent(String(t||"").trim())}@bible.local`,jm=t=>{const e=t.data();return{uid:t.id,name:e.name,password:e.password,startDate:e.startDate,currentDay:e.currentDay!==void 0&&e.currentDay!==null?e.currentDay:1,streak:e.streak!==void 0&&e.streak!==null?e.streak:0,score:e.score!==void 0&&e.score!==null?e.score:0,lastReadDate:e.lastReadDate!==void 0&&e.lastReadDate!==null?e.lastReadDate:null,gender:e.gender!==void 0&&e.gender!==null?e.gender:"male",communityId:e.communityId!==void 0&&e.communityId!==null?e.communityId:null,communityName:e.communityName!==void 0&&e.communityName!==null?e.communityName:null,subgroupId:e.subgroupId!==void 0&&e.subgroupId!==null?e.subgroupId:null,planId:e.planId!==void 0&&e.planId!==null?e.planId:"1year_revised",achievements:e.achievements!==void 0&&e.achievements!==null?e.achievements:[],memos:e.memos!==void 0&&e.memos!==null?e.memos:{},dayOffset:e.dayOffset!==void 0&&e.dayOffset!==null?e.dayOffset:0,readCount:e.readCount!==void 0&&e.readCount!==null?e.readCount:1,readHistory:e.readHistory!==void 0&&e.readHistory!==null?e.readHistory:[]}},t$=t=>{const e=["","","","","","","","","",""],n=parseInt(t,10);if(isNaN(n))return t;if(n===0)return e[0];let r="";const i=["","","",""],s=n.toString();for(let a=0;a<s.length;a++){const o=parseInt(s[a],10),c=s.length-1-a;o!==0&&(o===1&&c>0||(r+=e[o]),r+=i[c])}return r},n$=(t,e)=>{const n=[31,28,31,30,31,30,31,31,30,31,30,31];let r=0;for(let i=0;i<t-1;i++)r+=n[i];return r+=e-1,r},r$=(t,e)=>{let n=t+e;for(;n>365;)n-=365;for(;n<1;)n+=365;return n},i$=`### 1.    
2.            
3.       
4.        
()`,OE=365,Mf="https://bible114.net/html/audio",nd="https://mvwhepqqzdtqtorgkrtf.supabase.co/functions/v1/notion-proxy",b1=t=>{const e=new Date().toDateString(),n={};return Lr.forEach(r=>{r.subgroups.forEach(i=>{const s=t.filter(p=>p.communityId===r.id&&p.subgroupId===i),a=s.length,o=s.filter(p=>p.lastReadDate===e).length,c=a>0?Math.round(o/a*100):0,u=a>0?s.reduce((p,f)=>{const v=((f.readCount||1)-1)*365+(f.currentDay||1);return p+v},0)/a:0,d=Math.round(u/OE*100),h=s.reduce((p,f)=>p+(f.score||0),0);n[`${r.id}_${i}`]={rate:c,readCount:o,totalCount:a,progressRate:d,avgDay:Math.round(u),totalScore:h,communityId:r.id,communityName:r.name,subgroupName:i}})}),n},s$=t=>{if(!t||t.length===0)return null;const e=new Date,n=new Date(e);n.setDate(e.getDate()-e.getDay()),n.setHours(0,0,0,0);const r=h=>!h.readHistory||!Array.isArray(h.readHistory)?0:h.readHistory.reduce((p,f)=>{try{const y=typeof f=="string"?f:f.date,v=typeof f=="string"?1:f.daysRead||1;return new Date(y)>=n?p+v:p}catch{return p}},0),i=t.map(h=>({...h,weeklyCount:r(h),totalCount:h.readHistory?h.readHistory.length:0})).filter(h=>h.weeklyCount>0).sort((h,p)=>p.weeklyCount!==h.weeklyCount?p.weeklyCount-h.weeklyCount:p.totalCount-h.totalCount),s=i.length>0?i[0]:null,a=i.slice(0,10),c=t.map(h=>({...h,totalCount:((h.readCount||1)-1)*365+(h.currentDay||0)})).filter(h=>h.totalCount>0).sort((h,p)=>p.totalCount-h.totalCount),u=c.length>0?c[0]:null,d=c.slice(0,10);return{streakMVP:s,progressMVP:u,weeklyTop10:a,totalTop10:d}},a$=t=>!t||Object.keys(t).length===0?[]:Object.keys(t).map(function(e){var n=t[e];return{name:n.subgroupName,rate:n.rate||0,readCount:n.readCount||0,totalCount:n.totalCount||0,progressRate:n.progressRate||0,avgDay:n.avgDay||0,totalScore:n.totalScore||0,communityId:n.communityId,communityName:n.communityName}}).sort(function(e,n){return n.progressRate!==e.progressRate?n.progressRate-e.progressRate:n.totalScore-e.totalScore}),o$=t=>!t||Object.keys(t).length===0?[]:Object.keys(t).map(function(e){var n=t[e];return{name:n.subgroupName,progressRate:n.progressRate||0,avgDay:n.avgDay||0,totalScore:n.totalScore||0,totalCount:n.totalCount||0,communityId:n.communityId,communityName:n.communityName}}).filter(function(e){return e.totalCount>0}).sort(function(e,n){return n.progressRate-e.progressRate}),l$=t=>{const e=new Date().toDateString(),n=t.length,r=t.filter(a=>a.lastReadDate===e).length,i=n>0?Math.round(r/n*100):0,s={};return Lr.forEach(a=>{const o=t.filter(d=>d.communityId===a.id),c=o.length,u=o.filter(d=>d.lastReadDate===e).length;s[a.id]={name:a.name,total:c,readToday:u,rate:c>0?Math.round(u/c*100):0}}),{totalUsers:n,readToday:r,readRate:i,communityStats:s}},c$=t=>{if(!t)return{lines:[""],bgColor:"bg-gradient-to-br from-slate-400 to-slate-500"};const e={"1":"bg-[#FF5252] text-white border-red-600","2":"bg-[#FF7043] text-white border-orange-600","3":"bg-[#FFA726] text-white border-amber-600","4":"bg-[#FBC02D] text-white border-yellow-700","5":"bg-[#8BC34A] text-white border-lime-700","6":"bg-[#4CAF50] text-white border-green-700","7":"bg-[#009688] text-white border-emerald-700","8":"bg-[#00BCD4] text-white border-teal-700","9":"bg-[#03A9F4] text-white border-sky-700","10":"bg-[#42A5F5] text-white border-blue-600","11":"bg-[#2196F3] text-white border-blue-700","12":"bg-[#3F51B5] text-white border-indigo-700","13":"bg-[#673AB7] text-white border-violet-700","14":"bg-[#9C27B0] text-white border-purple-700","15":"bg-[#F06292] text-white border-fuchsia-700","16":"bg-[#FF4081] text-white border-pink-700","17":"bg-[#E91E63] text-white border-rose-700",:"bg-[#FFB300] text-white border-amber-700",:"bg-[#1E88E5] text-white border-blue-800",:"bg-[#5C6BC0] text-white border-indigo-800",:"bg-[#43A047] text-white border-green-800",:"bg-[#78909C] text-white border-slate-600"},n={1:["","1"],2:["","2"],:["",""],:["",""],"1":["1",""],"2":["2",""],"3":["3",""],"4":["4",""],"5":["5",""]," ":["",""]," ":["",""]," ":["",""]," ":["",""]," ":["",""],:["",""]};return t.match(/^\d+$/)?{lines:[t],bgColor:e[t]||"bg-slate-400"}:t.match(/^\d+$/)?{lines:[t],bgColor:e[t]||"bg-slate-400"}:n[t]?{lines:n[t],bgColor:e[t]||"bg-slate-400"}:{lines:[t],bgColor:e[t]||"bg-slate-400"}},Vx=(t,e,n={})=>{const r=Object.keys(e).length,i=Object.keys(e).map(function(d){return[d,e[d]]}).sort(function(d,h){return Number(d[0])-Number(h[0])});let s="";i.forEach(([d,h])=>{const p=h.date?new Date(h.date).toLocaleDateString("ko-KR"):"",f=Array.isArray(h.texts)?h.texts:[h.text||""];s+=`
                    <div style="background: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid #e2e8f0;">
                            <span style="background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; padding: 8px 20px; border-radius: 25px; font-weight: bold; font-size: 18px;">DAY ${d}</span>
                            <span style="color: #64748b; font-size: 16px;">${p}</span>
                        </div>
                        <div style="color: #475569; font-size: 17px; font-weight: 600; margin-bottom: 16px;">${h.title||""}</div>
                        ${f.map((y,v)=>`
                            <div style="color: #1e293b; font-size: 18px; line-height: 1.9; white-space: pre-wrap; ${f.length>1?"background: #f8fafc; padding: 16px; border-radius: 12px; margin-bottom: 12px;":""}">${y}</div>
                        `).join("")}
                    </div>
                `});const a=`<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${t}  </title>
<style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
        font-family: -apple-system, BlinkMacSystemFont, "Malgun Gothic", " ", sans-serif;
        background: linear-gradient(180deg, #f0f4ff 0%, #fdf4ff 100%);
        min-height: 100vh;
        padding: 20px;
        -webkit-text-size-adjust: 100%;
    }
    .container { max-width: 600px; margin: 0 auto; }
    @media print {
        body { background: white; padding: 0; }
        .no-print { display: none; }
    }
</style>
</head>
<body>
<div class="container">
    <!--  -->
    <div style="background: linear-gradient(135deg, #4f46e5, #7c3aed); border-radius: 24px; padding: 50px 30px; text-align: center; color: white; margin-bottom: 30px;">
        <div style="font-size: 60px; margin-bottom: 20px;"></div>
        <div style="font-size: 32px; font-weight: bold; margin-bottom: 10px;">${t}</div>
        <div style="font-size: 22px; opacity: 0.9;">2025  </div>
        <div style="font-size: 16px; opacity: 0.7; margin-top: 10px;"> 365</div>
    </div>
    
    <!--  -->
    <div style="background: white; border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
        <h2 style="text-align: center; font-size: 24px; color: #1e293b; margin-bottom: 25px;">  </h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div style="background: #f0f4ff; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #4f46e5;">${r}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> </div>
            </div>
            <div style="background: #f0fdf4; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #059669;">${n.currentDay||1}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> Day</div>
            </div>
            <div style="background: #fef2f2; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #dc2626;">${n.score||0}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> </div>
            </div>
            <div style="background: #fffbeb; padding: 25px; border-radius: 16px; text-align: center;">
                <div style="font-size: 36px; font-weight: bold; color: #f59e0b;">${n.streak||0}</div>
                <div style="color: #64748b; font-size: 16px; margin-top: 5px;"> </div>
            </div>
        </div>
        <div style="text-align: center; color: #94a3b8; font-size: 14px; margin-top: 20px;">
            : ${new Date().toLocaleDateString("ko-KR")}
        </div>
    </div>
    
    <!--   -->
    ${i.length>0?`
        <h2 style="font-size: 24px; color: #1e293b; margin-bottom: 20px; padding-left: 10px;">  </h2>
        ${s}
    `:`
        <div style="text-align: center; padding: 50px; color: #94a3b8;">
            <div style="font-size: 50px; margin-bottom: 15px;"></div>
            <div style="font-size: 18px;">   .</div>
        </div>
    `}
    
    <!--  -->
    <div style="background: linear-gradient(135deg, #4f46e5, #7c3aed); border-radius: 24px; padding: 40px 30px; text-align: center; color: white; margin-top: 30px;">
        <div style="font-size: 50px; margin-bottom: 20px;"></div>
        <div style="font-size: 26px; font-weight: bold; margin-bottom: 15px;">!</div>
        <div style="font-size: 16px; opacity: 0.9; line-height: 1.8; margin-bottom: 20px;">
            "    <br>
                 <br>
               <br>
                 "
        </div>
        <div style="font-size: 18px; opacity: 0.8;">-  12:1 -</div>
    </div>
    
    <div style="text-align: center; padding: 30px; color: #94a3b8; font-size: 14px;">
           
    </div>
</div>
</body>
</html>`,o=new Blob([a],{type:"text/html;charset=utf-8"}),c=URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download=`${t}__2025.html`,u.click(),URL.revokeObjectURL(c)},u$=async t=>{if(t)try{const e=await t.collection("users").get();let n=`Name,Subgroup,Day,Date,Title,Memo
`;e.docs.forEach(a=>{const o=a.data(),c=o.name||"Unknown",u=o.subgroupId||"-",d=o.memos||{};Object.keys(d).forEach(function(h){var p=d[h];const f=p.date?new Date(p.date).toLocaleDateString("ko-KR"):"",y=(p.title||"").replace(/,/g,";").replace(/\n/g," "),v=(p.text||"").replace(/,/g,";").replace(/\n/g," ");n+=`"${c}","${u}","${h}","${f}","${y}","${v}"
`})});const r=new Blob(["\uFEFF"+n],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=`all_memos_${new Date().toISOString().split("T")[0]}.csv`,s.click(),URL.revokeObjectURL(i)}catch(e){console.error("CSV  :",e),alert("CSV    .")}},d$=t=>{if(t.length===0){alert(" .");return}let e=`data:text/csv;charset=utf-8,\uFEFF,,,Day,,,,ID
`;t.forEach(r=>{e+=`${r.name},${r.communityName},${r.subgroupId},${r.currentDay},${r.score},${r.streak},${r.lastReadDate||""},${r.planId||"1year_revised"}\r
`});const n=document.createElement("a");n.setAttribute("href",encodeURI(e)),n.setAttribute("download",`__${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(n),n.click(),document.body.removeChild(n)},h$=()=>{const[t,e]=A.useState(null),[n,r]=A.useState(!0);return A.useEffect(()=>{if(!Pt){r(!1);return}const i=Pt.onAuthStateChanged(async s=>{if(console.log(" Auth state changed:",s?s.uid:null),s)try{const a=await we.collection("users").doc(s.uid).get();if(a.exists){const o=jm(a);console.log("   :",o.name),e(o)}else console.log(" Firestore  "),e(null)}catch(a){console.error("   :",a),e(null)}else e(null);r(!1)});return()=>i()},[]),{currentUser:t,setCurrentUser:e,authLoading:n}},Ux=t=>{if(!t)return t;const e=/(^|[.!?""\(\)\[\]]\s*)(\d+)(?=[-])(?!(||||||||||||||||||)(?![-]))/gm;let n=!0;return t.replace(e,(i,s,a)=>{const o=`[[VERSE:${a}]]`;return n&&s.trim()===""?(n=!1,o):(n=!1,`${s}
${o}`)})},p$=t=>{const[e,n]=A.useState({title:"",subtitle:"",text:"",audioUrl:null,loading:!1}),[r,i]=A.useState(null),s=async(u,d)=>{if(!we)return null;try{const[h,p]=(u||"1year_revised").split("_"),f=`${h}_${p}_${d}`,y=await we.collection("verses").doc(f).get();if(y.exists)return y.data()}catch(h){console.error("  :",h)}return null},a=async(u,d)=>{const[h,p]=(u||"1year_revised").split("_"),f=gi[h],y=f?f.find(w=>w.id===p):null,v=y?y.tagName:" ",x=new Date(2025,0,d),m=String(x.getMonth()+1).padStart(2,"0"),g=String(x.getDate()).padStart(2,"0");try{const w=await fetch(nd,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:v,date:`${m}-${g}`})});if(!w.ok)throw new Error(`Server Error: ${w.status}`);const b=await w.json();return b.error?{title:null,text:`[] ${b.error}`}:{title:b.title,text:b.text,audioUrl:b.audioUrl}}catch(w){return console.error(w),{title:null,text:"    ."}}},o=async(u,d)=>{const h=await s(u,d);return h&&h.text?h:await a(u,d)},c=A.useCallback(async u=>{if(!t)return;n(b=>({...b,loading:!0}));const{planId:d,dayOffset:h=0,readCount:p=1}=t,[f,y]=(d||"1year_revised").split("_"),v=nh.find(b=>b.id===f),x=v?v.title:" ",m=r$(u,h),g=await o(d,m),w=p>1?` (${p})`:"";if(g&&g.text&&!g.text.startsWith("[]")){let b=g.text;y&&y.startsWith("saehangul")&&(b=Ux(b));let S=g.audioUrl||null;!S&&Mf&&Mf.startsWith("http")&&(S=`${Mf.replace(/\/$/,"")}/${d}/${m}.mp3`),n({title:`${x} DAY ${u}${w}`,subtitle:g.title||"( )",text:b,audioUrl:S,loading:!1})}else{const b=gi[f],S=b?b.find(C=>C.id===y):null,_=S&&S.name||"";let T=m===1?i$:g&&g.text||"   .";y&&y.startsWith("saehangul")&&(T=Ux(T)),n({title:`${x} DAY ${u}${w}`,subtitle:`${_} `,text:T,audioUrl:null,loading:!1})}},[t]);return{verseData:e,setVerseData:n,viewingDay:r,setViewingDay:i,loadContent:c}},f$=t=>{const[e,n]=A.useState({}),r=A.useCallback(async s=>{if(!we||!s)return{};try{const a=await we.collection("users").doc(s).get();if(a.exists&&a.data().memos)return n(a.data().memos),a.data().memos}catch(a){console.error("  :",a)}return{}},[]),i=A.useCallback(async(s,a,o,c,u)=>{const d=t?t.uid:null;if(!d||!a.trim())return;const h=e[s];let p=[];h&&(h.texts?p=[...h.texts]:h.text&&(p=[h.text])),p.push(a);const f={...e,[s]:{texts:p,text:p.join(`

---

`),date:new Date().toISOString(),title:o}};n(f),typeof u=="function"&&u();try{await we.collection("users").doc(d).set({memos:f,updatedAt:Ee.firestore.FieldValue.serverTimestamp()},{merge:!0}),c&&c(t,f)}catch(y){console.error("  :",y)}},[t,e]);return{memos:e,setMemos:n,loadMemos:r,saveMemo:i}},g$=(t,e)=>{const[n,r]=A.useState({}),[i,s]=A.useState([]),[a,o]=A.useState([]),[c,u]=A.useState(null),d=A.useCallback(async()=>{try{return(await we.collection("users").get()).docs.map(v=>({uid:v.id,...v.data()}))}catch(f){return console.error("  :",f),[]}},[]),h=A.useCallback(async()=>{try{const f=await we.collection("settings").doc("announcement").get();f.exists&&f.data().enabled?u(f.data()):u(null)}catch(f){console.error("  :",f)}},[]),p=A.useCallback(async f=>{const y=t?t.uid:null;if(y)try{await we.collection("users").doc(y).set({subgroupId:f,updatedAt:Ee.firestore.FieldValue.serverTimestamp()},{merge:!0}),e(x=>({...x,subgroupId:f})),alert(` "${f}"() !`);const v=await d();if(o(v),r(b1(v)),t.communityId){const x=v.filter(m=>m.communityId===t.communityId);s(x)}}catch(v){console.error("  :",v),alert(" ")}},[t,e,d]);return{subgroupStats:n,setSubgroupStats:r,communityMembers:i,setCommunityMembers:s,allMembersForRace:a,setAllMembersForRace:o,announcement:c,setAnnouncement:u,loadAllMembers:d,loadAnnouncement:h,changeSubgroup:p}},m$=(t,e,n,r,i,s,a,o)=>{const[c,u]=A.useState([]),[d,h]=A.useState(!1),[p,f]=A.useState(!1),[y,v]=A.useState(null),[x,m]=A.useState(null),[g,w]=A.useState(null),b=A.useCallback((C,$)=>{if(!C)return;const D=[],W=new Set(C.achievements||[]);if(Cm.forEach(U=>{W.has(U.id)||U.condition(C,$)&&(D.push(U.id),w(Z=>U),setTimeout(()=>w(null),5e3))}),D.length>0){const U=[...C.achievements||[],...D];we.collection("users").doc(C.uid).update({achievements:U})}},[]),S=A.useCallback(async()=>{if(!t)return;const C=t.uid,$=new Date().toDateString(),D=t.currentDay||1,W=o||D,U=t.score||0,Z=Math.floor(U/100),Q=Math.min(5,t.streak||0),ue=10+Q,re=U+ue,se=Math.floor(re/100),F=W>=365?1:W+1;let N=D,k=t.readCount||1,P=!1;W===D&&(N=D>=365?1:D+1,k=D>=365?(t.readCount||1)+1:t.readCount||1,P=D>=365);let Y=1;if(t.lastReadDate){const de=new Date(t.lastReadDate),ie=new Date($),ae=Math.floor((ie-de)/(1e3*60*60*24));ae===1?Y=(t.streak||0)+1:ae===0&&(Y=t.streak||0)}const V={currentDay:N,readCount:k,score:re,streak:Y,lastReadDate:$,updatedAt:Ee.firestore.FieldValue.serverTimestamp()},te={date:$,day:W,score:ue};try{await we.collection("users").doc(C).set(V,{merge:!0}),await we.collection("users").doc(C).collection("history").add(te);const de={...t,...V};e(de),a(F),h(!0),u(ae=>[te,...ae]),se>Z&&(v(!0),setTimeout(()=>v(!1),5e3)),Q>0&&(m(`${Q}   +${Q}pt!`),setTimeout(()=>m(null),3e3));const ie=await s();if(n(ie),i(b1(ie)),t.communityId){const ae=ie.filter(it=>it.communityId===t.communityId);r(ae)}P&&alert(` ! ${k-1} !

 ${k} ! `),f(!0),setTimeout(()=>f(!1),3e3),b(de,{}),window.scrollTo({top:0,behavior:"smooth"})}catch(de){console.error("  :",de)}},[t,o,e,a,s,n,r,i,b]),_=A.useCallback(async(C,$)=>{if(!t)return;const D=t.uid;try{const W=new Date().toDateString();await we.collection("users").doc(D).set({currentDay:1,score:0,streak:0,startDate:W,lastReadDate:null,memos:{},achievements:[],updatedAt:Ee.firestore.FieldValue.serverTimestamp()},{merge:!0}),e(U=>({...U,currentDay:1,score:0,streak:0,startDate:W,lastReadDate:null,achievements:[],readCount:1})),C&&C({}),$&&$([]),alert("!  Day 1. ! ")}catch(W){console.error(" :",W),alert(" ")}},[t,e]),T=A.useCallback(async C=>{if(!t)return;const $=t.uid;try{await we.collection("users").doc($).set({dayOffset:C,updatedAt:Ee.firestore.FieldValue.serverTimestamp()},{merge:!0}),e(D=>({...D,dayOffset:C}))}catch(D){console.error("  :",D)}},[t,e]);return{readHistory:c,setReadHistory:u,hasReadToday:d,setHasReadToday:h,showConfetti:p,setShowConfetti:f,levelUpToast:y,setLevelUpToast:v,bonusToast:x,setBonusToast:m,newAchievement:g,setNewAchievement:w,handleRead:S,handleRestart:_,changeStartDate:T,checkAchievements:b}},y$=(t,e,n)=>{const{verseData:r,setVerseData:i,viewingDay:s,setViewingDay:a,loadContent:o}=p$(t),{subgroupStats:c,setSubgroupStats:u,communityMembers:d,setCommunityMembers:h,allMembersForRace:p,setAllMembersForRace:f,announcement:y,loadAnnouncement:v,loadAllMembers:x,changeSubgroup:m}=g$(t,e),{readHistory:g,setReadHistory:w,hasReadToday:b,setHasReadToday:S,showConfetti:_,setShowConfetti:T,levelUpToast:C,setLevelUpToast:$,bonusToast:D,setBonusToast:W,newAchievement:U,setNewAchievement:Z,handleRead:Q,handleRestart:ue,changeStartDate:re,checkAchievements:se}=m$(t,e,f,h,u,x,a,s),{memos:F,setMemos:N,loadMemos:k,saveMemo:P}=f$(t);return A.useEffect(()=>{if(n!=="dashboard"||!t)return;if(s===null){a(t.currentDay||1);return}(async()=>{await o(s);const V=await x();if(f(V),V&&V.length>0&&(u(b1(V)),t.communityId)){const de=V.filter(ie=>ie.communityId===t.communityId);h(de)}const te=Pt.currentUser?Pt.currentUser.uid:null;if(te){await k(te);const de=await we.collection("users").doc(te).get();de.exists&&de.data().readHistory&&w(de.data().readHistory)}await v()})()},[n,t==null?void 0:t.uid,s,t==null?void 0:t.planId,t==null?void 0:t.dayOffset,o,x,k,v,f,u,h,w]),A.useEffect(()=>{t&&t.lastReadDate===new Date().toDateString()?S(!0):S(!1)},[t,S]),{verseData:r,setVerseData:i,subgroupStats:c,setSubgroupStats:u,communityMembers:d,setCommunityMembers:h,allMembersForRace:p,setAllMembersForRace:f,memos:F,setMemos:N,readHistory:g,setReadHistory:w,announcement:y,viewingDay:s,setViewingDay:a,hasReadToday:b,setHasReadToday:S,showConfetti:_,setShowConfetti:T,levelUpToast:C,setLevelUpToast:$,bonusToast:D,setBonusToast:W,newAchievement:U,setNewAchievement:Z,handleRead:Q,saveMemo:(Y,V,te)=>P(Y,V,r.subtitle,se,te),changeSubgroup:m,handleRestart:()=>ue(N,w),changeStartDate:re,loadAllMembers:x,loadMemos:k,loadAnnouncement:v}},ve=({name:t,size:e=20,className:n=""})=>({crown:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:l.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-3-4 3-6-7zm5 16h10"})}),trophy:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),l.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),l.jsx("path",{d:"M4 22h16"}),l.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),l.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),l.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),users:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),book:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:l.jsx("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"})}),arrowRight:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("path",{d:"M5 12h14"}),l.jsx("path",{d:"m12 5 7 7-7 7"})]}),back:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:l.jsx("path",{d:"m15 18-6-6 6-6"})}),flame:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:l.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"})}),close:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),trash:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),download:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),refresh:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),l.jsx("path",{d:"M21 3v5h-5"}),l.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),l.jsx("path",{d:"M8 16H3v5"})]}),edit:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),helpbook:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),chart:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),medal:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15"}),l.jsx("path",{d:"M11 12 5.12 2.2"}),l.jsx("path",{d:"m13 12 5.88-9.8"}),l.jsx("path",{d:"M8 7h8"}),l.jsx("circle",{cx:"12",cy:"17",r:"5"}),l.jsx("path",{d:"M12 18v-2h-.5"})]}),calendar:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),l.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),l.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]})})[t]||null,LE=({content:t,fontSize:e=16,activeChunkIndex:n=-1,onSegmentClick:r=null})=>{if(!t)return null;const i=e+6,s=e+4,a=e+2,o=f=>{const y=/<details>([\s\S]*?)<\/details>/g,v=[];let x=0,m;for(;(m=y.exec(f))!==null;){m.index>x&&v.push({type:"text",content:f.slice(x,m.index)});const g=m[1],w=g.match(/<summary>(.*?)<\/summary>/s);if(w){const b=w[1].trim(),S=g.slice(w[0].length).trim();v.push({type:"details",summary:b,body:S})}x=m.index+m[0].length}return x<f.length&&v.push({type:"text",content:f.slice(x)}),v.length>0?v:[{type:"text",content:f}]};A.useEffect(()=>{if(n>=0){const f=document.getElementById(`tts-segment-${n}`);if(f){const y=f.getBoundingClientRect(),v=window.innerHeight;y.top>v*.3&&y.bottom<v*.7||f.scrollIntoView({behavior:"smooth",block:"center"})}}},[n]);let c=0;const u=f=>{if(typeof f!="string")return f;const y=/\[\[VERSE:(\d+)\]\]/g,v=[];let x=0,m;for(;(m=y.exec(f))!==null;){m.index>x&&v.push(f.slice(x,m.index));const g=m[1];v.push(l.jsx("span",{className:"inline-flex items-center justify-center bg-slate-100 text-slate-500 font-bold rounded-sm px-1 mr-1 text-[0.7em] align-middle select-none border border-slate-200 shadow-sm",style:{lineHeight:"1",verticalAlign:"text-top",marginTop:"2px"},children:g},`verse-${g}-${m.index}`)),x=m.index+m[0].length}return x<f.length&&v.push(f.slice(x)),v.length>0?v:f},d=(f,y=!1)=>{if(!r)return u(f);let v=f;return v=v.replace(/^#+\s*/,""),v.split(/([.?!])/g).reduce((m,g)=>[".","?","!"].indexOf(g)!==-1?(m.length>0&&(m[m.length-1]+=g),m):(g.trim().length>0&&m.push(g),m),[]).map((m,g)=>{const w=c++,b=n===w;return l.jsx("span",{id:`tts-segment-${w}`,onClick:()=>r(w),className:`transition-all duration-300 cursor-pointer rounded px-0.5 font-normal ${b?"bg-yellow-300 text-slate-900 font-bold shadow-sm":"hover:bg-slate-100"}`,title:"  ",children:u(m)},w)})},h=(f,y,v)=>{const x=f.trim();if(x.startsWith("# ")){const g=c++;return l.jsx("h1",{id:`tts-segment-${g}`,onClick:()=>r&&r(g),className:`font-bold text-slate-800 ${y?"mt-0":"mt-8"} mb-3 cursor-pointer ${n===g?"bg-yellow-200":""}`,style:{fontSize:`${i}px`},children:x.slice(2)},v)}if(x.startsWith("## ")){const g=c++;return l.jsx("h2",{id:`tts-segment-${g}`,onClick:()=>r&&r(g),className:`font-bold text-slate-800 ${y?"mt-0":"mt-6"} mb-2 cursor-pointer ${n===g?"bg-yellow-200":""}`,style:{fontSize:`${s}px`},children:x.slice(3)},v)}if(x.startsWith("### ")){const g=c++;return l.jsx("h3",{id:`tts-segment-${g}`,onClick:()=>r&&r(g),className:`font-bold text-slate-800 ${y?"mt-0":"mt-4"} mb-1 border-b border-slate-200 pb-1 cursor-pointer ${n===g?"bg-yellow-200":""}`,style:{fontSize:`${a}px`},children:x.slice(4)},v)}if(x.startsWith(" ")||x.startsWith("- "))return l.jsx("li",{className:"list-disc list-outside ml-6 text-slate-700 leading-relaxed mb-1 font-normal",style:{fontSize:`${e}px`},children:d(x.slice(2),!0)},v);if(x.startsWith("> "))return l.jsx("blockquote",{className:"border-l-4 border-blue-300 pl-3 italic text-slate-600 my-2 bg-slate-50 p-2 rounded",style:{fontSize:`${e}px`},children:d(x.slice(2))},v);const m=x.match(/^(\d+)([\s.]\s?)(?!||||)(.*)/);if(m){const g=m[1];m[2];const w=m[3];return l.jsxs("p",{className:"text-slate-700 leading-relaxed mb-3 flex items-start gap-2",style:{fontSize:`${e}px`,textAlign:"justify"},children:[l.jsx("span",{className:"font-bold text-blue-500 shrink-0 mt-1",style:{fontSize:`${Math.max(10,e-4)}px`},children:g}),l.jsx("span",{className:"font-normal",children:d(w,!1)})]},v)}return x===""?l.jsx("div",{className:"h-1"},v):l.jsx("p",{className:"text-slate-700 leading-relaxed mb-3 font-normal",style:{fontSize:`${e}px`,textAlign:"justify"},children:d(f,!1)},v)},p=o(t);return l.jsx("div",{className:"markdown-body",children:p.map((f,y)=>f.type==="details"?l.jsxs("details",{className:"my-2 border border-slate-200 rounded-xl bg-slate-50 overflow-hidden shadow-sm",children:[l.jsx("summary",{className:"cursor-pointer px-4 py-3 font-bold text-slate-700 hover:bg-slate-100 transition-colors",style:{fontSize:`${e}px`},children:f.summary}),l.jsx("div",{className:"px-4 py-3 space-y-1 border-t border-slate-100 bg-white",children:f.body.split(`
`).map((v,x)=>h(v,!1,`details-${y}-line-${x}`))})]},`details-${y}`):f.content.split(`
`).map((v,x)=>h(v,y===0&&x===0,`text-${y}-line-${x}`)))})},w$=({loginTab:t,setLoginTab:e,loginName:n,setLoginName:r,loginPw:i,setLoginPw:s,signupName:a,setSignupName:o,signupBirthdate:c,setSignupBirthdate:u,signupPw:d,setSignupPw:h,signupPwConfirm:p,setSignupPwConfirm:f,errorMsg:y,handleLogin:v})=>l.jsxs("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6 relative",children:[l.jsx("div",{className:"absolute top-4 right-4",children:l.jsx("button",{onClick:()=>{r("admin"),s("")},className:"text-xs text-slate-300 hover:text-slate-500",children:""})}),l.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl w-full max-w-lg border border-slate-100",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("h1",{className:"text-2xl font-extrabold text-slate-800",children:"  "}),l.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"  !"})]}),l.jsxs("div",{className:"flex gap-2 mb-6",children:[l.jsx("button",{type:"button",onClick:()=>e("login"),className:`flex-1 py-3 rounded-xl font-bold transition-all ${t==="login"?"bg-blue-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:""}),l.jsx("button",{type:"button",onClick:()=>e("signup"),className:`flex-1 py-3 rounded-xl font-bold transition-all ${t==="signup"?"bg-blue-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:""})]}),t==="login"?l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),l.jsx("input",{type:"text",value:n,onChange:x=>r(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),l.jsx("input",{type:"password",value:i,onChange:x=>s(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6  "})]}),l.jsx("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100",children:l.jsxs("p",{className:"text-xs text-red-600 font-bold break-keep text-center",children:["  ? ",l.jsx("br",{})," ",l.jsx("span",{className:"underline",children:""})," .",l.jsx("br",{}),"(: )"]})}),y&&l.jsx("p",{className:"text-red-500 text-xs text-center",children:y}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-200 transition-all active:scale-95 mt-4",children:""}),l.jsx("p",{className:"text-xs text-slate-400 text-center mt-3",children:"    ."})]}):l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),l.jsx("input",{type:"text",value:a,onChange:x=>o(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),l.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"8",value:c,onChange:x=>{const m=x.target.value.replace(/[^0-9]/g,"");u(m)},className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg tracking-wider",placeholder:"19500101",required:!0}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1 ml-1",children:"8   (: 19500101)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:""}),l.jsx("input",{type:"password",value:d,onChange:x=>h(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6 ",required:!0,minLength:6})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 ml-1",children:" "}),l.jsx("input",{type:"password",value:p,onChange:x=>f(x.target.value),className:`w-full bg-slate-50 border rounded-xl p-3 focus:outline-none focus:ring-2 ${p&&d!==p?"border-red-300 focus:ring-red-500":"border-slate-200 focus:ring-blue-500"}`,placeholder:"  ",required:!0}),p&&d!==p&&l.jsx("p",{className:"text-xs text-red-500 mt-1 ml-1",children:"   "})]}),l.jsx("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:l.jsx("p",{className:"text-xs text-blue-600 font-bold break-keep text-center",children:"    "})}),y&&l.jsx("p",{className:"text-red-500 text-xs text-center",children:y}),l.jsx("button",{type:"submit",disabled:d!==p||!a||!c||!d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-200 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})]}),v$=({handleLogout:t,downloadCSV:e,adminViewMode:n,setAdminViewMode:r,adminFilter:i,setAdminFilter:s,adminSortBy:a,setAdminSortBy:o,allUsers:c,MOCK_COMMUNITIES:u,BIBLE_VERSIONS:d,announcementInput:h,setAnnouncementInput:p,saveAnnouncement:f,generateMemosCSV:y,generateMemosHTML:v,editingUser:x,setEditingUser:m,startEditUser:g,saveEditUser:w,changingPassword:b,setChangingPassword:S,newPassword:_,setNewPassword:T,changePassword:C,deleteUser:$,lastSyncInfo:D,setLastSyncInfo:W,syncProgress:U,setSyncProgress:Z,selectedSyncVersions:Q,setSelectedSyncVersions:ue,syncNotionToFirestore:re,adminStats:se,db:F})=>l.jsx("div",{className:"min-h-screen bg-slate-100 p-4",children:l.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"  "}),l.jsx("button",{onClick:t,className:"text-sm bg-slate-200 px-3 py-2 rounded hover:bg-slate-300",children:""})]}),l.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 font-bold",children:[l.jsx(ve,{name:"download",size:18})," CSV "]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(ve,{name:"chart",size:20,className:"text-blue-500"}),"    (",new Date().toLocaleDateString("ko-KR"),")"]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600",children:se.totalUsers}),l.jsx("div",{className:"text-xs text-slate-500",children:" "})]}),l.jsxs("div",{className:"bg-green-50 p-4 rounded-xl text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-green-600",children:se.readToday}),l.jsx("div",{className:"text-xs text-slate-500",children:"  "})]}),l.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[se.readRate,"%"]}),l.jsx("div",{className:"text-xs text-slate-500",children:" "})]})]}),l.jsx("h3",{className:"font-bold text-slate-700 mb-2",children:"   "}),l.jsx("div",{className:"space-y-2",children:Object.keys(se.communityStats).map(function(N){var k=se.communityStats[N];return l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-20 text-sm font-bold text-slate-600",children:k.name}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:k.rate+"%"}})}),l.jsxs("div",{className:"text-sm text-slate-500 w-28 text-right",children:[k.readToday,"/",k.total," (",k.rate,"%)"]})]},N)})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:"  "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>r("today"),className:`text-xs px-3 py-1 rounded-full font-bold ${n==="today"?"bg-red-500 text-white":"bg-slate-100 text-slate-500"}`,children:" "}),l.jsx("button",{onClick:()=>r("inactive"),className:`text-xs px-3 py-1 rounded-full font-bold ${n==="inactive"?"bg-orange-500 text-white":"bg-slate-100 text-slate-500"}`,children:" "})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[l.jsx("button",{onClick:()=>s("all"),className:`text-xs px-3 py-1.5 rounded-lg font-bold border ${i==="all"?"bg-blue-500 text-white border-blue-500":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:""}),u.map(N=>l.jsx("button",{onClick:()=>s(N.id),className:`text-xs px-3 py-1.5 rounded-lg font-bold border ${i===N.id?"bg-blue-500 text-white border-blue-500":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:N.name},N.id))]}),l.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:(()=>{const N=new Date().toDateString(),k=new Date;let P=i==="all"?c:c.filter(Y=>Y.communityId===i);if(n==="today"){const Y=P.filter(ie=>ie.lastReadDate!==N),V={};Y.forEach(ie=>{const ae=ie.communityId||"none";V[ae]||(V[ae]={});const it=ie.subgroupId||"";V[ae][it]||(V[ae][it]=[]),V[ae][it].push(ie)});const te=[];u.forEach(ie=>{const ae=V[ie.id];ae&&ie.subgroups.forEach(it=>{ae[it]&&te.push([it,ae[it]])})}),Object.keys(V).forEach(function(ie){var ae=V[ie];ae.&&te.push(["",ae.])});const de=Y.length;return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-3 text-sm text-slate-500",children:[" ",l.jsxs("strong",{className:"text-red-600",children:[de,""]}),"    ."]}),te.length>0?te.map(([ie,ae])=>l.jsxs("div",{className:"mb-4 bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"text-sm font-bold text-slate-700 mb-2 flex justify-between",children:[l.jsxs("span",{children:[" ",ie]}),l.jsxs("span",{className:"text-red-500",children:[ae.length,""]})]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:ae.map((it,zr)=>{const yo=it.lastReadDate?new Date(it.lastReadDate):null,fr=yo?Math.floor((k-yo)/(1e3*60*60*24)):999;return l.jsxs("span",{className:`text-xs px-2 py-1 rounded-full border ${fr>=7?"bg-red-100 text-red-700 border-red-200":fr>=3?"bg-orange-100 text-orange-700 border-orange-200":"bg-yellow-50 text-yellow-700 border-yellow-200"}`,children:[l.jsxs("span",{className:"font-mono text-[10px] opacity-60 mr-1",children:[zr+1,"."]}),it.name," ",fr>0&&l.jsxs("span",{className:"opacity-70",children:["(",fr,")"]})]},it.uid)})})]},ie)):l.jsxs("div",{className:"text-center py-8 text-green-600",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{className:"font-bold",children:" !"})]})]})}else{const Y=P.map(V=>{const te=V.lastReadDate?new Date(V.lastReadDate):null,de=te?Math.floor((k-te)/(1e3*60*60*24)):999;return{...V,daysSince:de}}).filter(V=>V.daysSince>=1).sort((V,te)=>{if(a==="name")return V.name.localeCompare(te.name);if(a==="day"){const de=((V.readCount||1)-1)*365+(V.currentDay||1);return((te.readCount||1)-1)*365+(te.currentDay||1)-de}else{if(a==="score")return(te.score||0)-(V.score||0);if(a==="subgroup"){const de=V.communityName||"",ie=te.communityName||"",ae=de.localeCompare(ie,"ko-KR");if(ae!==0)return ae;const it=V.subgroupId||"",zr=te.subgroupId||"";return it.localeCompare(zr,"ko-KR")}else return te.daysSince-V.daysSince}});return l.jsxs("div",{children:[l.jsx("div",{className:"mb-3 flex gap-2",children:["name","day","score","subgroup"].map(V=>l.jsx("button",{onClick:()=>o(V),className:`text-xs px-3 py-1.5 rounded-lg font-bold ${a===V?"bg-blue-500 text-white":"bg-slate-100 text-slate-600"}`,children:V==="name"?"":V==="day"?"":V==="score"?"":""},V))}),Y.length>0?l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-center text-xs font-bold text-slate-600 w-10",children:"#"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-bold text-slate-600",children:""}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-bold text-slate-600",children:""}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-bold text-slate-600",children:"  "}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-bold text-slate-600",children:""})]})}),l.jsx("tbody",{children:Y.slice(0,50).map((V,te)=>l.jsxs("tr",{className:`border-b ${V.daysSince>=14?"bg-red-50":V.daysSince>=7?"bg-orange-50":""}`,children:[l.jsx("td",{className:"px-3 py-2 text-center text-xs text-slate-400 font-mono",children:te+1}),l.jsx("td",{className:"px-3 py-2 font-bold text-slate-800",children:V.name}),l.jsx("td",{className:"px-3 py-2 text-slate-500 text-xs",children:V.subgroupId||"-"}),l.jsx("td",{className:"px-3 py-2 text-center",children:l.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${V.daysSince>=14?"bg-red-500 text-white":V.daysSince>=7?"bg-orange-500 text-white":"bg-yellow-400 text-yellow-900"}`,children:V.daysSince===999?"":`${V.daysSince}`})}),l.jsx("td",{className:"px-3 py-2 text-center text-xs",children:(()=>{const de=V.readCount||1,ie=V.currentDay||1,ae=(de-1)*365+ie;return de>1?l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsxs("span",{className:"font-bold text-slate-700",children:["DAY ",ae]}),l.jsxs("span",{className:"px-1.5 py-0.5 bg-gradient-to-br from-purple-500 to-purple-700 text-white text-[10px] font-bold rounded-full",children:[de,""]})]}):l.jsxs("span",{className:"font-bold text-slate-700",children:["DAY ",ie]})})()})]},V.uid))})]}):l.jsxs("div",{className:"text-center py-8 text-green-600",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{className:"font-bold",children:"  !"})]}),Y.length>50&&l.jsxs("div",{className:"mt-2 text-center text-xs text-slate-400",children:[" 50  ( ",Y.length,")"]})]})}})()}),l.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 flex gap-4 text-xs text-slate-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded"})," 1-2"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-3 h-3 bg-orange-500 rounded"})," 3-6"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-3 h-3 bg-red-500 rounded"})," 7+"]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:["    (",c.filter(N=>N.currentDay>=365||(N.readCount||1)>=2).length,")"]}),(()=>{const N=c.filter(k=>k.currentDay>=365||(k.readCount||1)>=2).sort((k,P)=>(P.score||0)-(k.score||0));return N.length>0?l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:N.map((k,P)=>{const Y=k.readCount||1;return l.jsxs("div",{className:`p-4 rounded-xl text-center border-2 ${P===0?"bg-yellow-50 border-yellow-300":P===1?"bg-slate-50 border-slate-300":P===2?"bg-orange-50 border-orange-300":"bg-white border-slate-100"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:P===0?"":P===1?"":P===2?"":""}),l.jsxs("div",{className:"font-bold text-slate-800 flex items-center justify-center gap-1",children:[k.name,Y>=2&&l.jsxs("span",{className:"text-[10px] bg-purple-500 text-white px-1.5 py-0.5 rounded-full font-bold",children:[Y,""]})]}),l.jsxs("div",{className:"text-xs text-slate-500",children:[k.score||0,""]}),l.jsxs("div",{className:"text-[10px] text-slate-400",children:[k.communityName," ",k.subgroupId]})]},k.uid)})}):l.jsxs("div",{className:"text-center py-8 text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{children:"  ."}),l.jsx("p",{className:"text-xs mt-1",children:"365    !"})]})})()]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:" / "}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),l.jsx("textarea",{value:h.text,onChange:N=>p(k=>({...k,text:N.target.value})),placeholder:":     !",className:"w-full p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-blue-500 outline-none",rows:3})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("label",{className:"text-sm font-bold text-slate-600",children:"  "}),l.jsxs("button",{onClick:()=>p(N=>({...N,links:[...N.links||[],{url:"",text:""}]})),className:"text-xs bg-blue-50 text-blue-600 px-3 py-1.5 rounded-lg font-bold hover:bg-blue-100 flex items-center gap-1",children:[l.jsx(ve,{name:"plus",size:12}),"  "]})]}),(h.links||[]).map((N,k)=>l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl relative group border border-slate-100",children:[l.jsx("button",{onClick:()=>p(P=>({...P,links:P.links.filter((Y,V)=>V!==k)})),className:"absolute -top-2 -right-2 bg-white text-red-500 p-1.5 rounded-full shadow-md border border-red-100 hover:bg-red-50 transition-colors",children:l.jsx(ve,{name:"trash",size:14})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-400 mb-1 uppercase",children:" "}),l.jsx("input",{type:"text",value:N.text,onChange:P=>{const Y=[...h.links];Y[k].text=P.target.value,p(V=>({...V,links:Y}))},placeholder:": , ",className:"w-full p-2 border rounded-lg text-sm bg-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-400 mb-1 uppercase",children:"  (URL)"}),l.jsx("input",{type:"url",value:N.url,onChange:P=>{const Y=[...h.links];Y[k].url=P.target.value,p(V=>({...V,links:Y}))},placeholder:"https://...",className:"w-full p-2 border rounded-lg text-sm bg-white"})]})]})]},k))]}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:h.enabled,onChange:N=>p(k=>({...k,enabled:N.target.checked})),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm font-bold text-slate-600",children:" "})]}),l.jsx("button",{onClick:f,className:"bg-blue-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all active:scale-95",children:""})]}),h.text&&l.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-xl border-2 border-dashed border-slate-300",children:[l.jsx("p",{className:"text-xs text-slate-400 mb-3 font-bold uppercase tracking-wider",children:" "}),l.jsx("div",{className:"bg-white border-2 border-slate-100 rounded-3xl p-8 shadow-sm",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[l.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-4xl shadow-inner border border-slate-100",children:""}),l.jsxs("div",{className:"flex-1 min-w-0 text-center md:text-left",children:[l.jsx("p",{className:"text-[18px] text-slate-900 font-bold whitespace-pre-wrap leading-snug",children:h.text}),l.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-3 mt-6",children:(h.links||[]).map((N,k)=>N.text&&l.jsx("div",{className:"bg-[#03C75A] text-white px-8 py-3 rounded-2xl text-[16px] font-black shadow-md",children:N.text},k))})]})]})})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:"  "}),l.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 font-bold text-sm",children:[l.jsx(ve,{name:"download",size:16}),"  CSV "]})]}),(()=>{const N=c.filter(P=>P.memos&&Object.keys(P.memos||{}).length>0),k=c.reduce((P,Y)=>P+Object.keys(Y.memos||{}).length,0);return l.jsxs("div",{children:[l.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:k}),l.jsx("div",{className:"text-xs text-slate-500",children:"  "})]}),l.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N.length}),l.jsx("div",{className:"text-xs text-slate-500",children:" "})]}),l.jsxs("div",{className:"bg-green-50 p-4 rounded-xl text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[c.length>0?Math.round(N.length/c.length*100):0,"%"]}),l.jsx("div",{className:"text-xs text-slate-500",children:""})]})]}),l.jsx("h3",{className:"font-bold text-slate-700 mb-2",children:"  TOP 10"}),l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:c.map(P=>({...P,memoCount:Object.keys(P.memos||{}).length})).filter(P=>P.memoCount>0).sort((P,Y)=>Y.memoCount-P.memoCount).slice(0,10).map((P,Y)=>l.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${Y===0?"bg-yellow-400 text-white":Y===1?"bg-slate-400 text-white":Y===2?"bg-orange-400 text-white":"bg-slate-200 text-slate-600"}`,children:Y+1}),l.jsxs("div",{children:[l.jsx("span",{className:"font-bold text-slate-800",children:P.name}),l.jsx("span",{className:"text-xs text-slate-400 ml-2",children:P.subgroupId})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-sm font-bold text-purple-600",children:[P.memoCount,""]}),l.jsx("button",{onClick:()=>v(P.name,P.memos||{},{currentDay:P.currentDay,score:P.score,streak:P.streak}),className:"text-xs bg-indigo-100 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-200",children:"HTML"})]})]},P.uid))})]})})()]}),x&&l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl space-y-4",children:[l.jsxs("h3",{className:"font-bold text-lg border-b pb-2",children:["   (",x.name,")"]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" "}),l.jsx("select",{value:x.communityId,onChange:N=>{const k=u.find(P=>P.id===N.target.value);m({...x,communityId:k.id,communityName:k.name,subgroupId:k.subgroups[0]})},className:"w-full border rounded p-2 text-sm",children:u.map(N=>l.jsx("option",{value:N.id,children:N.name},N.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:""}),l.jsx("select",{value:x.subgroupId,onChange:N=>m({...x,subgroupId:N.target.value}),className:"w-full border rounded p-2 text-sm",children:(()=>{const N=u.find(k=>k.id===x.communityId);return N?N.subgroups.map(k=>l.jsx("option",{value:k,children:k},k)):null})()})]}),l.jsxs("div",{className:"flex gap-2 pt-4",children:[l.jsx("button",{onClick:w,className:"flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:""}),l.jsx("button",{onClick:()=>m(null),className:"flex-1 bg-slate-200 text-slate-600 py-2 rounded hover:bg-slate-300",children:""})]})]})}),b&&l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:()=>S(null),children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",onClick:N=>N.stopPropagation(),children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b pb-2",children:"  "}),l.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:[l.jsxs("p",{className:"text-sm text-blue-700",children:[l.jsx("strong",{children:b.name}),"  ."]}),l.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[" : ",b.password]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:"  (6 )"}),l.jsx("input",{type:"text",value:_,onChange:N=>T(N.target.value),placeholder:"123456",className:"w-full border border-slate-300 rounded-lg p-3 text-lg font-mono focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),l.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"    "})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>C(b.uid,b.name,b.password),disabled:!_||_.length<6,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:" "}),l.jsx("button",{onClick:()=>{S(null),T("")},className:"flex-1 bg-slate-200 text-slate-600 py-3 rounded-lg hover:bg-slate-300 font-bold",children:""})]})]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"   "}),l.jsx("div",{className:"flex gap-2",children:["name","day","score","subgroup"].map(N=>l.jsx("button",{onClick:()=>o(N),className:`text-xs px-3 py-1.5 rounded-lg font-bold ${a===N?"bg-blue-500 text-white":"bg-slate-100 text-slate-600"}`,children:N==="name"?"":N==="day"?"":N==="score"?"":""},N))})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[l.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-3 text-center w-10",children:"#"}),l.jsx("th",{className:"px-3 py-3",children:""}),l.jsx("th",{className:"px-3 py-3",children:"/"}),l.jsx("th",{className:"px-3 py-3 text-center",children:"Day"}),l.jsx("th",{className:"px-3 py-3 text-center",children:""}),l.jsx("th",{className:"px-3 py-3 text-center",children:""}),l.jsx("th",{className:"px-3 py-3 text-center",children:""})]})}),l.jsx("tbody",{children:(()=>[...c].sort((k,P)=>{if(a==="name")return k.name.localeCompare(P.name);if(a==="day"){const Y=((k.readCount||1)-1)*365+(k.currentDay||1);return((P.readCount||1)-1)*365+(P.currentDay||1)-Y}if(a==="score")return(P.score||0)-(k.score||0);if(a==="subgroup"){const Y=(k.communityName||"").localeCompare(P.communityName||"","ko-KR");return Y!==0?Y:(k.subgroupId||"").localeCompare(P.subgroupId||"","ko-KR")}return 0}).map((k,P)=>{const Y=k.lastReadDate===new Date().toDateString(),V=k.readCount||1,te=k.currentDay||1,de=(V-1)*365+te;return l.jsxs("tr",{className:`border-b hover:bg-slate-50 ${Y?"bg-green-50":""}`,children:[l.jsx("td",{className:"px-3 py-3 text-center text-xs text-slate-400 font-mono italic",children:P+1}),l.jsxs("td",{className:"px-3 py-3 font-medium text-slate-900",children:[k.name,Y&&l.jsx("span",{className:"ml-1 text-green-500",children:""})]}),l.jsxs("td",{className:"px-3 py-3",children:[l.jsx("span",{className:"font-bold",children:k.communityName}),l.jsx("span",{className:"text-xs text-slate-400 block",children:k.subgroupId})]}),l.jsx("td",{className:"px-3 py-3 text-center",children:V>1?l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsxs("span",{className:"font-bold text-blue-600",children:["DAY ",de]}),l.jsxs("span",{className:"px-1.5 py-0.5 bg-gradient-to-br from-purple-500 to-purple-700 text-white text-[10px] font-bold rounded-full",children:[V,""]})]}):l.jsxs("span",{className:"font-bold text-blue-600",children:["DAY ",te]})}),l.jsx("td",{className:"px-3 py-3 text-center",children:k.score}),l.jsx("td",{className:"px-3 py-3 text-center text-xs text-slate-400",children:k.lastReadDate?new Date(k.lastReadDate).toLocaleDateString("ko-KR"):"-"}),l.jsx("td",{className:"px-3 py-3 text-center",children:l.jsxs("div",{className:"flex justify-center gap-1",children:[l.jsx("button",{onClick:()=>S(k),className:"text-purple-500 hover:text-purple-700 p-1 bg-purple-50 rounded",title:" ",children:l.jsx(ve,{name:"refresh",size:14})}),l.jsx("button",{onClick:()=>g(k),className:"text-blue-500 hover:text-blue-700 p-1 bg-blue-50 rounded",title:" ",children:l.jsx(ve,{name:"edit",size:14})}),l.jsx("button",{onClick:()=>$(k.uid,k.name),className:"text-red-500 hover:text-red-700 p-1 bg-red-50 rounded",title:"",children:l.jsx(ve,{name:"trash",size:14})})]})})]},P)}))()})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:"   "}),l.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200 mb-4",children:l.jsxs("p",{className:"text-sm text-blue-700",children:["   Firestore  ",l.jsx("strong",{children:"  10 "})," .",l.jsx("br",{}),"     ."]})}),D&&l.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg mb-4 text-sm",children:[l.jsxs("p",{className:"text-slate-600",children:[" : ",D.lastSyncAt&&D.lastSyncAt.toDate?D.lastSyncAt.toDate().toLocaleString("ko-KR"):" "]}),l.jsxs("p",{className:"text-slate-500 text-xs",children:[": ",D.successCount||0," / : ",D.errorCount||0,""]}),D.syncedVersions&&l.jsxs("p",{className:"text-slate-400 text-xs mt-1",children:[" : ",D.syncedVersions.join(", ")]}),D.failedItems&&D.failedItems.length>0&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[l.jsxs("p",{className:"text-red-600 text-xs font-bold mb-2",children:["   (",D.failedItems.length,"):"]}),l.jsx("div",{className:"max-h-32 overflow-y-auto bg-white rounded p-2 text-xs",children:D.failedItems.map((N,k)=>l.jsxs("div",{className:"text-red-500 py-0.5",children:[" ",N.versionName," Day ",N.day," (",N.date,") - ",N.error]},k))})]})]}),U?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-200",children:[l.jsxs("p",{className:"text-sm font-bold text-amber-700 mb-2",children:["   ... (",U.current,"/",U.total,")"]}),U.status&&l.jsx("p",{className:"text-xs text-amber-800 mb-2 font-medium",children:U.status}),U.currentVersion&&l.jsxs("p",{className:"text-xs text-amber-600 mb-2",children:[": ",U.currentVersion," ",U.currentDay>0&&`- Day ${U.currentDay}`]}),l.jsx("div",{className:"w-full bg-amber-200 rounded-full h-3",children:l.jsx("div",{className:"bg-amber-500 h-3 rounded-full transition-all",style:{width:`${U.current/U.total*100}%`}})}),l.jsxs("p",{className:"text-xs text-amber-600 mt-2",children:[" : ",U.success," /  : ",U.error,""]})]}),l.jsx("p",{className:"text-xs text-slate-500 text-center",children:"   .  2 ."})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-bold text-slate-700 mb-2",children:"  :"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[l.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:" "}),d["1year"].map(N=>{const k=`1year_${N.id}`,P=Q.indexOf(k)!==-1;return l.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:P,onChange:Y=>{Y.target.checked?ue([...Q,k]):ue(Q.filter(V=>V!==k))},className:"w-4 h-4 rounded"}),l.jsx("span",{className:"text-sm text-slate-700",children:N.name})]},k)})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[l.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:" "}),d.nt.map(N=>{const k=`nt_${N.id}`,P=Q.indexOf(k)!==-1;return l.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:P,onChange:Y=>{Y.target.checked?ue([...Q,k]):ue(Q.filter(V=>V!==k))},className:"w-4 h-4 rounded"}),l.jsx("span",{className:"text-sm text-slate-700",children:N.name})]},k)})]})]})]}),l.jsx("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:l.jsxs("p",{className:"text-sm text-green-700",children:[": ",l.jsxs("strong",{children:[Q.length,""]})," "]})}),l.jsxs("button",{onClick:async()=>{if(Q.length===0){alert("  .");return}if(!confirm(`${Q.length}  . ?`))return;const N=Q.length*365;Z({current:0,total:N,success:0,error:0,currentVersion:"",currentDay:0});const k=await re(Q);alert(` !
: ${k.success}
: ${k.error}`);const P=await F.collection("settings").doc("sync").get();P.exists&&W(P.data())},disabled:Q.length===0,className:"w-full bg-blue-600 text-white font-bold py-4 rounded-xl hover:bg-blue-700 text-lg disabled:opacity-50",children:["    (",Q.length*365,")"]})]})]})]})}),x$=({view:t,currentUser:e,tempUser:n,setView:r,selectedPlanType:i,handlePlanTypeSelect:s,handleVersionSelect:a,handleCommunitySelect:o,handleSubgroupSelect:c})=>{if(t==="plan_type_select")return l.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[l.jsxs("div",{className:"w-full max-w-2xl mb-6",children:[e&&!n&&l.jsxs("button",{onClick:()=>r("dashboard"),className:"text-sm text-slate-400 flex items-center hover:text-slate-600 mb-4",children:[l.jsx(ve,{name:"back",size:16,className:"mr-1"}),"  "]}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 text-center",children:e&&!n?"  ":`, ${n&&n.name||""}!`}),l.jsx("p",{className:"text-slate-500 text-sm text-center mt-1",children:"  ?"})]}),l.jsx("div",{className:"w-full max-w-2xl space-y-3",children:nh.map(u=>l.jsxs("button",{onClick:()=>s(u.id),className:"w-full bg-white p-5 rounded-2xl border border-slate-200 shadow-sm hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[l.jsx("div",{className:"font-bold text-slate-800 text-lg mb-1",children:u.title}),l.jsx("div",{className:"text-xs text-slate-400",children:u.desc})]},u.id))})]});if(t==="bible_version_select"){const u=gi[i],d=nh.find(p=>p.id===i),h=d?d.title:null;return l.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[l.jsxs("div",{className:"w-full max-w-2xl",children:[l.jsxs("button",{onClick:()=>r("plan_type_select"),className:"text-sm text-slate-400 flex items-center hover:text-slate-600 mb-4",children:[l.jsx(ve,{name:"back",size:16,className:"mr-1"})," "]}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:[h,"  "]}),l.jsx("div",{className:"bg-yellow-50 text-yellow-800 text-xs font-bold p-2 rounded-lg mt-2 break-keep",children:"    1    ."})]})]}),l.jsx("div",{className:"w-full max-w-2xl space-y-3",children:u.map(p=>l.jsxs("button",{onClick:()=>a(p.id),className:"w-full bg-white p-5 rounded-2xl border border-slate-200 shadow-sm hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[l.jsx("div",{className:"font-bold text-slate-800 text-lg mb-1",children:p.name}),l.jsx("div",{className:"text-xs text-slate-400",children:p.desc})]},p.id))})]})}if(t==="community_select")return l.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"  "}),l.jsx("p",{className:"text-slate-500 text-sm",children:"   ?"})]}),l.jsx("div",{className:"w-full max-w-2xl space-y-3",children:Lr.map(u=>l.jsxs("button",{onClick:()=>o(u.id,u.name),className:"w-full bg-white p-4 rounded-2xl shadow-sm border border-slate-200 hover:border-blue-500 hover:bg-blue-50 transition-all flex items-center gap-4 text-left",children:[l.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-2xl",children:u.icon}),l.jsx("div",{className:"flex-1",children:l.jsx("div",{className:"font-bold text-slate-800 text-lg",children:u.name})}),l.jsx(ve,{name:"arrowRight",className:"text-slate-300"})]},u.id))})]});if(t==="subgroup_select"){const u=Lr.find(d=>d.id===(n?n.communityId:null));return l.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[l.jsx("div",{className:"w-full max-w-2xl mb-4",children:l.jsxs("button",{onClick:()=>r("community_select"),className:"text-sm text-slate-400 flex items-center hover:text-slate-600",children:[l.jsx(ve,{name:"back",size:16,className:"mr-1"})," "]})}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:" "}),l.jsxs("p",{className:"text-slate-500 text-sm",children:[n?n.communityName:"","   ."]})]}),l.jsx("div",{className:"w-full max-w-2xl grid grid-cols-2 gap-3 h-[50vh] overflow-y-auto content-start",children:u&&u.subgroups.map((d,h)=>l.jsxs("button",{onClick:()=>c(d),className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 hover:border-blue-500 hover:bg-blue-50 transition-all text-center flex flex-col items-center justify-center aspect-video",children:[l.jsx("span",{className:"text-2xl mb-2 opacity-80",children:""}),l.jsx("span",{className:"font-bold text-slate-700 text-sm",children:d})]},h))})]})}return null},b$=({show:t,onClose:e,myLevel:n,score:r})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:i=>{i.target===i.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:i=>i.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold",children:"  &  "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(ve,{name:"close"})})]}),l.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[60vh]",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-blue-600 mb-1",children:" "}),l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 p-3 rounded-xl border border-blue-100",children:[l.jsx("div",{className:"text-3xl",children:n.emoji}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-lg",children:n.title}),l.jsxs("div",{className:"text-xs text-slate-500",children:[" ",r,""]})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  "}),l.jsxs("ul",{className:"text-sm text-slate-600 space-y-1 list-disc pl-4",children:[l.jsxs("li",{children:["  : ",l.jsx("strong",{children:"+10"})]}),l.jsxs("li",{children:["  : ",l.jsx("strong",{children:" +1  ( +5)"})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:" "}),l.jsx("div",{className:"grid gap-2 text-sm",children:Tm.map((i,s)=>l.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${i.title===n.title?"bg-yellow-50 border border-yellow-200":""}`,children:[l.jsx("span",{className:"text-xl",children:i.emoji}),l.jsx("span",{className:"flex-1",children:i.title}),l.jsxs("span",{className:"text-slate-400 text-xs",children:[i.min,"pt~"]})]},s))})]})]}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,_$=({show:t,onClose:e})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:n=>{n.target===n.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:n=>n.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  114 "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(ve,{name:"close"})})]}),l.jsx("a",{href:"https://www.bible114.net/8e616cd9-5ca0-4dd3-9e63-64280fc66f38",target:"_blank",rel:"noopener noreferrer",className:"block w-full mb-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-center py-3 rounded-xl font-bold shadow-md hover:from-blue-600 hover:to-blue-700 transition-all",children:"  114   "}),l.jsxs("div",{className:"space-y-3 overflow-y-auto max-h-[60vh] text-xs",children:[l.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:[l.jsx("h4",{className:"font-bold text-blue-700 mb-2",children:"  114?"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[l.jsx("strong",{children:"1 1 4 !"}),"   1 1 , 3( )        ,         ."]})]}),l.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100",children:[l.jsx("h4",{className:"font-bold text-green-700 mb-2",children:" 1 (1-3)"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[l.jsx("strong",{className:"text-green-800",children:":"}),"  1-11, , , , , , ,  1-6, , ,  7-10, , "]}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[l.jsx("strong",{className:"text-green-800",children:":"})," ,  1-5, , , ,  1-3"]})]}),l.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-100",children:[l.jsx("h4",{className:"font-bold text-yellow-700 mb-2",children:" 2 (4-6)"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[l.jsx("strong",{className:"text-yellow-800",children:":"}),"  12-26, , , ,  1-72, , , , , "]}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[l.jsx("strong",{className:"text-yellow-800",children:":"})," ,  6-12, , , , , , ,  4-7"]})]}),l.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-100",children:[l.jsx("h4",{className:"font-bold text-orange-700 mb-2",children:" 3 (7-9)"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[l.jsx("strong",{className:"text-orange-800",children:":"}),"  27-36, ,  1-11, , , ,  12-22,  1-14, ,  15, , ,  16-23, ,  24-25, "]}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[l.jsx("strong",{className:"text-orange-800",children:":"})," ,  13-20, , , , , , ,  8-14"]})]}),l.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100",children:[l.jsx("h4",{className:"font-bold text-red-700 mb-2",children:" 4 (10-12)"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed mb-1",children:[l.jsx("strong",{className:"text-red-800",children:":"}),"  37-50, ,  90, ,  73-150,  1-28, ,  29-36, , , "]}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[l.jsx("strong",{className:"text-red-800",children:":"})," ,  21-28, , , , , , ,  15-22"]})]}),l.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-100",children:[l.jsx("h4",{className:"font-bold text-purple-700 mb-1",children:"  !"}),l.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["  !    . ",l.jsx("strong",{children:" "}),".  ! "]})]})]}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,S$=({show:t,onClose:e,currentUser:n})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:r=>{r.target===r.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:r=>r.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(ve,{name:"close"})})]}),l.jsx("div",{className:"grid grid-cols-3 gap-3 overflow-y-auto max-h-[60vh]",children:Cm.map(r=>{const i=n&&n.achievements?n.achievements.indexOf(r.id)!==-1:!1;return l.jsxs("div",{className:`p-3 rounded-xl text-center border ${i?"bg-yellow-50 border-yellow-200":"bg-slate-50 border-slate-100 opacity-40"}`,children:[l.jsx("div",{className:`text-2xl mb-1 ${i?"":"grayscale"}`,children:r.emoji}),l.jsx("p",{className:"text-[10px] font-bold text-slate-700 leading-tight",children:r.title})]},r.id)})}),l.jsx("div",{className:"mt-4 bg-blue-50 p-3 rounded-xl border border-blue-100",children:l.jsxs("p",{className:"text-xs text-blue-700 text-center",children:[" : ",l.jsx("strong",{children:n&&n.achievements?n.achievements.length:0})," / ",Cm.length]})}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,I$=({show:t,onClose:e,calendarDate:n,setCalendarDate:r,readHistory:i})=>{if(!t)return null;const s=new Date,a=n.getFullYear(),o=n.getMonth(),c=new Date(a,o,1).getDay(),u=new Date(a,o+1,0).getDate(),d=["1","2","3","4","5","6","7","8","9","10","11","12"],h=["","","","","","",""],p=[];for(let b=0;b<c;b++)p.push(null);for(let b=1;b<=u;b++)p.push(b);const f=b=>typeof b=="string"?b:b.date,y=i.filter(b=>{const S=f(b),_=new Date(S);return _.getFullYear()===a&&_.getMonth()===o}).map(b=>new Date(f(b)).getDate()),v=()=>r(new Date(a,o-1,1)),x=()=>r(new Date(a,o+1,1)),m=()=>r(new Date),g=s.getFullYear()===a&&s.getMonth()===o,w=i.filter(b=>{const S=f(b);return new Date(S).getFullYear()===a}).length;return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:b=>{b.target===b.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(ve,{name:"close"})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:v,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold",children:""}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"font-bold text-lg text-slate-700",children:[a," ",d[o]]}),!g&&l.jsx("button",{onClick:m,className:"ml-2 text-xs text-blue-500 underline",children:""})]}),l.jsx("button",{onClick:x,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold",children:""})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:h.map(b=>l.jsx("div",{className:`text-center text-[10px] font-bold py-1 ${b===""?"text-red-400":b===""?"text-blue-400":"text-slate-400"}`,children:b},b))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:p.map((b,S)=>{if(!b)return l.jsx("div",{},S);const _=g&&b===s.getDate(),T=y.indexOf(b)!==-1,C=new Date(a,o,b).getDay();return l.jsxs("button",{className:`aspect-square flex flex-col items-center justify-center rounded-lg border transition-all cursor-default relative
                                            ${_?"ring-2 ring-blue-400":""}
                                            ${T?"bg-green-100 border-green-200 text-green-700":C===0?"bg-red-50 border-red-100 text-red-300":C===6?"bg-blue-50 border-blue-100 text-blue-300":"bg-slate-50 border-slate-100 text-slate-400 hover:bg-blue-50"}`,children:[l.jsx("span",{className:"text-sm font-bold",children:b}),T&&l.jsx("span",{className:"absolute top-0.5 right-0.5 text-[8px]",children:""})]},S)})}),l.jsxs("div",{className:"mt-4 flex justify-center gap-4 text-xs",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-4 h-4 bg-green-100 rounded"}),l.jsx("span",{className:"text-slate-500",children:" "})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-4 h-4 bg-slate-50 rounded border"}),l.jsx("span",{className:"text-slate-500",children:"  "})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"bg-green-50 p-3 rounded-xl border border-green-100 text-center",children:[l.jsx("p",{className:"text-xs text-slate-500",children:" "}),l.jsxs("p",{className:"text-lg font-bold text-green-700",children:[y.length,""]})]}),l.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100 text-center",children:[l.jsxs("p",{className:"text-xs text-slate-500",children:[a," "]}),l.jsxs("p",{className:"text-lg font-bold text-blue-700",children:[w,""]})]})]})]}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})})},k$=({show:t,onClose:e})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:n=>{n.target===n.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:n=>n.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-red-700",children:"   "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(ve,{name:"close"})})]}),l.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[60vh]",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-red-600 mb-2",children:"  "}),l.jsxs("div",{className:"bg-red-50 p-3 rounded-xl border border-red-100 text-sm text-slate-700 leading-relaxed",children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"  "})," = (    )  (  )  100"]}),l.jsx("p",{className:"text-xs text-slate-500",children:"   1       "})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-700 mb-2",children:" "}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-200 text-xs space-y-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-700 mb-1",children:"1 (10, 1 12 )"}),l.jsxs("ul",{className:"text-slate-600 space-y-0.5 pl-3",children:[l.jsxs("li",{children:["     : ",l.jsx("strong",{children:"100"})]}),l.jsxs("li",{children:["   : 10  12 = ",l.jsx("strong",{children:"120"})]}),l.jsxs("li",{children:["  : 100  120  100 = ",l.jsx("strong",{className:"text-red-600",children:"83%"})]})]})]}),l.jsx("div",{className:"pt-2 border-t border-slate-200",children:l.jsx("p",{className:"text-slate-500",children:"   83%     "})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-blue-600 mb-2",children:"  ?"}),l.jsxs("ul",{className:"text-xs text-slate-600 space-y-2 pl-3",children:[l.jsxs("li",{children:[" ",l.jsx("strong",{children:"   "})," "]}),l.jsx("li",{children:"       "}),l.jsx("li",{children:"      "}),l.jsxs("li",{children:["   1   ",l.jsx("strong",{children:"   "})," "]})]})]})]}),l.jsx("button",{onClick:e,className:"w-full bg-red-100 font-bold py-3 rounded-xl mt-4 text-red-700 hover:bg-red-200 transition-colors",children:""})]})}):null,E$=({show:t,onClose:e,onRestart:n})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:r=>{r.target===r.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:r=>r.stopPropagation(),children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"  ?"}),l.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:[" (, , )",l.jsx("br",{}),l.jsx("strong",{className:"text-red-500",children:" "}),".",l.jsx("br",{})," Day 1  !"]})]}),l.jsx("div",{className:"bg-amber-50 p-3 rounded-xl border border-amber-200 mb-4",children:l.jsx("p",{className:"text-xs text-amber-700 text-center",children:"     !"})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:n,className:"w-full bg-red-500 text-white font-bold py-3 rounded-xl hover:bg-red-600 transition-colors",children:",   "}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 text-slate-600 font-bold py-3 rounded-xl hover:bg-slate-200",children:""})]})]})}):null,N$=({show:t,onClose:e,currentUser:n,currentDay:r,dateSettingsDate:i,setDateSettingsDate:s,dateToOffset:a,changeStartDate:o})=>{const[c,u]=Ff.useState(!1);if(Ff.useEffect(()=>{if(t){const x=setTimeout(()=>u(!0),300);return()=>clearTimeout(x)}else u(!1)},[t]),!t)return null;const d=i.getFullYear(),h=i.getMonth(),p=new Date(d,h,1).getDay(),f=new Date(d,h+1,0).getDate(),y=[];for(let x=0;x<p;x++)y.push(null);for(let x=1;x<=f;x++)y.push(x);const v=Fx?Fx[n?n.planId:null]:null;return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:x=>{x.target===x.currentTarget&&c&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 duration-200",onClick:x=>x.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),l.jsx("button",{onClick:e,className:"text-slate-400 p-1 hover:bg-slate-100 rounded-full transition-colors",children:l.jsx(ve,{name:"close"})})]}),l.jsxs("div",{className:"mb-4 bg-purple-50 p-4 rounded-xl border border-purple-100 text-center",children:[l.jsx("p",{className:"text-lg font-bold text-purple-700 leading-relaxed",children:'"    ."'}),l.jsx("p",{className:"text-[11px] text-purple-500 mt-1 opacity-80",children:"       ."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-2 rounded-xl",children:[l.jsx("button",{onClick:x=>{x.stopPropagation(),s(new Date(d,h-1))},className:"p-2 hover:bg-white rounded-lg transition-colors",children:l.jsx(ve,{name:"back",size:16})}),l.jsxs("span",{className:"font-bold text-slate-700",children:[d," ",h+1,""]}),l.jsx("button",{onClick:x=>{x.stopPropagation(),s(new Date(d,h+1))},className:"p-2 hover:bg-white rounded-lg transition-colors rotate-180",children:l.jsx(ve,{name:"back",size:16})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-1",children:["","","","","","",""].map((x,m)=>l.jsx("div",{className:`text-[10px] font-bold py-1 ${m===0?"text-red-400":m===6?"text-blue-400":"text-slate-400"}`,children:x},m))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:y.map((x,m)=>{if(!x)return l.jsx("div",{},m);const g=a(h+1,x),w=v&&v[g]?v[g]:null,b=new Date().getDate()===x&&new Date().getMonth()===h,S=new Date(d,h,x).getDay();return l.jsxs("button",{onClick:_=>{_.stopPropagation();const T=g-r+1;o(T),e()},className:`group aspect-square flex flex-col items-center justify-center rounded-lg border transition-all hover:border-purple-400 hover:shadow-sm active:scale-95
                                        ${b?"bg-purple-50 border-purple-200 ring-1 ring-purple-300":"bg-white border-slate-100"}
                                    `,children:[l.jsx("span",{className:`text-xs font-bold ${S===0?"text-red-500":S===6?"text-blue-500":"text-slate-700"}`,children:x}),w&&l.jsx("span",{className:"text-[7px] text-slate-400 break-keep leading-[1.1] w-full px-0.5 whitespace-pre-wrap",title:w.range,children:w.range})]},m)})}),l.jsx("div",{className:"bg-amber-50 p-3 rounded-xl border border-amber-200",children:l.jsx("p",{className:"text-[11px] text-amber-700 leading-relaxed font-medium",children:"        ."})})]}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})})},T$=({show:t,onClose:e,progressRanking:n,allMembersForRace:r,subgroupId:i,currentUser:s,selectedSubgroupDetail:a,setSelectedSubgroupDetail:o,rankingCommunityFilter:c,setRankingCommunityFilter:u})=>{if(!t)return null;if(a){const d=r.filter(y=>y.subgroupId===a).sort((y,v)=>{const x=((y.readCount||1)-1)*365+(y.currentDay||1);return((v.readCount||1)-1)*365+(v.currentDay||1)-x}),h=new Date().toDateString(),p=d.length>0?Math.round(d.reduce((y,v)=>y+(v.currentDay||0),0)/d.length):0,f=d.filter(y=>y.lastReadDate===h).length;return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:y=>{y.target===y.currentTarget&&o(null)},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl max-h-[80vh] flex flex-col",onClick:y=>y.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b pb-3",children:[l.jsx("button",{onClick:()=>o(null),className:"text-slate-400 hover:text-slate-600",children:l.jsx(ve,{name:"back",size:20})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:a}),l.jsx("p",{className:"text-xs text-slate-500",children:"  "})]}),l.jsx("button",{onClick:()=>{o(null),e()},className:"text-slate-400",children:l.jsx(ve,{name:"close"})})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[l.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl text-center border border-blue-100",children:[l.jsx("p",{className:"text-xl font-bold text-blue-600",children:d.length}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]}),l.jsxs("div",{className:"bg-green-50 p-3 rounded-xl text-center border border-green-100",children:[l.jsx("p",{className:"text-xl font-bold text-green-600",children:p}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" Day"})]}),l.jsxs("div",{className:"bg-orange-50 p-3 rounded-xl text-center border border-orange-100",children:[l.jsx("p",{className:"text-xl font-bold text-orange-600",children:f}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:d.length>0?d.map((y,v)=>{const x=y.uid===s.uid,m=y.lastReadDate===h,g=Math.round(y.currentDay/365*100);return l.jsxs("div",{className:`p-3 rounded-xl border ${x?"bg-blue-50 border-blue-200":"bg-slate-50 border-slate-100"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${v===0?"bg-yellow-100 text-yellow-600":v===1?"bg-slate-200 text-slate-600":v===2?"bg-orange-100 text-orange-600":"bg-slate-100 text-slate-400"}`,children:v+1}),l.jsxs("span",{className:`font-bold text-sm ${x?"text-blue-600":"text-slate-700"}`,children:[y.name," ",x&&"()"]}),(y.readCount||1)>1&&l.jsxs("span",{className:"text-[10px] bg-purple-500 text-white px-1.5 py-0.5 rounded-full font-bold",children:[y.readCount,""]}),m&&l.jsx("span",{className:"text-green-500 text-xs",children:""})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Day ",((y.readCount||1)-1)*365+y.currentDay]}),l.jsxs("p",{className:"text-[10px] text-slate-400",children:[y.score||0,""]})]})]}),l.jsx("div",{className:"h-2 w-full bg-slate-200 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${x?"bg-blue-500":"bg-slate-400"}`,style:{width:`${g}%`}})}),l.jsxs("div",{className:"flex justify-between mt-1",children:[l.jsxs("span",{className:"text-[10px] text-slate-400",children:[g,"% "]}),y.streak>0&&l.jsxs("span",{className:"text-[10px] text-orange-500 font-bold",children:[" ",y.streak," "]})]})]},y.uid)}):l.jsx("div",{className:"text-center py-8 text-slate-400",children:l.jsx("p",{className:"text-sm",children:"  "})})}),l.jsx("button",{onClick:()=>o(null),className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})})}else return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:d=>{d.target===d.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl max-h-[80vh] flex flex-col",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"   "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(ve,{name:"close"})})]}),l.jsxs("div",{className:"mb-3 flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>u("all"),className:`px-2.5 py-1.5 rounded-full text-[11px] font-bold whitespace-nowrap transition-colors ${c==="all"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:""}),Lr.map(d=>l.jsx("button",{onClick:()=>u(d.id),className:`px-2.5 py-1.5 rounded-full text-[11px] font-bold whitespace-nowrap transition-colors ${c===d.id?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:d.name},d.id))]}),l.jsxs("div",{className:"mb-3 bg-blue-50 p-3 rounded-xl border border-blue-100",children:[l.jsxs("p",{className:"text-xs text-blue-700",children:[l.jsx("strong",{children:" "})," =   Day  365  100"]}),l.jsx("p",{className:"text-[10px] text-blue-600 mt-1",children:"        "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:(()=>{let d=n;if(c!=="all"){const h=Lr.find(p=>p.id===c);h&&(d=n.filter(p=>h.subgroups.indexOf(p.name)!==-1))}return d.length===0?l.jsx("div",{className:"text-center py-8 text-slate-500",children:l.jsx("p",{className:"text-sm",children:"    ."})}):d.map((h,p)=>{const f=h.name===i,y=p===0?"bg-yellow-100 text-yellow-700 border-yellow-200":p===1?"bg-slate-200 text-slate-700 border-slate-300":p===2?"bg-orange-100 text-orange-700 border-orange-200":"bg-slate-100 text-slate-600 border-slate-200";return l.jsxs("button",{onClick:()=>o(h.name),className:`w-full p-3 rounded-xl border-2 transition-all hover:shadow-md ${f?"bg-blue-50 border-blue-300 hover:bg-blue-100":"bg-white border-slate-100 hover:border-slate-300"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 shrink-0 ${y}`,children:p+1}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("span",{className:`font-bold text-sm truncate pr-2 ${f?"text-blue-600":"text-slate-700"}`,children:[h.name," ",f&&"()"]}),l.jsxs("span",{className:"text-xs font-bold text-slate-500 shrink-0",children:[h.progressRate,"%"]})]})}),l.jsx(ve,{name:"arrowRight",size:16,className:"text-slate-400"})]}),l.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${p===0?"bg-yellow-400":p===1?"bg-slate-400":p===2?"bg-orange-400":"bg-slate-300"}`,style:{width:`${h.progressRate}%`}})})]},p)})})()})]})})},C$=({show:t,onClose:e,memos:n,currentDay:r,score:i,streak:s,currentUser:a,generateMemosHTML:o})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:c=>{c.target===c.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"   "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(ve,{name:"close"})})]}),l.jsx("div",{className:"bg-indigo-50 p-3 rounded-xl border border-indigo-100 mb-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-center flex-1",children:[l.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:Object.keys(n).length}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]}),l.jsxs("div",{className:"text-center flex-1 border-l border-indigo-200",children:[l.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:r||1}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" Day"})]}),l.jsxs("div",{className:"text-center flex-1 border-l border-indigo-200",children:[l.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:i||0}),l.jsx("p",{className:"text-[10px] text-slate-500",children:" "})]})]})}),l.jsx("div",{className:"space-y-3 overflow-y-auto max-h-[45vh]",children:Object.keys(n).length>0?Object.keys(n).map(c=>[c,n[c]]).sort((c,u)=>Number(u[0])-Number(c[0])).map(c=>{const[u,d]=c;return l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("span",{className:"text-xs font-bold text-blue-600",children:["DAY ",u," ",(d.texts&&d.texts.length||0)>1&&l.jsxs("span",{className:"ml-1 text-purple-500",children:["(",d.texts.length,")"]})]}),l.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(d.date).toLocaleDateString("ko-KR")})]}),l.jsx("p",{className:"text-xs text-slate-500 mb-1",children:d.title}),(d.texts||[d.text]).map((h,p)=>l.jsx("div",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-wrap "+(p>0?"mt-2 pt-2 border-t border-slate-200":""),children:h},p))]},u)}):l.jsxs("div",{className:"text-center py-8 text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{className:"text-sm",children:"   ."})]})}),Object.keys(n).length>0&&l.jsx("button",{onClick:()=>o(a.name,n,{currentDay:r,score:i,streak:s}),className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-xl mt-4 flex items-center justify-center gap-2 hover:bg-indigo-700 transition-colors",children:"   "}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-2 text-slate-600",children:""})]})}):null,j$=({show:t,onClose:e,currentUser:n,changeSubgroup:r})=>t?l.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:i=>{i.target===i.currentTarget&&e()},children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:i=>i.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  "}),l.jsx("button",{onClick:e,className:"text-slate-400",children:l.jsx(ve,{name:"close"})})]}),l.jsx("div",{className:"mb-4 bg-blue-50 p-3 rounded-xl border border-blue-200",children:l.jsxs("p",{className:"text-sm text-blue-700",children:[" : ",l.jsx("strong",{children:n.subgroupId||""})]})}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-[300px] overflow-y-auto",children:(()=>{const i=Lr.find(s=>s.id===n.communityId);return i?i.subgroups.map((s,a)=>l.jsx("button",{onClick:()=>r(s),disabled:s===n.subgroupId,className:`p-3 rounded-xl text-sm font-bold transition-all ${s===n.subgroupId?"bg-blue-100 text-blue-600 border-2 border-blue-300":"bg-slate-50 text-slate-700 border-2 border-slate-200 hover:border-blue-300"}`,children:s},a)):null})()}),l.jsx("button",{onClick:e,className:"w-full bg-slate-100 font-bold py-3 rounded-xl mt-4 text-slate-600",children:""})]})}):null,D$=({handleLogout:t,streak:e,score:n,myLevel:r,setShowScoreInfo:i,setShowAchievements:s,setShowDateSettings:a,setShowCalendar:o,setShowReadingGuide:c,getEncouragementMessage:u,communityName:d,setShowFullRanking:h,topProgressGroups:p,subgroupId:f,planTypeName:y,versionName:v,handleChangeVersionStart:x,setView:m})=>l.jsxs("header",{className:"sticky top-0 z-30 space-y-4 mb-4",children:[l.jsx("div",{className:"bg-white/95 backdrop-blur-md border-b border-slate-200/60 shadow-sm",children:l.jsxs("div",{className:"px-4 py-2 flex flex-col md:flex-row justify-between items-center max-w-5xl mx-auto w-full gap-2.5 md:gap-4",children:[l.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto scrollbar-hide w-full md:w-auto md:order-2 justify-between md:justify-end py-1",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsxs("div",{className:`text-xs font-bold px-2.5 py-1.5 rounded-xl flex items-center gap-1 shrink-0 ${e>0?"bg-orange-50 text-orange-600 border border-orange-100":"bg-slate-100 text-slate-400"}`,children:[l.jsx(ve,{name:"flame",size:12}),e,""]}),l.jsxs("button",{type:"button",onClick:g=>{g.stopPropagation(),i(!0)},className:"text-xs font-bold text-blue-600 bg-blue-50 border border-blue-100 px-2.5 py-1.5 rounded-xl hover:bg-blue-100 transition-colors shrink-0",children:[r.emoji," ",n||0,"pt"]}),l.jsxs("button",{type:"button",onClick:g=>{g.stopPropagation(),m("mini_room")},className:"p-1.5 text-xs font-bold text-indigo-600 bg-indigo-50 border border-indigo-100 rounded-xl hover:bg-indigo-100 shrink-0 flex items-center gap-1",title:" ",children:[" ",l.jsx("span",{className:"hidden sm:inline",children:""})]}),l.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),s(!0)},className:"p-1.5 text-xs font-bold text-yellow-600 bg-yellow-50 border border-yellow-100 rounded-xl hover:bg-yellow-100 shrink-0",children:""}),l.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),a(!0)},className:"p-1.5 text-xs font-bold text-purple-600 bg-purple-50 border border-purple-100 rounded-xl hover:bg-purple-100 shrink-0",children:""}),l.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),o(!0)},className:"p-1.5 text-xs font-bold text-green-600 bg-green-50 border border-green-100 rounded-xl hover:bg-green-100 shrink-0",children:""}),l.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),c(!0)},className:"p-1.5 text-xs font-bold text-slate-600 bg-slate-100 border border-slate-200 rounded-xl hover:bg-slate-200 shrink-0",children:l.jsx(ve,{name:"helpbook",size:14})})]}),l.jsxs("div",{className:"flex items-center shrink-0",children:[l.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),l.jsx("button",{onClick:t,className:"text-xs font-bold text-slate-400 hover:text-red-500 transition-colors shrink-0 px-1",children:""})]})]}),l.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-100/80 hover:bg-slate-200 rounded-full transition-colors group shrink-0 md:order-1 self-start md:self-center",children:[l.jsx("span",{className:"text-[11px] font-bold text-slate-500 tracking-tight",children:"  "}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-xs font-bold text-slate-700",children:y}),l.jsx("span",{className:"w-px h-2.5 bg-slate-300"}),l.jsx("span",{className:"text-xs font-bold text-blue-600",children:v}),l.jsx(ve,{name:"refresh",size:10,className:"text-slate-400 group-hover:rotate-180 transition-transform duration-500"})]})]})]})}),l.jsx("div",{className:"px-4 w-full max-w-5xl mx-auto",children:l.jsxs("div",{className:"bg-white rounded-3xl shadow-md border border-slate-100/80 p-6 md:p-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("span",{className:"text-xs font-bold text-blue-600 tracking-tight",children:u()}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-xl font-black text-slate-900",children:[" ",d]}),l.jsx("span",{className:"text-sm font-bold text-slate-400",children:" "})]})]}),l.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1 px-4 py-2 bg-slate-50 hover:bg-blue-50 text-blue-600 text-xs font-bold rounded-2xl transition-all border border-transparent hover:border-blue-100",children:[" ",l.jsx(ve,{name:"right",size:10})]})]}),l.jsx("div",{className:"space-y-4",children:p.map((g,w)=>l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 shrink-0 ${w===0?"bg-yellow-100 border-yellow-200 text-yellow-700":w===1?"bg-slate-100 border-slate-200 text-slate-700":"bg-orange-50 border-orange-100 text-orange-700"}`,children:w+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[l.jsx("span",{className:`font-bold truncate ${g.name===f?"text-blue-600":"text-slate-700"}`,children:g.name}),l.jsxs("span",{className:"font-bold text-slate-500 shrink-0",children:[" ",g.avgDay," (",g.progressRate,"%)"]})]}),l.jsx("div",{className:"h-4 w-full bg-slate-50 rounded-full border border-slate-100 overflow-hidden shadow-inner",children:l.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${w===0?"bg-gradient-to-r from-yellow-300 to-yellow-500":w===1?"bg-gradient-to-r from-slate-300 to-slate-500":"bg-gradient-to-r from-orange-300 to-orange-500"}`,style:{width:`${g.progressRate}%`}})})]})]},w))})]})})]}),A$=({racers:t,departmentChampions:e,getSubgroupDisplay:n})=>{const r=i=>{const s=Math.min(i,365);return s<=100?s/100*50:s<=200?50+(s-100)/100*30:80+(s-200)/165*20};return l.jsxs("div",{className:"mx-4 mb-6 relative h-64 bg-sky-texture overflow-hidden rounded-3xl shadow-xl border border-slate-100",children:[l.jsx("div",{className:"absolute inset-x-0 top-0 h-12 bg-gradient-to-b from-white/20 to-transparent z-10"}),l.jsx("div",{className:"mountain-back"}),l.jsx("div",{className:"mountain-front"}),l.jsx("div",{className:"absolute top-2 left-10 text-2xl opacity-80 animate-float",children:""}),l.jsx("div",{className:"absolute top-5 right-20 text-xl opacity-60 animate-float-slow",children:""}),l.jsx("div",{className:"absolute top-8 left-1/2 text-lg opacity-50 animate-float",style:{animationDelay:"2s"},children:""}),l.jsx("div",{className:"absolute bottom-2 left-5 text-sm z-10 opacity-90",children:""}),l.jsx("div",{className:"absolute bottom-3 right-10 text-sm z-10 opacity-90",children:""}),l.jsx("div",{className:"absolute bottom-4 left-1/3 text-xs z-10 opacity-80",children:""}),[100,200,300].map(i=>{const s=r(i);return l.jsxs("div",{className:"absolute top-2 z-20 flex flex-col items-center",style:{left:`${s}%`,transform:"translateX(-50%)"},children:[l.jsx("div",{className:"bg-white/95 px-2 py-1 rounded-full shadow-md border-2 border-slate-400 flex items-center justify-center",children:l.jsx("span",{className:"text-[10px] font-bold text-slate-700 leading-none",children:i})}),l.jsx("div",{className:"w-0.5 h-screen bg-gradient-to-b from-slate-400 via-slate-300 to-transparent opacity-40"})]},i)}),l.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex flex-col justify-center items-center z-20 group",style:{top:"60%"},children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 bg-yellow-400 rounded-full blur-xl opacity-70 animate-pulse"}),l.jsx("span",{className:"text-5xl relative z-10 drop-shadow-2xl",children:""})]}),l.jsx("span",{className:"text-[9px] font-bold text-slate-600 bg-white/90 px-2 py-0.5 rounded-full mt-2 shadow-sm border border-slate-200 relative z-20",children:""})]}),t.map((i,s)=>{const a=i.readCount||1,o=a>=2,c=o?i.currentDay:i.day,u=Math.min(r(c),100),d=i.isMe,h=n(i.subgroupId),p=e[i.uid],f=d?29:o?28:25,y=d?"50%":o?"8%":`${15+s%10*8}%`;return l.jsx("div",{className:"absolute transition-all duration-1000 ease-out",style:{left:`calc(${u}% - 16px)`,top:y,zIndex:f},children:l.jsxs("div",{className:"relative flex items-center",children:[a>1&&l.jsx("div",{className:"absolute -left-2 -top-1 w-4 h-4 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center border-2 border-white shadow-md z-10",children:l.jsx("span",{className:"text-[7px] font-bold text-white",children:a})}),l.jsxs("div",{className:`flex items-stretch rounded-full shadow-md overflow-hidden ${d?"ring-2 ring-yellow-400 ring-offset-1":""}`,children:[l.jsxs("div",{className:`text-[9px] pl-2 pr-1 py-0.5 font-bold whitespace-nowrap flex items-center gap-0.5 ${d?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-white/95 text-slate-700"}`,children:[p&&l.jsx("span",{className:"text-[11px]",title:`${p} 1`,children:""}),i.name]}),l.jsx("div",{className:`text-[9px] pl-1 pr-1.5 py-0.5 font-bold whitespace-nowrap text-white flex items-center ${h.bgColor} border-l border-white/30`,children:i.subgroupId})]})]})},i.uid||s)})]})},R$=({announcement:t})=>!t||!t.enabled||!t.text?null:l.jsx("div",{className:"bg-white border-2 border-slate-100 rounded-3xl p-7 shadow-sm mb-10",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[l.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-4xl shadow-inner border border-slate-100",children:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-slate-900 font-bold leading-snug",children:l.jsx(LE,{content:t.text,fontSize:19})}),l.jsx("div",{className:"flex flex-wrap items-center gap-3 mt-6",children:t.links&&t.links.length>0?t.links.map((e,n)=>e.url&&e.text&&l.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center bg-[#03C75A] text-white px-8 py-3.5 rounded-2xl text-[17px] font-black hover:bg-[#02b351] transition-colors shadow-md active:scale-95 min-w-[140px]",children:e.text},n)):t.linkUrl&&t.linkText&&l.jsx("a",{href:t.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center bg-[#03C75A] text-white px-8 py-3.5 rounded-2xl text-[17px] font-black hover:bg-[#02b351] transition-colors shadow-md active:scale-95 min-w-[140px]",children:t.linkText})})]})]})}),P$=({verseData:t,viewingDay:e,setViewingDay:n,currentUser:r,daysRemaining:i,handleChangeVersionStart:s,getEncouragementMessage:a,fontSize:o,setFontSize:c,isSpeaking:u,isPaused:d,ttsSpeed:h,handleSpeedChange:p,handleSpeak:f,handleStop:y,availableVoices:v,selectedVoiceURI:x,setSelectedVoiceURI:m,activeChunkIndex:g,jumpToChunk:w,hasReadToday:b,handleRead:S})=>l.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-100",children:[l.jsxs("div",{className:"p-6 text-white relative bg-gradient-to-br from-indigo-600 to-blue-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 px-2",children:[l.jsx("button",{onClick:()=>n(_=>Math.max(1,_-1)),className:"p-2 rounded-full bg-white/20 hover:bg-white/30 text-white transition-colors disabled:opacity-30",disabled:e<=1,children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-1",children:t.loading?"...":t.title}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(r.readCount||1)>1&&l.jsxs("span",{className:"text-xs bg-purple-500/90 px-2 py-0.5 rounded-full",children:[" ",r.readCount,""]}),l.jsxs("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:[" D-",i]})]})]}),l.jsx("button",{onClick:()=>n(_=>Math.min(365,_+1)),className:"p-2 rounded-full bg-white/20 hover:bg-white/30 text-white transition-colors disabled:opacity-30",disabled:e>=365,children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),l.jsxs("div",{className:"flex justify-between items-end mb-2",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"opacity-90 text-sm font-bold text-white/90 mb-1 flex items-center gap-2",children:t.subtitle}),l.jsx("p",{className:"opacity-80 text-xs",children:a()})]}),l.jsxs("div",{className:"flex items-center gap-1 bg-white/20 backdrop-blur-md rounded-full px-2 py-1 shadow-sm shrink-0 ml-4",children:[l.jsx("button",{onClick:()=>{const _=Math.max(12,o-2);c(_),localStorage.setItem("bible_fontSize",_)},className:"w-7 h-7 rounded-full bg-white/30 hover:bg-white/50 flex items-center justify-center text-white font-bold",children:""}),l.jsxs("div",{className:"flex flex-col items-center px-1",children:[l.jsx("span",{className:"text-white/60 text-[7px] font-bold leading-none",children:"SIZE"}),l.jsx("span",{className:"text-white text-xs font-bold leading-none",children:o})]}),l.jsx("button",{onClick:()=>{const _=Math.min(28,o+2);c(_),localStorage.setItem("bible_fontSize",_)},className:"w-7 h-7 rounded-full bg-white/30 hover:bg-white/50 flex items-center justify-center text-white font-bold",children:"+"})]})]}),t.text&&t.text.length>20&&!t.loading&&l.jsx("div",{className:"mt-3 bg-white/10 backdrop-blur-md p-3 rounded-2xl border border-white/20",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-base",children:u?"":""}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[10px] font-bold text-white/70 leading-tight",children:" "}),l.jsx("span",{className:"text-[9px] text-white/50 leading-tight",children:u?d?" ":" ...":" "})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center bg-black/20 rounded-lg px-1 py-0.5",children:[l.jsx("button",{onClick:()=>p(-.1),disabled:h<=.6,className:"w-5 h-5 flex items-center justify-center text-white/80 hover:text-white disabled:opacity-30",children:"-"}),l.jsxs("span",{className:"text-[10px] font-bold text-white min-w-[24px] text-center",children:[h.toFixed(1),"x"]}),l.jsx("button",{onClick:()=>p(.1),disabled:h>=2,className:"w-5 h-5 flex items-center justify-center text-white/80 hover:text-white disabled:opacity-30",children:"+"})]}),l.jsx("button",{onClick:()=>u?y():f(t.text),className:`px-4 py-1.5 rounded-xl text-xs font-bold transition-all shadow-sm ${u?"bg-red-500 text-white hover:bg-red-600 ring-2 ring-red-400/50":"bg-white text-indigo-600 hover:bg-indigo-50"}`,children:u?" ":" "})]})]}),v.length>0&&l.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-white/10",children:[l.jsx("span",{className:"text-[9px] text-white/50 shrink-0",children:":"}),l.jsx("select",{value:x,onChange:_=>{const T=_.target.value;if(m(T),localStorage.setItem("bible_selectedVoiceURI",T),u){const C=g;y(),setTimeout(()=>{f(t.text,C)},100)}},className:"flex-1 bg-black/30 text-white text-[9px] py-1 px-2 rounded border border-white/10 focus:outline-none focus:ring-1 focus:ring-white/30 truncate",children:v.map(_=>l.jsx("option",{value:_.voiceURI,children:_.name},_.voiceURI))})]})]})})]}),l.jsxs("div",{className:"p-6 bg-white",children:[l.jsx("div",{className:"prose prose-slate max-w-none mb-10 min-h-[300px]",children:t.loading?l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 space-y-4",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-blue-100 border-t-blue-500 rounded-full animate-spin"}),l.jsx("p",{className:"text-slate-400 font-bold animate-pulse",children:"  ..."})]}):l.jsx(LE,{content:t.text,fontSize:o,activeChunkIndex:g,onSegmentClick:w})}),!t.loading&&l.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100",children:[l.jsxs("button",{onClick:S,className:`w-full py-5 rounded-3xl font-bold text-xl transition-all shadow-xl hover:shadow-2xl active:scale-95 flex items-center justify-center gap-3
                                ${b&&e===r.currentDay?"bg-slate-800 text-white":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700"}`,children:[l.jsx("span",{className:"text-2xl",children:""}),"    ( )"]}),l.jsx("p",{className:"text-center text-xs text-slate-400 mt-4 font-medium",children:b&&e===r.currentDay?"!       ":"    !"})]})]})]}),O$=({currentMemo:t,setCurrentMemo:e,setShowMemoList:n,saveMemo:r,viewingDay:i,currentDay:s,memos:a})=>l.jsxs("div",{className:"mt-4 bg-[#fdf4ff] p-5 rounded-3xl border border-purple-100 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h3",{className:"font-bold text-purple-700 flex items-center gap-2",children:"  "}),l.jsx("button",{onClick:o=>{o.preventDefault(),o.stopPropagation(),n(!0)},className:"text-xs text-purple-500 underline hover:text-purple-700",children:"  "})]}),l.jsx("textarea",{value:t,onChange:o=>e(o.target.value),placeholder:`    ...

   
   
  `,className:"w-full p-4 text-sm border border-purple-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-400 resize-none bg-white shadow-inner",rows:8}),l.jsx("button",{onClick:()=>r(i?i-1:s-1,t,()=>e("")),disabled:!t.trim(),className:"w-full mt-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold py-3 rounded-2xl text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:from-purple-600 hover:to-indigo-600 transition-all shadow-md active:scale-[0.98]",children:"  "}),a[i?i-1:s-1]&&l.jsxs("div",{className:"mt-4 p-4 bg-white rounded-2xl border border-purple-100 max-h-40 overflow-y-auto shadow-sm",children:[l.jsx("p",{className:"text-[10px] text-purple-500 mb-2 font-bold flex items-center gap-1",children:"   :"}),(()=>{const o=a[i?i-1:s-1],c=o.texts||[o.text];return c.map((u,d)=>l.jsxs("div",{className:`text-sm text-slate-600 whitespace-pre-wrap leading-relaxed ${d>0?"mt-3 pt-3 border-t border-purple-50":""}`,children:[c.length>1&&l.jsxs("span",{className:"text-[10px] text-purple-400 font-bold",children:["#",d+1," "]}),u]},d))})()]})]}),L$=({communityName:t,getSubgroupRanking:e,subgroupId:n,communityId:r})=>{const i=e();return l.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 shadow-xl scroll-mt-20",children:[l.jsx("div",{className:"flex justify-between items-center mb-5",children:l.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(ve,{name:"users",size:20,className:"text-indigo-500"})," "]})}),l.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:!i||i.length===0?l.jsx("div",{className:"text-center text-slate-400 py-8 text-sm",children:"  ..."}):i.map((s,a)=>{const o=s.communityId===r&&s.name===n,c=s.communityId==="senior"?s.name:`${s.communityName} ${s.name}`;return l.jsxs("div",{className:`relative transition-all ${o?"bg-blue-50/50 p-3 rounded-2xl ring-1 ring-blue-100":""}`,children:[l.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[l.jsxs("span",{className:`font-bold flex items-center gap-1.5 ${o?"text-blue-600":"text-slate-600"}`,children:[l.jsx("span",{className:`w-5 h-5 flex items-center justify-center rounded-full text-[10px] ${a===0?"bg-yellow-100 text-yellow-700":a===1?"bg-slate-100 text-slate-600":a===2?"bg-orange-50 text-orange-700":"bg-slate-100 text-slate-400"}`,children:a+1}),c," ",o&&l.jsx("span",{className:"text-[10px] opacity-70",children:"()"})]}),l.jsxs("span",{className:`font-bold ${o?"text-blue-600":"text-slate-400"}`,children:[" ",s.progressRate,"%"]})]}),l.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${o?"bg-blue-500":"bg-slate-300"}`,style:{width:`${s.progressRate}%`}})})]},a)})})]})},$$=({getWeeklyMVP:t})=>{if(typeof t!="function")return null;const e=t();if(!e)return null;const{streakMVP:n,progressMVP:r,weeklyTop10:i=[],totalTop10:s=[]}=e;if(!n&&!r)return null;const a=new Date,o=new Date(a);return o.setDate(a.getDate()-a.getDay()),o.setHours(0,0,0,0),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-blue-200 p-5 shadow-sm",children:[l.jsx("div",{className:"flex justify-between items-center mb-4",children:l.jsx("h3",{className:"font-bold text-blue-700 flex items-center gap-2",children:" "})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100 text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("p",{className:"text-[10px] text-slate-500 mb-1",children:" "}),l.jsx("p",{className:"font-bold text-slate-800",children:n?n.name:"-"}),l.jsx("p",{className:"text-xs text-orange-500 mb-2 font-bold",children:(()=>n?`  ${(n.readHistory||[]).reduce((u,d)=>{const h=typeof d=="string"?d:d.date,p=typeof d=="string"?1:d.daysRead||1;return new Date(h)>=o?u+p:u},0)}`:"-")()}),l.jsx("p",{className:"text-[9px] text-slate-400 mt-2 pt-2 border-t border-slate-100",children:"     "})]}),l.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100 text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("p",{className:"text-[10px] text-slate-500 mb-1",children:" "}),l.jsx("p",{className:"font-bold text-slate-800",children:r?r.name:"-"}),l.jsx("p",{className:"text-xs text-blue-500 mb-2 font-bold",children:(()=>{if(!r)return"-";const c=r.readCount||1,u=r.currentDay||0,d=(c-1)*365+u;return c>1?` ${d} (${c} ${u})`:` ${d}`})()}),l.jsx("p",{className:"text-[9px] text-slate-400 mt-2 pt-2 border-t border-slate-100",children:"   1"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100",children:[l.jsx("p",{className:"text-[10px] text-slate-500 font-bold mb-2 text-center",children:" 2-10"}),l.jsx("div",{className:"space-y-1",children:i.length>1?i.slice(1,10).map((c,u)=>{const d=(c.readHistory||[]).reduce((h,p)=>{const f=typeof p=="string"?p:p.date,y=typeof p=="string"?1:p.daysRead||1;return new Date(f)>=o?h+y:h},0);return l.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[l.jsxs("span",{className:"text-slate-600 truncate mr-1",children:[u+2,". ",c.name]}),l.jsxs("span",{className:"text-orange-500 font-bold shrink-0",children:[d,""]})]},c.uid)}):l.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:"-"})})]}),l.jsxs("div",{className:"bg-white p-3 rounded-xl border border-blue-100",children:[l.jsx("p",{className:"text-[10px] text-slate-500 font-bold mb-2 text-center",children:" 2-10"}),l.jsx("div",{className:"space-y-1",children:s.length>1?s.slice(1,10).map((c,u)=>{const d=((c.readCount||1)-1)*365+(c.currentDay||0);return l.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[l.jsxs("span",{className:"text-slate-600 truncate mr-1",children:[u+2,". ",c.name]}),l.jsxs("span",{className:"text-blue-600 font-bold shrink-0",children:[d,""]})]},c.uid)}):l.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:"-"})})]})]})]})},M$=({currentUser:t,communityMembers:e,allMembersForRace:n,memos:r,currentMemo:i,setCurrentMemo:s,readHistory:a,announcement:o,verseData:c,hasReadToday:u,viewingDay:d,setViewingDay:h,fontSize:p,setFontSize:f,isSpeaking:y,isPaused:v,handleTogglePause:x,ttsSpeed:m,handleSpeedChange:g,handleStop:w,handleSpeak:b,availableVoices:S,selectedVoiceURI:_,setSelectedVoiceURI:T,activeChunkIndex:C,jumpToChunk:$,handleRead:D,saveMemo:W,handleLogout:U,handleChangeVersionStart:Z,handleRestart:Q,changeSubgroup:ue,changeStartDate:re,dateToOffset:se,showConfetti:F,levelUpToast:N,bonusToast:k,newAchievement:P,showScoreInfo:Y,setShowScoreInfo:V,showReadingGuide:te,setShowReadingGuide:de,showMemoList:ie,setShowMemoList:ae,showAchievements:it,setShowAchievements:zr,showCalendar:yo,setShowCalendar:fr,showFullRanking:_1,setShowFullRanking:Uc,showDateSettings:pp,setShowDateSettings:Bc,showSubgroupChange:fp,setShowSubgroupChange:gp,showRestartConfirm:S1,setShowRestartConfirm:I1,showMonthlyContestInfo:k1,setShowMonthlyContestInfo:mp,calendarDate:yp,setCalendarDate:wp,dateSettingsDate:vp,setDateSettingsDate:xp,rankingCommunityFilter:bp,setRankingCommunityFilter:_p,selectedSubgroupDetail:Sp,setSelectedSubgroupDetail:Ip,getSubgroupRanking:kp,getProgressRanking:Ep,getSubgroupDisplay:Np,generateMemosHTML:Tp,getWeeklyMVP:Cp,setView:jp})=>{if(!t)return null;const{currentDay:Tn,score:Xs,subgroupId:wo,communityName:zc,planId:Dp,streak:Yr}=t,[vo,Ap]=(Dp||"1year_revised").split("_"),Yc=nh.find(le=>le.id===vo),Rp=Yc?Yc.title:" ",Xc=gi[vo]?gi[vo].find(le=>le.id===Ap):null,Pp=Xc?Xc.name:"",xo=ZL(Xs||0),qc=()=>{const le=e.filter(wn=>wn.uid!==t.uid&&Math.abs(wn.currentDay-Tn)<=1).length,Ze=e.filter(wn=>wn.uid!==t.uid&&wn.currentDay>Tn).length,wt=e.length>0?e.reduce((wn,Ft)=>wn+Ft.currentDay,0)/e.length:Tn,Cn=Tn<wt-3,mr=new Date().getDay()===0;if(Cn&&mr&&Ze>0)return`  ${Ze}   !   !`;if(Yr>=7)return` ${Yr}   ! !`;if(Yr>=3)return` ${Yr} !    !`;if(le>0)return` ${le}   !`;const yr=["   !","   , !","    !","    !"];return yr[Tn%yr.length]},Op=Math.max(0,OE-Tn),Bi=n.map(le=>{const wt=((le.readCount||1)-1)*365+(le.currentDay||1);return{...le,day:wt,isMe:le.uid===t.uid}}).sort((le,Ze)=>Ze.day-le.day),bo=Bi.slice(0,20),Wc={},qs=[];["senior","youth","middlehigh","elementary","kinder"].forEach(le=>{const Ze=Lr.find(mr=>mr.id===le),wt=Ze?Ze.name:null,Cn=Bi.find(mr=>mr.communityId===le||wt&&mr.communityName===wt);Cn&&(Wc[Cn.uid]=wt||(le==="senior"?"":le),qs.push(Cn))});const Un=Bi.find(le=>le.isMe);let Hc=[];if(Un){const le=Un.communityId,Ze=Un.communityName;Hc=Bi.filter(wt=>{const Cn=le&&wt.communityId===le||Ze&&wt.communityName===Ze;return(!le&&!Ze?!0:Cn)&&!wt.isMe&&!bo.find(yr=>yr.uid===wt.uid)&&!qs.find(yr=>yr.uid===wt.uid)}).sort((wt,Cn)=>Math.abs(wt.day-Un.day)-Math.abs(Cn.day-Un.day)).slice(0,10)}const gr=[...bo];qs.forEach(le=>{gr.find(Ze=>Ze.uid===le.uid)||gr.push(le)}),Un&&!gr.find(le=>le.uid===Un.uid)&&gr.push(Un),Hc.forEach(le=>{gr.find(Ze=>Ze.uid===le.uid)||gr.push(le)});const Lp=gr.sort((le,Ze)=>le.day-Ze.day),Gc=Ep(),$p=Gc.slice(0,3);return l.jsxs("div",{className:"min-h-screen bg-slate-50 overflow-hidden relative font-sans",children:[F&&l.jsx("div",{className:"fixed inset-0 z-50 flex justify-center pt-40 pointer-events-none",children:l.jsx("div",{className:"text-6xl animate-bounce",children:""})}),P&&l.jsx("div",{className:"fixed top-20 left-4 right-4 z-50 animate-bounce",children:l.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-4 rounded-2xl shadow-2xl flex items-center gap-3",children:[l.jsx("div",{className:"text-4xl",children:P.emoji}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-bold opacity-90",children:"   !"}),l.jsx("p",{className:"font-bold text-lg",children:P.title}),l.jsx("p",{className:"text-xs opacity-80",children:P.desc})]})]})}),N&&l.jsx("div",{className:"fixed top-20 left-4 right-4 z-50 animate-bounce",children:l.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-4 rounded-2xl shadow-2xl flex items-center gap-3",children:[l.jsx("div",{className:"text-4xl",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-bold opacity-90",children:"LEVEL UP!"}),l.jsxs("p",{className:"font-bold text-lg",children:[xo.name,"  !"]})]})]})}),k&&l.jsx("div",{className:"fixed top-32 left-1/2 -translate-x-1/2 z-50 animate-pulse",children:l.jsxs("div",{className:"bg-blue-600 text-white px-6 py-3 rounded-full shadow-2xl font-bold flex items-center gap-2",children:[l.jsx("span",{children:""}),k]})}),l.jsx(b$,{show:Y,onClose:()=>V(!1),myLevel:xo,score:Xs}),l.jsx(_$,{show:te,onClose:()=>de(!1)}),l.jsx(S$,{show:it,onClose:()=>zr(!1)}),l.jsx(I$,{show:yo,onClose:()=>fr(!1),calendarDate:yp,setCalendarDate:wp,readHistory:a}),l.jsx(k$,{show:k1,onClose:()=>mp(!1)}),l.jsx(E$,{show:S1,onClose:()=>I1(!1),onRestart:Q}),l.jsx(N$,{show:pp,onClose:()=>Bc(!1),currentUser:t,currentDay:Tn,dateSettingsDate:vp,setDateSettingsDate:xp,dateToOffset:se,changeStartDate:re}),l.jsx(T$,{show:_1,onClose:()=>Uc(!1),progressRanking:Gc,allMembersForRace:n,subgroupId:wo,currentUser:t,selectedSubgroupDetail:Sp,setSelectedSubgroupDetail:Ip,rankingCommunityFilter:bp,setRankingCommunityFilter:_p}),l.jsx(C$,{show:ie,onClose:()=>ae(!1),memos:r,currentDay:Tn,score:Xs,streak:Yr,currentUser:t,generateMemosHTML:Tp}),l.jsx(j$,{show:fp,onClose:()=>gp(!1),currentUser:t,changeSubgroup:ue}),l.jsx(D$,{handleLogout:U,streak:Yr,score:Xs,myLevel:xo,setShowScoreInfo:V,setShowAchievements:zr,setShowDateSettings:Bc,setShowCalendar:fr,setShowReadingGuide:de,getEncouragementMessage:qc,communityName:zc,setShowFullRanking:Uc,topProgressGroups:$p,subgroupId:wo,planTypeName:Rp,versionName:Pp,handleChangeVersionStart:Z,setView:jp}),l.jsxs("div",{className:"max-w-5xl mx-auto w-full pb-10 mt-8",children:[l.jsx(A$,{racers:Lp,departmentChampions:Wc,getSubgroupDisplay:Np}),l.jsxs("main",{className:"px-4 space-y-6",children:[l.jsx(R$,{announcement:o}),l.jsx(P$,{verseData:c,viewingDay:d,setViewingDay:h,currentUser:t,daysRemaining:Op,handleChangeVersionStart:Z,getEncouragementMessage:qc,fontSize:p,setFontSize:f,isSpeaking:y,isPaused:v,ttsSpeed:m,handleSpeedChange:g,handleSpeak:b,handleStop:w,availableVoices:S,selectedVoiceURI:_,setSelectedVoiceURI:T,activeChunkIndex:C,jumpToChunk:$,hasReadToday:u,handleRead:D}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx(O$,{currentMemo:i,setCurrentMemo:s,setShowMemoList:ae,saveMemo:W,viewingDay:d,currentDay:Tn,memos:r}),l.jsx(L$,{communityName:zc,getSubgroupRanking:kp,subgroupId:wo,communityId:t?t.communityId:null})]}),l.jsx($$,{getWeeklyMVP:Cp})]})]}),y&&l.jsx("div",{className:"fixed bottom-10 left-6 z-[100] flex items-center gap-2",children:l.jsxs("button",{onClick:x,className:`flex items-center justify-center gap-2 px-5 py-3 rounded-full shadow-2xl transition-all active:scale-95 ${v?"bg-indigo-600 shadow-indigo-200":"bg-orange-500 shadow-orange-200"} text-white`,children:[l.jsx("span",{className:"text-sm font-bold",children:v?" ":" "}),l.jsx("span",{className:"text-xl",children:v?"":""})]})})]})},F$=[{id:"wall_pastel_pink",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#FFD6E8",tags:["","",""]},{id:"wall_pastel_mint",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#D1F2EB",tags:["","",""]},{id:"wall_pastel_lavender",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#E8DAEF",tags:["","",""]},{id:"wall_pastel_peach",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#FFDAB3",tags:["","",""]},{id:"wall_pastel_sky",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#B3E0FF",tags:["","",""]},{id:"wall_pastel_lemon",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:40,rarity:"common",color:"#FFF0B3",tags:["","",""]},{id:"wall_pastel_cream",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:35,rarity:"common",color:"#FFF8F0",tags:["","",""]},{id:"wall_pastel_coral",category:"wallpaper",subcategory:"pastel",name:" ",description:"   ",price:45,rarity:"common",color:"#FFB3B3",tags:["","",""]},{id:"wall_gradient_sunset",category:"wallpaper",subcategory:"pastel",name:" ",description:"   ",price:80,rarity:"rare",gradient:"linear-gradient(180deg, #FFE8D6 0%, #FFD6E8 50%, #E8D6FF 100%)",tags:["","",""]},{id:"wall_gradient_ocean",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:80,rarity:"rare",gradient:"linear-gradient(180deg, #E0F2FE 0%, #BAE6FD 50%, #7DD3FC 100%)",tags:["","",""]},{id:"wall_gradient_candy",category:"wallpaper",subcategory:"pastel",name:" ",description:"   ",price:100,rarity:"rare",gradient:"linear-gradient(135deg, #FCE7F3 0%, #DDD6FE 50%, #CFFAFE 100%)",tags:["","",""]},{id:"wall_gradient_aurora",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:150,rarity:"epic",gradient:"linear-gradient(135deg, #A7F3D0 0%, #C4B5FD 50%, #FBCFE8 100%)",tags:["","",""]},{id:"wall_gradient_rainbow",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:200,rarity:"epic",gradient:"linear-gradient(135deg, #FFB3B3 0%, #FFE0B3 20%, #FFFFB3 40%, #B3FFB3 60%, #B3E0FF 80%, #E0B3FF 100%)",tags:["","",""]},{id:"wall_gradient_dawn",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:90,rarity:"rare",gradient:"linear-gradient(180deg, #1E3A5F 0%, #7B68EE 30%, #FFB6C1 70%, #FFF0F5 100%)",tags:["","",""]},{id:"wall_pattern_dots_pink",category:"wallpaper",subcategory:"pastel",name:" ",description:"   ",price:60,rarity:"common",pattern:"polka_dots",baseColor:"#FFD6E8",patternColor:"#FF80BF",tags:["","",""]},{id:"wall_pattern_hearts",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:70,rarity:"rare",pattern:"hearts",baseColor:"#FFF0F5",patternColor:"#FFB3D9",tags:["","",""]},{id:"wall_pattern_stars",category:"wallpaper",subcategory:"pastel",name:" ",description:"   ",price:70,rarity:"rare",pattern:"stars",baseColor:"#E8DAEF",patternColor:"#FFE066",tags:["","",""]},{id:"wall_pattern_stripes_mint",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:55,rarity:"common",pattern:"stripes",baseColor:"#FFFFFF",patternColor:"#A3E4D7",tags:["","",""]},{id:"wall_pattern_checkered",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:60,rarity:"common",pattern:"checkered",baseColor:"#FFF8F0",patternColor:"#FFDAB3",tags:["","",""]},{id:"wall_pattern_clouds",category:"wallpaper",subcategory:"pastel",name:" ",description:"  ",price:80,rarity:"rare",pattern:"clouds",baseColor:"#B3E0FF",patternColor:"#FFFFFF",tags:["","",""]}],V$=[{id:"wall_sky_blue",category:"wallpaper",subcategory:"nature",name:"  ",description:"     ",price:50,rarity:"common",spriteSheet:"wallpapers_nature",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_sky_sunset",category:"wallpaper",subcategory:"nature",name:"  ",description:"   ",price:80,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_sky_night",category:"wallpaper",subcategory:"nature",name:"  ",description:"   ",price:100,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_sky_rainbow",category:"wallpaper",subcategory:"nature",name:" ",description:"    ",price:120,rarity:"epic",spriteSheet:"wallpapers_nature",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_forest_spring",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:70,rarity:"common",spriteSheet:"wallpapers_nature",spriteX:0,spriteY:1,width:64,height:64,season:"spring",tags:["","",""]},{id:"wall_forest_summer",category:"wallpaper",subcategory:"nature",name:"  ",description:"   ",price:70,rarity:"common",spriteSheet:"wallpapers_nature",spriteX:1,spriteY:1,width:64,height:64,season:"summer",tags:["","",""]},{id:"wall_forest_autumn",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:80,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:2,spriteY:1,width:64,height:64,season:"autumn",tags:["","",""]},{id:"wall_forest_winter",category:"wallpaper",subcategory:"nature",name:"  ",description:"    ",price:80,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:3,spriteY:1,width:64,height:64,season:"winter",tags:["","",""]},{id:"wall_ocean_calm",category:"wallpaper",subcategory:"nature",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"wallpapers_nature",spriteX:0,spriteY:2,width:64,height:64,tags:["","",""]},{id:"wall_ocean_beach",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:90,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:1,spriteY:2,width:64,height:64,tags:["","",""]},{id:"wall_ocean_deep",category:"wallpaper",subcategory:"nature",name:" ",description:"  ",price:120,rarity:"epic",spriteSheet:"wallpapers_nature",spriteX:2,spriteY:2,width:64,height:64,tags:["","",""]},{id:"wall_ocean_coral",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:100,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:3,spriteY:2,width:64,height:64,tags:["","",""]},{id:"wall_garden_rose",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:90,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:0,spriteY:3,width:64,height:64,tags:["","",""]},{id:"wall_garden_cherry",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:100,rarity:"rare",spriteSheet:"wallpapers_nature",spriteX:1,spriteY:3,width:64,height:64,season:"spring",tags:["","",""]},{id:"wall_garden_sunflower",category:"wallpaper",subcategory:"nature",name:" ",description:"   ",price:80,rarity:"common",spriteSheet:"wallpapers_nature",spriteX:2,spriteY:3,width:64,height:64,season:"summer",tags:["","",""]}],U$=[{id:"wall_modern_white",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:30,rarity:"common",color:"#FFFFFF",isDefault:!0,tags:["","",""]},{id:"wall_modern_gray_light",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:40,rarity:"common",color:"#F1F5F9",tags:["","",""]},{id:"wall_modern_gray_mid",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:45,rarity:"common",color:"#CBD5E1",tags:["","",""]},{id:"wall_modern_black",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:60,rarity:"rare",color:"#1E293B",tags:["","",""]},{id:"wall_modern_concrete",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"wallpapers_modern",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_modern_marble",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:150,rarity:"epic",spriteSheet:"wallpapers_modern",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_modern_plaster",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"wallpapers_modern",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_modern_geometric",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:80,rarity:"rare",spriteSheet:"wallpapers_modern",spriteX:0,spriteY:1,width:64,height:64,tags:["","",""]},{id:"wall_modern_hexagon",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:90,rarity:"rare",spriteSheet:"wallpapers_modern",spriteX:1,spriteY:1,width:64,height:64,tags:["","",""]},{id:"wall_modern_lines",category:"wallpaper",subcategory:"modern",name:" ",description:"  ",price:55,rarity:"common",spriteSheet:"wallpapers_modern",spriteX:2,spriteY:1,width:64,height:64,tags:["","",""]}],B$=[{id:"wall_vintage_brick_red",category:"wallpaper",subcategory:"vintage",name:" ",description:"   ",price:70,rarity:"common",spriteSheet:"wallpapers_vintage",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_vintage_brick_white",category:"wallpaper",subcategory:"vintage",name:" ",description:"  ",price:65,rarity:"common",spriteSheet:"wallpapers_vintage",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_vintage_wood_dark",category:"wallpaper",subcategory:"vintage",name:"  ",description:"   ",price:80,rarity:"rare",spriteSheet:"wallpapers_vintage",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"wall_vintage_floral",category:"wallpaper",subcategory:"vintage",name:" ",description:"  ",price:90,rarity:"rare",spriteSheet:"wallpapers_vintage",spriteX:0,spriteY:1,width:64,height:64,tags:["","",""]},{id:"wall_vintage_damask",category:"wallpaper",subcategory:"vintage",name:" ",description:"  ",price:100,rarity:"rare",spriteSheet:"wallpapers_vintage",spriteX:1,spriteY:1,width:64,height:64,tags:["","",""]}],$E=[...F$,...V$,...U$,...B$],z$=[{id:"floor_wood_oak_light",category:"floor",subcategory:"wood",name:" ",description:"   ",price:50,rarity:"common",spriteSheet:"floors_wood",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_wood_maple",category:"floor",subcategory:"wood",name:" ",description:"  ",price:55,rarity:"common",spriteSheet:"floors_wood",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_wood_ash",category:"floor",subcategory:"wood",name:" ",description:" ",price:60,rarity:"common",spriteSheet:"floors_wood",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_wood_birch",category:"floor",subcategory:"wood",name:" ",description:"  ",price:50,rarity:"common",spriteSheet:"floors_wood",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_wood_pine",category:"floor",subcategory:"wood",name:" ",description:"  ",price:45,rarity:"common",spriteSheet:"floors_wood",spriteX:4,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_wood_oak_medium",category:"floor",subcategory:"wood",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"floors_wood",spriteX:0,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_wood_cherry",category:"floor",subcategory:"wood",name:" ",description:"  ",price:70,rarity:"rare",spriteSheet:"floors_wood",spriteX:1,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_wood_teak",category:"floor",subcategory:"wood",name:" ",description:"  ",price:80,rarity:"rare",spriteSheet:"floors_wood",spriteX:2,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_wood_herringbone",category:"floor",subcategory:"wood",name:" ",description:"  ",price:100,rarity:"rare",spriteSheet:"floors_wood",spriteX:3,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_wood_parquet",category:"floor",subcategory:"wood",name:" ",description:"  ",price:90,rarity:"rare",spriteSheet:"floors_wood",spriteX:4,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_wood_walnut",category:"floor",subcategory:"wood",name:" ",description:" ",price:80,rarity:"rare",spriteSheet:"floors_wood",spriteX:0,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_wood_mahogany",category:"floor",subcategory:"wood",name:" ",description:"  ",price:100,rarity:"epic",spriteSheet:"floors_wood",spriteX:1,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_wood_ebony",category:"floor",subcategory:"wood",name:" ",description:"  ",price:120,rarity:"epic",spriteSheet:"floors_wood",spriteX:2,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_wood_weathered",category:"floor",subcategory:"wood",name:" ",description:"   ",price:70,rarity:"common",spriteSheet:"floors_wood",spriteX:3,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_wood_rustic",category:"floor",subcategory:"wood",name:" ",description:"  ",price:75,rarity:"rare",spriteSheet:"floors_wood",spriteX:4,spriteY:2,width:64,height:64,tags:["","",""]}],Y$=[{id:"floor_tile_white",category:"floor",subcategory:"tile",name:"  ",description:"  ",price:50,rarity:"common",color:"#FFFFFF",isDefault:!0,tags:["","",""]},{id:"floor_tile_gray",category:"floor",subcategory:"tile",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"floors_tile",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_tile_black",category:"floor",subcategory:"tile",name:" ",description:"  ",price:70,rarity:"rare",spriteSheet:"floors_tile",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_tile_large_format",category:"floor",subcategory:"tile",name:"  ",description:"  ",price:80,rarity:"rare",spriteSheet:"floors_tile",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_tile_concrete",category:"floor",subcategory:"tile",name:" ",description:"  ",price:65,rarity:"common",spriteSheet:"floors_tile",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_tile_checker_bw",category:"floor",subcategory:"tile",name:" B/W",description:"  ",price:70,rarity:"rare",spriteSheet:"floors_tile",spriteX:0,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_tile_checker_pink",category:"floor",subcategory:"tile",name:" ",description:" &  ",price:75,rarity:"rare",spriteSheet:"floors_tile",spriteX:1,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_tile_hexagon",category:"floor",subcategory:"tile",name:" ",description:"  ",price:90,rarity:"rare",spriteSheet:"floors_tile",spriteX:2,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_tile_moroccan",category:"floor",subcategory:"tile",name:" ",description:"  ",price:100,rarity:"epic",spriteSheet:"floors_tile",spriteX:3,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_tile_subway",category:"floor",subcategory:"tile",name:" ",description:"  ",price:55,rarity:"common",spriteSheet:"floors_tile",spriteX:4,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_tile_marble_white",category:"floor",subcategory:"tile",name:" ",description:"  ",price:150,rarity:"epic",spriteSheet:"floors_tile",spriteX:0,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_tile_marble_gray",category:"floor",subcategory:"tile",name:" ",description:"  ",price:140,rarity:"epic",spriteSheet:"floors_tile",spriteX:1,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_tile_marble_pink",category:"floor",subcategory:"tile",name:" ",description:"  ",price:180,rarity:"legendary",spriteSheet:"floors_tile",spriteX:2,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_tile_marble_black",category:"floor",subcategory:"tile",name:" ",description:"  ",price:160,rarity:"epic",spriteSheet:"floors_tile",spriteX:3,spriteY:2,width:64,height:64,tags:["","",""]},{id:"floor_tile_terrazzo",category:"floor",subcategory:"tile",name:"",description:"  ",price:120,rarity:"rare",spriteSheet:"floors_tile",spriteX:4,spriteY:2,width:64,height:64,tags:["","",""]}],X$=[{id:"floor_carpet_cream",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:80,rarity:"common",color:"#FFF8F0",tags:["","",""]},{id:"floor_carpet_pink",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:90,rarity:"rare",color:"#FFD6E8",tags:["","",""]},{id:"floor_carpet_gray",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:85,rarity:"common",color:"#CBD5E1",tags:["","",""]},{id:"floor_carpet_navy",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:100,rarity:"rare",color:"#1E3A5F",tags:["","",""]},{id:"floor_rug_persian",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:150,rarity:"epic",spriteSheet:"floors_carpet",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_rug_bohemian",category:"floor",subcategory:"carpet",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"floors_carpet",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_rug_nordic",category:"floor",subcategory:"carpet",name:" ",description:"   ",price:100,rarity:"rare",spriteSheet:"floors_carpet",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_rug_kilim",category:"floor",subcategory:"carpet",name:" ",description:"   ",price:130,rarity:"epic",spriteSheet:"floors_carpet",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_rug_fur_white",category:"floor",subcategory:"carpet",name:"  ",description:"  ",price:180,rarity:"legendary",spriteSheet:"floors_carpet",spriteX:0,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_rug_round_shag",category:"floor",subcategory:"carpet",name:"  ",description:"  ",price:110,rarity:"rare",spriteSheet:"floors_carpet",spriteX:1,spriteY:1,width:64,height:64,tags:["","",""]}],q$=[{id:"floor_grass_meadow",category:"floor",subcategory:"special",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"floors_special",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_grass_flower",category:"floor",subcategory:"special",name:"",description:"  ",price:90,rarity:"rare",spriteSheet:"floors_special",spriteX:1,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_sand_beach",category:"floor",subcategory:"special",name:" ",description:"  ",price:80,rarity:"rare",spriteSheet:"floors_special",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_stone_path",category:"floor",subcategory:"special",name:" ",description:"  ",price:75,rarity:"common",spriteSheet:"floors_special",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"floor_water_shallow",category:"floor",subcategory:"special",name:" ",description:"  ",price:100,rarity:"epic",spriteSheet:"floors_special",spriteX:4,spriteY:0,width:64,height:64,animation:"water_ripple",tags:["","",""]},{id:"floor_cloud_fluffy",category:"floor",subcategory:"special",name:" ",description:"  ",price:150,rarity:"legendary",spriteSheet:"floors_special",spriteX:0,spriteY:1,width:64,height:64,animation:"float_slow",tags:["","",""]},{id:"floor_star_galaxy",category:"floor",subcategory:"special",name:" ",description:"  ",price:200,rarity:"legendary",spriteSheet:"floors_special",spriteX:1,spriteY:1,width:64,height:64,animation:"sparkle",tags:["","",""]},{id:"floor_rainbow_path",category:"floor",subcategory:"special",name:" ",description:"  ",price:120,rarity:"epic",spriteSheet:"floors_special",spriteX:2,spriteY:1,width:64,height:64,tags:["","",""]},{id:"floor_snow_fresh",category:"floor",subcategory:"special",name:" ",description:"   ",price:80,rarity:"rare",spriteSheet:"floors_special",spriteX:3,spriteY:1,width:64,height:64,season:"winter",tags:["","",""]},{id:"floor_tatami",category:"floor",subcategory:"special",name:"",description:"   ",price:90,rarity:"rare",spriteSheet:"floors_special",spriteX:4,spriteY:1,width:64,height:64,tags:["","",""]}],ME=[...z$,...Y$,...X$,...q$],W$=[{id:"bed_single_white",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:100,rarity:"common",spriteSheet:"furniture_beds",spriteX:0,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_wood",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:120,rarity:"common",spriteSheet:"furniture_beds",spriteX:1,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_pink",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_beds",spriteX:2,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_blue",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:130,rarity:"common",spriteSheet:"furniture_beds",spriteX:3,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_modern",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:140,rarity:"common",spriteSheet:"furniture_beds",spriteX:4,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_vintage",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:160,rarity:"rare",spriteSheet:"furniture_beds",spriteX:5,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_kids_car",category:"furniture",subcategory:"beds",name:" ",description:"   ",price:200,rarity:"rare",spriteSheet:"furniture_beds",spriteX:6,spriteY:0,width:80,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_single_kids_castle",category:"furniture",subcategory:"beds",name:"  ",description:"    ",price:250,rarity:"epic",spriteSheet:"furniture_beds",spriteX:7,spriteY:0,width:80,height:96,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_double_white",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:200,rarity:"common",spriteSheet:"furniture_beds",spriteX:0,spriteY:1,width:80,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_double_wood",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:250,rarity:"rare",spriteSheet:"furniture_beds",spriteX:1,spriteY:1,width:80,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_queen_modern",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:350,rarity:"rare",spriteSheet:"furniture_beds",spriteX:2,spriteY:1,width:96,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_queen_leather",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:400,rarity:"epic",spriteSheet:"furniture_beds",spriteX:3,spriteY:1,width:96,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_king_luxury",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:600,rarity:"legendary",spriteSheet:"furniture_beds",spriteX:4,spriteY:1,width:112,height:96,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_platform_low",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:300,rarity:"rare",spriteSheet:"furniture_beds",spriteX:5,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_storage",category:"furniture",subcategory:"beds",name:" ",description:"   ",price:350,rarity:"rare",spriteSheet:"furniture_beds",spriteX:6,spriteY:1,width:80,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_adjustable",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:500,rarity:"epic",spriteSheet:"furniture_beds",spriteX:7,spriteY:1,width:80,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_canopy_white",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:400,rarity:"epic",spriteSheet:"furniture_beds",spriteX:0,spriteY:2,width:80,height:112,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_canopy_pink",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:450,rarity:"epic",spriteSheet:"furniture_beds",spriteX:1,spriteY:2,width:80,height:112,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_canopy_gold",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:700,rarity:"legendary",spriteSheet:"furniture_beds",spriteX:2,spriteY:2,width:80,height:112,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_bunk_wood",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:280,rarity:"rare",spriteSheet:"furniture_beds",spriteX:3,spriteY:2,width:64,height:112,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_loft_study",category:"furniture",subcategory:"beds",name:" +  ",description:" ,   ",price:400,rarity:"epic",spriteSheet:"furniture_beds",spriteX:4,spriteY:2,width:80,height:128,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_japanese_futon",category:"furniture",subcategory:"beds",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_beds",spriteX:5,spriteY:2,width:64,height:32,placeable:!0,layer:"floor",tags:["","",""]},{id:"bed_korean_yo",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:70,rarity:"common",spriteSheet:"furniture_beds",spriteX:6,spriteY:2,width:64,height:32,placeable:!0,layer:"floor",tags:["","",""]},{id:"bed_hammock",category:"furniture",subcategory:"beds",name:"",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_beds",spriteX:7,spriteY:2,width:80,height:48,placeable:!0,layer:"furniture",animation:"swing",tags:["","",""]},{id:"bed_crib_white",category:"furniture",subcategory:"beds",name:"  ",description:"  ",price:180,rarity:"common",spriteSheet:"furniture_beds",spriteX:0,spriteY:3,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_crib_pink",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:200,rarity:"rare",spriteSheet:"furniture_beds",spriteX:1,spriteY:3,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_crib_blue",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:200,rarity:"rare",spriteSheet:"furniture_beds",spriteX:2,spriteY:3,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_crib_canopy",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:280,rarity:"epic",spriteSheet:"furniture_beds",spriteX:3,spriteY:3,width:48,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_toddler_train",category:"furniture",subcategory:"beds",name:"  ",description:"   ",price:220,rarity:"rare",spriteSheet:"furniture_beds",spriteX:4,spriteY:3,width:64,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bed_cradle",category:"furniture",subcategory:"beds",name:" ",description:"  ",price:150,rarity:"common",spriteSheet:"furniture_beds",spriteX:5,spriteY:3,width:48,height:48,placeable:!0,layer:"furniture",animation:"rock",tags:["","",""]}],H$=[{id:"sofa_single_white",category:"furniture",subcategory:"sofas",name:"  1",description:"  1 ",price:100,rarity:"common",spriteSheet:"furniture_sofas",spriteX:0,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","1",""]},{id:"sofa_single_gray",category:"furniture",subcategory:"sofas",name:"  1",description:"  1 ",price:110,rarity:"common",spriteSheet:"furniture_sofas",spriteX:1,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","1",""]},{id:"sofa_single_pink",category:"furniture",subcategory:"sofas",name:"  1",description:"  1 ",price:130,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:2,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","1",""]},{id:"sofa_single_yellow",category:"furniture",subcategory:"sofas",name:"  1",description:"  1 ",price:120,rarity:"common",spriteSheet:"furniture_sofas",spriteX:3,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","1",""]},{id:"sofa_armchair_leather",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:200,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:4,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_egg_chair",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:300,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:5,spriteY:0,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_beanbag_large",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_sofas",spriteX:6,spriteY:0,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_rocking_chair",category:"furniture",subcategory:"sofas",name:"",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:7,spriteY:0,width:48,height:64,placeable:!0,layer:"furniture",animation:"rock",tags:["","",""]},{id:"sofa_2seat_white",category:"furniture",subcategory:"sofas",name:"  2",description:"  2 ",price:180,rarity:"common",spriteSheet:"furniture_sofas",spriteX:0,spriteY:1,width:64,height:48,placeable:!0,layer:"furniture",tags:["","2",""]},{id:"sofa_2seat_fabric",category:"furniture",subcategory:"sofas",name:" 2 ",description:"  ",price:200,rarity:"common",spriteSheet:"furniture_sofas",spriteX:1,spriteY:1,width:64,height:48,placeable:!0,layer:"furniture",tags:["","2",""]},{id:"sofa_3seat_leather_brown",category:"furniture",subcategory:"sofas",name:"  3",description:"   ",price:350,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:2,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","3",""]},{id:"sofa_3seat_leather_black",category:"furniture",subcategory:"sofas",name:"  3",description:"   ",price:380,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:3,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","3",""]},{id:"sofa_3seat_velvet",category:"furniture",subcategory:"sofas",name:" 3 ",description:"  ",price:400,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:4,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","3",""]},{id:"sofa_scandinavian",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:280,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:5,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_chesterfield",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:450,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:6,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_tufted_pink",category:"furniture",subcategory:"sofas",name:"  ",description:"   ",price:380,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:7,spriteY:1,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_corner_gray",category:"furniture",subcategory:"sofas",name:"  ",description:"L  ",price:500,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:0,spriteY:2,width:96,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_corner_beige",category:"furniture",subcategory:"sofas",name:"  ",description:"   ",price:480,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:1,spriteY:2,width:96,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_modular",category:"furniture",subcategory:"sofas",name:" ",description:"   ",price:600,rarity:"legendary",spriteSheet:"furniture_sofas",spriteX:2,spriteY:2,width:96,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_daybed",category:"furniture",subcategory:"sofas",name:"",description:"  ",price:350,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:3,spriteY:2,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_bed_foldable",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:400,rarity:"epic",spriteSheet:"furniture_sofas",spriteX:4,spriteY:2,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_futon",category:"furniture",subcategory:"sofas",name:" ",description:"  ",price:200,rarity:"common",spriteSheet:"furniture_sofas",spriteX:5,spriteY:2,width:64,height:32,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_kids_rainbow",category:"furniture",subcategory:"sofas",name:"  ",description:"   ",price:180,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:6,spriteY:2,width:64,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_outdoor_rattan",category:"furniture",subcategory:"sofas",name:"  ",description:"  ",price:280,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:7,spriteY:2,width:64,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"sofa_loveseat",category:"furniture",subcategory:"sofas",name:"",description:"    ",price:220,rarity:"rare",spriteSheet:"furniture_sofas",spriteX:0,spriteY:3,width:56,height:48,placeable:!0,layer:"furniture",tags:["","",""]}],G$=[{id:"table_dining_wood_4",category:"furniture",subcategory:"tables",name:" 4 ",description:"  4 ",price:200,rarity:"common",spriteSheet:"furniture_tables",spriteX:0,spriteY:0,width:64,height:64,tags:["","",""]},{id:"table_dining_wood_6",category:"furniture",subcategory:"tables",name:" 6 ",description:" 6 ",price:280,rarity:"rare",spriteSheet:"furniture_tables",spriteX:1,spriteY:0,width:80,height:64,tags:["","",""]},{id:"table_dining_glass_round",category:"furniture",subcategory:"tables",name:"  ",description:"   ",price:250,rarity:"rare",spriteSheet:"furniture_tables",spriteX:2,spriteY:0,width:64,height:64,tags:["","",""]},{id:"table_dining_marble",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:400,rarity:"epic",spriteSheet:"furniture_tables",spriteX:3,spriteY:0,width:64,height:64,tags:["","",""]},{id:"table_dining_folding",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:150,rarity:"common",spriteSheet:"furniture_tables",spriteX:4,spriteY:0,width:48,height:48,tags:["","",""]},{id:"table_dining_extendable",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:350,rarity:"epic",spriteSheet:"furniture_tables",spriteX:5,spriteY:0,width:80,height:64,tags:["","",""]},{id:"table_dining_industrial",category:"furniture",subcategory:"tables",name:" ",description:"+ ",price:300,rarity:"rare",spriteSheet:"furniture_tables",spriteX:6,spriteY:0,width:64,height:64,tags:["","",""]},{id:"table_dining_rustic",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:280,rarity:"rare",spriteSheet:"furniture_tables",spriteX:7,spriteY:0,width:80,height:64,tags:["","",""]},{id:"desk_study_simple",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_tables",spriteX:0,spriteY:1,width:64,height:48,tags:["","",""]},{id:"desk_study_drawer",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:150,rarity:"common",spriteSheet:"furniture_tables",spriteX:1,spriteY:1,width:64,height:48,tags:["","",""]},{id:"desk_computer_gaming",category:"furniture",subcategory:"tables",name:" ",description:"RGB  ",price:300,rarity:"epic",spriteSheet:"furniture_tables",spriteX:2,spriteY:1,width:80,height:48,animation:"glow_pulse",tags:["","","RGB"]},{id:"desk_computer_l_shape",category:"furniture",subcategory:"tables",name:"L  ",description:"  ",price:250,rarity:"rare",spriteSheet:"furniture_tables",spriteX:3,spriteY:1,width:80,height:64,tags:["","L",""]},{id:"desk_standing",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:350,rarity:"epic",spriteSheet:"furniture_tables",spriteX:4,spriteY:1,width:64,height:48,tags:["","",""]},{id:"desk_secretary",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:280,rarity:"rare",spriteSheet:"furniture_tables",spriteX:5,spriteY:1,width:48,height:64,tags:["","",""]},{id:"desk_executive",category:"furniture",subcategory:"tables",name:"  ",description:"   ",price:500,rarity:"legendary",spriteSheet:"furniture_tables",spriteX:6,spriteY:1,width:96,height:64,tags:["","",""]},{id:"desk_kids_pink",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:120,rarity:"common",spriteSheet:"furniture_tables",spriteX:7,spriteY:1,width:48,height:48,tags:["","",""]},{id:"desk_kids_blue",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:120,rarity:"common",spriteSheet:"furniture_tables",spriteX:0,spriteY:2,width:48,height:48,tags:["","",""]},{id:"desk_vanity",category:"furniture",subcategory:"tables",name:"",description:"  ",price:200,rarity:"rare",spriteSheet:"furniture_tables",spriteX:1,spriteY:2,width:64,height:64,tags:["","",""]},{id:"table_coffee_wood",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_tables",spriteX:2,spriteY:2,width:48,height:32,tags:["","",""]},{id:"table_coffee_glass",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_tables",spriteX:3,spriteY:2,width:48,height:32,tags:["","",""]},{id:"table_coffee_marble",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:250,rarity:"epic",spriteSheet:"furniture_tables",spriteX:4,spriteY:2,width:48,height:32,tags:["","",""]},{id:"table_side_round",category:"furniture",subcategory:"tables",name:" ",description:"   ",price:60,rarity:"common",spriteSheet:"furniture_tables",spriteX:5,spriteY:2,width:32,height:32,tags:["","",""]},{id:"table_side_drawer",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_tables",spriteX:6,spriteY:2,width:32,height:48,tags:["","",""]},{id:"table_nesting",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:180,rarity:"rare",spriteSheet:"furniture_tables",spriteX:7,spriteY:2,width:48,height:32,tags:["","",""]},{id:"table_console",category:"furniture",subcategory:"tables",name:" ",description:"/ ",price:150,rarity:"common",spriteSheet:"furniture_tables",spriteX:0,spriteY:3,width:64,height:32,tags:["","",""]},{id:"table_end_c_shape",category:"furniture",subcategory:"tables",name:"C ",description:"  C ",price:90,rarity:"common",spriteSheet:"furniture_tables",spriteX:1,spriteY:3,width:32,height:48,tags:["","C",""]},{id:"table_tray",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"furniture_tables",spriteX:2,spriteY:3,width:32,height:48,tags:["","",""]},{id:"table_ottoman",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"furniture_tables",spriteX:3,spriteY:3,width:48,height:32,tags:["","",""]},{id:"table_bar_high",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_tables",spriteX:4,spriteY:3,width:48,height:64,tags:["","",""]},{id:"table_picnic",category:"furniture",subcategory:"tables",name:" ",description:" ",price:120,rarity:"common",spriteSheet:"furniture_tables",spriteX:5,spriteY:3,width:64,height:48,tags:["","",""]},{id:"table_kotatsu",category:"furniture",subcategory:"tables",name:"",description:"  ",price:180,rarity:"rare",spriteSheet:"furniture_tables",spriteX:6,spriteY:3,width:48,height:32,tags:["","",""]},{id:"table_korean_low",category:"furniture",subcategory:"tables",name:"  ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_tables",spriteX:7,spriteY:3,width:48,height:32,tags:["","",""]},{id:"table_pool",category:"furniture",subcategory:"tables",name:"",description:"  ",price:400,rarity:"epic",spriteSheet:"furniture_tables",spriteX:0,spriteY:4,width:80,height:48,tags:["","",""]},{id:"table_foosball",category:"furniture",subcategory:"tables",name:" ",description:"  ",price:250,rarity:"rare",spriteSheet:"furniture_tables",spriteX:1,spriteY:4,width:64,height:48,tags:["","",""]},{id:"table_air_hockey",category:"furniture",subcategory:"tables",name:" ",description:" ",price:300,rarity:"epic",spriteSheet:"furniture_tables",spriteX:2,spriteY:4,width:64,height:48,tags:["","",""]}],K$=[{id:"chair_dining_wood",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:50,rarity:"common",spriteSheet:"furniture_chairs",spriteX:0,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_dining_white",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:55,rarity:"common",spriteSheet:"furniture_chairs",spriteX:1,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_dining_upholstered",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_chairs",spriteX:2,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_dining_eames",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:3,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_dining_wishbone",category:"furniture",subcategory:"chairs",name:" ",description:" ",price:180,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:4,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_dining_thonet",category:"furniture",subcategory:"chairs",name:" ",description:" ",price:120,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:5,spriteY:0,width:32,height:48,tags:["","",""]},{id:"chair_bar_stool",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"furniture_chairs",spriteX:6,spriteY:0,width:32,height:64,tags:["","",""]},{id:"chair_counter_stool",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:65,rarity:"common",spriteSheet:"furniture_chairs",spriteX:7,spriteY:0,width:32,height:56,tags:["","",""]},{id:"chair_office_basic",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_chairs",spriteX:0,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_office_mesh",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:120,rarity:"common",spriteSheet:"furniture_chairs",spriteX:1,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_office_ergonomic",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:300,rarity:"epic",spriteSheet:"furniture_chairs",spriteX:2,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_office_executive",category:"furniture",subcategory:"chairs",name:"  ",description:"   ",price:400,rarity:"epic",spriteSheet:"furniture_chairs",spriteX:3,spriteY:1,width:48,height:64,tags:["","",""]},{id:"chair_gaming",category:"furniture",subcategory:"chairs",name:" ",description:"RGB  ",price:350,rarity:"epic",spriteSheet:"furniture_chairs",spriteX:4,spriteY:1,width:48,height:64,animation:"glow_pulse",tags:["","","RGB"]},{id:"chair_study_kids",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_chairs",spriteX:5,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_kneeling",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:6,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_balance_ball",category:"furniture",subcategory:"chairs",name:"  ",description:" ",price:80,rarity:"common",spriteSheet:"furniture_chairs",spriteX:7,spriteY:1,width:32,height:48,tags:["","",""]},{id:"chair_folding",category:"furniture",subcategory:"chairs",name:" ",description:" ",price:30,rarity:"common",spriteSheet:"furniture_chairs",spriteX:0,spriteY:2,width:32,height:48,tags:["","",""]},{id:"chair_stacking",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:40,rarity:"common",spriteSheet:"furniture_chairs",spriteX:1,spriteY:2,width:32,height:48,tags:["","",""]},{id:"chair_swing_indoor",category:"furniture",subcategory:"chairs",name:"  ",description:"  ",price:250,rarity:"epic",spriteSheet:"furniture_chairs",spriteX:2,spriteY:2,width:48,height:80,animation:"swing",tags:["","",""]},{id:"chair_papasan",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:180,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:3,spriteY:2,width:48,height:48,tags:["","",""]},{id:"chair_butterfly",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_chairs",spriteX:4,spriteY:2,width:48,height:48,tags:["","",""]},{id:"chair_adirondack",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:120,rarity:"common",spriteSheet:"furniture_chairs",spriteX:5,spriteY:2,width:48,height:48,tags:["","",""]},{id:"chair_director",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_chairs",spriteX:6,spriteY:2,width:32,height:48,tags:["","",""]},{id:"chair_throne",category:"furniture",subcategory:"chairs",name:" ",description:"  ",price:500,rarity:"legendary",spriteSheet:"furniture_chairs",spriteX:7,spriteY:2,width:48,height:80,tags:["","",""]},{id:"cushion_floor",category:"furniture",subcategory:"chairs",name:"",description:" ",price:20,rarity:"common",spriteSheet:"furniture_chairs",spriteX:0,spriteY:3,width:32,height:16,tags:["","",""]}],Q$=[{id:"wardrobe_white_2door",category:"furniture",subcategory:"storage",name:" 2 ",description:" 2 ",price:200,rarity:"common",spriteSheet:"furniture_storage",spriteX:0,spriteY:0,width:64,height:96,tags:["","",""]},{id:"wardrobe_wood_3door",category:"furniture",subcategory:"storage",name:" 3 ",description:" 3 ",price:350,rarity:"rare",spriteSheet:"furniture_storage",spriteX:1,spriteY:0,width:80,height:96,tags:["","",""]},{id:"wardrobe_sliding",category:"furniture",subcategory:"storage",name:" ",description:" ",price:400,rarity:"epic",spriteSheet:"furniture_storage",spriteX:2,spriteY:0,width:96,height:96,tags:["","",""]},{id:"wardrobe_open",category:"furniture",subcategory:"storage",name:" ",description:"   ",price:180,rarity:"common",spriteSheet:"furniture_storage",spriteX:3,spriteY:0,width:64,height:96,tags:["","",""]},{id:"dresser_3drawer",category:"furniture",subcategory:"storage",name:"3 ",description:" 3 ",price:120,rarity:"common",spriteSheet:"furniture_storage",spriteX:4,spriteY:0,width:48,height:48,tags:["","","3"]},{id:"dresser_6drawer",category:"furniture",subcategory:"storage",name:"6 ",description:" 6 ",price:200,rarity:"rare",spriteSheet:"furniture_storage",spriteX:5,spriteY:0,width:64,height:64,tags:["","","6"]},{id:"dresser_tall",category:"furniture",subcategory:"storage",name:" ",description:" ",price:250,rarity:"rare",spriteSheet:"furniture_storage",spriteX:6,spriteY:0,width:48,height:80,tags:["","",""]},{id:"dresser_pink_kids",category:"furniture",subcategory:"storage",name:"  ",description:"  ",price:150,rarity:"common",spriteSheet:"furniture_storage",spriteX:7,spriteY:0,width:48,height:48,tags:["","",""]},{id:"armoire_antique",category:"furniture",subcategory:"storage",name:" ",description:" ",price:400,rarity:"epic",spriteSheet:"furniture_storage",spriteX:0,spriteY:1,width:64,height:96,tags:["","",""]},{id:"closet_system",category:"furniture",subcategory:"storage",name:" ",description:" ",price:500,rarity:"legendary",spriteSheet:"furniture_storage",spriteX:1,spriteY:1,width:96,height:96,tags:["","",""]},{id:"bookshelf_small",category:"furniture",subcategory:"storage",name:" ",description:" 3 ",price:80,rarity:"common",spriteSheet:"furniture_storage",spriteX:2,spriteY:1,width:48,height:64,tags:["","",""]},{id:"bookshelf_large",category:"furniture",subcategory:"storage",name:" ",description:" 5 ",price:180,rarity:"common",spriteSheet:"furniture_storage",spriteX:3,spriteY:1,width:64,height:96,tags:["","",""]},{id:"bookshelf_wall",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:350,rarity:"epic",spriteSheet:"furniture_storage",spriteX:4,spriteY:1,width:96,height:96,tags:["","",""]},{id:"bookshelf_ladder",category:"furniture",subcategory:"storage",name:" ",description:" ",price:120,rarity:"rare",spriteSheet:"furniture_storage",spriteX:5,spriteY:1,width:48,height:80,tags:["","",""]},{id:"bookshelf_cube",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_storage",spriteX:6,spriteY:1,width:64,height:64,tags:["","",""]},{id:"shelf_floating",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:40,rarity:"common",spriteSheet:"furniture_storage",spriteX:7,spriteY:1,width:48,height:16,tags:["","",""]},{id:"shelf_corner",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"furniture_storage",spriteX:0,spriteY:2,width:32,height:64,tags:["","",""]},{id:"rack_magazine",category:"furniture",subcategory:"storage",name:" ",description:" ",price:50,rarity:"common",spriteSheet:"furniture_storage",spriteX:1,spriteY:2,width:32,height:48,tags:["","",""]},{id:"bookend_pair",category:"furniture",subcategory:"storage",name:"",description:"  ",price:25,rarity:"common",spriteSheet:"furniture_storage",spriteX:2,spriteY:2,width:24,height:24,tags:["","",""]},{id:"display_cabinet",category:"furniture",subcategory:"storage",name:" ",description:" ",price:280,rarity:"epic",spriteSheet:"furniture_storage",spriteX:3,spriteY:2,width:64,height:80,tags:["","",""]},{id:"basket_woven",category:"furniture",subcategory:"storage",name:" ",description:" ",price:30,rarity:"common",spriteSheet:"furniture_storage",spriteX:4,spriteY:2,width:32,height:32,tags:["","",""]},{id:"box_storage",category:"furniture",subcategory:"storage",name:" ",description:" ",price:20,rarity:"common",spriteSheet:"furniture_storage",spriteX:5,spriteY:2,width:32,height:24,tags:["","",""]},{id:"trunk_vintage",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_storage",spriteX:6,spriteY:2,width:48,height:32,tags:["","",""]},{id:"shoe_rack",category:"furniture",subcategory:"storage",name:"",description:" ",price:80,rarity:"common",spriteSheet:"furniture_storage",spriteX:7,spriteY:2,width:48,height:64,tags:["","",""]},{id:"coat_rack",category:"furniture",subcategory:"storage",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"furniture_storage",spriteX:0,spriteY:3,width:32,height:80,tags:["","",""]}],J$=[{id:"tv_stand",category:"furniture",subcategory:"misc",name:"TV ",description:"TV  ",price:120,rarity:"common",spriteSheet:"furniture_misc",spriteX:0,spriteY:0,width:64,height:32,tags:["","TV",""]},{id:"fireplace_electric",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:300,rarity:"epic",spriteSheet:"furniture_misc",spriteX:1,spriteY:0,width:64,height:64,animation:"flicker",tags:["","",""]},{id:"room_divider",category:"furniture",subcategory:"misc",name:"",description:"  ",price:150,rarity:"rare",spriteSheet:"furniture_misc",spriteX:2,spriteY:0,width:64,height:80,tags:["","",""]},{id:"mirror_full",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:100,rarity:"common",spriteSheet:"furniture_misc",spriteX:3,spriteY:0,width:32,height:80,tags:["","",""]},{id:"mirror_round",category:"furniture",subcategory:"misc",name:"  ",description:"  ",price:80,rarity:"common",spriteSheet:"furniture_misc",spriteX:4,spriteY:0,width:48,height:48,tags:["","",""]},{id:"curtain_white",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"furniture_misc",spriteX:5,spriteY:0,width:48,height:80,tags:["","",""]},{id:"curtain_pink",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"furniture_misc",spriteX:6,spriteY:0,width:48,height:80,tags:["","",""]},{id:"blinds_venetian",category:"furniture",subcategory:"misc",name:" ",description:" ",price:90,rarity:"common",spriteSheet:"furniture_misc",spriteX:7,spriteY:0,width:48,height:64,tags:["","",""]},{id:"clock_wall",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:50,rarity:"common",spriteSheet:"furniture_misc",spriteX:0,spriteY:1,width:32,height:32,tags:["","",""]},{id:"umbrella_stand",category:"furniture",subcategory:"misc",name:" ",description:"  ",price:40,rarity:"common",spriteSheet:"furniture_misc",spriteX:1,spriteY:1,width:24,height:48,tags:["","",""]}],FE=[...W$,...H$,...G$,...K$,...Q$,...J$],VE=[{id:"light_ceiling_simple",category:"lighting",subcategory:"ceiling",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"lighting",spriteX:0,spriteY:0,width:48,height:32,tags:["","",""]},{id:"light_chandelier_crystal",category:"lighting",subcategory:"ceiling",name:" ",description:" ",price:500,rarity:"legendary",spriteSheet:"lighting",spriteX:1,spriteY:0,width:64,height:64,animation:"sparkle",tags:["","",""]},{id:"light_chandelier_modern",category:"lighting",subcategory:"ceiling",name:" ",description:" ",price:300,rarity:"epic",spriteSheet:"lighting",spriteX:2,spriteY:0,width:64,height:48,tags:["","",""]},{id:"light_pendant_single",category:"lighting",subcategory:"ceiling",name:" ",description:"1 ",price:80,rarity:"common",spriteSheet:"lighting",spriteX:3,spriteY:0,width:24,height:48,tags:["","",""]},{id:"light_pendant_cluster",category:"lighting",subcategory:"ceiling",name:" ",description:"  ",price:200,rarity:"rare",spriteSheet:"lighting",spriteX:4,spriteY:0,width:64,height:64,tags:["","",""]},{id:"light_industrial",category:"lighting",subcategory:"ceiling",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"lighting",spriteX:5,spriteY:0,width:48,height:48,tags:["","",""]},{id:"light_lantern",category:"lighting",subcategory:"ceiling",name:" ",description:" ",price:100,rarity:"common",spriteSheet:"lighting",spriteX:6,spriteY:0,width:32,height:48,tags:["","",""]},{id:"light_paper_sphere",category:"lighting",subcategory:"ceiling",name:" ",description:"  ",price:90,rarity:"rare",spriteSheet:"lighting",spriteX:7,spriteY:0,width:48,height:48,tags:["","",""]},{id:"light_track",category:"lighting",subcategory:"ceiling",name:" ",description:" ",price:150,rarity:"rare",spriteSheet:"lighting",spriteX:0,spriteY:1,width:64,height:24,tags:["","",""]},{id:"light_recessed",category:"lighting",subcategory:"ceiling",name:"",description:" ",price:40,rarity:"common",spriteSheet:"lighting",spriteX:1,spriteY:1,width:24,height:16,tags:["","",""]},{id:"lamp_table_simple",category:"lighting",subcategory:"table",name:"  ",description:" ",price:50,rarity:"common",spriteSheet:"lighting",spriteX:2,spriteY:1,width:24,height:48,tags:["","",""]},{id:"lamp_table_tiffany",category:"lighting",subcategory:"table",name:" ",description:"",price:250,rarity:"epic",spriteSheet:"lighting",spriteX:3,spriteY:1,width:32,height:48,tags:["","",""]},{id:"lamp_table_minimalist",category:"lighting",subcategory:"table",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"lighting",spriteX:4,spriteY:1,width:24,height:48,tags:["","",""]},{id:"lamp_table_ceramic",category:"lighting",subcategory:"table",name:" ",description:" ",price:100,rarity:"rare",spriteSheet:"lighting",spriteX:5,spriteY:1,width:32,height:48,tags:["","",""]},{id:"lamp_table_crystal",category:"lighting",subcategory:"table",name:"  ",description:" ",price:180,rarity:"epic",spriteSheet:"lighting",spriteX:6,spriteY:1,width:32,height:48,animation:"sparkle",tags:["","",""]},{id:"lamp_desk_adjustable",category:"lighting",subcategory:"table",name:" ",description:" ",price:70,rarity:"common",spriteSheet:"lighting",spriteX:7,spriteY:1,width:24,height:48,tags:["","",""]},{id:"lamp_desk_led",category:"lighting",subcategory:"table",name:"LED  ",description:" LED",price:100,rarity:"common",spriteSheet:"lighting",spriteX:0,spriteY:2,width:24,height:48,tags:["","LED",""]},{id:"lamp_touch_sphere",category:"lighting",subcategory:"table",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"lighting",spriteX:1,spriteY:2,width:24,height:32,tags:["","",""]},{id:"lamp_lava",category:"lighting",subcategory:"table",name:" ",description:" ",price:80,rarity:"rare",spriteSheet:"lighting",spriteX:2,spriteY:2,width:24,height:48,animation:"lava_flow",tags:["","",""]},{id:"lamp_salt",category:"lighting",subcategory:"table",name:" ",description:" ",price:70,rarity:"common",spriteSheet:"lighting",spriteX:3,spriteY:2,width:24,height:32,tags:["","",""]},{id:"lamp_floor_arc",category:"lighting",subcategory:"floor",name:"  ",description:" ",price:200,rarity:"rare",spriteSheet:"lighting",spriteX:4,spriteY:2,width:64,height:96,tags:["","",""]},{id:"lamp_floor_tripod",category:"lighting",subcategory:"floor",name:" ",description:"3 ",price:150,rarity:"rare",spriteSheet:"lighting",spriteX:5,spriteY:2,width:48,height:96,tags:["","",""]},{id:"lamp_floor_torchiere",category:"lighting",subcategory:"floor",name:"  ",description:"  ",price:120,rarity:"common",spriteSheet:"lighting",spriteX:6,spriteY:2,width:32,height:96,tags:["","",""]},{id:"lamp_floor_reading",category:"lighting",subcategory:"floor",name:" ",description:" ",price:100,rarity:"common",spriteSheet:"lighting",spriteX:7,spriteY:2,width:32,height:96,tags:["","",""]},{id:"lamp_floor_tree",category:"lighting",subcategory:"floor",name:"  ",description:"  ",price:180,rarity:"rare",spriteSheet:"lighting",spriteX:0,spriteY:3,width:48,height:96,tags:["","",""]},{id:"lamp_floor_paper",category:"lighting",subcategory:"floor",name:"  ",description:" ",price:80,rarity:"common",spriteSheet:"lighting",spriteX:1,spriteY:3,width:32,height:96,tags:["","",""]},{id:"lamp_floor_rattan",category:"lighting",subcategory:"floor",name:"  ",description:" ",price:130,rarity:"rare",spriteSheet:"lighting",spriteX:2,spriteY:3,width:48,height:80,tags:["","",""]},{id:"lamp_floor_corner",category:"lighting",subcategory:"floor",name:" ",description:" ",price:90,rarity:"common",spriteSheet:"lighting",spriteX:3,spriteY:3,width:24,height:96,tags:["","",""]},{id:"lamp_floor_kids_star",category:"lighting",subcategory:"floor",name:" ",description:" ",price:70,rarity:"common",spriteSheet:"lighting",spriteX:4,spriteY:3,width:32,height:64,tags:["","",""]},{id:"lamp_floor_kids_moon",category:"lighting",subcategory:"floor",name:" ",description:"  ",price:80,rarity:"rare",spriteSheet:"lighting",spriteX:5,spriteY:3,width:32,height:64,tags:["","",""]},{id:"light_strip_rgb",category:"lighting",subcategory:"special",name:"RGB LED ",description:" ",price:60,rarity:"common",spriteSheet:"lighting",spriteX:6,spriteY:3,width:64,height:8,animation:"rgb_cycle",tags:["","LED","RGB"]},{id:"light_neon_love",category:"lighting",subcategory:"special",name:" LOVE",description:"LOVE ",price:150,rarity:"rare",spriteSheet:"lighting",spriteX:7,spriteY:3,width:48,height:32,animation:"glow_pulse",tags:["","",""]},{id:"light_neon_heart",category:"lighting",subcategory:"special",name:" ",description:" ",price:100,rarity:"rare",spriteSheet:"lighting",spriteX:0,spriteY:4,width:32,height:32,animation:"glow_pulse",tags:["","",""]},{id:"light_neon_star",category:"lighting",subcategory:"special",name:" ",description:" ",price:100,rarity:"rare",spriteSheet:"lighting",spriteX:1,spriteY:4,width:32,height:32,animation:"glow_pulse",tags:["","",""]},{id:"light_fairy_string",category:"lighting",subcategory:"special",name:" ",description:" ",price:50,rarity:"common",spriteSheet:"lighting",spriteX:2,spriteY:4,width:64,height:32,animation:"twinkle",tags:["","",""]},{id:"light_globe_string",category:"lighting",subcategory:"special",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"lighting",spriteX:3,spriteY:4,width:64,height:32,tags:["","",""]},{id:"light_projector_star",category:"lighting",subcategory:"special",name:" ",description:" ",price:100,rarity:"rare",spriteSheet:"lighting",spriteX:4,spriteY:4,width:24,height:32,tags:["","",""]},{id:"light_projector_galaxy",category:"lighting",subcategory:"special",name:" ",description:" ",price:150,rarity:"epic",spriteSheet:"lighting",spriteX:5,spriteY:4,width:24,height:32,tags:["","",""]},{id:"candle_electric",category:"lighting",subcategory:"special",name:" ",description:"  ",price:30,rarity:"common",spriteSheet:"lighting",spriteX:6,spriteY:4,width:16,height:24,animation:"flicker",tags:["","",""]},{id:"candle_set",category:"lighting",subcategory:"special",name:" ",description:"3  ",price:50,rarity:"common",spriteSheet:"lighting",spriteX:7,spriteY:4,width:48,height:32,animation:"flicker",tags:["","",""]},{id:"light_wall_sconce",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"lighting",spriteX:0,spriteY:5,width:24,height:32,tags:["","",""]},{id:"light_wall_modern",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:90,rarity:"common",spriteSheet:"lighting",spriteX:1,spriteY:5,width:24,height:24,tags:["","",""]},{id:"light_wall_industrial",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:100,rarity:"rare",spriteSheet:"lighting",spriteX:2,spriteY:5,width:32,height:32,tags:["","",""]},{id:"light_wall_swing_arm",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"lighting",spriteX:3,spriteY:5,width:48,height:32,tags:["","",""]},{id:"light_wall_picture",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"lighting",spriteX:4,spriteY:5,width:48,height:16,tags:["","",""]},{id:"light_wall_vintage",category:"lighting",subcategory:"wall",name:" ",description:"  ",price:130,rarity:"rare",spriteSheet:"lighting",spriteX:5,spriteY:5,width:32,height:40,tags:["","",""]},{id:"light_wall_lantern",category:"lighting",subcategory:"wall",name:" ",description:" ",price:110,rarity:"rare",spriteSheet:"lighting",spriteX:6,spriteY:5,width:24,height:48,tags:["","",""]},{id:"light_wall_crystal",category:"lighting",subcategory:"wall",name:" ",description:" ",price:200,rarity:"epic",spriteSheet:"lighting",spriteX:7,spriteY:5,width:32,height:48,animation:"sparkle",tags:["","",""]},{id:"light_mirror",category:"lighting",subcategory:"wall",name:" ",description:" ",price:100,rarity:"common",spriteSheet:"lighting",spriteX:0,spriteY:6,width:48,height:48,tags:["","",""]},{id:"light_vanity",category:"lighting",subcategory:"wall",name:" ",description:" ",price:150,rarity:"rare",spriteSheet:"lighting",spriteX:1,spriteY:6,width:64,height:16,tags:["","",""]}],UE=[{id:"plant_succulent_small",category:"living",subcategory:"plants",name:" ",description:"  ",price:30,rarity:"common",spriteSheet:"plants",spriteX:0,spriteY:0,width:24,height:32,tags:["","",""]},{id:"plant_cactus_small",category:"living",subcategory:"plants",name:" ",description:" ",price:25,rarity:"common",spriteSheet:"plants",spriteX:1,spriteY:0,width:24,height:32,tags:["","",""]},{id:"plant_pothos_small",category:"living",subcategory:"plants",name:" ",description:"  ",price:35,rarity:"common",spriteSheet:"plants",spriteX:2,spriteY:0,width:32,height:32,tags:["","",""]},{id:"plant_flower_pot_pink",category:"living",subcategory:"plants",name:" ",description:"   ",price:40,rarity:"common",spriteSheet:"plants",spriteX:3,spriteY:0,width:24,height:32,tags:["","",""]},{id:"plant_flower_pot_yellow",category:"living",subcategory:"plants",name:" ",description:"   ",price:40,rarity:"common",spriteSheet:"plants",spriteX:4,spriteY:0,width:24,height:32,tags:["","",""]},{id:"plant_aloe",category:"living",subcategory:"plants",name:"",description:"  ",price:35,rarity:"common",spriteSheet:"plants",spriteX:5,spriteY:0,width:32,height:32,tags:["","",""]},{id:"plant_airplant",category:"living",subcategory:"plants",name:"",description:"   ",price:50,rarity:"rare",spriteSheet:"plants",spriteX:6,spriteY:0,width:24,height:24,tags:["","",""]},{id:"plant_bamboo_lucky",category:"living",subcategory:"plants",name:"",description:"  ",price:45,rarity:"common",spriteSheet:"plants",spriteX:7,spriteY:0,width:24,height:48,tags:["","",""]},{id:"plant_herbs_mint",category:"living",subcategory:"plants",name:" ",description:" ",price:30,rarity:"common",spriteSheet:"plants",spriteX:0,spriteY:1,width:24,height:32,tags:["","",""]},{id:"plant_violet",category:"living",subcategory:"plants",name:" ",description:"  ",price:55,rarity:"rare",spriteSheet:"plants",spriteX:1,spriteY:1,width:32,height:32,tags:["","",""]},{id:"plant_monstera",category:"living",subcategory:"plants",name:"",description:"  ",price:100,rarity:"rare",spriteSheet:"plants",spriteX:2,spriteY:1,width:48,height:64,tags:["","",""]},{id:"plant_fiddle_leaf",category:"living",subcategory:"plants",name:"",description:"  ",price:120,rarity:"rare",spriteSheet:"plants",spriteX:3,spriteY:1,width:48,height:64,tags:["","",""]},{id:"plant_snake",category:"living",subcategory:"plants",name:" ",description:" ",price:80,rarity:"common",spriteSheet:"plants",spriteX:4,spriteY:1,width:32,height:64,tags:["","",""]},{id:"plant_peace_lily",category:"living",subcategory:"plants",name:"",description:"   ",price:90,rarity:"rare",spriteSheet:"plants",spriteX:5,spriteY:1,width:48,height:64,tags:["","",""]},{id:"plant_rubber",category:"living",subcategory:"plants",name:"",description:" ",price:85,rarity:"common",spriteSheet:"plants",spriteX:6,spriteY:1,width:48,height:64,tags:["","",""]},{id:"plant_philodendron",category:"living",subcategory:"plants",name:"",description:"  ",price:95,rarity:"rare",spriteSheet:"plants",spriteX:7,spriteY:1,width:48,height:64,tags:["","",""]},{id:"plant_pothos_hanging",category:"living",subcategory:"plants",name:" ",description:"  ",price:75,rarity:"common",spriteSheet:"plants",spriteX:0,spriteY:2,width:48,height:64,tags:["","",""]},{id:"plant_bonsai",category:"living",subcategory:"plants",name:"",description:" ",price:200,rarity:"epic",spriteSheet:"plants",spriteX:1,spriteY:2,width:48,height:48,tags:["","",""]},{id:"plant_orchid_purple",category:"living",subcategory:"plants",name:" ",description:" ",price:150,rarity:"epic",spriteSheet:"plants",spriteX:2,spriteY:2,width:32,height:64,tags:["","",""]},{id:"plant_orchid_white",category:"living",subcategory:"plants",name:" ",description:"  ",price:150,rarity:"epic",spriteSheet:"plants",spriteX:3,spriteY:2,width:32,height:64,tags:["","",""]},{id:"plant_palm_areca",category:"living",subcategory:"plants",name:" ",description:" ",price:180,rarity:"rare",spriteSheet:"plants",spriteX:4,spriteY:2,width:64,height:96,tags:["","",""]},{id:"plant_palm_kentia",category:"living",subcategory:"plants",name:" ",description:" ",price:200,rarity:"epic",spriteSheet:"plants",spriteX:5,spriteY:2,width:64,height:96,tags:["","",""]},{id:"plant_bird_of_paradise",category:"living",subcategory:"plants",name:"",description:" ",price:220,rarity:"epic",spriteSheet:"plants",spriteX:6,spriteY:2,width:64,height:96,tags:["","",""]},{id:"plant_tree_indoor",category:"living",subcategory:"plants",name:" ",description:"  ",price:250,rarity:"epic",spriteSheet:"plants",spriteX:7,spriteY:2,width:64,height:112,tags:["","",""]},{id:"plant_bamboo_tall",category:"living",subcategory:"plants",name:" ",description:" ",price:180,rarity:"rare",spriteSheet:"plants",spriteX:0,spriteY:3,width:48,height:112,tags:["","",""]},{id:"plant_money_tree",category:"living",subcategory:"plants",name:"",description:" ",price:150,rarity:"rare",spriteSheet:"plants",spriteX:1,spriteY:3,width:48,height:80,tags:["","",""]},{id:"plant_ficus_lyrata",category:"living",subcategory:"plants",name:"",description:"  ",price:160,rarity:"rare",spriteSheet:"plants",spriteX:2,spriteY:3,width:48,height:96,tags:["","",""]},{id:"plant_olive_tree",category:"living",subcategory:"plants",name:" ",description:" ",price:200,rarity:"epic",spriteSheet:"plants",spriteX:3,spriteY:3,width:48,height:96,tags:["","",""]},{id:"plant_citrus_tree",category:"living",subcategory:"plants",name:" ",description:"  ",price:180,rarity:"epic",spriteSheet:"plants",spriteX:4,spriteY:3,width:48,height:80,tags:["","",""]},{id:"plant_cherry_blossom",category:"living",subcategory:"plants",name:" ",description:" ",price:250,rarity:"legendary",spriteSheet:"plants",spriteX:5,spriteY:3,width:64,height:96,season:"spring",tags:["","",""]},{id:"plant_terrarium",category:"living",subcategory:"plants",name:"",description:"   ",price:120,rarity:"rare",spriteSheet:"plants",spriteX:6,spriteY:3,width:32,height:48,tags:["","",""]},{id:"plant_kokedama",category:"living",subcategory:"plants",name:"",description:"  ",price:80,rarity:"rare",spriteSheet:"plants",spriteX:7,spriteY:3,width:32,height:48,tags:["","",""]},{id:"plant_flower_arrangement",category:"living",subcategory:"plants",name:"",description:" ",price:100,rarity:"rare",spriteSheet:"plants",spriteX:0,spriteY:4,width:48,height:48,tags:["","",""]},{id:"plant_rose_vase",category:"living",subcategory:"plants",name:" ",description:"  ",price:70,rarity:"common",spriteSheet:"plants",spriteX:1,spriteY:4,width:24,height:48,tags:["","",""]},{id:"plant_sunflower_pot",category:"living",subcategory:"plants",name:" ",description:" ",price:80,rarity:"rare",spriteSheet:"plants",spriteX:2,spriteY:4,width:32,height:64,season:"summer",tags:["","",""]},{id:"plant_christmas_tree_small",category:"living",subcategory:"plants",name:"  ",description:"  ",price:100,rarity:"rare",spriteSheet:"plants",spriteX:3,spriteY:4,width:48,height:64,season:"christmas",tags:["","",""]},{id:"plant_poinsettia",category:"living",subcategory:"plants",name:"",description:" ",price:60,rarity:"common",spriteSheet:"plants",spriteX:4,spriteY:4,width:32,height:48,season:"christmas",tags:["","",""]},{id:"plant_tulip_pot",category:"living",subcategory:"plants",name:" ",description:" ",price:60,rarity:"common",spriteSheet:"plants",spriteX:5,spriteY:4,width:32,height:48,season:"spring",tags:["","",""]},{id:"plant_dried_flowers",category:"living",subcategory:"plants",name:"",description:"   ",price:90,rarity:"rare",spriteSheet:"plants",spriteX:6,spriteY:4,width:32,height:48,tags:["","",""]},{id:"plant_fake_plant",category:"living",subcategory:"plants",name:" ",description:"   ",price:40,rarity:"common",spriteSheet:"plants",spriteX:7,spriteY:4,width:32,height:48,tags:["","",""]}],Z$=[{id:"cross_wood_simple",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:50,rarity:"common",spriteSheet:"christian_symbols",spriteX:0,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_wood_rustic",category:"christian",subcategory:"symbols",name:" ",description:"   ",price:70,rarity:"common",spriteSheet:"christian_symbols",spriteX:1,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_gold",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:200,rarity:"epic",spriteSheet:"christian_symbols",spriteX:2,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_silver",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"christian_symbols",spriteX:3,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_neon_blue",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:180,rarity:"epic",spriteSheet:"christian_symbols",spriteX:4,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",animation:"glow_pulse",tags:["","",""]},{id:"cross_stainedglass",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:250,rarity:"legendary",spriteSheet:"christian_symbols",spriteX:5,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_celtic",category:"christian",subcategory:"symbols",name:" ",description:"   ",price:120,rarity:"rare",spriteSheet:"christian_symbols",spriteX:6,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"cross_olive_wood",category:"christian",subcategory:"symbols",name:"  ",description:"    ",price:300,rarity:"legendary",spriteSheet:"christian_symbols",spriteX:7,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"bible_closed",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:40,rarity:"common",spriteSheet:"christian_symbols",spriteX:0,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bible_open",category:"christian",subcategory:"symbols",name:" ",description:"    ",price:50,rarity:"common",spriteSheet:"christian_symbols",spriteX:1,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bible_leather_black",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:100,rarity:"rare",spriteSheet:"christian_symbols",spriteX:2,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bible_leather_brown",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:100,rarity:"rare",spriteSheet:"christian_symbols",spriteX:3,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bible_stand",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"christian_symbols",spriteX:4,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"bible_antique",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:200,rarity:"epic",spriteSheet:"christian_symbols",spriteX:5,spriteY:1,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"dove_flying",category:"christian",subcategory:"symbols",name:" ",description:"   ",price:80,rarity:"rare",spriteSheet:"christian_symbols",spriteX:0,spriteY:2,width:48,height:48,placeable:!0,layer:"foreground",animation:"float",tags:["","",""]},{id:"dove_olive",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:100,rarity:"rare",spriteSheet:"christian_symbols",spriteX:1,spriteY:2,width:48,height:48,placeable:!0,layer:"foreground",tags:["","",""]},{id:"angel_small",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"christian_symbols",spriteX:2,spriteY:2,width:48,height:48,placeable:!0,layer:"foreground",tags:["","",""]},{id:"angel_praying",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:150,rarity:"epic",spriteSheet:"christian_symbols",spriteX:3,spriteY:2,width:48,height:48,placeable:!0,layer:"foreground",tags:["","",""]},{id:"angel_statue",category:"christian",subcategory:"symbols",name:" ",description:"  ",price:200,rarity:"epic",spriteSheet:"christian_symbols",spriteX:4,spriteY:2,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"lamb_of_god",category:"christian",subcategory:"symbols",name:"  ",description:"   ",price:180,rarity:"epic",spriteSheet:"christian_symbols",spriteX:5,spriteY:2,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]}],eM=[{id:"art_good_shepherd",category:"christian",subcategory:"art",name:" ",description:"  ",price:150,rarity:"rare",spriteSheet:"christian_art",spriteX:0,spriteY:0,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_last_supper",category:"christian",subcategory:"art",name:" ",description:"  ",price:400,rarity:"legendary",spriteSheet:"christian_art",spriteX:1,spriteY:0,width:128,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_jesus_knocking",category:"christian",subcategory:"art",name:"  ",description:" ",price:200,rarity:"epic",spriteSheet:"christian_art",spriteX:2,spriteY:0,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_jesus_blessing",category:"christian",subcategory:"art",name:" ",description:"   ",price:180,rarity:"epic",spriteSheet:"christian_art",spriteX:3,spriteY:0,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_jesus_calming_storm",category:"christian",subcategory:"art",name:"   ",description:"   ",price:220,rarity:"epic",spriteSheet:"christian_art",spriteX:0,spriteY:1,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_resurrection",category:"christian",subcategory:"art",name:"",description:"  ",price:300,rarity:"legendary",spriteSheet:"christian_art",spriteX:1,spriteY:1,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_nativity",category:"christian",subcategory:"art",name:" ",description:"  ",price:250,rarity:"epic",spriteSheet:"christian_art",spriteX:2,spriteY:1,width:64,height:64,placeable:!0,layer:"decoration",season:"christmas",tags:["","",""]},{id:"art_ascension",category:"christian",subcategory:"art",name:"",description:"  ",price:280,rarity:"legendary",spriteSheet:"christian_art",spriteX:3,spriteY:1,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_creation",category:"christian",subcategory:"art",name:"",description:" ",price:500,rarity:"legendary",spriteSheet:"christian_art",spriteX:0,spriteY:2,width:128,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_noah_ark",category:"christian",subcategory:"art",name:" ",description:"  ",price:200,rarity:"epic",spriteSheet:"christian_art",spriteX:1,spriteY:2,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_david_goliath",category:"christian",subcategory:"art",name:" ",description:"  ",price:180,rarity:"epic",spriteSheet:"christian_art",spriteX:2,spriteY:2,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_moses_sea",category:"christian",subcategory:"art",name:"  ",description:"    ",price:220,rarity:"epic",spriteSheet:"christian_art",spriteX:3,spriteY:2,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_daniel_lions",category:"christian",subcategory:"art",name:"   ",description:"   ",price:200,rarity:"epic",spriteSheet:"christian_art",spriteX:0,spriteY:3,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_garden_eden",category:"christian",subcategory:"art",name:"",description:"   ",price:180,rarity:"rare",spriteSheet:"christian_art",spriteX:1,spriteY:3,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_john316",category:"christian",subcategory:"art",name:" 3:16",description:"   ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:2,spriteY:3,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_psalm23",category:"christian",subcategory:"art",name:" 23",description:"  ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:3,spriteY:3,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_joshua1_9",category:"christian",subcategory:"art",name:" 1:9",description:" ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:0,spriteY:4,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_jeremiah2911",category:"christian",subcategory:"art",name:" 29:11",description:"    ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:1,spriteY:4,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_phil413",category:"christian",subcategory:"art",name:" 4:13",description:"    ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:2,spriteY:4,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"art_verse_proverbs356",category:"christian",subcategory:"art",name:" 3:5-6",description:"    ...",price:100,rarity:"rare",spriteSheet:"christian_art",spriteX:3,spriteY:4,width:64,height:64,placeable:!0,layer:"decoration",tags:["","",""]}],tM=[{id:"pulpit_wood",category:"christian",subcategory:"worship",name:" ",description:"   ",price:200,rarity:"rare",spriteSheet:"christian_worship",spriteX:0,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"pulpit_modern",category:"christian",subcategory:"worship",name:" ",description:"  ",price:250,rarity:"rare",spriteSheet:"christian_worship",spriteX:1,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"pulpit_acrylic",category:"christian",subcategory:"worship",name:" ",description:"  ",price:300,rarity:"epic",spriteSheet:"christian_worship",spriteX:2,spriteY:0,width:64,height:80,placeable:!0,layer:"furniture",tags:["","",""]},{id:"pulpit_mini",category:"christian",subcategory:"worship",name:" ",description:"  ",price:120,rarity:"common",spriteSheet:"christian_worship",spriteX:3,spriteY:0,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"organ_pipe",category:"christian",subcategory:"worship",name:" ",description:"  ",price:800,rarity:"legendary",spriteSheet:"christian_worship",spriteX:0,spriteY:1,width:128,height:96,placeable:!0,layer:"furniture",tags:["","",""]},{id:"organ_electric",category:"christian",subcategory:"worship",name:" ",description:"  ",price:300,rarity:"rare",spriteSheet:"christian_worship",spriteX:1,spriteY:1,width:64,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"piano_grand",category:"christian",subcategory:"worship",name:" ",description:"  ",price:500,rarity:"epic",spriteSheet:"christian_worship",spriteX:2,spriteY:1,width:80,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"piano_upright",category:"christian",subcategory:"worship",name:" ",description:"  ",price:300,rarity:"rare",spriteSheet:"christian_worship",spriteX:3,spriteY:1,width:64,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"guitar_acoustic",category:"christian",subcategory:"worship",name:" ",description:" ",price:150,rarity:"rare",spriteSheet:"christian_worship",spriteX:0,spriteY:2,width:48,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"cajon_drum",category:"christian",subcategory:"worship",name:"",description:"  ",price:100,rarity:"common",spriteSheet:"christian_worship",spriteX:1,spriteY:2,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"candle_altar",category:"christian",subcategory:"worship",name:" ",description:"  ",price:100,rarity:"rare",spriteSheet:"christian_worship",spriteX:2,spriteY:2,width:48,height:64,placeable:!0,layer:"decoration",animation:"flicker",tags:["","",""]},{id:"candle_prayer",category:"christian",subcategory:"worship",name:" ",description:"    ",price:40,rarity:"common",spriteSheet:"christian_worship",spriteX:3,spriteY:2,width:32,height:48,placeable:!0,layer:"decoration",animation:"flicker",tags:["","",""]},{id:"chandelier_church",category:"christian",subcategory:"worship",name:" ",description:"  ",price:400,rarity:"legendary",spriteSheet:"christian_worship",spriteX:0,spriteY:3,width:80,height:80,placeable:!0,layer:"foreground",tags:["","",""]},{id:"banner_worship",category:"christian",subcategory:"worship",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"christian_worship",spriteX:1,spriteY:3,width:32,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"pew_wood",category:"christian",subcategory:"worship",name:" ",description:"  ",price:150,rarity:"common",spriteSheet:"christian_worship",spriteX:2,spriteY:3,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"pew_cushioned",category:"christian",subcategory:"worship",name:" ",description:"   ",price:200,rarity:"rare",spriteSheet:"christian_worship",spriteX:3,spriteY:3,width:80,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"chair_prayer",category:"christian",subcategory:"worship",name:" ",description:"     ",price:120,rarity:"rare",spriteSheet:"christian_worship",spriteX:0,spriteY:4,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]},{id:"baptismal_font",category:"christian",subcategory:"worship",name:"",description:"  ",price:250,rarity:"epic",spriteSheet:"christian_worship",spriteX:1,spriteY:4,width:64,height:64,placeable:!0,layer:"furniture",tags:["","",""]},{id:"communion_set",category:"christian",subcategory:"worship",name:" ",description:"  ",price:180,rarity:"epic",spriteSheet:"christian_worship",spriteX:2,spriteY:4,width:48,height:48,placeable:!0,layer:"decoration",tags:["","",""]},{id:"offering_plate",category:"christian",subcategory:"worship",name:" ",description:"  ",price:100,rarity:"common",spriteSheet:"christian_worship",spriteX:3,spriteY:4,width:48,height:48,placeable:!0,layer:"furniture",tags:["","",""]}],nM=[{id:"christmas_tree",category:"christian",subcategory:"decor",name:" ",description:"  ",price:200,rarity:"rare",spriteSheet:"christian_decor",spriteX:0,spriteY:0,width:64,height:96,placeable:!0,layer:"furniture",season:"christmas",animation:"sparkle",tags:["","",""]},{id:"christmas_tree_small",category:"christian",subcategory:"decor",name:"  ",description:"  ",price:100,rarity:"common",spriteSheet:"christian_decor",spriteX:1,spriteY:0,width:48,height:64,placeable:!0,layer:"furniture",season:"christmas",tags:["","",""]},{id:"nativity_scene",category:"christian",subcategory:"decor",name:" ",description:"   ",price:250,rarity:"epic",spriteSheet:"christian_decor",spriteX:2,spriteY:0,width:80,height:64,placeable:!0,layer:"furniture",season:"christmas",tags:["","",""]},{id:"christmas_wreath",category:"christian",subcategory:"decor",name:" ",description:"    ",price:80,rarity:"common",spriteSheet:"christian_decor",spriteX:3,spriteY:0,width:48,height:48,placeable:!0,layer:"decoration",season:"christmas",tags:["","",""]},{id:"christmas_stocking",category:"christian",subcategory:"decor",name:" ",description:"  ",price:50,rarity:"common",spriteSheet:"christian_decor",spriteX:0,spriteY:1,width:32,height:48,placeable:!0,layer:"decoration",season:"christmas",tags:["","",""]},{id:"christmas_star",category:"christian",subcategory:"decor",name:" ",description:"  ",price:120,rarity:"rare",spriteSheet:"christian_decor",spriteX:1,spriteY:1,width:48,height:48,placeable:!0,layer:"foreground",season:"christmas",animation:"twinkle",tags:["","",""]},{id:"wise_men",category:"christian",subcategory:"decor",name:" ",description:"  ",price:180,rarity:"epic",spriteSheet:"christian_decor",spriteX:2,spriteY:1,width:64,height:64,placeable:!0,layer:"furniture",season:"christmas",tags:["","",""]},{id:"christmas_lights",category:"christian",subcategory:"decor",name:" ",description:"  ",price:60,rarity:"common",spriteSheet:"christian_decor",spriteX:3,spriteY:1,width:64,height:32,placeable:!0,layer:"foreground",season:"christmas",animation:"blink",tags:["","",""]},{id:"easter_eggs",category:"christian",subcategory:"decor",name:"  ",description:"  ",price:80,rarity:"common",spriteSheet:"christian_decor",spriteX:0,spriteY:2,width:48,height:48,placeable:!0,layer:"furniture",season:"easter",tags:["","",""]},{id:"easter_bunny",category:"christian",subcategory:"decor",name:" ",description:"  ",price:100,rarity:"rare",spriteSheet:"christian_decor",spriteX:1,spriteY:2,width:48,height:64,placeable:!0,layer:"furniture",season:"easter",tags:["","",""]},{id:"easter_lily",category:"christian",subcategory:"decor",name:" ",description:" ",price:70,rarity:"common",spriteSheet:"christian_decor",spriteX:2,spriteY:2,width:48,height:64,placeable:!0,layer:"decoration",season:"easter",tags:["","",""]},{id:"empty_tomb",category:"christian",subcategory:"decor",name:" ",description:"   ",price:150,rarity:"epic",spriteSheet:"christian_decor",spriteX:3,spriteY:2,width:64,height:64,placeable:!0,layer:"furniture",season:"easter",tags:["","",""]},{id:"palm_branch",category:"christian",subcategory:"decor",name:" ",description:"  ",price:50,rarity:"common",spriteSheet:"christian_decor",spriteX:0,spriteY:3,width:48,height:64,placeable:!0,layer:"decoration",season:"easter",tags:["","",""]},{id:"resurrection_cross",category:"christian",subcategory:"decor",name:" ",description:"  ",price:180,rarity:"epic",spriteSheet:"christian_decor",spriteX:1,spriteY:3,width:64,height:80,placeable:!0,layer:"decoration",season:"easter",tags:["","",""]},{id:"prayer_rug",category:"christian",subcategory:"decor",name:" ",description:"   ",price:60,rarity:"common",spriteSheet:"christian_decor",spriteX:2,spriteY:3,width:48,height:32,placeable:!0,layer:"floor",tags:["","",""]},{id:"fish_symbol",category:"christian",subcategory:"decor",name:" ",description:"  ",price:40,rarity:"common",spriteSheet:"christian_decor",spriteX:3,spriteY:3,width:48,height:32,placeable:!0,layer:"decoration",tags:["","",""]},{id:"prayer_hand",category:"christian",subcategory:"decor",name:"  ",description:"  ",price:100,rarity:"rare",spriteSheet:"christian_decor",spriteX:0,spriteY:4,width:48,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"stainedglass_window",category:"christian",subcategory:"decor",name:" ",description:" ",price:300,rarity:"legendary",spriteSheet:"christian_decor",spriteX:1,spriteY:4,width:64,height:96,placeable:!0,layer:"decoration",animation:"shimmer",tags:["","",""]},{id:"christian_flag",category:"christian",subcategory:"decor",name:" ",description:"   ",price:70,rarity:"common",spriteSheet:"christian_decor",spriteX:2,spriteY:4,width:32,height:64,placeable:!0,layer:"decoration",tags:["","",""]},{id:"hymn_book_set",category:"christian",subcategory:"decor",name:" ",description:"  ",price:80,rarity:"common",spriteSheet:"christian_decor",spriteX:3,spriteY:4,width:48,height:32,placeable:!0,layer:"furniture",tags:["","",""]}],BE=[...Z$,...eM,...tM,...nM],rM=[{id:"wall_plain_white",category:"wallpaper",name:"  ",price:0,color:"#FFFFFF",isDefault:!0},{id:"floor_plain_white",category:"floor",name:"  ",price:0,color:"#FFFFFF",isDefault:!0},{id:"wall_sky",category:"wallpaper",name:" ",price:50,spriteSheet:"wallpapers_set",spriteX:0,spriteY:0,width:64,height:64},{id:"wall_star",category:"wallpaper",name:" ",price:50,spriteSheet:"wallpapers_set",spriteX:1,spriteY:0,width:64,height:64},{id:"wall_flower",category:"wallpaper",name:" ",price:50,spriteSheet:"wallpapers_set",spriteX:2,spriteY:0,width:64,height:64},{id:"wall_brick",category:"wallpaper",name:" ",price:80,spriteSheet:"wallpapers_set",spriteX:0,spriteY:1,width:64,height:64},{id:"wall_wood",category:"wallpaper",name:" ",price:80,spriteSheet:"wallpapers_set",spriteX:1,spriteY:1,width:64,height:64},{id:"wall_night",category:"wallpaper",name:" ",price:120,spriteSheet:"wallpapers_set",spriteX:2,spriteY:1,width:64,height:64},{id:"wall_pasterl_yellow",category:"wallpaper",name:" ",price:40,icon:""},{id:"wall_mint_stripe",category:"wallpaper",name:" ",price:60,icon:""},{id:"floor_wood",category:"floor",name:" ",price:50,spriteSheet:"floors_set",spriteX:0,spriteY:0,width:64,height:64},{id:"floor_tile_pink",category:"floor",name:"  ",price:60,spriteSheet:"floors_set",spriteX:1,spriteY:0,width:64,height:64},{id:"floor_tile_blue",category:"floor",name:"  ",price:60,spriteSheet:"floors_set",spriteX:2,spriteY:0,width:64,height:64},{id:"floor_grass",category:"floor",name:" ",price:80,spriteSheet:"floors_set",spriteX:0,spriteY:1,width:64,height:64},{id:"floor_marble",category:"floor",name:" ",price:150,spriteSheet:"floors_set",spriteX:1,spriteY:1,width:64,height:64},{id:"floor_carpet_red",category:"floor",name:"  ",price:200,spriteSheet:"floors_set",spriteX:2,spriteY:1,width:64,height:64},{id:"floor_vintage_rug",category:"floor",name:"  ",price:120,icon:""}],zE=[{id:"elec_pc_set",category:"electronic",name:"  PC",price:500,icon:""},{id:"elec_tv_huge",category:"electronic",name:"65  TV",price:450,icon:""},{id:"elec_home_theater",category:"electronic",name:" ",price:600,icon:""},{id:"elec_ac_standing",category:"electronic",name:" ",price:300,icon:""},{id:"elec_laptop",category:"electronic",name:"  ",price:250,icon:""},{id:"elec_fan",category:"electronic",name:" ",price:80,icon:""},{id:"elec_robot_cleaner",category:"electronic",name:"  ",price:220,icon:""},{id:"elec_air_purifier",category:"electronic",name:"",price:180,icon:""},{id:"elec_humidifier",category:"electronic",name:" ",price:60,icon:""},{id:"elec_camera_dslr",category:"electronic",name:" DSLR",price:350,icon:""}],YE=[{id:"elec_refrigerator",category:"electronic",name:"  ",price:400,icon:""},{id:"elec_toaster",category:"electronic",name:"  ",price:40,icon:""},{id:"kitchen_stove",category:"living",name:"3  ",price:150,icon:""},{id:"kitchen_sink",category:"living",name:" ",price:200,icon:""},{id:"kitchen_dining_table",category:"furniture",name:"4  ",price:250,icon:""},{id:"kitchen_microwave",category:"electronic",name:"  ",price:120,icon:""},{id:"kitchen_blender",category:"electronic",name:" ",price:50,icon:""},{id:"kitchen_coffee_machine",category:"electronic",name:" ",price:180,icon:""},{id:"kitchen_cupboard",category:"furniture",name:"  ",price:140,icon:""},{id:"kitchen_rice_cooker",category:"electronic",name:" ",price:110,icon:""}],XE=[{id:"amuse_carousel",category:"hobby",name:" ",price:800,icon:""},{id:"amuse_ferris_wheel",category:"hobby",name:" ",price:950,icon:""},{id:"amuse_popcorn",category:"living",name:"  ",price:120,icon:""},{id:"amuse_balloon_stand",category:"living",name:"  ",price:80,icon:""},{id:"amuse_ticket_booth",category:"furniture",name:" ",price:200,icon:""},{id:"amuse_giant_slide",category:"hobby",name:" ",price:500,icon:""},{id:"amuse_cotton_candy",category:"living",name:"  ",price:110,icon:""},{id:"amuse_clown_doll",category:"hobby",name:" ",price:150,icon:""}],qE=[{id:"hobby_piano_grand",category:"hobby",name:" ",price:800,icon:""},{id:"hobby_guitar_acoustic",category:"hobby",name:" ",price:150,icon:""},{id:"hobby_easel",category:"hobby",name:"  ",price:120,icon:""},{id:"hobby_teddy_bear_xl",category:"hobby",name:"  ",price:200,icon:""},{id:"hobby_globe",category:"hobby",name:" ",price:90,icon:""},{id:"hobby_holy_bible",category:"hobby",name:" ()",price:100,icon:""},{id:"inst_violin",category:"hobby",name:" ",price:300,icon:""},{id:"inst_drums",category:"hobby",name:"  ",price:600,icon:""},{id:"inst_trumpet",category:"hobby",name:" ",price:250,icon:""},{id:"inst_cello",category:"hobby",name:" ",price:400,icon:""},{id:"inst_flute",category:"hobby",name:" ",price:180,icon:""},{id:"hobby_gaming_chair",category:"hobby",name:"  ",price:220,icon:""},{id:"hobby_yoga_mat",category:"hobby",name:"  ",price:30,icon:""}],Jo=[{id:"base_man",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"base_woman",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"base_boy",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"base_girl",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"base_senior_man",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"base_senior_woman",category:"character",name:" ",price:0,icon:"",isDefault:!0},{id:"hair_short_black",category:"hair",name:"  ",price:30,icon:""},{id:"hair_long_brown",category:"hair",name:"  ",price:40,icon:""},{id:"hair_curly_yellow",category:"hair",name:"  ",price:50,icon:""},{id:"hair_cap_red",category:"hair",name:"  ",price:60,icon:""},{id:"hair_beanie_blue",category:"hair",name:"  ",price:45,icon:""},{id:"hair_tiara",category:"hair",name:" ",price:120,icon:""},{id:"acc_glasses_horn",category:"accessory",name:"  ",price:40,icon:""},{id:"acc_sunglasses_dark",category:"accessory",name:" ",price:80,icon:""},{id:"acc_ribbon_pink",category:"accessory",name:"  ",price:35,icon:""},{id:"acc_mask_white",category:"accessory",name:"  ",price:10,icon:""},{id:"outfit_hoodie_gray",category:"outfit",name:" ",price:100,icon:""},{id:"outfit_suit_black",category:"outfit",name:"  ",price:250,icon:""},{id:"outfit_dress_yellow",category:"outfit",name:"  ",price:220,icon:""},{id:"outfit_jersey_blue",category:"outfit",name:" ",price:120,icon:""},{id:"outfit_hanbok",category:"outfit",name:"  ",price:500,icon:""},{id:"outfit_sailor",category:"outfit",name:"  ",price:150,icon:""},{id:"outfit_overalls",category:"outfit",name:"  ",price:180,icon:""}],WE=[{id:"plant_cactus",category:"living",name:" ",price:40,icon:""},{id:"plant_sunflower",category:"living",name:" ",price:60,icon:""},{id:"plant_bonsai",category:"living",name:"  ",price:120,icon:""},{id:"living_fish_tank",category:"living",name:" ",price:180,icon:""},{id:"living_dog_house",category:"living",name:"  & ",price:150,icon:""},{id:"living_cat_tower",category:"living",name:" ",price:200,icon:""},{id:"living_water_purifier",category:"living",name:" ",price:100,icon:""},{id:"misc_clock_wall",category:"living",name:" ",price:50,icon:""},{id:"misc_trash_can",category:"living",name:"  ",price:20,icon:""},{id:"misc_slippers",category:"living",name:" ",price:15,icon:""}],HE=[{id:"wallpaper",name:"",icon:"",count:$E.length},{id:"floor",name:"",icon:"",count:ME.length},{id:"furniture",name:"",icon:"",count:FE.length},{id:"lighting",name:"",icon:"",count:VE.length},{id:"electronic",name:"",icon:"",count:zE.length},{id:"kitchen",name:"",icon:"",count:YE.length},{id:"living",name:"/",icon:"",count:UE.length+WE.length},{id:"hobby",name:"/",icon:"",count:qE.length},{id:"amusement",name:"",icon:"",count:XE.length},{id:"character",name:"",icon:"",count:Jo.filter(t=>t.category==="character").length},{id:"hair",name:"/",icon:"",count:Jo.filter(t=>t.category==="hair").length},{id:"accessory",name:"",icon:"",count:Jo.filter(t=>t.category==="accessory").length},{id:"outfit",name:"",icon:"",count:Jo.filter(t=>t.category==="outfit").length},{id:"christian",name:"",icon:"",count:BE.length}],Ca=[...$E,...ME,...FE,...VE,...UE,...BE,...rM,...zE,...YE,...XE,...qE,...Jo,...WE];typeof window<"u"&&window.console&&(console.log("    "),console.log(`  : ${Ca.length}`),console.log(":"),HE.forEach(t=>{console.log(`  - ${t.name}: ${t.count}`)}));const iM=(t,e)=>{const[n,r]=A.useState({unlockedRooms:1,activeRoomIndex:0,rooms:[{wallpaper:"wall_plain_white",floor:"floor_plain_white",items:[],characterPos:{x:4,y:4}}]}),[i,s]=A.useState({baseId:"base_man",hairId:null,accessoryId:null,outfitId:null}),[a,o]=A.useState(["wall_plain_white","floor_plain_white","base_man"]),[c,u]=A.useState(!0),[d,h]=A.useState(null);A.useEffect(()=>{if(t&&t.miniroom)r(t.miniroom),t.character&&s(t.character),t.inventory&&o(t.inventory),u(!1);else if(t){const S={miniroom:{unlockedRooms:1,activeRoomIndex:0,rooms:[{wallpaper:"wall_plain_white",floor:"floor_plain_white",items:[],characterPos:{x:4,y:4}}]},character:{baseId:"base_man",hairId:null,accessoryId:null,outfitId:null},inventory:["wall_plain_white","floor_plain_white","base_man"]};r(S.miniroom),s(S.character),o(S.inventory),u(!1)}},[t]);const p=async S=>{if(!(!t||!t.uid))try{await we.collection("users").doc(t.uid).set(S,{merge:!0}),e(_=>({..._,...S}))}catch(_){console.error("   :",_)}},f=async S=>{if(!t||(t.score||0)<S.price)return alert(" !"),!1;if(["wallpaper","floor","character","hair","accessory","outfit"].includes(S.category)&&a.includes(S.id))return alert("   ."),!1;const T=(t.score||0)-S.price,C=[...a,S.id],$={score:T,inventory:C,updatedAt:Ee.firestore.FieldValue.serverTimestamp()};try{return await p($),o(C),alert(`${S.name}() !`),!0}catch{return alert(" "),!1}},y=S=>{const _={...n,...S};r(_),p({miniroom:_})};return{roomData:n,character:i,inventory:a,loading:c,previewItem:d,setPreviewItem:h,buyItem:f,updateRoom:y,placeItem:(S,_,T)=>{const C=[...n.rooms],$={...C[n.activeRoomIndex]},D={id:`${S}_${Date.now()}`,itemId:S,x:_,y:T};$.items=[...$.items||[],D],C[n.activeRoomIndex]=$,y({rooms:C})},movePlacedItem:(S,_,T)=>{const C=[...n.rooms],$={...C[n.activeRoomIndex]};$.items=$.items.map(D=>D.id===S?{...D,x:_,y:T}:D),C[n.activeRoomIndex]=$,y({rooms:C})},removePlacedItem:S=>{const _=[...n.rooms],T={..._[n.activeRoomIndex]};T.items=T.items.filter(C=>C.id!==S),_[n.activeRoomIndex]=T,y({rooms:_})},updateCharacter:S=>{const _={...i,...S};s(_),p({character:_})},moveCharacter:(S,_)=>{const T=[...n.rooms],C={...T[n.activeRoomIndex]};C.characterPos={x:S,y:_},T[n.activeRoomIndex]=C,y({rooms:T})},unlockRoom:async()=>{if(n.unlockedRooms>=5)return;const S=800+(n.unlockedRooms-1)*400;if((t.score||0)<S){alert(` ! (: ${S})`);return}if(confirm(` ? (${S}  )`)){const _=(t.score||0)-S,T={...n,unlockedRooms:n.unlockedRooms+1,rooms:[...n.rooms,{wallpaper:"wall_plain_white",floor:"floor_plain_white",items:[],characterPos:{x:4,y:4}}]};await p({score:_,miniroom:T,updatedAt:Ee.firestore.FieldValue.serverTimestamp()}),r(T)}},activeRoom:n.rooms[n.activeRoomIndex]}},sM=""+new URL("wallpapers_set-733edfb8.png",import.meta.url).href,aM=""+new URL("floors_set-bcbed0dd.png",import.meta.url).href,oM=""+new URL("furniture_beds-9df7b575.png",import.meta.url).href,lM=""+new URL("furniture_desks-c959b1ed.png",import.meta.url).href,cM=""+new URL("furniture_chairs-92512a61.png",import.meta.url).href,Dm={wallpapers_set:sM,floors_set:aM,furniture_beds:oM,furniture_desks:lM,furniture_chairs:cM},rh=({item:t,size:e=64,className:n="",style:r={},scale:i=1})=>{if(!t||!t.spriteSheet)return null;const s=Dm[t.spriteSheet]||"",a=t.width||64,o=t.height||64,c=-(t.spriteX*a),u=-(t.spriteY*o);let d=8;t.spriteSheet.includes("set")?d=t.spriteSheet.includes("wallpaper")||t.spriteSheet.includes("floor")?3:2:t.spriteSheet.includes("furniture")&&(d=4);const h=d*a,p={width:`${a*i}px`,height:`${o*i}px`,backgroundImage:`url(${s})`,backgroundPosition:`${c*i}px ${u*i}px`,backgroundSize:`${h*i}px auto`,backgroundRepeat:"no-repeat",backgroundColor:"transparent",imageRendering:"pixelated",...r};return l.jsx("div",{className:`sprite-item ${n}`,style:p,title:t.name})},uM=({gender:t="man",hairId:e=null,outfitId:n=null,accId:r=null,isMe:i=!1,className:s=""})=>{const a="#FFE4C4",o="#3C2F2F",c="#2D1B1B",u="#FF8080",d="#FFD1D1",h="#FF3333",f=(y=>y!=null&&y.includes("brown")?"#8B4513":y!=null&&y.includes("yellow")?"#F0E68C":y!=null&&y.includes("red")?"#A52A2A":"#2F2F2F")(e);return l.jsxs("svg",{viewBox:"0 0 32 44",className:`w-full h-full drop-shadow-sm ${s}`,shapeRendering:"crispEdges",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("g",{className:"animate-bounce",style:{animationDuration:"2.5s"},children:l.jsx("path",{d:"M16 2 L17 1 L18 2 L17 3 L16 4 L15 3 L14 2 L15 1 Z",fill:h})}),l.jsxs("g",{children:[l.jsx("rect",{x:"11",y:"24",width:"10",height:"12",fill:a,stroke:o,strokeWidth:"0.5",rx:"1"}),n==="outfit_sailor"&&l.jsxs("g",{children:[l.jsx("rect",{x:"11",y:"24",width:"10",height:"8",fill:"#FFFFFF"}),l.jsx("rect",{x:"11",y:"24",width:"10",height:"2",fill:"#3B82F6"}),l.jsx("rect",{x:"14",y:"26",width:"4",height:"4",fill:"#3B82F6",rx:"1"}),l.jsx("rect",{x:"11",y:"32",width:"10",height:"4",fill:"#3B82F6"})]}),n==="outfit_overalls"&&l.jsxs("g",{children:[l.jsx("rect",{x:"11",y:"24",width:"10",height:"12",fill:"white"}),l.jsx("rect",{x:"11",y:"28",width:"10",height:"8",fill:"#4B79A1"}),l.jsx("rect",{x:"12",y:"24",width:"1.5",height:"4",fill:"#4B79A1"}),l.jsx("rect",{x:"18.5",y:"24",width:"1.5",height:"4",fill:"#4B79A1"})]}),n&&!["outfit_sailor","outfit_overalls"].includes(n)&&l.jsx("rect",{x:"11",y:"24",width:"10",height:"12",fill:"#E2E8F0",opacity:"0.9"}),l.jsx("rect",{x:"8",y:"25",width:"3",height:"7",fill:a,stroke:o,strokeWidth:"0.5"}),l.jsx("rect",{x:"21",y:"25",width:"3",height:"7",fill:a,stroke:o,strokeWidth:"0.5"}),l.jsx("rect",{x:"12",y:"36",width:"3",height:"6",fill:a,stroke:o,strokeWidth:"0.5"}),l.jsx("rect",{x:"17",y:"36",width:"3",height:"6",fill:a,stroke:o,strokeWidth:"0.5"})]}),l.jsx("rect",{x:"8.5",y:"10",width:"15",height:"14",fill:a,stroke:o,strokeWidth:"0.5",rx:"6"}),l.jsx("rect",{x:"12",y:"18.5",width:"1.2",height:"1.2",fill:c,rx:"0.3"}),l.jsx("rect",{x:"18.8",y:"18.5",width:"1.2",height:"1.2",fill:c,rx:"0.3"}),l.jsx("rect",{x:"15",y:"21.5",width:"2",height:"0.5",fill:u}),l.jsx("rect",{x:"10.5",y:"19.5",width:"2.5",height:"1.2",fill:d,rx:"0.5"}),l.jsx("rect",{x:"19",y:"19.5",width:"2.5",height:"1.2",fill:d,rx:"0.5"}),l.jsxs("g",{fill:f,children:[l.jsx("path",{d:"M8.5 15 Q8.5 10 16 10 Q23.5 10 23.5 15 L23.5 13 L8.5 13 Z"}),l.jsx("rect",{x:"8.5",y:"10",width:"15",height:"3",rx:"1.5"}),l.jsx("rect",{x:"8.5",y:"13",width:"2",height:"7",rx:"1"}),l.jsx("rect",{x:"21.5",y:"13",width:"2",height:"7",rx:"1"}),l.jsx("rect",{x:"11",y:"11.5",width:"2",height:"1",fill:"white",opacity:"0.4"}),l.jsx("rect",{x:"11.5",y:"11",width:"1",height:"2",fill:"white",opacity:"0.4"}),t==="woman"&&l.jsxs("g",{children:[l.jsx("path",{d:"M7 14 Q6 14 6 24 L8.5 24 L8.5 14 Z"}),l.jsx("path",{d:"M25 14 Q26 14 26 24 L23.5 24 L23.5 14 Z"})]})]}),(r==null?void 0:r.includes("glasses"))&&l.jsxs("g",{fill:"none",stroke:o,strokeWidth:"0.4",children:[l.jsx("rect",{x:"11",y:"16.5",width:"3.5",height:"2.5"}),l.jsx("rect",{x:"17.5",y:"16.5",width:"3.5",height:"2.5"}),l.jsx("line",{x1:"14.5",y1:"18",x2:"17.5",y2:"18"})]})]})},GE=({character:t,size:e="w-16 h-20",className:n=""})=>{var r,i;return t?l.jsx("div",{className:`relative flex items-center justify-center ${e} ${n}`,children:l.jsx(uM,{gender:(r=t.baseId)!=null&&r.includes("woman")||(i=t.baseId)!=null&&i.includes("girl")?"woman":"man",hairId:t.hairId,outfitId:t.outfitId,accId:t.accessoryId})}):null},dM=({activeRoom:t,character:e,previewItem:n,isPlacementMode:r=!1,selectedPlacementId:i,onGridClick:s,onItemClick:a,onCharacterClick:o,onPreviewClick:c,previewPos:u={x:4,y:4}})=>{var W;const f=n&&!["wallpaper","floor","character","hair","accessory","outfit"].includes(n.category),y=(n==null?void 0:n.category)==="wallpaper"?n.id:t.wallpaper||"wall_plain_white",v=(n==null?void 0:n.category)==="floor"?n.id:t.floor||"floor_plain_white",x=Ca.find(U=>U.id===y)||n,m=Ca.find(U=>U.id===v)||n,g=x!=null&&x.spriteSheet?Dm[x.spriteSheet]:"",w=x?-(x.spriteX*(x.width||64)):0,b=x?-(x.spriteY*(x.height||64)):0,S=m!=null&&m.spriteSheet?Dm[m.spriteSheet]:"",_=m?-(m.spriteX*(m.width||64)):0,T=m?-(m.spriteY*(m.height||64)):0,C=(U,Z)=>{const Q=(U-Z)*32,ue=(U+Z)*(32/2);return{x:Q,y:ue}},$={position:"relative",width:"640px",height:"520px",margin:"0 auto"},D=t.characterPos||{x:4,y:4};return l.jsxs("div",{className:"room-canvas-container py-10 flex items-center justify-center bg-slate-200 rounded-[2rem] overflow-hidden shadow-inner border-4 border-white/50 relative",children:[l.jsxs("div",{style:$,children:[l.jsxs("div",{className:`absolute inset-0 pointer-events-none z-0 transition-opacity duration-500 ${f?"opacity-40":"opacity-100"}`,children:[l.jsx("div",{className:"absolute",style:{width:"320px",height:"240px",transform:"skewY(-26.5deg)",left:"0",top:"-220px",backgroundColor:(x==null?void 0:x.color)||"#fff",borderRight:"1.5px solid rgba(0,0,0,0.05)",backgroundImage:g?`url(${g})`:"none",backgroundPosition:`${w}px ${b}px`,backgroundSize:"512px auto",imageRendering:"pixelated"},children:l.jsx("div",{className:"absolute bottom-0 w-full h-[6px] bg-white/20 border-t border-black/5"})}),l.jsx("div",{className:"absolute",style:{width:"320px",height:"240px",transform:"skewY(26.5deg)",left:"320px",top:"-220px",backgroundColor:(x==null?void 0:x.color)||"#fff",backgroundImage:g?`url(${g})`:"none",backgroundPosition:`${w}px ${b}px`,backgroundSize:"512px auto",imageRendering:"pixelated",filter:"brightness(0.97)"},children:l.jsx("div",{className:"absolute bottom-0 w-full h-[6px] bg-white/10 border-t border-black/5"})}),l.jsx("div",{className:"absolute left-[319.5px] top-[-100px] w-[1px] h-[300px] bg-black/10 z-10"}),l.jsx("div",{className:"absolute left-[320px] top-[180px] w-[320px] h-[160px] bg-gradient-to-br from-black/5 to-transparent pointer-events-none",style:{transform:"skewY(26.5deg)",transformOrigin:"top left"}}),l.jsx("div",{className:"absolute left-0 top-[180px] w-[320px] h-[160px] bg-gradient-to-bl from-black/5 to-transparent pointer-events-none",style:{transform:"skewY(-26.5deg)",transformOrigin:"top right"}})]}),l.jsxs("div",{className:"absolute top-[180px] left-[320px] -translate-x-1/2",children:[Array.from({length:10}).map((U,Z)=>l.jsx("div",{style:{position:"absolute",zIndex:0},children:Array.from({length:10}).map((Q,ue)=>{const{x:re,y:se}=C(ue,Z);return l.jsx("div",{onClick:()=>s&&s(ue,Z),className:`${r?"hover:bg-blue-500/40 cursor-crosshair":""} transition-all`,style:{position:"absolute",left:re,top:se,width:64,height:32,backgroundColor:(m==null?void 0:m.color)||"transparent",backgroundImage:S?`url(${S})`:"none",backgroundPosition:`${_}px ${T}px`,backgroundSize:"512px auto",zIndex:0,clipPath:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",opacity:f&&!r?.3:1,imageRendering:"pixelated"}},ue)})},Z)),l.jsx("div",{className:`transition-all duration-500 ${f?"opacity-20 saturate-0 scale-95 blur-[1px] pointer-events-none":"opacity-100 scale-100"}`,children:(W=t.items)==null?void 0:W.map(U=>{const{x:Z,y:Q}=C(U.x,U.y),ue=Ca.find(re=>re.id===U.itemId);return ue?l.jsx("div",{onClick:re=>{re.stopPropagation(),a&&a(U)},className:`absolute transition-transform hover:scale-105 cursor-pointer ${i===U.id?"ring-2 ring-blue-500 rounded-full scale-110":""}`,style:{left:Z,top:Q,transform:`translate(${-ue.width/4}px, ${-ue.height/2}px)`,zIndex:10+U.y},children:l.jsx(rh,{item:ue,scale:1})},U.id):null})}),l.jsx("div",{className:`transition-all duration-500 ${f?"opacity-20 blur-[1px] pointer-events-none":"opacity-100"}`,children:(()=>{const{x:U,y:Z}=C(D.x,D.y);let Q={...e};return n&&(n.category==="character"&&(Q.baseId=n.id),n.category==="hair"&&(Q.hairId=n.id),n.category==="accessory"&&(Q.accessoryId=n.id),n.category==="outfit"&&(Q.outfitId=n.id)),l.jsx("div",{onClick:ue=>{ue.stopPropagation(),o&&o()},className:`absolute cursor-move transition-all group ${i==="character"?"scale-110":""}`,style:{left:U,top:Z,zIndex:50+D.y,transform:"translate(-50%, -70%)"},children:l.jsxs("div",{className:"relative",children:[l.jsx(GE,{character:Q}),l.jsx("div",{className:"w-10 h-3 bg-black/10 rounded-full blur-[2px] mx-auto -mt-2"}),i==="character"&&l.jsx("div",{className:"absolute -inset-4 border-2 border-blue-500 rounded-xl animate-pulse"})]})})})()}),n&&(n.category==="wallpaper"||n.category==="floor")&&l.jsx("div",{className:"absolute -top-[200px] left-1/2 -translate-x-1/2 z-[100]",children:l.jsxs("p",{className:"bg-indigo-600 text-white px-4 py-2 rounded-full font-black text-sm shadow-xl animate-bounce border-2 border-white/50",children:["  : ",n.name]})}),f&&(()=>{const{x:U,y:Z}=C(u.x,u.y);return l.jsx("div",{onClick:Q=>{Q.stopPropagation(),c&&c()},className:`absolute cursor-move transition-all ${i==="preview"?"scale-110":"hover:scale-105"}`,style:{left:U,top:Z,transform:`translate(${-(n.width||32)/4}px, ${-(n.height||32)/2}px)`,zIndex:100},children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 bg-blue-400/20 blur-xl rounded-full scale-150 animate-pulse"}),l.jsx(rh,{item:n,scale:1.2,className:i==="preview"?"brightness-125":""}),l.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-indigo-600 text-white text-[10px] px-3 py-1.5 rounded-full whitespace-nowrap shadow-lg font-bold border-2 border-white/30 flex items-center gap-1 z-20",children:[l.jsx("span",{className:"animate-pulse",children:""})," ",n.name]}),i==="preview"?l.jsx("div",{className:"absolute inset-x-[-10px] inset-y-[-10px] border-4 border-dashed border-indigo-500 rounded-2xl animate-pulse"}):l.jsx("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 bg-black/60 text-white text-[8px] px-2 py-0.5 rounded shadow whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity",children:" "}),!i&&l.jsx("div",{className:"absolute inset-0 rounded-lg ring-4 ring-indigo-500/50 animate-ping pointer-events-none"})]})})})()]})]}),(r||f)&&l.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 z-[200]",children:l.jsx("div",{className:`${r?"bg-blue-600":"bg-indigo-600"} text-white px-8 py-2.5 rounded-full font-black shadow-2xl border-2 border-white/20 animate-in slide-in-from-top-4`,children:i?l.jsxs("span",{className:"flex items-center gap-2",children:[" ",i==="preview"?" ":"","   !"]}):l.jsx("span",{className:"flex items-center gap-2",children:"   (  )"})})})]})},hM=({shopCategory:t,setShopCategory:e,buyItem:n,inventory:r,onPreview:i,currentTalants:s})=>l.jsxs("div",{className:"bg-white rounded-[2rem] shadow-lg border border-slate-100 p-6 animate-in slide-in-from-bottom-4 duration-300",children:[l.jsx("div",{className:"flex items-center gap-4 mb-6 overflow-x-auto pb-2 scrollbar-hide",children:HE.map(a=>l.jsxs("button",{onClick:()=>e(a.id),className:`px-5 py-2.5 rounded-2xl font-bold whitespace-nowrap transition-all ${t===a.id?"bg-indigo-600 text-white shadow-lg":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[a.icon," ",a.name]},a.id))}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Ca.filter(a=>a.category===t).map(a=>{const o=r.includes(a.id);return l.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-3xl p-4 flex flex-col items-center hover:shadow-md transition-shadow group relative",children:[l.jsx("div",{className:"w-20 h-20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform cursor-help overflow-hidden rounded-xl border border-slate-200 shadow-sm",onClick:()=>i(a),title:" ()",children:a.spriteSheet?l.jsx(rh,{item:a,scale:1.2}):a.color||a.gradient||a.baseColor?l.jsx("div",{className:"w-full h-full",style:{backgroundColor:a.color||a.baseColor,backgroundImage:a.gradient}}):l.jsx("div",{className:"text-4xl",children:a.icon||""})}),l.jsx("p",{className:"text-sm font-bold text-slate-700 text-center truncate w-full",children:a.name}),l.jsxs("p",{className:"text-xs font-black text-orange-500 mt-1",children:[" ",a.price]}),o?l.jsx("div",{className:"mt-3 w-full py-2 bg-slate-200 text-slate-400 rounded-xl text-xs font-black text-center",children:" "}):l.jsx("button",{onClick:()=>n(a),className:`mt-3 w-full py-2 rounded-xl text-xs font-black transition-colors ${s>=a.price?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:""}),l.jsx("button",{onClick:()=>i(a),className:"absolute top-2 right-2 p-1.5 bg-white shadow-sm border border-slate-100 rounded-full opacity-0 group-hover:opacity-100 transition-opacity text-[10px]",title:"",children:""})]},a.id)})})]}),pM=({inventory:t,onUseItem:e})=>l.jsxs("div",{className:"bg-white rounded-[2rem] shadow-lg border border-slate-100 p-6 animate-in slide-in-from-bottom-4 duration-300",children:[l.jsxs("h3",{className:"text-lg font-black text-slate-800 mb-6 flex items-center gap-2",children:["    ",l.jsxs("span",{className:"text-slate-300 text-sm",children:["(",t.length,")"]})]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t.map((n,r)=>{const i=Ca.find(s=>s.id===n);return i?l.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-3xl p-4 flex flex-col items-center group",children:[l.jsx("div",{className:"w-20 h-20 flex items-center justify-center mb-3 overflow-hidden rounded-xl border border-slate-200 shadow-sm",children:i.spriteSheet?l.jsx(rh,{item:i,scale:1.2}):i.color||i.gradient||i.baseColor?l.jsx("div",{className:"w-full h-full",style:{backgroundColor:i.color||i.baseColor,backgroundImage:i.gradient}}):l.jsx("div",{className:"text-4xl",children:i.icon||""})}),l.jsx("p",{className:"text-sm font-bold text-slate-700 text-center truncate w-full",children:i.name}),l.jsx("button",{onClick:()=>e(i),className:"mt-3 w-full py-2 bg-slate-200 text-slate-600 rounded-xl text-xs font-black hover:bg-indigo-100 hover:text-indigo-600 transition-colors",children:["wallpaper","floor","character","hair","accessory","outfit"].includes(i.category)?"/":""})]},`${n}_${r}`):null})})]}),fM=({currentUser:t,setView:e,setCurrentUser:n})=>{const{roomData:r,character:i,inventory:s,activeRoom:a,loading:o,previewItem:c,setPreviewItem:u,buyItem:d,updateRoom:h,placeItem:p,movePlacedItem:f,removePlacedItem:y,updateCharacter:v,moveCharacter:x,unlockRoom:m}=iM(t,n),[g,w]=A.useState("main"),[b,S]=A.useState("room"),[_,T]=A.useState("wallpaper"),[C,$]=A.useState(!1),[D,W]=A.useState(null),[U,Z]=A.useState({x:4,y:4}),Q=re=>{u(re),Z({x:4,y:4}),w("main")};if(o)return l.jsx("div",{className:"p-20 text-center",children:"  ..."});const ue=t.score||0;return l.jsxs("div",{className:"min-h-screen bg-slate-200 flex items-center justify-center p-2 sm:p-4 cy-pixel-font overflow-hidden",children:[l.jsxs("div",{className:"cy-frame-container w-full max-w-5xl flex relative h-[95vh] max-h-[850px]",children:[l.jsxs("div",{className:"cy-inner-frame flex-1 flex flex-col shadow-sm overflow-hidden bg-white",children:[l.jsxs("div",{className:"flex justify-between items-end mb-3 border-b border-slate-100 pb-2 px-4 shrink-0",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsxs("h1",{className:"text-sm sm:text-lg font-bold text-slate-700 tracking-tight truncate max-w-[200px] sm:max-w-none",children:[t.name," ",l.jsx("span",{className:"ml-2 text-[10px] font-normal text-blue-500 underline cursor-pointer",children:""})]})}),l.jsxs("div",{className:"flex gap-2 sm:gap-4 text-[10px] text-slate-500 font-bold",children:[l.jsxs("span",{className:"flex items-center gap-1",children:["TODAY ",l.jsx("span",{className:"text-red-500",children:"24"})]}),l.jsx("span",{className:"w-px h-2 bg-slate-200 mt-1 hidden sm:block"}),l.jsxs("span",{className:"flex items-center gap-1",children:["TOTAL ",l.jsx("span",{className:"text-slate-800",children:"1,245"})]})]})]}),l.jsxs("div",{className:"flex flex-1 gap-2 sm:gap-4 overflow-hidden px-4 pb-4 flex-col md:flex-row min-h-0",children:[l.jsxs("div",{className:"w-full md:w-48 flex md:flex-col gap-2 shrink-0 md:min-h-0",children:[l.jsx("div",{className:"w-20 md:w-full aspect-square bg-slate-50 border border-slate-200 rounded p-1 flex items-center justify-center overflow-hidden shrink-0",children:l.jsx(GE,{character:i,size:"w-full h-full"})}),l.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[l.jsxs("div",{className:"border-t-2 border-dashed border-slate-200 pt-2 text-[10px] text-slate-600 leading-tight hidden md:block",children:[l.jsxs("p",{className:"font-bold text-blue-600 mb-1 truncate",children:["TODAY IS... ",c?"":""]}),l.jsx("p",{className:"line-clamp-2",children:"        !"})]}),l.jsxs("div",{className:"mt-2 md:mt-auto",children:[l.jsxs("div",{className:"p-1 px-2 bg-orange-50 rounded border border-orange-100 flex md:flex-col items-center justify-between md:justify-center",children:[l.jsx("span",{className:"text-[9px] font-bold text-orange-400",children:" "}),l.jsxs("span",{className:"text-xs sm:text-sm font-black text-orange-600",children:[" ",ue.toLocaleString()]})]}),l.jsx("select",{className:"w-full mt-1 text-[9px] border border-slate-200 rounded p-1 hidden md:block",children:l.jsx("option",{children:" "})})]})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[l.jsxs("div",{className:"flex gap-1 shrink-0",children:[l.jsx("button",{onClick:()=>{w("main"),u(null)},className:`px-3 sm:px-4 py-1.5 text-[10px] sm:text-xs font-bold rounded-t-lg border-x border-t transition-all ${g==="main"?"bg-white border-slate-200 text-slate-800 -mb-px z-10":"bg-slate-50 border-transparent text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>{w("shop"),u(null)},className:`px-3 sm:px-4 py-1.5 text-[10px] sm:text-xs font-bold rounded-t-lg border-x border-t transition-all ${g==="shop"?"bg-white border-slate-200 text-slate-800 -mb-px z-10":"bg-slate-50 border-transparent text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>{w("inventory"),u(null)},className:`px-3 sm:px-4 py-1.5 text-[10px] sm:text-xs font-bold rounded-t-lg border-x border-t transition-all ${g==="inventory"?"bg-white border-slate-200 text-slate-800 -mb-px z-10":"bg-slate-50 border-transparent text-slate-400"}`,children:""})]}),l.jsxs("div",{className:"flex-1 bg-white border border-slate-200 rounded-b-lg p-2 sm:p-4 overflow-hidden relative flex flex-col min-h-0",children:[g==="main"&&l.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 shrink-0",children:[l.jsxs("span",{className:"text-[10px] font-bold text-slate-400",children:["Miniroom Stage #0",r.activeRoomIndex+1]}),l.jsxs("div",{className:"flex gap-1",children:[r.rooms.map((re,se)=>l.jsx("button",{onClick:()=>h({activeRoomIndex:se}),className:`w-4 h-4 sm:w-5 sm:h-5 text-[9px] sm:text-[10px] font-bold rounded border ${r.activeRoomIndex===se?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-400 border-slate-200"}`,children:se+1},se)),r.unlockedRooms<5&&l.jsx("button",{onClick:m,className:"w-4 h-4 sm:w-5 sm:h-5 text-[9px] sm:text-[10px] bg-slate-100 text-slate-400 rounded border border-slate-200 hover:bg-slate-200",children:"+"})]})]}),l.jsxs("div",{className:"flex-1 flex items-center justify-center bg-[#f0f0f0] rounded-2xl sm:rounded-3xl border border-slate-200/50 shadow-inner overflow-hidden relative min-h-0",children:[l.jsx("div",{className:"transform scale-[0.4] mini:scale-[0.5] sm:scale-[0.6] md:scale-75 lg:scale-95 transition-transform origin-center",children:l.jsx(dM,{activeRoom:a,character:i,previewItem:c,previewPos:U,isPlacementMode:C,selectedPlacementId:D,onGridClick:(re,se)=>{C&&(D==="character"?x(re,se):D==="preview"?Z({x:re,y:se}):D&&f(D,re,se),$(!1),W(null))},onItemClick:re=>{W(re.id),$(!0)},onCharacterClick:()=>{W("character"),$(!0)},onPreviewClick:()=>{W("preview"),$(!0)}})}),C&&l.jsxs("div",{className:"absolute top-2 sm:top-4 left-1/2 -translate-x-1/2 flex gap-1 sm:gap-2 z-[100] w-[90%] justify-center",children:[l.jsx("div",{className:"bg-blue-600 text-white px-3 py-1 rounded-full text-[9px] sm:text-[10px] font-bold shadow-lg animate-bounce whitespace-nowrap",children:D==="preview"?"  ":" "}),l.jsx("button",{onClick:()=>{$(!1),W(null)},className:"bg-white border border-slate-200 px-2 sm:px-3 py-1 rounded-full text-[9px] sm:text-[10px] font-bold shadow-sm hover:bg-slate-50 transition-colors",children:""})]})]})]}),g==="shop"&&l.jsx("div",{className:"h-full overflow-y-auto min-h-0 scrollbar-hide",children:l.jsx(hM,{shopCategory:_,setShopCategory:T,buyItem:d,inventory:s,onPreview:Q,currentTalants:ue})}),g==="inventory"&&l.jsx("div",{className:"h-full overflow-y-auto min-h-0 scrollbar-hide",children:l.jsx(pM,{inventory:s,onUseItem:re=>{const se=re.category,F=[...r.rooms],N=r.activeRoomIndex;se==="wallpaper"?h({rooms:F.map((k,P)=>P===N?{...k,wallpaper:re.id}:k)}):se==="floor"?h({rooms:F.map((k,P)=>P===N?{...k,floor:re.id}:k)}):["character","hair","accessory","outfit"].includes(se)?v({[`${se}Id`]:re.id}):p(re.id,4,4),w("main")}})})]}),l.jsxs("div",{className:"mt-2 p-2 bg-slate-50 rounded border border-slate-100 hidden sm:block shrink-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-700",children:""}),l.jsx("button",{className:"text-[9px] text-blue-500 font-bold hover:underline",children:" +"})]}),l.jsxs("div",{className:"text-[9px] flex gap-2",children:[l.jsx("span",{className:"font-bold text-slate-500",children:""}),l.jsx("span",{className:"text-slate-700 truncate",children:"  ~!!"})]})]})]})]})]}),l.jsxs("div",{className:"flex flex-col ml-[-1px] mt-12 z-20 hidden lg:flex shrink-0",children:[l.jsxs("button",{onClick:()=>e("dashboard"),className:"cy-side-tab !bg-orange-500 border-orange-600 !h-16 flex-col gap-1 shadow-lg active:translate-x-1",children:[l.jsx("span",{className:"text-[10px] leading-none",children:""}),l.jsx("span",{children:""})]}),l.jsx("button",{onClick:()=>S("room"),className:`cy-side-tab ${b==="room"?"active":""}`,children:""}),l.jsx("button",{onClick:()=>S("guestbook"),className:`cy-side-tab ${b==="guestbook"?"active":""}`,children:""}),l.jsx("button",{className:"cy-side-tab",children:""}),l.jsx("button",{className:"cy-side-tab",children:""})]})]}),c&&g==="main"&&l.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[200] w-auto",children:l.jsxs("div",{className:"bg-indigo-600 text-white pl-4 pr-2 py-1.5 rounded-full shadow-2xl flex items-center gap-3 border-2 border-white/20 whitespace-nowrap",children:[l.jsxs("span",{className:"font-bold text-[10px]",children:["PREVIEW: ",c.name]}),l.jsxs("div",{className:"flex gap-1",children:[!s.includes(c.id)&&l.jsx("button",{onClick:()=>d(c),className:"bg-yellow-400 text-indigo-900 px-2 py-0.5 rounded-full font-black text-[10px]",children:""}),l.jsx("button",{onClick:()=>u(null),className:"bg-white/20 text-white px-2 py-0.5 rounded-full font-bold text-[10px]",children:""})]})]})})]})},gM=t=>{const[e,n]=A.useState(!1),[r,i]=A.useState(!1),[s,a]=A.useState(()=>parseFloat(localStorage.getItem("bible_ttsSpeed"))||1),[o,c]=A.useState([]),[u,d]=A.useState(()=>localStorage.getItem("bible_selectedVoiceURI")||""),[h,p]=A.useState(-1),[f,y]=A.useState(!1),v=A.useRef([]),x=A.useRef(0),m=A.useRef(!1),g=A.useRef(null);A.useEffect(()=>{const $=()=>{if(!window.speechSynthesis)return;const W=window.speechSynthesis.getVoices();if(W.length===0)return;console.log("Loaded voices:",W.length);const U=W.filter(Z=>Z.lang==="ko-KR"||Z.lang.startsWith("ko"));c(Z=>Z.length===U.length&&Z.every((Q,ue)=>Q.voiceURI===U[ue].voiceURI)?Z:U)};$();const D=navigator.userAgent;return(D.indexOf("NAVER")>-1||D.indexOf("KAKAOTALK")>-1)&&y(!0),window.speechSynthesis.addEventListener?(window.speechSynthesis.addEventListener("voiceschanged",$),()=>window.speechSynthesis.removeEventListener("voiceschanged",$)):(window.speechSynthesis.onvoiceschanged=$,()=>{window.speechSynthesis.onvoiceschanged=null})},[]),A.useEffect(()=>{if(o.length>0){const $=localStorage.getItem("bible_selectedVoiceURI"),D=$&&o.some(W=>W.voiceURI===$);if(!u)if(D)d($);else{const W=o[0].voiceURI;d(W),localStorage.setItem("bible_selectedVoiceURI",W)}}},[o,u]);const w=$=>{a(D=>{const W=parseFloat((D+$).toFixed(1)),U=Math.max(.6,Math.min(2,W));return localStorage.setItem("bible_ttsSpeed",U),e&&!r&&v.current.length>0&&(S(),setTimeout(()=>{T(t,x.current,U)},50)),U})},b=()=>{r?(i(!1),m.current=!1,_()):(i(!0),m.current=!0,window.speechSynthesis&&window.speechSynthesis.cancel())},S=()=>{window.speechSynthesis&&window.speechSynthesis.cancel(),n(!1),i(!1),m.current=!1,p(-1),v.current=[],x.current=0},_=($=null)=>{if(!window.speechSynthesis)return;if(x.current>=v.current.length){n(!1),p(-1);return}p(x.current);const D=v.current[x.current];if(!D||D.trim().length===0){x.current++,_($);return}const W=new SpeechSynthesisUtterance(D);if(u){const U=o.find(Z=>Z.voiceURI===u);U&&(W.voice=U)}W.lang="ko-KR",W.rate=$!==null?$:s,W.pitch=1,W.onend=()=>{m.current||(x.current++,_($))},W.onerror=U=>{m.current||U.error==="interrupted"||U.error==="canceled"||(console.error("TTS Error:",U),S())},g.current=W,window.speechSynthesis.speak(W)},T=($,D=0,W=null)=>{if(f){alert(`/     .

  '  ' 
  .`);return}if(!window.speechSynthesis){alert("     .");return}const U=W!==null?W:s;(window.speechSynthesis.speaking||window.speechSynthesis.pending)&&window.speechSynthesis.cancel();const Z=$.split(`
`),Q=[];Z.forEach(ue=>{const re=ue.replace(/\[\[VERSE:\d+\]\]/g,"").trim();if(!re)return;let se=re;re.indexOf("#")===0?se=re.replace(/\([^)]*\)/g,"").replace(/[0-9]+/g,N=>t$(N)):se=re,se=se.replace(/^#+\s*/,"");const F=se.split(/([.?!])/g).reduce((N,k)=>[".","?","!"].indexOf(k)!==-1?(N.length>0&&(N[N.length-1]+=k),N):(k.trim().length>0&&N.push(k),N),[]);Q.push(...F)}),Q.length!==0&&(v.current=Q,x.current=D,n(!0),i(!1),m.current=!1,p(D),setTimeout(()=>{_(U)},50))},C=$=>{T(t,$)};return A.useEffect(()=>{t&&S()},[t]),A.useEffect(()=>()=>{window.speechSynthesis&&window.speechSynthesis.cancel()},[]),{isSpeaking:e,isPaused:r,ttsSpeed:s,availableVoices:o,selectedVoiceURI:u,activeChunkIndex:h,handleSpeedChange:w,handleTogglePause:b,handleStop:S,handleSpeak:T,jumpToChunk:C,setSelectedVoiceURI:d}},mM=()=>{const[t,e]=A.useState("login"),[n,r]=A.useState("login"),[i,s]=A.useState(""),[a,o]=A.useState(""),[c,u]=A.useState(""),[d,h]=A.useState(""),[p,f]=A.useState(""),[y,v]=A.useState(""),[x,m]=A.useState(null),{currentUser:g,setCurrentUser:w,authLoading:b}=h$(),[S,_]=A.useState(""),{verseData:T,setVerseData:C,subgroupStats:$,setSubgroupStats:D,communityMembers:W,setCommunityMembers:U,allMembersForRace:Z,setAllMembersForRace:Q,memos:ue,setMemos:re,readHistory:se,setReadHistory:F,announcement:N,setAnnouncement:k,viewingDay:P,setViewingDay:Y,hasReadToday:V,setHasReadToday:te,showConfetti:de,setShowConfetti:ie,levelUpToast:ae,setLevelUpToast:it,bonusToast:zr,setBonusToast:yo,newAchievement:fr,setNewAchievement:_1,handleRead:Uc,saveMemo:pp,changeSubgroup:Bc,handleRestart:fp,changeStartDate:gp,loadAllMembers:S1,loadMemos:I1,loadAnnouncement:k1}=y$(g,w,t),[mp,yp]=A.useState(!1),[wp,vp]=A.useState("all");A.useState("all");const[xp,bp]=A.useState(!1),[_p,Sp]=A.useState(!1),[Ip,kp]=A.useState(!1),[Ep,Np]=A.useState(!1),[Tp,Cp]=A.useState(!1),[jp,Tn]=A.useState(!1),[Xs,wo]=A.useState(!1),[zc,Dp]=A.useState(!1),[Yr,vo]=A.useState(!1),[Ap,Yc]=A.useState(null),[Rp,Xc]=A.useState(new Date),[Pp,xo]=A.useState(new Date),[qc,Op]=A.useState(""),[Bi,bo]=A.useState(null),[Wc,qs]=A.useState(!1),{isSpeaking:E1,isPaused:Un,ttsSpeed:Hc,availableVoices:gr,selectedVoiceURI:Lp,activeChunkIndex:Gc,handleSpeedChange:$p,handleTogglePause:le,handleStop:Ze,handleSpeak:wt,jumpToChunk:Cn,setSelectedVoiceURI:mr}=gM(T.text),[yr,wn]=A.useState([]),[Ft,Kc]=A.useState(null),[KE,N1]=A.useState(null),[zi,T1]=A.useState(""),[QE,JE]=A.useState("all"),[ZE,eN]=A.useState("today"),[tN,nN]=A.useState("name"),[Qc,C1]=A.useState({text:"",links:[{url:"",text:""}],enabled:!1}),[rN,Jc]=A.useState(null),[iN,sN]=A.useState(()=>{const ye=localStorage.getItem("bible_fontSize");return ye?parseInt(ye,10):16}),[aN,j1]=A.useState(null),[oN,lN]=A.useState(["1year_revised"]),[yM,cN]=A.useState(!1);A.useEffect(()=>{const ye=navigator.userAgent;(ye.indexOf("NAVER")>-1||ye.indexOf("KAKAOTALK")>-1)&&cN(!0)},[]),A.useEffect(()=>{b||(g?t==="login"&&(g.communityId&&g.subgroupId?e("dashboard"):(m(g),e("plan_type_select"))):t!=="login"&&e("login"))},[g,b]);const uN=async()=>{if(we)try{await we.collection("settings").doc("announcement").set({...Qc,updatedAt:Ee.firestore.FieldValue.serverTimestamp()}),k(Qc.enabled?Qc:null),alert(" !")}catch(ye){console.error("  :",ye),alert(" ")}},dN=async(ye,Ie)=>{if(confirm(`${Ie}   ?`))try{await we.collection("users").doc(ye).delete(),wn(Se=>Se.filter(ke=>ke.uid!==ye)),alert(".")}catch(Se){console.error(Se),alert(" ")}},hN=async(ye,Ie,Se)=>{if(!zi||zi.length<6){alert("  6  .");return}if(confirm(`${Ie}  ?

 : ${zi}`))try{await we.collection("users").doc(ye).set({password:zi,passwordResetRequired:!0,updatedAt:Ee.firestore.FieldValue.serverTimestamp()},{merge:!0}),alert(` ${Ie}  !

 : ${zi}

    .`),wn(ke=>ke.map(vt=>vt.uid===ye?{...vt,password:zi}:vt)),N1(null),T1("")}catch(ke){console.error(ke),alert("  ")}},pN=ye=>Kc({...ye}),fN=async()=>{if(Ft)try{await we.collection("users").doc(Ft.uid).set({communityId:Ft.communityId,communityName:Ft.communityName,subgroupId:Ft.subgroupId,planId:Ft.planId,currentDay:Ft.currentDay,score:Ft.score,streak:Ft.streak,lastReadDate:Ft.lastReadDate||null,updatedAt:Ee.firestore.FieldValue.serverTimestamp()},{merge:!0}),wn(ye=>ye.map(Ie=>Ie.uid===Ft.uid?Ft:Ie)),Kc(null),alert(".")}catch(ye){console.error(ye),alert(" ")}},gN=async ye=>{if(ye.preventDefault(),_(""),n==="signup"){if(console.log("===   ==="),console.log(":",i),console.log(" :",a.length),console.log(":",d),!i.trim()||!a.trim()||!d){_("  .");return}if(a!==c){_("  .");return}if(a.length<6){_(" 6  .");return}}const Ie=n==="signup"?i:p,Se=n==="signup"?a:y;if(!Ie.trim()||!Se.trim()){_("   .");return}if(Ie==="admin"&&Se==="08283"&&n==="login")try{Pt&&!Pt.currentUser&&await Pt.signInAnonymously();const ke=await we.collection("users").get();wn(ke.docs.map(xt=>jm(xt)));const vt=await we.collection("settings").doc("announcement").get();if(vt.exists){const xt=vt.data();!xt.links&&xt.linkUrl&&xt.linkText&&(xt.links=[{url:xt.linkUrl,text:xt.linkText}]),xt.links||(xt.links=[{url:"",text:""}]),C1(xt)}const Bn=await we.collection("settings").doc("sync").get();Bn.exists&&j1(Bn.data()),qs(!0);return}catch(ke){console.error(ke),_("   ");return}try{const ke=e$(Ie);console.log(" :",ke);let vt=null;try{console.log("  ..."),vt=await Pt.signInWithEmailAndPassword(ke,Se),console.log(" !")}catch(Be){if(console.log(" :",Be.code,Be.message),Be&&Be.code==="auth/user-not-found"||Be&&Be.code==="auth/invalid-login-credentials"||Be&&Be.code==="auth/invalid-credential"){if(n==="login"){_("  .   .");return}console.log("  ...");try{vt=await Pt.createUserWithEmailAndPassword(ke,Se),console.log(" !")}catch(ze){console.error("  :",ze),console.error(" :",ze?ze.code:null),console.error(" :",ze?ze.message:null),ze&&ze.code==="auth/email-already-in-use"?_("   .      ."):ze&&ze.code==="auth/weak-password"?_(" 6  ."):ze&&ze.code==="auth/invalid-email"?_("    ."):_(` : ${ze&&ze.message||"   "}`);return}}else if(Be&&Be.code==="auth/wrong-password"){_(" .");return}else{console.error("    :",Be),_(" (   )");return}}const Bn=vt.user.uid;console.log(" UID:",Bn);const xt=we.collection("users").doc(Bn),Yi=await xt.get();if(!Yi.exists){console.log("  - Firestore   ...");const Be={name:Ie.trim(),password:Se,startDate:new Date().toDateString(),currentDay:1,streak:0,score:0,lastReadDate:null,gender:"male",planId:"1year_revised",communityId:null,communityName:null,subgroupId:null,createdAt:Ee.firestore.FieldValue.serverTimestamp(),updatedAt:Ee.firestore.FieldValue.serverTimestamp()};await xt.set(Be),console.log("Firestore   !"),m({...Be,uid:Bn}),e("plan_type_select");return}console.log("  -   ");const Xi=jm(Yi);w(Xi),te(Xi.lastReadDate===new Date().toDateString()),!Xi.communityId||!Xi.subgroupId?(m(Xi),e("plan_type_select")):e("dashboard")}catch(ke){console.error("  :",ke),_("   ")}},mN=ye=>{bo(ye),e("bible_version_select")},yN=async ye=>{const Ie=`${Bi}_${ye}`;if(x)m(Se=>({...Se,planId:Ie})),e("community_select");else if(g){const Se={...g,planId:Ie};w(Se);try{const ke=Pt.currentUser?Pt.currentUser.uid:null;ke&&await we.collection("users").doc(ke).set({planId:Ie,updatedAt:Ee.firestore.FieldValue.serverTimestamp()},{merge:!0})}catch(ke){console.error(ke)}e("dashboard"),ie(!0),setTimeout(()=>ie(!1),2e3)}},wN=(ye,Ie)=>{m(Se=>({...Se,communityId:ye,communityName:Ie})),e("subgroup_select")},vN=async ye=>{const Ie={...x,subgroupId:ye};w(Ie),m(null),e("dashboard");try{const Se=(Pt.currentUser?Pt.currentUser.uid:null)||Ie.uid;Se&&await we.collection("users").doc(Se).set({...Ie,updatedAt:Ee.firestore.FieldValue.serverTimestamp()},{merge:!0})}catch(Se){console.error(Se),alert("  ")}},xN=nd.replace("notion-proxy","notion-proxy-bulk"),bN=nd.replace("notion-proxy","notion-proxy-page"),_N=async(ye=["1year_revised"])=>{if(!we||!nd)return alert(" "),{success:0,error:0,failedItems:[]};let Ie=0,Se=0;const ke=[];for(const vt of ye){const[Bn,xt]=vt.split("_"),Yi=gi[Bn]?gi[Bn].find(ze=>ze.id===xt):null,Xi=Yi&&Yi.tagName||" ",Be=Yi&&Yi.name||vt;Jc({current:0,total:365,success:0,error:0,currentVersion:Be,currentDay:0,status:"    ..."});try{console.log(` ${Be}   ...`);const ze=await fetch(xN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:Xi,includeContent:!1})});if(!ze.ok)throw new Error(`Bulk API Error: ${ze.status}`);const Zc=await ze.json();if(console.log(` ${Zc.count}   `),!Zc.items||Zc.items.length===0)throw new Error("   ");const A1={};for(let on=1;on<=365;on++){const zn=new Date(2025,0,on),Yn=String(zn.getMonth()+1).padStart(2,"0"),tu=String(zn.getDate()).padStart(2,"0");A1[`${Yn}-${tu}`]=on}const Mp=Zc.items;let eu=0;for(const on of Mp){const zn=A1[on.date];if(!zn){console.log(`   : ${on.date}`),Se++,ke.push({planId:vt,versionName:Be,day:0,date:on.date,error:"  "});continue}try{const Yn=await fetch(bN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageId:on.pageId})});if(!Yn.ok)throw new Error(`Page API Error: ${Yn.status}`);const tu=await Yn.json();if(tu.text){const IN=`${Bn}_${xt}_${zn}`;await we.collection("verses").doc(IN).set({title:on.title,text:tu.text,pageId:on.pageId,day:zn,planId:vt,syncedAt:Ee.firestore.FieldValue.serverTimestamp()}),Ie++,console.log(` Day ${zn} (${on.date})  `)}else throw new Error(" ")}catch(Yn){Se++,ke.push({planId:vt,versionName:Be,day:zn,date:on.date,error:Yn.message}),console.error(` Day ${zn} :`,Yn.message)}eu++,eu%5===0&&Jc({current:eu,total:Mp.length,success:Ie,error:Se,currentVersion:Be,currentDay:zn,status:`   ... (${eu}/${Mp.length})`}),await new Promise(Yn=>setTimeout(Yn,200))}}catch(ze){console.error(` ${Be}  :`,ze),Se+=365,ke.push({planId:vt,versionName:Be,day:0,date:"",error:` : ${ze.message}`})}}return await we.collection("settings").doc("sync").set({lastSyncAt:Ee.firestore.FieldValue.serverTimestamp(),successCount:Ie,errorCount:Se,syncedVersions:ye,failedItems:ke.slice(0,50)}),Jc(null),{success:Ie,error:Se,failedItems:ke}},D1=()=>{Pt&&Pt.signOut(),w(null),qs(!1),m(null),f(""),v(""),_(""),e("login"),te(!1),Kc(null),U([])},SN=()=>{bo(null),m(null),e("plan_type_select")};return b?l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-4 animate-bounce",children:""}),l.jsx("p",{className:"text-slate-500 font-bold",children:"  ..."})]})}):Wc?l.jsx(v$,{handleLogout:D1,downloadCSV:d$,adminViewMode:ZE,setAdminViewMode:eN,adminFilter:QE,setAdminFilter:JE,adminSortBy:tN,setAdminSortBy:nN,allUsers:yr,MOCK_COMMUNITIES:Lr,BIBLE_VERSIONS:gi,announcementInput:Qc,setAnnouncementInput:C1,saveAnnouncement:uN,generateMemosCSV:u$,generateMemosHTML:Vx,editingUser:Ft,setEditingUser:Kc,startEditUser:pN,saveEditUser:fN,changingPassword:KE,setChangingPassword:N1,newPassword:zi,setNewPassword:T1,changePassword:hN,deleteUser:dN,lastSyncInfo:aN,setLastSyncInfo:j1,syncProgress:rN,setSyncProgress:Jc,selectedSyncVersions:oN,setSelectedSyncVersions:lN,syncNotionToFirestore:_N,adminStats:l$(yr),db:we}):t==="login"?l.jsx(w$,{loginTab:n,setLoginTab:r,loginName:p,setLoginName:f,loginPw:y,setLoginPw:v,signupName:i,setSignupName:s,signupBirthdate:d,setSignupBirthdate:h,signupPw:a,setSignupPw:o,signupPwConfirm:c,setSignupPwConfirm:u,errorMsg:S,handleLogin:gN}):["plan_type_select","bible_version_select","community_select","subgroup_select"].includes(t)?l.jsx(x$,{view:t,currentUser:g,tempUser:x,setView:e,selectedPlanType:Bi,handlePlanTypeSelect:mN,handleVersionSelect:yN,handleCommunitySelect:wN,handleSubgroupSelect:vN}):t==="dashboard"&&g?l.jsx(M$,{currentUser:g,communityMembers:W,allMembersForRace:Z,memos:ue,currentMemo:qc,setCurrentMemo:Op,readHistory:se,announcement:N,verseData:T,hasReadToday:V,viewingDay:P,setViewingDay:Y,fontSize:iN,setFontSize:sN,isSpeaking:E1,isPaused:Un,handleTogglePause:le,ttsSpeed:Hc,handleSpeedChange:$p,handleStop:Ze,handleSpeak:wt,availableVoices:gr,selectedVoiceURI:Lp,setSelectedVoiceURI:mr,activeChunkIndex:Gc,jumpToChunk:Cn,handleRead:Uc,saveMemo:pp,handleLogout:D1,handleChangeVersionStart:SN,handleRestart:fp,changeSubgroup:Bc,changeStartDate:gp,dateToOffset:n$,showConfetti:de,levelUpToast:ae,bonusToast:zr,newAchievement:fr,showScoreInfo:xp,setShowScoreInfo:bp,showReadingGuide:_p,setShowReadingGuide:Sp,showMemoList:Ip,setShowMemoList:kp,showAchievements:Ep,setShowAchievements:Np,showCalendar:Tp,setShowCalendar:Cp,showFullRanking:jp,setShowFullRanking:Tn,showDateSettings:Xs,setShowDateSettings:wo,showSubgroupChange:zc,setShowSubgroupChange:Dp,showRestartConfirm:Yr,setShowRestartConfirm:vo,showMonthlyContestInfo:mp,setShowMonthlyContestInfo:yp,calendarDate:Rp,setCalendarDate:Xc,dateSettingsDate:Pp,setDateSettingsDate:xo,rankingCommunityFilter:wp,setRankingCommunityFilter:vp,selectedSubgroupDetail:Ap,setSelectedSubgroupDetail:Yc,getSubgroupRanking:()=>a$($),getProgressRanking:()=>o$($),getSubgroupDisplay:c$,generateMemosHTML:Vx,getWeeklyMVP:()=>s$(W),setView:e}):t==="mini_room"&&g?l.jsx(fM,{currentUser:g,setCurrentUser:w,setView:e}):null};Vf.createRoot(document.getElementById("root")).render(l.jsx(Ff.StrictMode,{children:l.jsx(mM,{})}));
